/*! For license information please see main.06628730.js.LICENSE.txt */
(()=>{var e={14:e=>{e.exports=function(){return!1}},438:(e,t,r)=>{var n=r(2622);e.exports=function(e){return n(this,e).get(e)}},579:(e,t,r)=>{"use strict";e.exports=r(1153)},705:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},793:e=>{e.exports=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}},1143:(e,t,r)=>{var n=r(3028)(Object.keys,Object);e.exports=n},1153:(e,t,r)=>{"use strict";var n=r(5043),s=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var n,a={},c=null,d=null;for(n in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)o.call(t,n)&&!l.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===a[n]&&(a[n]=t[n]);return{$$typeof:s,type:e,key:c,ref:d,props:a,_owner:i.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},1268:(e,t,r)=>{var n=r(5428),s=r(7574),a=r(6832),o=a&&a.isTypedArray,i=o?s(o):n;e.exports=i},1340:(e,t,r)=>{var n=r(3211);e.exports=function(e,t){for(var r=e.length;r--;)if(n(e[r][0],t))return r;return-1}},1497:(e,t,r)=>{"use strict";var n=r(3218);function s(){}function a(){}a.resetWarningCache=s,e.exports=function(){function e(e,t,r,s,a,o){if(o!==n){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:s};return r.PropTypes=r,r}},1629:(e,t,r)=>{var n=r(6913),s=r(6686);e.exports=function(e){if(!s(e))return!1;var t=n(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},1714:(e,t,r)=>{var n=r(1340);e.exports=function(e,t){var r=this.__data__,s=n(r,e);return s<0?(++this.size,r.push([e,t])):r[s][1]=t,this}},1946:(e,t,r)=>{var n=r(1340);e.exports=function(e){return n(this.__data__,e)>-1}},2070:(e,t,r)=>{var n=r(7937)(r(6552),"Set");e.exports=n},2074:e=>{e.exports=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}},2154:(e,t,r)=>{var n=r(5575),s=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(n){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return s.call(t,e)?t[e]:void 0}},2330:(e,t,r)=>{"use strict";var n=r(5043);var s="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},a=n.useState,o=n.useEffect,i=n.useLayoutEffect,l=n.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!s(e,r)}catch(n){return!0}}var d="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),n=a({inst:{value:r,getSnapshot:t}}),s=n[0].inst,d=n[1];return i((function(){s.value=r,s.getSnapshot=t,c(s)&&d({inst:s})}),[e,r,t]),o((function(){return c(s)&&d({inst:s}),e((function(){c(s)&&d({inst:s})}))}),[e]),l(r),r};t.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:d},2587:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}},2622:(e,t,r)=>{var n=r(705);e.exports=function(e,t){var r=e.__data__;return n(t)?r["string"==typeof t?"string":"hash"]:r.map}},2662:(e,t,r)=>{var n=r(5575);e.exports=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=n&&void 0===t?"__lodash_hash_undefined__":t,this}},2730:(e,t,r)=>{"use strict";var n=r(5043),s=r(8853);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,i={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(i[e]=t,e=0;e<t.length;e++)o.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},f={};function p(e,t,r,n,s,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new p(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new p(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new p(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new p(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new p(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new p(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new p(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new p(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new p(e,5,!1,e.toLowerCase(),null,!1,!1)}));var x=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function y(e,t,r,n){var s=g.hasOwnProperty(t)?g[t]:null;(null!==s?0!==s.type:n||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,r,n){if(null===t||"undefined"===typeof t||function(e,t,r,n){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,s,n)&&(r=null),n||null===s?function(e){return!!u.call(f,e)||!u.call(m,e)&&(h.test(e)?f[e]=!0:(m[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=null===r?3!==s.type&&"":r:(t=s.attributeName,n=s.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(s=s.type)||4===s&&!0===r?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(x,b);g[t]=new p(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(x,b);g[t]=new p(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(x,b);g[t]=new p(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new p(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new p(e,1,!1,e.toLowerCase(),null,!0,!0)}));var v=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),j=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),_=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),z=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var I=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=I&&e[I]||e["@@iterator"])?e:null}var M,q=Object.assign;function R(e){if(void 0===M)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var D=!1;function F(e,t){if(!e||D)return"";D=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&"string"===typeof c.stack){for(var s=c.stack.split("\n"),a=n.stack.split("\n"),o=s.length-1,i=a.length-1;1<=o&&0<=i&&s[o]!==a[i];)i--;for(;1<=o&&0<=i;o--,i--)if(s[o]!==a[i]){if(1!==o||1!==i)do{if(o--,0>--i||s[o]!==a[i]){var l="\n"+s[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=i);break}}}finally{D=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?R(e):""}function B(e){switch(e.tag){case 5:return R(e.type);case 16:return R("Lazy");case 13:return R("Suspense");case 19:return R("SuspenseList");case 0:case 2:case 15:return e=F(e.type,!1);case 11:return e=F(e.type.render,!1);case 1:return e=F(e.type,!0);default:return""}}function $(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case N:return"Fragment";case j:return"Portal";case S:return"Profiler";case k:return"StrictMode";case A:return"Suspense";case O:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case _:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case E:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case T:return null!==(t=e.displayName||null)?t:$(e.type)||"Memo";case z:t=e._payload,e=e._init;try{return $(e(t))}catch(r){}}return null}function U(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Q(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var s=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){n=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function V(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=W(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function K(e,t){var r=t.checked;return q({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function Y(e,t){var r=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;r=H(null!=t.value?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Z(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function J(e,t){Z(e,t);var r=H(t.value),n=t.type;if(null!=r)"number"===n?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,r):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function X(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function ee(e,t,r){"number"===t&&G(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var te=Array.isArray;function re(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+H(r),t=null,s=0;s<e.length;s++){if(e[s].value===r)return e[s].selected=!0,void(n&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function ne(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return q({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(a(92));if(te(r)){if(1<r.length)throw Error(a(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:H(r)}}function ae(e,t){var r=H(t.value),n=H(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=n&&(e.defaultValue=""+n)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ie(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ie(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,r,n){MSApp.execUnsafeLocalFunction((function(){return de(e,t)}))}:de);function he(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var me={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function pe(e,t,r){return null==t||"boolean"===typeof t||""===t?"":r||"number"!==typeof t||0===t||me.hasOwnProperty(e)&&me[e]?(""+t).trim():t+"px"}function ge(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var n=0===r.indexOf("--"),s=pe(r,t[r],n);"float"===r&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}Object.keys(me).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),me[t]=me[e]}))}));var xe=q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function be(e,t){if(t){if(xe[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ye(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ve=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var je=null,Ne=null,ke=null;function Se(e){if(e=ys(e)){if("function"!==typeof je)throw Error(a(280));var t=e.stateNode;t&&(t=ws(t),je(e.stateNode,e.type,t))}}function Ce(e){Ne?ke?ke.push(e):ke=[e]:Ne=e}function _e(){if(Ne){var e=Ne,t=ke;if(ke=Ne=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ee(e,t){return e(t)}function Ae(){}var Oe=!1;function Te(e,t,r){if(Oe)return e(t,r);Oe=!0;try{return Ee(e,t,r)}finally{Oe=!1,(null!==Ne||null!==ke)&&(Ae(),_e())}}function ze(e,t){var r=e.stateNode;if(null===r)return null;var n=ws(r);if(null===n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(r&&"function"!==typeof r)throw Error(a(231,t,typeof r));return r}var Pe=!1;if(d)try{var Ie={};Object.defineProperty(Ie,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Ie,Ie),window.removeEventListener("test",Ie,Ie)}catch(de){Pe=!1}function Le(e,t,r,n,s,a,o,i,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(d){this.onError(d)}}var Me=!1,qe=null,Re=!1,De=null,Fe={onError:function(e){Me=!0,qe=e}};function Be(e,t,r,n,s,a,o,i,l){Me=!1,qe=null,Le.apply(Fe,arguments)}function $e(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function Ue(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if($e(e)!==e)throw Error(a(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=$e(e)))throw Error(a(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(null===s)break;var o=s.alternate;if(null===o){if(null!==(n=s.return)){r=n;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===r)return He(s),e;if(o===n)return He(s),t;o=o.sibling}throw Error(a(188))}if(r.return!==n.return)r=s,n=o;else{for(var i=!1,l=s.child;l;){if(l===r){i=!0,r=s,n=o;break}if(l===n){i=!0,n=s,r=o;break}l=l.sibling}if(!i){for(l=o.child;l;){if(l===r){i=!0,r=o,n=s;break}if(l===n){i=!0,n=o,r=s;break}l=l.sibling}if(!i)throw Error(a(189))}}if(r.alternate!==n)throw Error(a(190))}if(3!==r.tag)throw Error(a(188));return r.stateNode.current===r?e:t}(e))?Qe(e):null}function Qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Qe(e);if(null!==t)return t;e=e.sibling}return null}var Ve=s.unstable_scheduleCallback,Ge=s.unstable_cancelCallback,Ke=s.unstable_shouldYield,Ye=s.unstable_requestPaint,Ze=s.unstable_now,Je=s.unstable_getCurrentPriorityLevel,Xe=s.unstable_ImmediatePriority,et=s.unstable_UserBlockingPriority,tt=s.unstable_NormalPriority,rt=s.unstable_LowPriority,nt=s.unstable_IdlePriority,st=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(it(e)/lt|0)|0},it=Math.log,lt=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var r=e.pendingLanes;if(0===r)return 0;var n=0,s=e.suspendedLanes,a=e.pingedLanes,o=268435455&r;if(0!==o){var i=o&~s;0!==i?n=ut(i):0!==(a&=o)&&(n=ut(a))}else 0!==(o=r&~s)?n=ut(o):0!==a&&(n=ut(a));if(0===n)return 0;if(0!==t&&t!==n&&0===(t&s)&&((s=n&-n)>=(a=t&-t)||16===s&&0!==(4194240&a)))return t;if(0!==(4&n)&&(n|=16&r),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)s=1<<(r=31-ot(t)),n|=e[r],t&=~s;return n}function mt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function xt(e,t,r){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=r}function bt(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-ot(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var yt=0;function vt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,jt,Nt,kt,St,Ct=!1,_t=[],Et=null,At=null,Ot=null,Tt=new Map,zt=new Map,Pt=[],It="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Et=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Ot=null;break;case"pointerover":case"pointerout":Tt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":zt.delete(t.pointerId)}}function Mt(e,t,r,n,s,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[s]},null!==t&&(null!==(t=ys(t))&&jt(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function qt(e){var t=bs(e.target);if(null!==t){var r=$e(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=Ue(r)))return e.blockedOn=t,void St(e.priority,(function(){Nt(r)}))}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function Rt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=Kt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=ys(r))&&jt(t),e.blockedOn=r,!1;var n=new(r=e.nativeEvent).constructor(r.type,r);ve=n,r.target.dispatchEvent(n),ve=null,t.shift()}return!0}function Dt(e,t,r){Rt(e)&&r.delete(t)}function Ft(){Ct=!1,null!==Et&&Rt(Et)&&(Et=null),null!==At&&Rt(At)&&(At=null),null!==Ot&&Rt(Ot)&&(Ot=null),Tt.forEach(Dt),zt.forEach(Dt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Ft)))}function $t(e){function t(t){return Bt(t,e)}if(0<_t.length){Bt(_t[0],e);for(var r=1;r<_t.length;r++){var n=_t[r];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==Et&&Bt(Et,e),null!==At&&Bt(At,e),null!==Ot&&Bt(Ot,e),Tt.forEach(t),zt.forEach(t),r=0;r<Pt.length;r++)(n=Pt[r]).blockedOn===e&&(n.blockedOn=null);for(;0<Pt.length&&null===(r=Pt[0]).blockedOn;)qt(r),null===r.blockedOn&&Pt.shift()}var Ut=v.ReactCurrentBatchConfig,Ht=!0;function Wt(e,t,r,n){var s=yt,a=Ut.transition;Ut.transition=null;try{yt=1,Vt(e,t,r,n)}finally{yt=s,Ut.transition=a}}function Qt(e,t,r,n){var s=yt,a=Ut.transition;Ut.transition=null;try{yt=4,Vt(e,t,r,n)}finally{yt=s,Ut.transition=a}}function Vt(e,t,r,n){if(Ht){var s=Kt(e,t,r,n);if(null===s)Hn(e,t,n,Gt,r),Lt(e,n);else if(function(e,t,r,n,s){switch(t){case"focusin":return Et=Mt(Et,e,t,r,n,s),!0;case"dragenter":return At=Mt(At,e,t,r,n,s),!0;case"mouseover":return Ot=Mt(Ot,e,t,r,n,s),!0;case"pointerover":var a=s.pointerId;return Tt.set(a,Mt(Tt.get(a)||null,e,t,r,n,s)),!0;case"gotpointercapture":return a=s.pointerId,zt.set(a,Mt(zt.get(a)||null,e,t,r,n,s)),!0}return!1}(s,e,t,r,n))n.stopPropagation();else if(Lt(e,n),4&t&&-1<It.indexOf(e)){for(;null!==s;){var a=ys(s);if(null!==a&&wt(a),null===(a=Kt(e,t,r,n))&&Hn(e,t,n,Gt,r),a===s)break;s=a}null!==s&&n.stopPropagation()}else Hn(e,t,n,null,r)}}var Gt=null;function Kt(e,t,r,n){if(Gt=null,null!==(e=bs(e=we(n))))if(null===(t=$e(e)))e=null;else if(13===(r=t.tag)){if(null!==(e=Ue(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Xe:return 1;case et:return 4;case tt:case rt:return 16;case nt:return 536870912;default:return 16}default:return 16}}var Zt=null,Jt=null,Xt=null;function er(){if(Xt)return Xt;var e,t,r=Jt,n=r.length,s="value"in Zt?Zt.value:Zt.textContent,a=s.length;for(e=0;e<n&&r[e]===s[e];e++);var o=n-e;for(t=1;t<=o&&r[n-t]===s[a-t];t++);return Xt=s.slice(e,1<t?1-t:void 0)}function tr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rr(){return!0}function nr(){return!1}function sr(e){function t(t,r,n,s,a){for(var o in this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(s):s[o]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?rr:nr,this.isPropagationStopped=nr,this}return q(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),t}var ar,or,ir,lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cr=sr(lr),dr=q({},lr,{view:0,detail:0}),ur=sr(dr),hr=q({},dr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ir&&(ir&&"mousemove"===e.type?(ar=e.screenX-ir.screenX,or=e.screenY-ir.screenY):or=ar=0,ir=e),ar)},movementY:function(e){return"movementY"in e?e.movementY:or}}),mr=sr(hr),fr=sr(q({},hr,{dataTransfer:0})),pr=sr(q({},dr,{relatedTarget:0})),gr=sr(q({},lr,{animationName:0,elapsedTime:0,pseudoElement:0})),xr=q({},lr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),br=sr(xr),yr=sr(q({},lr,{data:0})),vr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=jr[e])&&!!t[e]}function kr(){return Nr}var Sr=q({},dr,{key:function(e){if(e.key){var t=vr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kr,charCode:function(e){return"keypress"===e.type?tr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cr=sr(Sr),_r=sr(q({},hr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Er=sr(q({},dr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kr})),Ar=sr(q({},lr,{propertyName:0,elapsedTime:0,pseudoElement:0})),Or=q({},hr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Tr=sr(Or),zr=[9,13,27,32],Pr=d&&"CompositionEvent"in window,Ir=null;d&&"documentMode"in document&&(Ir=document.documentMode);var Lr=d&&"TextEvent"in window&&!Ir,Mr=d&&(!Pr||Ir&&8<Ir&&11>=Ir),qr=String.fromCharCode(32),Rr=!1;function Dr(e,t){switch(e){case"keyup":return-1!==zr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fr(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Br=!1;var $r={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ur(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!$r[e.type]:"textarea"===t}function Hr(e,t,r,n){Ce(n),0<(t=Qn(t,"onChange")).length&&(r=new cr("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Wr=null,Qr=null;function Vr(e){Rn(e,0)}function Gr(e){if(V(vs(e)))return e}function Kr(e,t){if("change"===e)return t}var Yr=!1;if(d){var Zr;if(d){var Jr="oninput"in document;if(!Jr){var Xr=document.createElement("div");Xr.setAttribute("oninput","return;"),Jr="function"===typeof Xr.oninput}Zr=Jr}else Zr=!1;Yr=Zr&&(!document.documentMode||9<document.documentMode)}function en(){Wr&&(Wr.detachEvent("onpropertychange",tn),Qr=Wr=null)}function tn(e){if("value"===e.propertyName&&Gr(Qr)){var t=[];Hr(t,Qr,e,we(e)),Te(Vr,t)}}function rn(e,t,r){"focusin"===e?(en(),Qr=r,(Wr=t).attachEvent("onpropertychange",tn)):"focusout"===e&&en()}function nn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Gr(Qr)}function sn(e,t){if("click"===e)return Gr(t)}function an(e,t){if("input"===e||"change"===e)return Gr(t)}var on="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ln(e,t){if(on(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!u.call(t,s)||!on(e[s],t[s]))return!1}return!0}function cn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dn(e,t){var r,n=cn(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=cn(n)}}function un(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?un(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hn(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var r="string"===typeof t.contentWindow.location.href}catch(n){r=!1}if(!r)break;t=G((e=t.contentWindow).document)}return t}function mn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fn(e){var t=hn(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&un(r.ownerDocument.documentElement,r)){if(null!==n&&mn(r))if(t=n.start,void 0===(e=n.end)&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if((e=(t=r.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var s=r.textContent.length,a=Math.min(n.start,s);n=void 0===n.end?a:Math.min(n.end,s),!e.extend&&a>n&&(s=n,n=a,a=s),s=dn(r,a);var o=dn(r,n);s&&o&&(1!==e.rangeCount||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(s.node,s.offset),e.removeAllRanges(),a>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=r;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof r.focus&&r.focus(),r=0;r<t.length;r++)(e=t[r]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pn=d&&"documentMode"in document&&11>=document.documentMode,gn=null,xn=null,bn=null,yn=!1;function vn(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;yn||null==gn||gn!==G(n)||("selectionStart"in(n=gn)&&mn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},bn&&ln(bn,n)||(bn=n,0<(n=Qn(xn,"onSelect")).length&&(t=new cr("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=gn)))}function wn(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var jn={animationend:wn("Animation","AnimationEnd"),animationiteration:wn("Animation","AnimationIteration"),animationstart:wn("Animation","AnimationStart"),transitionend:wn("Transition","TransitionEnd")},Nn={},kn={};function Sn(e){if(Nn[e])return Nn[e];if(!jn[e])return e;var t,r=jn[e];for(t in r)if(r.hasOwnProperty(t)&&t in kn)return Nn[e]=r[t];return e}d&&(kn=document.createElement("div").style,"AnimationEvent"in window||(delete jn.animationend.animation,delete jn.animationiteration.animation,delete jn.animationstart.animation),"TransitionEvent"in window||delete jn.transitionend.transition);var Cn=Sn("animationend"),_n=Sn("animationiteration"),En=Sn("animationstart"),An=Sn("transitionend"),On=new Map,Tn="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zn(e,t){On.set(e,t),l(t,[e])}for(var Pn=0;Pn<Tn.length;Pn++){var In=Tn[Pn];zn(In.toLowerCase(),"on"+(In[0].toUpperCase()+In.slice(1)))}zn(Cn,"onAnimationEnd"),zn(_n,"onAnimationIteration"),zn(En,"onAnimationStart"),zn("dblclick","onDoubleClick"),zn("focusin","onFocus"),zn("focusout","onBlur"),zn(An,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ln="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mn=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ln));function qn(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,n,s,o,i,l,c){if(Be.apply(this,arguments),Me){if(!Me)throw Error(a(198));var d=qe;Me=!1,qe=null,Re||(Re=!0,De=d)}}(n,t,void 0,e),e.currentTarget=null}function Rn(e,t){t=0!==(4&t);for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var o=n.length-1;0<=o;o--){var i=n[o],l=i.instance,c=i.currentTarget;if(i=i.listener,l!==a&&s.isPropagationStopped())break e;qn(s,i,c),a=l}else for(o=0;o<n.length;o++){if(l=(i=n[o]).instance,c=i.currentTarget,i=i.listener,l!==a&&s.isPropagationStopped())break e;qn(s,i,c),a=l}}}if(Re)throw e=De,Re=!1,De=null,e}function Dn(e,t){var r=t[ps];void 0===r&&(r=t[ps]=new Set);var n=e+"__bubble";r.has(n)||(Un(t,e,2,!1),r.add(n))}function Fn(e,t,r){var n=0;t&&(n|=4),Un(r,e,n,t)}var Bn="_reactListening"+Math.random().toString(36).slice(2);function $n(e){if(!e[Bn]){e[Bn]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mn.has(t)||Fn(t,!1,e),Fn(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Bn]||(t[Bn]=!0,Fn("selectionchange",!1,t))}}function Un(e,t,r,n){switch(Yt(t)){case 1:var s=Wt;break;case 4:s=Qt;break;default:s=Vt}r=s.bind(null,t,r,e),s=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),n?void 0!==s?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):void 0!==s?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function Hn(e,t,r,n,s){var a=n;if(0===(1&t)&&0===(2&t)&&null!==n)e:for(;;){if(null===n)return;var o=n.tag;if(3===o||4===o){var i=n.stateNode.containerInfo;if(i===s||8===i.nodeType&&i.parentNode===s)break;if(4===o)for(o=n.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===s||8===l.nodeType&&l.parentNode===s))return;o=o.return}for(;null!==i;){if(null===(o=bs(i)))return;if(5===(l=o.tag)||6===l){n=a=o;continue e}i=i.parentNode}}n=n.return}Te((function(){var n=a,s=we(r),o=[];e:{var i=On.get(e);if(void 0!==i){var l=cr,c=e;switch(e){case"keypress":if(0===tr(r))break e;case"keydown":case"keyup":l=Cr;break;case"focusin":c="focus",l=pr;break;case"focusout":c="blur",l=pr;break;case"beforeblur":case"afterblur":l=pr;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=mr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=fr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Er;break;case Cn:case _n:case En:l=gr;break;case An:l=Ar;break;case"scroll":l=ur;break;case"wheel":l=Tr;break;case"copy":case"cut":case"paste":l=br;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=_r}var d=0!==(4&t),u=!d&&"scroll"===e,h=d?null!==i?i+"Capture":null:i;d=[];for(var m,f=n;null!==f;){var p=(m=f).stateNode;if(5===m.tag&&null!==p&&(m=p,null!==h&&(null!=(p=ze(f,h))&&d.push(Wn(f,p,m)))),u)break;f=f.return}0<d.length&&(i=new l(i,c,null,r,s),o.push({event:i,listeners:d}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(i="mouseover"===e||"pointerover"===e)||r===ve||!(c=r.relatedTarget||r.fromElement)||!bs(c)&&!c[fs])&&(l||i)&&(i=s.window===s?s:(i=s.ownerDocument)?i.defaultView||i.parentWindow:window,l?(l=n,null!==(c=(c=r.relatedTarget||r.toElement)?bs(c):null)&&(c!==(u=$e(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=n),l!==c)){if(d=mr,p="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(d=_r,p="onPointerLeave",h="onPointerEnter",f="pointer"),u=null==l?i:vs(l),m=null==c?i:vs(c),(i=new d(p,f+"leave",l,r,s)).target=u,i.relatedTarget=m,p=null,bs(s)===n&&((d=new d(h,f+"enter",c,r,s)).target=m,d.relatedTarget=u,p=d),u=p,l&&c)e:{for(h=c,f=0,m=d=l;m;m=Vn(m))f++;for(m=0,p=h;p;p=Vn(p))m++;for(;0<f-m;)d=Vn(d),f--;for(;0<m-f;)h=Vn(h),m--;for(;f--;){if(d===h||null!==h&&d===h.alternate)break e;d=Vn(d),h=Vn(h)}d=null}else d=null;null!==l&&Gn(o,i,l,d,!1),null!==c&&null!==u&&Gn(o,u,c,d,!0)}if("select"===(l=(i=n?vs(n):window).nodeName&&i.nodeName.toLowerCase())||"input"===l&&"file"===i.type)var g=Kr;else if(Ur(i))if(Yr)g=an;else{g=nn;var x=rn}else(l=i.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(g=sn);switch(g&&(g=g(e,n))?Hr(o,g,r,s):(x&&x(e,i,n),"focusout"===e&&(x=i._wrapperState)&&x.controlled&&"number"===i.type&&ee(i,"number",i.value)),x=n?vs(n):window,e){case"focusin":(Ur(x)||"true"===x.contentEditable)&&(gn=x,xn=n,bn=null);break;case"focusout":bn=xn=gn=null;break;case"mousedown":yn=!0;break;case"contextmenu":case"mouseup":case"dragend":yn=!1,vn(o,r,s);break;case"selectionchange":if(pn)break;case"keydown":case"keyup":vn(o,r,s)}var b;if(Pr)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Br?Dr(e,r)&&(y="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(y="onCompositionStart");y&&(Mr&&"ko"!==r.locale&&(Br||"onCompositionStart"!==y?"onCompositionEnd"===y&&Br&&(b=er()):(Jt="value"in(Zt=s)?Zt.value:Zt.textContent,Br=!0)),0<(x=Qn(n,y)).length&&(y=new yr(y,e,null,r,s),o.push({event:y,listeners:x}),b?y.data=b:null!==(b=Fr(r))&&(y.data=b))),(b=Lr?function(e,t){switch(e){case"compositionend":return Fr(t);case"keypress":return 32!==t.which?null:(Rr=!0,qr);case"textInput":return(e=t.data)===qr&&Rr?null:e;default:return null}}(e,r):function(e,t){if(Br)return"compositionend"===e||!Pr&&Dr(e,t)?(e=er(),Xt=Jt=Zt=null,Br=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mr&&"ko"!==t.locale?null:t.data}}(e,r))&&(0<(n=Qn(n,"onBeforeInput")).length&&(s=new yr("onBeforeInput","beforeinput",null,r,s),o.push({event:s,listeners:n}),s.data=b))}Rn(o,t)}))}function Wn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Qn(e,t){for(var r=t+"Capture",n=[];null!==e;){var s=e,a=s.stateNode;5===s.tag&&null!==a&&(s=a,null!=(a=ze(e,r))&&n.unshift(Wn(e,a,s)),null!=(a=ze(e,t))&&n.push(Wn(e,a,s))),e=e.return}return n}function Vn(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gn(e,t,r,n,s){for(var a=t._reactName,o=[];null!==r&&r!==n;){var i=r,l=i.alternate,c=i.stateNode;if(null!==l&&l===n)break;5===i.tag&&null!==c&&(i=c,s?null!=(l=ze(r,a))&&o.unshift(Wn(r,l,i)):s||null!=(l=ze(r,a))&&o.push(Wn(r,l,i))),r=r.return}0!==o.length&&e.push({event:t,listeners:o})}var Kn=/\r\n?/g,Yn=/\u0000|\uFFFD/g;function Zn(e){return("string"===typeof e?e:""+e).replace(Kn,"\n").replace(Yn,"")}function Jn(e,t,r){if(t=Zn(t),Zn(e)!==t&&r)throw Error(a(425))}function Xn(){}var es=null,ts=null;function rs(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ns="function"===typeof setTimeout?setTimeout:void 0,ss="function"===typeof clearTimeout?clearTimeout:void 0,as="function"===typeof Promise?Promise:void 0,os="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof as?function(e){return as.resolve(null).then(e).catch(is)}:ns;function is(e){setTimeout((function(){throw e}))}function ls(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&8===s.nodeType)if("/$"===(r=s.data)){if(0===n)return e.removeChild(s),void $t(t);n--}else"$"!==r&&"$?"!==r&&"$!"!==r||n++;r=s}while(r);$t(t)}function cs(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ds(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var us=Math.random().toString(36).slice(2),hs="__reactFiber$"+us,ms="__reactProps$"+us,fs="__reactContainer$"+us,ps="__reactEvents$"+us,gs="__reactListeners$"+us,xs="__reactHandles$"+us;function bs(e){var t=e[hs];if(t)return t;for(var r=e.parentNode;r;){if(t=r[fs]||r[hs]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=ds(e);null!==e;){if(r=e[hs])return r;e=ds(e)}return t}r=(e=r).parentNode}return null}function ys(e){return!(e=e[hs]||e[fs])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function vs(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function ws(e){return e[ms]||null}var js=[],Ns=-1;function ks(e){return{current:e}}function Ss(e){0>Ns||(e.current=js[Ns],js[Ns]=null,Ns--)}function Cs(e,t){Ns++,js[Ns]=e.current,e.current=t}var _s={},Es=ks(_s),As=ks(!1),Os=_s;function Ts(e,t){var r=e.type.contextTypes;if(!r)return _s;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s,a={};for(s in r)a[s]=t[s];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function zs(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ps(){Ss(As),Ss(Es)}function Is(e,t,r){if(Es.current!==_s)throw Error(a(168));Cs(Es,t),Cs(As,r)}function Ls(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,"function"!==typeof n.getChildContext)return r;for(var s in n=n.getChildContext())if(!(s in t))throw Error(a(108,U(e)||"Unknown",s));return q({},r,n)}function Ms(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||_s,Os=Es.current,Cs(Es,e),Cs(As,As.current),!0}function qs(e,t,r){var n=e.stateNode;if(!n)throw Error(a(169));r?(e=Ls(e,t,Os),n.__reactInternalMemoizedMergedChildContext=e,Ss(As),Ss(Es),Cs(Es,e)):Ss(As),Cs(As,r)}var Rs=null,Ds=!1,Fs=!1;function Bs(e){null===Rs?Rs=[e]:Rs.push(e)}function $s(){if(!Fs&&null!==Rs){Fs=!0;var e=0,t=yt;try{var r=Rs;for(yt=1;e<r.length;e++){var n=r[e];do{n=n(!0)}while(null!==n)}Rs=null,Ds=!1}catch(s){throw null!==Rs&&(Rs=Rs.slice(e+1)),Ve(Xe,$s),s}finally{yt=t,Fs=!1}}return null}var Us=[],Hs=0,Ws=null,Qs=0,Vs=[],Gs=0,Ks=null,Ys=1,Zs="";function Js(e,t){Us[Hs++]=Qs,Us[Hs++]=Ws,Ws=e,Qs=t}function Xs(e,t,r){Vs[Gs++]=Ys,Vs[Gs++]=Zs,Vs[Gs++]=Ks,Ks=e;var n=Ys;e=Zs;var s=32-ot(n)-1;n&=~(1<<s),r+=1;var a=32-ot(t)+s;if(30<a){var o=s-s%5;a=(n&(1<<o)-1).toString(32),n>>=o,s-=o,Ys=1<<32-ot(t)+s|r<<s|n,Zs=a+e}else Ys=1<<a|r<<s|n,Zs=e}function ea(e){null!==e.return&&(Js(e,1),Xs(e,1,0))}function ta(e){for(;e===Ws;)Ws=Us[--Hs],Us[Hs]=null,Qs=Us[--Hs],Us[Hs]=null;for(;e===Ks;)Ks=Vs[--Gs],Vs[Gs]=null,Zs=Vs[--Gs],Vs[Gs]=null,Ys=Vs[--Gs],Vs[Gs]=null}var ra=null,na=null,sa=!1,aa=null;function oa(e,t){var r=Tc(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,null===(t=e.deletions)?(e.deletions=[r],e.flags|=16):t.push(r)}function ia(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ra=e,na=cs(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ra=e,na=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(r=null!==Ks?{id:Ys,overflow:Zs}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},(r=Tc(18,null,null,0)).stateNode=t,r.return=e,e.child=r,ra=e,na=null,!0);default:return!1}}function la(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(sa){var t=na;if(t){var r=t;if(!ia(e,t)){if(la(e))throw Error(a(418));t=cs(r.nextSibling);var n=ra;t&&ia(e,t)?oa(n,r):(e.flags=-4097&e.flags|2,sa=!1,ra=e)}}else{if(la(e))throw Error(a(418));e.flags=-4097&e.flags|2,sa=!1,ra=e}}}function da(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ra=e}function ua(e){if(e!==ra)return!1;if(!sa)return da(e),sa=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!rs(e.type,e.memoizedProps)),t&&(t=na)){if(la(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=cs(t.nextSibling)}if(da(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){na=cs(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}na=null}}else na=ra?cs(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=na;e;)e=cs(e.nextSibling)}function ma(){na=ra=null,sa=!1}function fa(e){null===aa?aa=[e]:aa.push(e)}var pa=v.ReactCurrentBatchConfig;function ga(e,t,r){if(null!==(e=r.ref)&&"function"!==typeof e&&"object"!==typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(a(309));var n=r.stateNode}if(!n)throw Error(a(147,e));var s=n,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=s.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!r._owner)throw Error(a(290,e))}return e}function xa(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ba(e){return(0,e._init)(e._payload)}function ya(e){function t(t,r){if(e){var n=t.deletions;null===n?(t.deletions=[r],t.flags|=16):n.push(r)}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=Pc(e,t)).index=0,e.sibling=null,e}function o(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.flags|=2,r):n:(t.flags|=2,r):(t.flags|=1048576,r)}function i(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,r,n){return null===t||6!==t.tag?((t=qc(r,e.mode,n)).return=e,t):((t=s(t,r)).return=e,t)}function c(e,t,r,n){var a=r.type;return a===N?u(e,t,r.props.children,n,r.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===z&&ba(a)===t.type)?((n=s(t,r.props)).ref=ga(e,t,r),n.return=e,n):((n=Ic(r.type,r.key,r.props,null,e.mode,n)).ref=ga(e,t,r),n.return=e,n)}function d(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Rc(r,e.mode,n)).return=e,t):((t=s(t,r.children||[])).return=e,t)}function u(e,t,r,n,a){return null===t||7!==t.tag?((t=Lc(r,e.mode,n,a)).return=e,t):((t=s(t,r)).return=e,t)}function h(e,t,r){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=qc(""+t,e.mode,r)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(r=Ic(t.type,t.key,t.props,null,e.mode,r)).ref=ga(e,null,t),r.return=e,r;case j:return(t=Rc(t,e.mode,r)).return=e,t;case z:return h(e,(0,t._init)(t._payload),r)}if(te(t)||L(t))return(t=Lc(t,e.mode,r,null)).return=e,t;xa(e,t)}return null}function m(e,t,r,n){var s=null!==t?t.key:null;if("string"===typeof r&&""!==r||"number"===typeof r)return null!==s?null:l(e,t,""+r,n);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return r.key===s?c(e,t,r,n):null;case j:return r.key===s?d(e,t,r,n):null;case z:return m(e,t,(s=r._init)(r._payload),n)}if(te(r)||L(r))return null!==s?null:u(e,t,r,n,null);xa(e,r)}return null}function f(e,t,r,n,s){if("string"===typeof n&&""!==n||"number"===typeof n)return l(t,e=e.get(r)||null,""+n,s);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return c(t,e=e.get(null===n.key?r:n.key)||null,n,s);case j:return d(t,e=e.get(null===n.key?r:n.key)||null,n,s);case z:return f(e,t,r,(0,n._init)(n._payload),s)}if(te(n)||L(n))return u(t,e=e.get(r)||null,n,s,null);xa(t,n)}return null}function p(s,a,i,l){for(var c=null,d=null,u=a,p=a=0,g=null;null!==u&&p<i.length;p++){u.index>p?(g=u,u=null):g=u.sibling;var x=m(s,u,i[p],l);if(null===x){null===u&&(u=g);break}e&&u&&null===x.alternate&&t(s,u),a=o(x,a,p),null===d?c=x:d.sibling=x,d=x,u=g}if(p===i.length)return r(s,u),sa&&Js(s,p),c;if(null===u){for(;p<i.length;p++)null!==(u=h(s,i[p],l))&&(a=o(u,a,p),null===d?c=u:d.sibling=u,d=u);return sa&&Js(s,p),c}for(u=n(s,u);p<i.length;p++)null!==(g=f(u,s,p,i[p],l))&&(e&&null!==g.alternate&&u.delete(null===g.key?p:g.key),a=o(g,a,p),null===d?c=g:d.sibling=g,d=g);return e&&u.forEach((function(e){return t(s,e)})),sa&&Js(s,p),c}function g(s,i,l,c){var d=L(l);if("function"!==typeof d)throw Error(a(150));if(null==(l=d.call(l)))throw Error(a(151));for(var u=d=null,p=i,g=i=0,x=null,b=l.next();null!==p&&!b.done;g++,b=l.next()){p.index>g?(x=p,p=null):x=p.sibling;var y=m(s,p,b.value,c);if(null===y){null===p&&(p=x);break}e&&p&&null===y.alternate&&t(s,p),i=o(y,i,g),null===u?d=y:u.sibling=y,u=y,p=x}if(b.done)return r(s,p),sa&&Js(s,g),d;if(null===p){for(;!b.done;g++,b=l.next())null!==(b=h(s,b.value,c))&&(i=o(b,i,g),null===u?d=b:u.sibling=b,u=b);return sa&&Js(s,g),d}for(p=n(s,p);!b.done;g++,b=l.next())null!==(b=f(p,s,g,b.value,c))&&(e&&null!==b.alternate&&p.delete(null===b.key?g:b.key),i=o(b,i,g),null===u?d=b:u.sibling=b,u=b);return e&&p.forEach((function(e){return t(s,e)})),sa&&Js(s,g),d}return function e(n,a,o,l){if("object"===typeof o&&null!==o&&o.type===N&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,d=a;null!==d;){if(d.key===c){if((c=o.type)===N){if(7===d.tag){r(n,d.sibling),(a=s(d,o.props.children)).return=n,n=a;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===z&&ba(c)===d.type){r(n,d.sibling),(a=s(d,o.props)).ref=ga(n,d,o),a.return=n,n=a;break e}r(n,d);break}t(n,d),d=d.sibling}o.type===N?((a=Lc(o.props.children,n.mode,l,o.key)).return=n,n=a):((l=Ic(o.type,o.key,o.props,null,n.mode,l)).ref=ga(n,a,o),l.return=n,n=l)}return i(n);case j:e:{for(d=o.key;null!==a;){if(a.key===d){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){r(n,a.sibling),(a=s(a,o.children||[])).return=n,n=a;break e}r(n,a);break}t(n,a),a=a.sibling}(a=Rc(o,n.mode,l)).return=n,n=a}return i(n);case z:return e(n,a,(d=o._init)(o._payload),l)}if(te(o))return p(n,a,o,l);if(L(o))return g(n,a,o,l);xa(n,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(r(n,a.sibling),(a=s(a,o)).return=n,n=a):(r(n,a),(a=qc(o,n.mode,l)).return=n,n=a),i(n)):r(n,a)}}var va=ya(!0),wa=ya(!1),ja=ks(null),Na=null,ka=null,Sa=null;function Ca(){Sa=ka=Na=null}function _a(e){var t=ja.current;Ss(ja),e._currentValue=t}function Ea(e,t,r){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Aa(e,t){Na=e,Sa=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(yi=!0),e.firstContext=null)}function Oa(e){var t=e._currentValue;if(Sa!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===Na)throw Error(a(308));ka=e,Na.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ta=null;function za(e){null===Ta?Ta=[e]:Ta.push(e)}function Pa(e,t,r,n){var s=t.interleaved;return null===s?(r.next=r,za(t)):(r.next=s.next,s.next=r),t.interleaved=r,Ia(e,n)}function Ia(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}var La=!1;function Ma(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ra(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Da(e,t,r){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!==(2&El)){var s=n.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),n.pending=t,Ia(e,r)}return null===(s=n.interleaved)?(t.next=t,za(n)):(t.next=s.next,s.next=t),n.interleaved=t,Ia(e,r)}function Fa(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&r))){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,bt(e,r)}}function Ba(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var s=null,a=null;if(null!==(r=r.firstBaseUpdate)){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===a?s=a=o:a=a.next=o,r=r.next}while(null!==r);null===a?s=a=t:a=a.next=t}else s=a=t;return r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:n.shared,effects:n.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function $a(e,t,r,n){var s=e.updateQueue;La=!1;var a=s.firstBaseUpdate,o=s.lastBaseUpdate,i=s.shared.pending;if(null!==i){s.shared.pending=null;var l=i,c=l.next;l.next=null,null===o?a=c:o.next=c,o=l;var d=e.alternate;null!==d&&((i=(d=d.updateQueue).lastBaseUpdate)!==o&&(null===i?d.firstBaseUpdate=c:i.next=c,d.lastBaseUpdate=l))}if(null!==a){var u=s.baseState;for(o=0,d=c=l=null,i=a;;){var h=i.lane,m=i.eventTime;if((n&h)===h){null!==d&&(d=d.next={eventTime:m,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var f=e,p=i;switch(h=t,m=r,p.tag){case 1:if("function"===typeof(f=p.payload)){u=f.call(m,u,h);break e}u=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=p.payload)?f.call(m,u,h):f)||void 0===h)break e;u=q({},u,h);break e;case 2:La=!0}}null!==i.callback&&0!==i.lane&&(e.flags|=64,null===(h=s.effects)?s.effects=[i]:h.push(i))}else m={eventTime:m,lane:h,tag:i.tag,payload:i.payload,callback:i.callback,next:null},null===d?(c=d=m,l=u):d=d.next=m,o|=h;if(null===(i=i.next)){if(null===(i=s.shared.pending))break;i=(h=i).next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}if(null===d&&(l=u),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,null!==(t=s.shared.interleaved)){s=t;do{o|=s.lane,s=s.next}while(s!==t)}else null===a&&(s.shared.lanes=0);Ml|=o,e.lanes=o,e.memoizedState=u}}function Ua(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(null!==s){if(n.callback=null,n=r,"function"!==typeof s)throw Error(a(191,s));s.call(n)}}}var Ha={},Wa=ks(Ha),Qa=ks(Ha),Va=ks(Ha);function Ga(e){if(e===Ha)throw Error(a(174));return e}function Ka(e,t){switch(Cs(Va,t),Cs(Qa,e),Cs(Wa,Ha),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ss(Wa),Cs(Wa,t)}function Ya(){Ss(Wa),Ss(Qa),Ss(Va)}function Za(e){Ga(Va.current);var t=Ga(Wa.current),r=le(t,e.type);t!==r&&(Cs(Qa,e),Cs(Wa,r))}function Ja(e){Qa.current===e&&(Ss(Wa),Ss(Qa))}var Xa=ks(0);function eo(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var to=[];function ro(){for(var e=0;e<to.length;e++)to[e]._workInProgressVersionPrimary=null;to.length=0}var no=v.ReactCurrentDispatcher,so=v.ReactCurrentBatchConfig,ao=0,oo=null,io=null,lo=null,co=!1,uo=!1,ho=0,mo=0;function fo(){throw Error(a(321))}function po(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!on(e[r],t[r]))return!1;return!0}function go(e,t,r,n,s,o){if(ao=o,oo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,no.current=null===e||null===e.memoizedState?Xo:ei,e=r(n,s),uo){o=0;do{if(uo=!1,ho=0,25<=o)throw Error(a(301));o+=1,lo=io=null,t.updateQueue=null,no.current=ti,e=r(n,s)}while(uo)}if(no.current=Jo,t=null!==io&&null!==io.next,ao=0,lo=io=oo=null,co=!1,t)throw Error(a(300));return e}function xo(){var e=0!==ho;return ho=0,e}function bo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===lo?oo.memoizedState=lo=e:lo=lo.next=e,lo}function yo(){if(null===io){var e=oo.alternate;e=null!==e?e.memoizedState:null}else e=io.next;var t=null===lo?oo.memoizedState:lo.next;if(null!==t)lo=t,io=e;else{if(null===e)throw Error(a(310));e={memoizedState:(io=e).memoizedState,baseState:io.baseState,baseQueue:io.baseQueue,queue:io.queue,next:null},null===lo?oo.memoizedState=lo=e:lo=lo.next=e}return lo}function vo(e,t){return"function"===typeof t?t(e):t}function wo(e){var t=yo(),r=t.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=e;var n=io,s=n.baseQueue,o=r.pending;if(null!==o){if(null!==s){var i=s.next;s.next=o.next,o.next=i}n.baseQueue=s=o,r.pending=null}if(null!==s){o=s.next,n=n.baseState;var l=i=null,c=null,d=o;do{var u=d.lane;if((ao&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(l=c=h,i=n):c=c.next=h,oo.lanes|=u,Ml|=u}d=d.next}while(null!==d&&d!==o);null===c?i=n:c.next=l,on(n,t.memoizedState)||(yi=!0),t.memoizedState=n,t.baseState=i,t.baseQueue=c,r.lastRenderedState=n}if(null!==(e=r.interleaved)){s=e;do{o=s.lane,oo.lanes|=o,Ml|=o,s=s.next}while(s!==e)}else null===s&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function jo(e){var t=yo(),r=t.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,o=t.memoizedState;if(null!==s){r.pending=null;var i=s=s.next;do{o=e(o,i.action),i=i.next}while(i!==s);on(o,t.memoizedState)||(yi=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),r.lastRenderedState=o}return[o,n]}function No(){}function ko(e,t){var r=oo,n=yo(),s=t(),o=!on(n.memoizedState,s);if(o&&(n.memoizedState=s,yi=!0),n=n.queue,Mo(_o.bind(null,r,n,e),[e]),n.getSnapshot!==t||o||null!==lo&&1&lo.memoizedState.tag){if(r.flags|=2048,To(9,Co.bind(null,r,n,s,t),void 0,null),null===Al)throw Error(a(349));0!==(30&ao)||So(r,t,s)}return s}function So(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function Co(e,t,r,n){t.value=r,t.getSnapshot=n,Eo(t)&&Ao(e)}function _o(e,t,r){return r((function(){Eo(t)&&Ao(e)}))}function Eo(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!on(e,r)}catch(n){return!0}}function Ao(e){var t=Ia(e,1);null!==t&&rc(t,e,1,-1)}function Oo(e){var t=bo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vo,lastRenderedState:e},t.queue=e,e=e.dispatch=Go.bind(null,oo,e),[t.memoizedState,e]}function To(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function zo(){return yo().memoizedState}function Po(e,t,r,n){var s=bo();oo.flags|=e,s.memoizedState=To(1|t,r,void 0,void 0===n?null:n)}function Io(e,t,r,n){var s=yo();n=void 0===n?null:n;var a=void 0;if(null!==io){var o=io.memoizedState;if(a=o.destroy,null!==n&&po(n,o.deps))return void(s.memoizedState=To(t,r,a,n))}oo.flags|=e,s.memoizedState=To(1|t,r,a,n)}function Lo(e,t){return Po(8390656,8,e,t)}function Mo(e,t){return Io(2048,8,e,t)}function qo(e,t){return Io(4,2,e,t)}function Ro(e,t){return Io(4,4,e,t)}function Do(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Fo(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Io(4,4,Do.bind(null,t,e),r)}function Bo(){}function $o(e,t){var r=yo();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&po(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Uo(e,t){var r=yo();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&po(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Ho(e,t,r){return 0===(21&ao)?(e.baseState&&(e.baseState=!1,yi=!0),e.memoizedState=r):(on(r,t)||(r=pt(),oo.lanes|=r,Ml|=r,e.baseState=!0),t)}function Wo(e,t){var r=yt;yt=0!==r&&4>r?r:4,e(!0);var n=so.transition;so.transition={};try{e(!1),t()}finally{yt=r,so.transition=n}}function Qo(){return yo().memoizedState}function Vo(e,t,r){var n=tc(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Ko(e))Yo(t,r);else if(null!==(r=Pa(e,t,r,n))){rc(r,e,n,ec()),Zo(r,t,n)}}function Go(e,t,r){var n=tc(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Ko(e))Yo(t,s);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,i=a(o,r);if(s.hasEagerState=!0,s.eagerState=i,on(i,o)){var l=t.interleaved;return null===l?(s.next=s,za(t)):(s.next=l.next,l.next=s),void(t.interleaved=s)}}catch(c){}null!==(r=Pa(e,t,s,n))&&(rc(r,e,n,s=ec()),Zo(r,t,n))}}function Ko(e){var t=e.alternate;return e===oo||null!==t&&t===oo}function Yo(e,t){uo=co=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Zo(e,t,r){if(0!==(4194240&r)){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,bt(e,r)}}var Jo={readContext:Oa,useCallback:fo,useContext:fo,useEffect:fo,useImperativeHandle:fo,useInsertionEffect:fo,useLayoutEffect:fo,useMemo:fo,useReducer:fo,useRef:fo,useState:fo,useDebugValue:fo,useDeferredValue:fo,useTransition:fo,useMutableSource:fo,useSyncExternalStore:fo,useId:fo,unstable_isNewReconciler:!1},Xo={readContext:Oa,useCallback:function(e,t){return bo().memoizedState=[e,void 0===t?null:t],e},useContext:Oa,useEffect:Lo,useImperativeHandle:function(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Po(4194308,4,Do.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Po(4194308,4,e,t)},useInsertionEffect:function(e,t){return Po(4,2,e,t)},useMemo:function(e,t){var r=bo();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=bo();return t=void 0!==r?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Vo.bind(null,oo,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},bo().memoizedState=e},useState:Oo,useDebugValue:Bo,useDeferredValue:function(e){return bo().memoizedState=e},useTransition:function(){var e=Oo(!1),t=e[0];return e=Wo.bind(null,e[1]),bo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=oo,s=bo();if(sa){if(void 0===r)throw Error(a(407));r=r()}else{if(r=t(),null===Al)throw Error(a(349));0!==(30&ao)||So(n,t,r)}s.memoizedState=r;var o={value:r,getSnapshot:t};return s.queue=o,Lo(_o.bind(null,n,o,e),[e]),n.flags|=2048,To(9,Co.bind(null,n,o,r,t),void 0,null),r},useId:function(){var e=bo(),t=Al.identifierPrefix;if(sa){var r=Zs;t=":"+t+"R"+(r=(Ys&~(1<<32-ot(Ys)-1)).toString(32)+r),0<(r=ho++)&&(t+="H"+r.toString(32)),t+=":"}else t=":"+t+"r"+(r=mo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ei={readContext:Oa,useCallback:$o,useContext:Oa,useEffect:Mo,useImperativeHandle:Fo,useInsertionEffect:qo,useLayoutEffect:Ro,useMemo:Uo,useReducer:wo,useRef:zo,useState:function(){return wo(vo)},useDebugValue:Bo,useDeferredValue:function(e){return Ho(yo(),io.memoizedState,e)},useTransition:function(){return[wo(vo)[0],yo().memoizedState]},useMutableSource:No,useSyncExternalStore:ko,useId:Qo,unstable_isNewReconciler:!1},ti={readContext:Oa,useCallback:$o,useContext:Oa,useEffect:Mo,useImperativeHandle:Fo,useInsertionEffect:qo,useLayoutEffect:Ro,useMemo:Uo,useReducer:jo,useRef:zo,useState:function(){return jo(vo)},useDebugValue:Bo,useDeferredValue:function(e){var t=yo();return null===io?t.memoizedState=e:Ho(t,io.memoizedState,e)},useTransition:function(){return[jo(vo)[0],yo().memoizedState]},useMutableSource:No,useSyncExternalStore:ko,useId:Qo,unstable_isNewReconciler:!1};function ri(e,t){if(e&&e.defaultProps){for(var r in t=q({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}function ni(e,t,r,n){r=null===(r=r(n,t=e.memoizedState))||void 0===r?t:q({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var si={isMounted:function(e){return!!(e=e._reactInternals)&&$e(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=ec(),s=tc(e),a=Ra(n,s);a.payload=t,void 0!==r&&null!==r&&(a.callback=r),null!==(t=Da(e,a,s))&&(rc(t,e,s,n),Fa(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=ec(),s=tc(e),a=Ra(n,s);a.tag=1,a.payload=t,void 0!==r&&null!==r&&(a.callback=r),null!==(t=Da(e,a,s))&&(rc(t,e,s,n),Fa(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ec(),n=tc(e),s=Ra(r,n);s.tag=2,void 0!==t&&null!==t&&(s.callback=t),null!==(t=Da(e,s,n))&&(rc(t,e,n,r),Fa(t,e,n))}};function ai(e,t,r,n,s,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!ln(r,n)||!ln(s,a))}function oi(e,t,r){var n=!1,s=_s,a=t.contextType;return"object"===typeof a&&null!==a?a=Oa(a):(s=zs(t)?Os:Es.current,a=(n=null!==(n=t.contextTypes)&&void 0!==n)?Ts(e,s):_s),t=new t(r,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=si,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),t}function ii(e,t,r,n){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&si.enqueueReplaceState(t,t.state,null)}function li(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},Ma(e);var a=t.contextType;"object"===typeof a&&null!==a?s.context=Oa(a):(a=zs(t)?Os:Es.current,s.context=Ts(e,a)),s.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ni(e,t,a,r),s.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(t=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),t!==s.state&&si.enqueueReplaceState(s,s.state,null),$a(e,r,s,n),s.state=e.memoizedState),"function"===typeof s.componentDidMount&&(e.flags|=4194308)}function ci(e,t){try{var r="",n=t;do{r+=B(n),n=n.return}while(n);var s=r}catch(a){s="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:s,digest:null}}function di(e,t,r){return{value:e,source:null,stack:null!=r?r:null,digest:null!=t?t:null}}function ui(e,t){try{console.error(t.value)}catch(r){setTimeout((function(){throw r}))}}var hi="function"===typeof WeakMap?WeakMap:Map;function mi(e,t,r){(r=Ra(-1,r)).tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Hl||(Hl=!0,Wl=n),ui(0,t)},r}function fi(e,t,r){(r=Ra(-1,r)).tag=3;var n=e.type.getDerivedStateFromError;if("function"===typeof n){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){ui(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(r.callback=function(){ui(0,t),"function"!==typeof n&&(null===Ql?Ql=new Set([this]):Ql.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}function pi(e,t,r){var n=e.pingCache;if(null===n){n=e.pingCache=new hi;var s=new Set;n.set(t,s)}else void 0===(s=n.get(t))&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=Sc.bind(null,e,t,r),t.then(e,e))}function gi(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function xi(e,t,r,n,s){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((t=Ra(-1,1)).tag=2,Da(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var bi=v.ReactCurrentOwner,yi=!1;function vi(e,t,r,n){t.child=null===e?wa(t,null,r,n):va(t,e.child,r,n)}function wi(e,t,r,n,s){r=r.render;var a=t.ref;return Aa(t,s),n=go(e,t,r,n,a,s),r=xo(),null===e||yi?(sa&&r&&ea(t),t.flags|=1,vi(e,t,n,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Hi(e,t,s))}function ji(e,t,r,n,s){if(null===e){var a=r.type;return"function"!==typeof a||zc(a)||void 0!==a.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Ic(r.type,null,n,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Ni(e,t,a,n,s))}if(a=e.child,0===(e.lanes&s)){var o=a.memoizedProps;if((r=null!==(r=r.compare)?r:ln)(o,n)&&e.ref===t.ref)return Hi(e,t,s)}return t.flags|=1,(e=Pc(a,n)).ref=t.ref,e.return=t,t.child=e}function Ni(e,t,r,n,s){if(null!==e){var a=e.memoizedProps;if(ln(a,n)&&e.ref===t.ref){if(yi=!1,t.pendingProps=n=a,0===(e.lanes&s))return t.lanes=e.lanes,Hi(e,t,s);0!==(131072&e.flags)&&(yi=!0)}}return Ci(e,t,r,n,s)}function ki(e,t,r){var n=t.pendingProps,s=n.children,a=null!==e?e.memoizedState:null;if("hidden"===n.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Cs(Pl,zl),zl|=r;else{if(0===(1073741824&r))return e=null!==a?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Cs(Pl,zl),zl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==a?a.baseLanes:r,Cs(Pl,zl),zl|=n}else null!==a?(n=a.baseLanes|r,t.memoizedState=null):n=r,Cs(Pl,zl),zl|=n;return vi(e,t,s,r),t.child}function Si(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Ci(e,t,r,n,s){var a=zs(r)?Os:Es.current;return a=Ts(t,a),Aa(t,s),r=go(e,t,r,n,a,s),n=xo(),null===e||yi?(sa&&n&&ea(t),t.flags|=1,vi(e,t,r,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Hi(e,t,s))}function _i(e,t,r,n,s){if(zs(r)){var a=!0;Ms(t)}else a=!1;if(Aa(t,s),null===t.stateNode)Ui(e,t),oi(t,r,n),li(t,r,n,s),n=!0;else if(null===e){var o=t.stateNode,i=t.memoizedProps;o.props=i;var l=o.context,c=r.contextType;"object"===typeof c&&null!==c?c=Oa(c):c=Ts(t,c=zs(r)?Os:Es.current);var d=r.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate;u||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(i!==n||l!==c)&&ii(t,o,n,c),La=!1;var h=t.memoizedState;o.state=h,$a(t,n,o,s),l=t.memoizedState,i!==n||h!==l||As.current||La?("function"===typeof d&&(ni(t,r,d,n),l=t.memoizedState),(i=La||ai(t,r,i,n,h,l,c))?(u||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),o.props=n,o.state=l,o.context=c,n=i):("function"===typeof o.componentDidMount&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,qa(e,t),i=t.memoizedProps,c=t.type===t.elementType?i:ri(t.type,i),o.props=c,u=t.pendingProps,h=o.context,"object"===typeof(l=r.contextType)&&null!==l?l=Oa(l):l=Ts(t,l=zs(r)?Os:Es.current);var m=r.getDerivedStateFromProps;(d="function"===typeof m||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(i!==u||h!==l)&&ii(t,o,n,l),La=!1,h=t.memoizedState,o.state=h,$a(t,n,o,s);var f=t.memoizedState;i!==u||h!==f||As.current||La?("function"===typeof m&&(ni(t,r,m,n),f=t.memoizedState),(c=La||ai(t,r,c,n,h,f,l)||!1)?(d||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(n,f,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(n,f,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=f),o.props=n,o.state=f,o.context=l,n=c):("function"!==typeof o.componentDidUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return Ei(e,t,r,n,a,s)}function Ei(e,t,r,n,s,a){Si(e,t);var o=0!==(128&t.flags);if(!n&&!o)return s&&qs(t,r,!1),Hi(e,t,a);n=t.stateNode,bi.current=t;var i=o&&"function"!==typeof r.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&o?(t.child=va(t,e.child,null,a),t.child=va(t,null,i,a)):vi(e,t,i,a),t.memoizedState=n.state,s&&qs(t,r,!0),t.child}function Ai(e){var t=e.stateNode;t.pendingContext?Is(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Is(0,t.context,!1),Ka(e,t.containerInfo)}function Oi(e,t,r,n,s){return ma(),fa(s),t.flags|=256,vi(e,t,r,n),t.child}var Ti,zi,Pi,Ii,Li={dehydrated:null,treeContext:null,retryLane:0};function Mi(e){return{baseLanes:e,cachePool:null,transitions:null}}function qi(e,t,r){var n,s=t.pendingProps,o=Xa.current,i=!1,l=0!==(128&t.flags);if((n=l)||(n=(null===e||null!==e.memoizedState)&&0!==(2&o)),n?(i=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Cs(Xa,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=s.children,e=s.fallback,i?(s=t.mode,i=t.child,l={mode:"hidden",children:l},0===(1&s)&&null!==i?(i.childLanes=0,i.pendingProps=l):i=Mc(l,s,0,null),e=Lc(e,s,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Mi(r),t.memoizedState=Li,e):Ri(t,l));if(null!==(o=e.memoizedState)&&null!==(n=o.dehydrated))return function(e,t,r,n,s,o,i){if(r)return 256&t.flags?(t.flags&=-257,Di(e,t,i,n=di(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=n.fallback,s=t.mode,n=Mc({mode:"visible",children:n.children},s,0,null),(o=Lc(o,s,i,null)).flags|=2,n.return=t,o.return=t,n.sibling=o,t.child=n,0!==(1&t.mode)&&va(t,e.child,null,i),t.child.memoizedState=Mi(i),t.memoizedState=Li,o);if(0===(1&t.mode))return Di(e,t,i,null);if("$!"===s.data){if(n=s.nextSibling&&s.nextSibling.dataset)var l=n.dgst;return n=l,Di(e,t,i,n=di(o=Error(a(419)),n,void 0))}if(l=0!==(i&e.childLanes),yi||l){if(null!==(n=Al)){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(n.suspendedLanes|i))?0:s)&&s!==o.retryLane&&(o.retryLane=s,Ia(e,s),rc(n,e,s,-1))}return pc(),Di(e,t,i,n=di(Error(a(421))))}return"$?"===s.data?(t.flags|=128,t.child=e.child,t=_c.bind(null,e),s._reactRetry=t,null):(e=o.treeContext,na=cs(s.nextSibling),ra=t,sa=!0,aa=null,null!==e&&(Vs[Gs++]=Ys,Vs[Gs++]=Zs,Vs[Gs++]=Ks,Ys=e.id,Zs=e.overflow,Ks=t),t=Ri(t,n.children),t.flags|=4096,t)}(e,t,l,s,n,o,r);if(i){i=s.fallback,l=t.mode,n=(o=e.child).sibling;var c={mode:"hidden",children:s.children};return 0===(1&l)&&t.child!==o?((s=t.child).childLanes=0,s.pendingProps=c,t.deletions=null):(s=Pc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==n?i=Pc(n,i):(i=Lc(i,l,r,null)).flags|=2,i.return=t,s.return=t,s.sibling=i,t.child=s,s=i,i=t.child,l=null===(l=e.child.memoizedState)?Mi(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=e.childLanes&~r,t.memoizedState=Li,s}return e=(i=e.child).sibling,s=Pc(i,{mode:"visible",children:s.children}),0===(1&t.mode)&&(s.lanes=r),s.return=t,s.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function Ri(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Di(e,t,r,n){return null!==n&&fa(n),va(t,e.child,null,r),(e=Ri(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Fi(e,t,r){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),Ea(e.return,t,r)}function Bi(e,t,r,n,s){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=s)}function $i(e,t,r){var n=t.pendingProps,s=n.revealOrder,a=n.tail;if(vi(e,t,n.children,r),0!==(2&(n=Xa.current)))n=1&n|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Fi(e,r,t);else if(19===e.tag)Fi(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Cs(Xa,n),0===(1&t.mode))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;null!==r;)null!==(e=r.alternate)&&null===eo(e)&&(s=r),r=r.sibling;null===(r=s)?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),Bi(t,!1,s,r,a);break;case"backwards":for(r=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===eo(e)){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}Bi(t,!0,r,null,a);break;case"together":Bi(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ui(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hi(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),Ml|=t.lanes,0===(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(r=Pc(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Pc(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function Wi(e,t){if(!sa)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Qi(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;null!==s;)r|=s.lanes|s.childLanes,n|=14680064&s.subtreeFlags,n|=14680064&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Vi(e,t,r){var n=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qi(t),null;case 1:case 17:return zs(t.type)&&Ps(),Qi(t),null;case 3:return n=t.stateNode,Ya(),Ss(As),Ss(Es),ro(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(ua(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(oc(aa),aa=null))),zi(e,t),Qi(t),null;case 5:Ja(t);var s=Ga(Va.current);if(r=t.type,null!==e&&null!=t.stateNode)Pi(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(null===t.stateNode)throw Error(a(166));return Qi(t),null}if(e=Ga(Wa.current),ua(t)){n=t.stateNode,r=t.type;var o=t.memoizedProps;switch(n[hs]=t,n[ms]=o,e=0!==(1&t.mode),r){case"dialog":Dn("cancel",n),Dn("close",n);break;case"iframe":case"object":case"embed":Dn("load",n);break;case"video":case"audio":for(s=0;s<Ln.length;s++)Dn(Ln[s],n);break;case"source":Dn("error",n);break;case"img":case"image":case"link":Dn("error",n),Dn("load",n);break;case"details":Dn("toggle",n);break;case"input":Y(n,o),Dn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},Dn("invalid",n);break;case"textarea":se(n,o),Dn("invalid",n)}for(var l in be(r,o),s=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?n.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jn(n.textContent,c,e),s=["children",c]):"number"===typeof c&&n.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jn(n.textContent,c,e),s=["children",""+c]):i.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Dn("scroll",n)}switch(r){case"input":Q(n),X(n,o,!0);break;case"textarea":Q(n),oe(n);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(n.onclick=Xn)}n=s,t.updateQueue=n,null!==n&&(t.flags|=4)}else{l=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ie(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof n.is?e=l.createElement(r,{is:n.is}):(e=l.createElement(r),"select"===r&&(l=e,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):e=l.createElementNS(e,r),e[hs]=t,e[ms]=n,Ti(e,t,!1,!1),t.stateNode=e;e:{switch(l=ye(r,n),r){case"dialog":Dn("cancel",e),Dn("close",e),s=n;break;case"iframe":case"object":case"embed":Dn("load",e),s=n;break;case"video":case"audio":for(s=0;s<Ln.length;s++)Dn(Ln[s],e);s=n;break;case"source":Dn("error",e),s=n;break;case"img":case"image":case"link":Dn("error",e),Dn("load",e),s=n;break;case"details":Dn("toggle",e),s=n;break;case"input":Y(e,n),s=K(e,n),Dn("invalid",e);break;case"option":default:s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=q({},n,{value:void 0}),Dn("invalid",e);break;case"textarea":se(e,n),s=ne(e,n),Dn("invalid",e)}for(o in be(r,s),c=s)if(c.hasOwnProperty(o)){var d=c[o];"style"===o?ge(e,d):"dangerouslySetInnerHTML"===o?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===o?"string"===typeof d?("textarea"!==r||""!==d)&&he(e,d):"number"===typeof d&&he(e,""+d):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(i.hasOwnProperty(o)?null!=d&&"onScroll"===o&&Dn("scroll",e):null!=d&&y(e,o,d,l))}switch(r){case"input":Q(e),X(e,n,!1);break;case"textarea":Q(e),oe(e);break;case"option":null!=n.value&&e.setAttribute("value",""+H(n.value));break;case"select":e.multiple=!!n.multiple,null!=(o=n.value)?re(e,!!n.multiple,o,!1):null!=n.defaultValue&&re(e,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof s.onClick&&(e.onclick=Xn)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Qi(t),null;case 6:if(e&&null!=t.stateNode)Ii(e,t,e.memoizedProps,n);else{if("string"!==typeof n&&null===t.stateNode)throw Error(a(166));if(r=Ga(Va.current),Ga(Wa.current),ua(t)){if(n=t.stateNode,r=t.memoizedProps,n[hs]=t,(o=n.nodeValue!==r)&&null!==(e=ra))switch(e.tag){case 3:Jn(n.nodeValue,r,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jn(n.nodeValue,r,0!==(1&e.mode))}o&&(t.flags|=4)}else(n=(9===r.nodeType?r:r.ownerDocument).createTextNode(n))[hs]=t,t.stateNode=n}return Qi(t),null;case 13:if(Ss(Xa),n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(sa&&null!==na&&0!==(1&t.mode)&&0===(128&t.flags))ha(),ma(),t.flags|=98560,o=!1;else if(o=ua(t),null!==n&&null!==n.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hs]=t}else ma(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Qi(t),o=!1}else null!==aa&&(oc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=r,t):((n=null!==n)!==(null!==e&&null!==e.memoizedState)&&n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Xa.current)?0===Il&&(Il=3):pc())),null!==t.updateQueue&&(t.flags|=4),Qi(t),null);case 4:return Ya(),zi(e,t),null===e&&$n(t.stateNode.containerInfo),Qi(t),null;case 10:return _a(t.type._context),Qi(t),null;case 19:if(Ss(Xa),null===(o=t.memoizedState))return Qi(t),null;if(n=0!==(128&t.flags),null===(l=o.rendering))if(n)Wi(o,!1);else{if(0!==Il||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=eo(e))){for(t.flags|=128,Wi(o,!1),null!==(n=l.updateQueue)&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;null!==r;)e=n,(o=r).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Cs(Xa,1&Xa.current|2),t.child}e=e.sibling}null!==o.tail&&Ze()>$l&&(t.flags|=128,n=!0,Wi(o,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=eo(l))){if(t.flags|=128,n=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),Wi(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!sa)return Qi(t),null}else 2*Ze()-o.renderingStartTime>$l&&1073741824!==r&&(t.flags|=128,n=!0,Wi(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(r=o.last)?r.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ze(),t.sibling=null,r=Xa.current,Cs(Xa,n?1&r|2:1&r),t):(Qi(t),null);case 22:case 23:return uc(),n=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==n&&(t.flags|=8192),n&&0!==(1&t.mode)?0!==(1073741824&zl)&&(Qi(t),6&t.subtreeFlags&&(t.flags|=8192)):Qi(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Gi(e,t){switch(ta(t),t.tag){case 1:return zs(t.type)&&Ps(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ya(),Ss(As),Ss(Es),ro(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Ja(t),null;case 13:if(Ss(Xa),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));ma()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ss(Xa),null;case 4:return Ya(),null;case 10:return _a(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}Ti=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},zi=function(){},Pi=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,Ga(Wa.current);var a,o=null;switch(r){case"input":s=K(e,s),n=K(e,n),o=[];break;case"select":s=q({},s,{value:void 0}),n=q({},n,{value:void 0}),o=[];break;case"textarea":s=ne(e,s),n=ne(e,n),o=[];break;default:"function"!==typeof s.onClick&&"function"===typeof n.onClick&&(e.onclick=Xn)}for(d in be(r,n),r=null,s)if(!n.hasOwnProperty(d)&&s.hasOwnProperty(d)&&null!=s[d])if("style"===d){var l=s[d];for(a in l)l.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(i.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in n){var c=n[d];if(l=null!=s?s[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(null!=c||null!=l))if("style"===d)if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(r||(r={}),r[a]=c[a])}else r||(o||(o=[]),o.push(d,r)),r=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(i.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Dn("scroll",e),o||l===c||(o=[])):(o=o||[]).push(d,c))}r&&(o=o||[]).push("style",r);var d=o;(t.updateQueue=d)&&(t.flags|=4)}},Ii=function(e,t,r,n){r!==n&&(t.flags|=4)};var Ki=!1,Yi=!1,Zi="function"===typeof WeakSet?WeakSet:Set,Ji=null;function Xi(e,t){var r=e.ref;if(null!==r)if("function"===typeof r)try{r(null)}catch(n){kc(e,t,n)}else r.current=null}function el(e,t,r){try{r()}catch(n){kc(e,t,n)}}var tl=!1;function rl(e,t,r){var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var s=n=n.next;do{if((s.tag&e)===e){var a=s.destroy;s.destroy=void 0,void 0!==a&&el(t,r,a)}s=s.next}while(s!==n)}}function nl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function sl(e){var t=e.ref;if(null!==t){var r=e.stateNode;e.tag,e=r,"function"===typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hs],delete t[ms],delete t[ps],delete t[gs],delete t[xs])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function il(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==t.onclick||(t.onclick=Xn));else if(4!==n&&null!==(e=e.child))for(ll(e,t,r),e=e.sibling;null!==e;)ll(e,t,r),e=e.sibling}function cl(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==n&&null!==(e=e.child))for(cl(e,t,r),e=e.sibling;null!==e;)cl(e,t,r),e=e.sibling}var dl=null,ul=!1;function hl(e,t,r){for(r=r.child;null!==r;)ml(e,t,r),r=r.sibling}function ml(e,t,r){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(st,r)}catch(i){}switch(r.tag){case 5:Yi||Xi(r,t);case 6:var n=dl,s=ul;dl=null,hl(e,t,r),ul=s,null!==(dl=n)&&(ul?(e=dl,r=r.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)):dl.removeChild(r.stateNode));break;case 18:null!==dl&&(ul?(e=dl,r=r.stateNode,8===e.nodeType?ls(e.parentNode,r):1===e.nodeType&&ls(e,r),$t(e)):ls(dl,r.stateNode));break;case 4:n=dl,s=ul,dl=r.stateNode.containerInfo,ul=!0,hl(e,t,r),dl=n,ul=s;break;case 0:case 11:case 14:case 15:if(!Yi&&(null!==(n=r.updateQueue)&&null!==(n=n.lastEffect))){s=n=n.next;do{var a=s,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&el(r,t,o),s=s.next}while(s!==n)}hl(e,t,r);break;case 1:if(!Yi&&(Xi(r,t),"function"===typeof(n=r.stateNode).componentWillUnmount))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(i){kc(r,t,i)}hl(e,t,r);break;case 21:hl(e,t,r);break;case 22:1&r.mode?(Yi=(n=Yi)||null!==r.memoizedState,hl(e,t,r),Yi=n):hl(e,t,r);break;default:hl(e,t,r)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new Zi),t.forEach((function(t){var n=Ec.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))}))}}function pl(e,t){var r=t.deletions;if(null!==r)for(var n=0;n<r.length;n++){var s=r[n];try{var o=e,i=t,l=i;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,ul=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,ul=!0;break e}l=l.return}if(null===dl)throw Error(a(160));ml(o,i,s),dl=null,ul=!1;var c=s.alternate;null!==c&&(c.return=null),s.return=null}catch(d){kc(s,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(pl(t,e),xl(e),4&n){try{rl(3,e,e.return),nl(3,e)}catch(g){kc(e,e.return,g)}try{rl(5,e,e.return)}catch(g){kc(e,e.return,g)}}break;case 1:pl(t,e),xl(e),512&n&&null!==r&&Xi(r,r.return);break;case 5:if(pl(t,e),xl(e),512&n&&null!==r&&Xi(r,r.return),32&e.flags){var s=e.stateNode;try{he(s,"")}catch(g){kc(e,e.return,g)}}if(4&n&&null!=(s=e.stateNode)){var o=e.memoizedProps,i=null!==r?r.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&Z(s,o),ye(l,i);var d=ye(l,o);for(i=0;i<c.length;i+=2){var u=c[i],h=c[i+1];"style"===u?ge(s,h):"dangerouslySetInnerHTML"===u?ue(s,h):"children"===u?he(s,h):y(s,u,h,d)}switch(l){case"input":J(s,o);break;case"textarea":ae(s,o);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var f=o.value;null!=f?re(s,!!o.multiple,f,!1):m!==!!o.multiple&&(null!=o.defaultValue?re(s,!!o.multiple,o.defaultValue,!0):re(s,!!o.multiple,o.multiple?[]:"",!1))}s[ms]=o}catch(g){kc(e,e.return,g)}}break;case 6:if(pl(t,e),xl(e),4&n){if(null===e.stateNode)throw Error(a(162));s=e.stateNode,o=e.memoizedProps;try{s.nodeValue=o}catch(g){kc(e,e.return,g)}}break;case 3:if(pl(t,e),xl(e),4&n&&null!==r&&r.memoizedState.isDehydrated)try{$t(t.containerInfo)}catch(g){kc(e,e.return,g)}break;case 4:default:pl(t,e),xl(e);break;case 13:pl(t,e),xl(e),8192&(s=e.child).flags&&(o=null!==s.memoizedState,s.stateNode.isHidden=o,!o||null!==s.alternate&&null!==s.alternate.memoizedState||(Bl=Ze())),4&n&&fl(e);break;case 22:if(u=null!==r&&null!==r.memoizedState,1&e.mode?(Yi=(d=Yi)||u,pl(t,e),Yi=d):pl(t,e),xl(e),8192&n){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(Ji=e,u=e.child;null!==u;){for(h=Ji=u;null!==Ji;){switch(f=(m=Ji).child,m.tag){case 0:case 11:case 14:case 15:rl(4,m,m.return);break;case 1:Xi(m,m.return);var p=m.stateNode;if("function"===typeof p.componentWillUnmount){n=m,r=m.return;try{t=n,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(g){kc(n,r,g)}}break;case 5:Xi(m,m.return);break;case 22:if(null!==m.memoizedState){wl(h);continue}}null!==f?(f.return=m,Ji=f):wl(h)}u=u.sibling}e:for(u=null,h=e;;){if(5===h.tag){if(null===u){u=h;try{s=h.stateNode,d?"function"===typeof(o=s.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=h.stateNode,i=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=pe("display",i))}catch(g){kc(e,e.return,g)}}}else if(6===h.tag){if(null===u)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(g){kc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:pl(t,e),xl(e),4&n&&fl(e);case 21:}}function xl(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(ol(r)){var n=r;break e}r=r.return}throw Error(a(160))}switch(n.tag){case 5:var s=n.stateNode;32&n.flags&&(he(s,""),n.flags&=-33),cl(e,il(e),s);break;case 3:case 4:var o=n.stateNode.containerInfo;ll(e,il(e),o);break;default:throw Error(a(161))}}catch(i){kc(e,e.return,i)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bl(e,t,r){Ji=e,yl(e,t,r)}function yl(e,t,r){for(var n=0!==(1&e.mode);null!==Ji;){var s=Ji,a=s.child;if(22===s.tag&&n){var o=null!==s.memoizedState||Ki;if(!o){var i=s.alternate,l=null!==i&&null!==i.memoizedState||Yi;i=Ki;var c=Yi;if(Ki=o,(Yi=l)&&!c)for(Ji=s;null!==Ji;)l=(o=Ji).child,22===o.tag&&null!==o.memoizedState?jl(s):null!==l?(l.return=o,Ji=l):jl(s);for(;null!==a;)Ji=a,yl(a,t,r),a=a.sibling;Ji=s,Ki=i,Yi=c}vl(e)}else 0!==(8772&s.subtreeFlags)&&null!==a?(a.return=s,Ji=a):vl(e)}}function vl(e){for(;null!==Ji;){var t=Ji;if(0!==(8772&t.flags)){var r=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Yi||nl(5,t);break;case 1:var n=t.stateNode;if(4&t.flags&&!Yi)if(null===r)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:ri(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ua(t,o,n);break;case 3:var i=t.updateQueue;if(null!==i){if(r=null,null!==t.child)switch(t.child.tag){case 5:case 1:r=t.child.stateNode}Ua(t,i,r)}break;case 5:var l=t.stateNode;if(null===r&&4&t.flags){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&$t(h)}}}break;default:throw Error(a(163))}Yi||512&t.flags&&sl(t)}catch(m){kc(t,t.return,m)}}if(t===e){Ji=null;break}if(null!==(r=t.sibling)){r.return=t.return,Ji=r;break}Ji=t.return}}function wl(e){for(;null!==Ji;){var t=Ji;if(t===e){Ji=null;break}var r=t.sibling;if(null!==r){r.return=t.return,Ji=r;break}Ji=t.return}}function jl(e){for(;null!==Ji;){var t=Ji;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{nl(4,t)}catch(l){kc(t,r,l)}break;case 1:var n=t.stateNode;if("function"===typeof n.componentDidMount){var s=t.return;try{n.componentDidMount()}catch(l){kc(t,s,l)}}var a=t.return;try{sl(t)}catch(l){kc(t,a,l)}break;case 5:var o=t.return;try{sl(t)}catch(l){kc(t,o,l)}}}catch(l){kc(t,t.return,l)}if(t===e){Ji=null;break}var i=t.sibling;if(null!==i){i.return=t.return,Ji=i;break}Ji=t.return}}var Nl,kl=Math.ceil,Sl=v.ReactCurrentDispatcher,Cl=v.ReactCurrentOwner,_l=v.ReactCurrentBatchConfig,El=0,Al=null,Ol=null,Tl=0,zl=0,Pl=ks(0),Il=0,Ll=null,Ml=0,ql=0,Rl=0,Dl=null,Fl=null,Bl=0,$l=1/0,Ul=null,Hl=!1,Wl=null,Ql=null,Vl=!1,Gl=null,Kl=0,Yl=0,Zl=null,Jl=-1,Xl=0;function ec(){return 0!==(6&El)?Ze():-1!==Jl?Jl:Jl=Ze()}function tc(e){return 0===(1&e.mode)?1:0!==(2&El)&&0!==Tl?Tl&-Tl:null!==pa.transition?(0===Xl&&(Xl=pt()),Xl):0!==(e=yt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function rc(e,t,r,n){if(50<Yl)throw Yl=0,Zl=null,Error(a(185));xt(e,r,n),0!==(2&El)&&e===Al||(e===Al&&(0===(2&El)&&(ql|=r),4===Il&&ic(e,Tl)),nc(e,n),1===r&&0===El&&0===(1&t.mode)&&($l=Ze()+500,Ds&&$s()))}function nc(e,t){var r=e.callbackNode;!function(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),i=1<<o,l=s[o];-1===l?0!==(i&r)&&0===(i&n)||(s[o]=mt(i,t)):l<=t&&(e.expiredLanes|=i),a&=~i}}(e,t);var n=ht(e,e===Al?Tl:0);if(0===n)null!==r&&Ge(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(null!=r&&Ge(r),1===t)0===e.tag?function(e){Ds=!0,Bs(e)}(lc.bind(null,e)):Bs(lc.bind(null,e)),os((function(){0===(6&El)&&$s()})),r=null;else{switch(vt(n)){case 1:r=Xe;break;case 4:r=et;break;case 16:default:r=tt;break;case 536870912:r=nt}r=Ac(r,sc.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function sc(e,t){if(Jl=-1,Xl=0,0!==(6&El))throw Error(a(327));var r=e.callbackNode;if(jc()&&e.callbackNode!==r)return null;var n=ht(e,e===Al?Tl:0);if(0===n)return null;if(0!==(30&n)||0!==(n&e.expiredLanes)||t)t=gc(e,n);else{t=n;var s=El;El|=2;var o=fc();for(Al===e&&Tl===t||(Ul=null,$l=Ze()+500,hc(e,t));;)try{bc();break}catch(l){mc(e,l)}Ca(),Sl.current=o,El=s,null!==Ol?t=0:(Al=null,Tl=0,t=Il)}if(0!==t){if(2===t&&(0!==(s=ft(e))&&(n=s,t=ac(e,s))),1===t)throw r=Ll,hc(e,0),ic(e,n),nc(e,Ze()),r;if(6===t)ic(e,n);else{if(s=e.current.alternate,0===(30&n)&&!function(e){for(var t=e;;){if(16384&t.flags){var r=t.updateQueue;if(null!==r&&null!==(r=r.stores))for(var n=0;n<r.length;n++){var s=r[n],a=s.getSnapshot;s=s.value;try{if(!on(a(),s))return!1}catch(i){return!1}}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(s)&&(2===(t=gc(e,n))&&(0!==(o=ft(e))&&(n=o,t=ac(e,o))),1===t))throw r=Ll,hc(e,0),ic(e,n),nc(e,Ze()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(a(345));case 2:case 5:wc(e,Fl,Ul);break;case 3:if(ic(e,n),(130023424&n)===n&&10<(t=Bl+500-Ze())){if(0!==ht(e,0))break;if(((s=e.suspendedLanes)&n)!==n){ec(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=ns(wc.bind(null,e,Fl,Ul),t);break}wc(e,Fl,Ul);break;case 4:if(ic(e,n),(4194240&n)===n)break;for(t=e.eventTimes,s=-1;0<n;){var i=31-ot(n);o=1<<i,(i=t[i])>s&&(s=i),n&=~o}if(n=s,10<(n=(120>(n=Ze()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*kl(n/1960))-n)){e.timeoutHandle=ns(wc.bind(null,e,Fl,Ul),n);break}wc(e,Fl,Ul);break;default:throw Error(a(329))}}}return nc(e,Ze()),e.callbackNode===r?sc.bind(null,e):null}function ac(e,t){var r=Dl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Fl,Fl=r,null!==t&&oc(t)),e}function oc(e){null===Fl?Fl=e:Fl.push.apply(Fl,e)}function ic(e,t){for(t&=~Rl,t&=~ql,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ot(t),n=1<<r;e[r]=-1,t&=~n}}function lc(e){if(0!==(6&El))throw Error(a(327));jc();var t=ht(e,0);if(0===(1&t))return nc(e,Ze()),null;var r=gc(e,t);if(0!==e.tag&&2===r){var n=ft(e);0!==n&&(t=n,r=ac(e,n))}if(1===r)throw r=Ll,hc(e,0),ic(e,t),nc(e,Ze()),r;if(6===r)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Fl,Ul),nc(e,Ze()),null}function cc(e,t){var r=El;El|=1;try{return e(t)}finally{0===(El=r)&&($l=Ze()+500,Ds&&$s())}}function dc(e){null!==Gl&&0===Gl.tag&&0===(6&El)&&jc();var t=El;El|=1;var r=_l.transition,n=yt;try{if(_l.transition=null,yt=1,e)return e()}finally{yt=n,_l.transition=r,0===(6&(El=t))&&$s()}}function uc(){zl=Pl.current,Ss(Pl)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,ss(r)),null!==Ol)for(r=Ol.return;null!==r;){var n=r;switch(ta(n),n.tag){case 1:null!==(n=n.type.childContextTypes)&&void 0!==n&&Ps();break;case 3:Ya(),Ss(As),Ss(Es),ro();break;case 5:Ja(n);break;case 4:Ya();break;case 13:case 19:Ss(Xa);break;case 10:_a(n.type._context);break;case 22:case 23:uc()}r=r.return}if(Al=e,Ol=e=Pc(e.current,null),Tl=zl=t,Il=0,Ll=null,Rl=ql=Ml=0,Fl=Dl=null,null!==Ta){for(t=0;t<Ta.length;t++)if(null!==(n=(r=Ta[t]).interleaved)){r.interleaved=null;var s=n.next,a=r.pending;if(null!==a){var o=a.next;a.next=s,n.next=o}r.pending=n}Ta=null}return e}function mc(e,t){for(;;){var r=Ol;try{if(Ca(),no.current=Jo,co){for(var n=oo.memoizedState;null!==n;){var s=n.queue;null!==s&&(s.pending=null),n=n.next}co=!1}if(ao=0,lo=io=oo=null,uo=!1,ho=0,Cl.current=null,null===r||null===r.return){Il=1,Ll=t,Ol=null;break}e:{var o=e,i=r.return,l=r,c=t;if(t=Tl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=l,h=u.tag;if(0===(1&u.mode)&&(0===h||11===h||15===h)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=gi(i);if(null!==f){f.flags&=-257,xi(f,i,l,0,t),1&f.mode&&pi(o,d,t),c=d;var p=(t=f).updateQueue;if(null===p){var g=new Set;g.add(c),t.updateQueue=g}else p.add(c);break e}if(0===(1&t)){pi(o,d,t),pc();break e}c=Error(a(426))}else if(sa&&1&l.mode){var x=gi(i);if(null!==x){0===(65536&x.flags)&&(x.flags|=256),xi(x,i,l,0,t),fa(ci(c,l));break e}}o=c=ci(c,l),4!==Il&&(Il=2),null===Dl?Dl=[o]:Dl.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ba(o,mi(0,c,t));break e;case 1:l=c;var b=o.type,y=o.stateNode;if(0===(128&o.flags)&&("function"===typeof b.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===Ql||!Ql.has(y)))){o.flags|=65536,t&=-t,o.lanes|=t,Ba(o,fi(o,l,t));break e}}o=o.return}while(null!==o)}vc(r)}catch(v){t=v,Ol===r&&null!==r&&(Ol=r=r.return);continue}break}}function fc(){var e=Sl.current;return Sl.current=Jo,null===e?Jo:e}function pc(){0!==Il&&3!==Il&&2!==Il||(Il=4),null===Al||0===(268435455&Ml)&&0===(268435455&ql)||ic(Al,Tl)}function gc(e,t){var r=El;El|=2;var n=fc();for(Al===e&&Tl===t||(Ul=null,hc(e,t));;)try{xc();break}catch(s){mc(e,s)}if(Ca(),El=r,Sl.current=n,null!==Ol)throw Error(a(261));return Al=null,Tl=0,Il}function xc(){for(;null!==Ol;)yc(Ol)}function bc(){for(;null!==Ol&&!Ke();)yc(Ol)}function yc(e){var t=Nl(e.alternate,e,zl);e.memoizedProps=e.pendingProps,null===t?vc(e):Ol=t,Cl.current=null}function vc(e){var t=e;do{var r=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(r=Vi(r,t,zl)))return void(Ol=r)}else{if(null!==(r=Gi(r,t)))return r.flags&=32767,void(Ol=r);if(null===e)return Il=6,void(Ol=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ol=t);Ol=t=e}while(null!==t);0===Il&&(Il=5)}function wc(e,t,r){var n=yt,s=_l.transition;try{_l.transition=null,yt=1,function(e,t,r,n){do{jc()}while(null!==Gl);if(0!==(6&El))throw Error(a(327));r=e.finishedWork;var s=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(function(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-ot(r),a=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~a}}(e,o),e===Al&&(Ol=Al=null,Tl=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||Vl||(Vl=!0,Ac(tt,(function(){return jc(),null}))),o=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||o){o=_l.transition,_l.transition=null;var i=yt;yt=1;var l=El;El|=4,Cl.current=null,function(e,t){if(es=Ht,mn(e=hn())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(n&&0!==n.rangeCount){r=n.anchorNode;var s=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch(w){r=null;break e}var i=0,l=-1,c=-1,d=0,u=0,h=e,m=null;t:for(;;){for(var f;h!==r||0!==s&&3!==h.nodeType||(l=i+s),h!==o||0!==n&&3!==h.nodeType||(c=i+n),3===h.nodeType&&(i+=h.nodeValue.length),null!==(f=h.firstChild);)m=h,h=f;for(;;){if(h===e)break t;if(m===r&&++d===s&&(l=i),m===o&&++u===n&&(c=i),null!==(f=h.nextSibling))break;m=(h=m).parentNode}h=f}r=-1===l||-1===c?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(ts={focusedElem:e,selectionRange:r},Ht=!1,Ji=t;null!==Ji;)if(e=(t=Ji).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ji=e;else for(;null!==Ji;){t=Ji;try{var p=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var g=p.memoizedProps,x=p.memoizedState,b=t.stateNode,y=b.getSnapshotBeforeUpdate(t.elementType===t.type?g:ri(t.type,g),x);b.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var v=t.stateNode.containerInfo;1===v.nodeType?v.textContent="":9===v.nodeType&&v.documentElement&&v.removeChild(v.documentElement);break;default:throw Error(a(163))}}catch(w){kc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Ji=e;break}Ji=t.return}p=tl,tl=!1}(e,r),gl(r,e),fn(ts),Ht=!!es,ts=es=null,e.current=r,bl(r,e,s),Ye(),El=l,yt=i,_l.transition=o}else e.current=r;if(Vl&&(Vl=!1,Gl=e,Kl=s),o=e.pendingLanes,0===o&&(Ql=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(st,e,void 0,128===(128&e.current.flags))}catch(t){}}(r.stateNode),nc(e,Ze()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Hl)throw Hl=!1,e=Wl,Wl=null,e;0!==(1&Kl)&&0!==e.tag&&jc(),o=e.pendingLanes,0!==(1&o)?e===Zl?Yl++:(Yl=0,Zl=e):Yl=0,$s()}(e,t,r,n)}finally{_l.transition=s,yt=n}return null}function jc(){if(null!==Gl){var e=vt(Kl),t=_l.transition,r=yt;try{if(_l.transition=null,yt=16>e?16:e,null===Gl)var n=!1;else{if(e=Gl,Gl=null,Kl=0,0!==(6&El))throw Error(a(331));var s=El;for(El|=4,Ji=e.current;null!==Ji;){var o=Ji,i=o.child;if(0!==(16&Ji.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var d=l[c];for(Ji=d;null!==Ji;){var u=Ji;switch(u.tag){case 0:case 11:case 15:rl(8,u,o)}var h=u.child;if(null!==h)h.return=u,Ji=h;else for(;null!==Ji;){var m=(u=Ji).sibling,f=u.return;if(al(u),u===d){Ji=null;break}if(null!==m){m.return=f,Ji=m;break}Ji=f}}}var p=o.alternate;if(null!==p){var g=p.child;if(null!==g){p.child=null;do{var x=g.sibling;g.sibling=null,g=x}while(null!==g)}}Ji=o}}if(0!==(2064&o.subtreeFlags)&&null!==i)i.return=o,Ji=i;else e:for(;null!==Ji;){if(0!==(2048&(o=Ji).flags))switch(o.tag){case 0:case 11:case 15:rl(9,o,o.return)}var b=o.sibling;if(null!==b){b.return=o.return,Ji=b;break e}Ji=o.return}}var y=e.current;for(Ji=y;null!==Ji;){var v=(i=Ji).child;if(0!==(2064&i.subtreeFlags)&&null!==v)v.return=i,Ji=v;else e:for(i=y;null!==Ji;){if(0!==(2048&(l=Ji).flags))try{switch(l.tag){case 0:case 11:case 15:nl(9,l)}}catch(j){kc(l,l.return,j)}if(l===i){Ji=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Ji=w;break e}Ji=l.return}}if(El=s,$s(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(st,e)}catch(j){}n=!0}return n}finally{yt=r,_l.transition=t}}return!1}function Nc(e,t,r){e=Da(e,t=mi(0,t=ci(r,t),1),1),t=ec(),null!==e&&(xt(e,1,t),nc(e,t))}function kc(e,t,r){if(3===e.tag)Nc(e,e,r);else for(;null!==t;){if(3===t.tag){Nc(t,e,r);break}if(1===t.tag){var n=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===Ql||!Ql.has(n))){t=Da(t,e=fi(t,e=ci(r,e),1),1),e=ec(),null!==t&&(xt(t,1,e),nc(t,e));break}}t=t.return}}function Sc(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&r,Al===e&&(Tl&r)===r&&(4===Il||3===Il&&(130023424&Tl)===Tl&&500>Ze()-Bl?hc(e,0):Rl|=r),nc(e,t)}function Cc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var r=ec();null!==(e=Ia(e,t))&&(xt(e,t,r),nc(e,r))}function _c(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),Cc(e,r)}function Ec(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;null!==s&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(a(314))}null!==n&&n.delete(t),Cc(e,r)}function Ac(e,t){return Ve(e,t)}function Oc(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tc(e,t,r,n){return new Oc(e,t,r,n)}function zc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pc(e,t){var r=e.alternate;return null===r?((r=Tc(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ic(e,t,r,n,s,o){var i=2;if(n=e,"function"===typeof e)zc(e)&&(i=1);else if("string"===typeof e)i=5;else e:switch(e){case N:return Lc(r.children,s,o,t);case k:i=8,s|=8;break;case S:return(e=Tc(12,r,t,2|s)).elementType=S,e.lanes=o,e;case A:return(e=Tc(13,r,t,s)).elementType=A,e.lanes=o,e;case O:return(e=Tc(19,r,t,s)).elementType=O,e.lanes=o,e;case P:return Mc(r,s,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:i=10;break e;case _:i=9;break e;case E:i=11;break e;case T:i=14;break e;case z:i=16,n=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Tc(i,r,t,s)).elementType=e,t.type=n,t.lanes=o,t}function Lc(e,t,r,n){return(e=Tc(7,e,n,t)).lanes=r,e}function Mc(e,t,r,n){return(e=Tc(22,e,n,t)).elementType=P,e.lanes=r,e.stateNode={isHidden:!1},e}function qc(e,t,r){return(e=Tc(6,e,null,t)).lanes=r,e}function Rc(e,t,r){return(t=Tc(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Dc(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Fc(e,t,r,n,s,a,o,i,l){return e=new Dc(e,t,r,i,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Tc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ma(a),e}function Bc(e){if(!e)return _s;e:{if($e(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(zs(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var r=e.type;if(zs(r))return Ls(e,r,t)}return t}function $c(e,t,r,n,s,a,o,i,l){return(e=Fc(r,n,!0,e,0,a,0,i,l)).context=Bc(null),r=e.current,(a=Ra(n=ec(),s=tc(r))).callback=void 0!==t&&null!==t?t:null,Da(r,a,s),e.current.lanes=s,xt(e,s,n),nc(e,n),e}function Uc(e,t,r,n){var s=t.current,a=ec(),o=tc(s);return r=Bc(r),null===t.context?t.context=r:t.pendingContext=r,(t=Ra(a,o)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),null!==(e=Da(s,t,o))&&(rc(e,s,o,a),Fa(e,s,o)),o}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function Qc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}Nl=function(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps||As.current)yi=!0;else{if(0===(e.lanes&r)&&0===(128&t.flags))return yi=!1,function(e,t,r){switch(t.tag){case 3:Ai(t),ma();break;case 5:Za(t);break;case 1:zs(t.type)&&Ms(t);break;case 4:Ka(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;Cs(ja,n._currentValue),n._currentValue=s;break;case 13:if(null!==(n=t.memoizedState))return null!==n.dehydrated?(Cs(Xa,1&Xa.current),t.flags|=128,null):0!==(r&t.child.childLanes)?qi(e,t,r):(Cs(Xa,1&Xa.current),null!==(e=Hi(e,t,r))?e.sibling:null);Cs(Xa,1&Xa.current);break;case 19:if(n=0!==(r&t.childLanes),0!==(128&e.flags)){if(n)return $i(e,t,r);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),Cs(Xa,Xa.current),n)break;return null;case 22:case 23:return t.lanes=0,ki(e,t,r)}return Hi(e,t,r)}(e,t,r);yi=0!==(131072&e.flags)}else yi=!1,sa&&0!==(1048576&t.flags)&&Xs(t,Qs,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Ui(e,t),e=t.pendingProps;var s=Ts(t,Es.current);Aa(t,r),s=go(null,t,n,e,s,r);var o=xo();return t.flags|=1,"object"===typeof s&&null!==s&&"function"===typeof s.render&&void 0===s.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,zs(n)?(o=!0,Ms(t)):o=!1,t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,Ma(t),s.updater=si,t.stateNode=s,s._reactInternals=t,li(t,n,e,r),t=Ei(null,t,n,!0,o,r)):(t.tag=0,sa&&o&&ea(t),vi(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Ui(e,t),e=t.pendingProps,n=(s=n._init)(n._payload),t.type=n,s=t.tag=function(e){if("function"===typeof e)return zc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===E)return 11;if(e===T)return 14}return 2}(n),e=ri(n,e),s){case 0:t=Ci(null,t,n,e,r);break e;case 1:t=_i(null,t,n,e,r);break e;case 11:t=wi(null,t,n,e,r);break e;case 14:t=ji(null,t,n,ri(n.type,e),r);break e}throw Error(a(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,Ci(e,t,n,s=t.elementType===n?s:ri(n,s),r);case 1:return n=t.type,s=t.pendingProps,_i(e,t,n,s=t.elementType===n?s:ri(n,s),r);case 3:e:{if(Ai(t),null===e)throw Error(a(387));n=t.pendingProps,s=(o=t.memoizedState).element,qa(e,t),$a(t,n,null,r);var i=t.memoizedState;if(n=i.element,o.isDehydrated){if(o={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Oi(e,t,n,r,s=ci(Error(a(423)),t));break e}if(n!==s){t=Oi(e,t,n,r,s=ci(Error(a(424)),t));break e}for(na=cs(t.stateNode.containerInfo.firstChild),ra=t,sa=!0,aa=null,r=wa(t,null,n,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(ma(),n===s){t=Hi(e,t,r);break e}vi(e,t,n,r)}t=t.child}return t;case 5:return Za(t),null===e&&ca(t),n=t.type,s=t.pendingProps,o=null!==e?e.memoizedProps:null,i=s.children,rs(n,s)?i=null:null!==o&&rs(n,o)&&(t.flags|=32),Si(e,t),vi(e,t,i,r),t.child;case 6:return null===e&&ca(t),null;case 13:return qi(e,t,r);case 4:return Ka(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=va(t,null,n,r):vi(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,wi(e,t,n,s=t.elementType===n?s:ri(n,s),r);case 7:return vi(e,t,t.pendingProps,r),t.child;case 8:case 12:return vi(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,o=t.memoizedProps,i=s.value,Cs(ja,n._currentValue),n._currentValue=i,null!==o)if(on(o.value,i)){if(o.children===s.children&&!As.current){t=Hi(e,t,r);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){i=o.child;for(var c=l.firstContext;null!==c;){if(c.context===n){if(1===o.tag){(c=Ra(-1,r&-r)).tag=2;var d=o.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}o.lanes|=r,null!==(c=o.alternate)&&(c.lanes|=r),Ea(o.return,r,t),l.lanes|=r;break}c=c.next}}else if(10===o.tag)i=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(i=o.return))throw Error(a(341));i.lanes|=r,null!==(l=i.alternate)&&(l.lanes|=r),Ea(i,r,t),i=o.sibling}else i=o.child;if(null!==i)i.return=o;else for(i=o;null!==i;){if(i===t){i=null;break}if(null!==(o=i.sibling)){o.return=i.return,i=o;break}i=i.return}o=i}vi(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,Aa(t,r),n=n(s=Oa(s)),t.flags|=1,vi(e,t,n,r),t.child;case 14:return s=ri(n=t.type,t.pendingProps),ji(e,t,n,s=ri(n.type,s),r);case 15:return Ni(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:ri(n,s),Ui(e,t),t.tag=1,zs(n)?(e=!0,Ms(t)):e=!1,Aa(t,r),oi(t,n,s),li(t,n,s,r),Ei(null,t,n,!0,e,r);case 19:return $i(e,t,r);case 22:return ki(e,t,r)}throw Error(a(156,t.tag))};var Vc="function"===typeof reportError?reportError:function(e){console.error(e)};function Gc(e){this._internalRoot=e}function Kc(e){this._internalRoot=e}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function Xc(e,t,r,n,s){var a=r._reactRootContainer;if(a){var o=a;if("function"===typeof s){var i=s;s=function(){var e=Hc(o);i.call(e)}}Uc(t,o,e,s)}else o=function(e,t,r,n,s){if(s){if("function"===typeof n){var a=n;n=function(){var e=Hc(o);a.call(e)}}var o=$c(t,n,e,0,null,!1,0,"",Jc);return e._reactRootContainer=o,e[fs]=o.current,$n(8===e.nodeType?e.parentNode:e),dc(),o}for(;s=e.lastChild;)e.removeChild(s);if("function"===typeof n){var i=n;n=function(){var e=Hc(l);i.call(e)}}var l=Fc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=l,e[fs]=l.current,$n(8===e.nodeType?e.parentNode:e),dc((function(){Uc(t,l,r,n)})),l}(r,t,e,s,n);return Hc(o)}Kc.prototype.render=Gc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Uc(e,t,null,null)},Kc.prototype.unmount=Gc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc((function(){Uc(null,e,null,null)})),t[fs]=null}},Kc.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Pt.length&&0!==t&&t<Pt[r].priority;r++);Pt.splice(r,0,e),0===r&&qt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ut(t.pendingLanes);0!==r&&(bt(t,1|r),nc(t,Ze()),0===(6&El)&&($l=Ze()+500,$s()))}break;case 13:dc((function(){var t=Ia(e,1);if(null!==t){var r=ec();rc(t,e,1,r)}})),Qc(e,1)}},jt=function(e){if(13===e.tag){var t=Ia(e,134217728);if(null!==t)rc(t,e,134217728,ec());Qc(e,134217728)}},Nt=function(e){if(13===e.tag){var t=tc(e),r=Ia(e,t);if(null!==r)rc(r,e,t,ec());Qc(e,t)}},kt=function(){return yt},St=function(e,t){var r=yt;try{return yt=e,t()}finally{yt=r}},je=function(e,t,r){switch(t){case"input":if(J(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=ws(n);if(!s)throw Error(a(90));V(n),J(n,s)}}}break;case"textarea":ae(e,r);break;case"select":null!=(t=r.value)&&re(e,!!r.multiple,t,!1)}},Ee=cc,Ae=dc;var ed={usingClientEntryPoint:!1,Events:[ys,vs,ws,Ce,_e,cc]},td={findFiberByHostInstance:bs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rd={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:v.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var nd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nd.isDisabled&&nd.supportsFiber)try{st=nd.inject(rd),at=nd}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ed,t.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(t))throw Error(a(200));return function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:j,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}(e,t,null,r)},t.createRoot=function(e,t){if(!Yc(e))throw Error(a(299));var r=!1,n="",s=Vc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=Fc(e,1,!1,null,0,r,0,n,s),e[fs]=t.current,$n(8===e.nodeType?e.parentNode:e),new Gc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,r){if(!Zc(t))throw Error(a(200));return Xc(null,e,t,!0,r)},t.hydrateRoot=function(e,t,r){if(!Yc(e))throw Error(a(405));var n=null!=r&&r.hydratedSources||null,s=!1,o="",i=Vc;if(null!==r&&void 0!==r&&(!0===r.unstable_strictMode&&(s=!0),void 0!==r.identifierPrefix&&(o=r.identifierPrefix),void 0!==r.onRecoverableError&&(i=r.onRecoverableError)),t=$c(t,null,e,1,null!=r?r:null,s,0,o,i),e[fs]=t.current,$n(e),n)for(e=0;e<n.length;e++)s=(s=(r=n[e])._getVersion)(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new Kc(t)},t.render=function(e,t,r){if(!Zc(t))throw Error(a(200));return Xc(null,e,t,!1,r)},t.unmountComponentAtNode=function(e){if(!Zc(e))throw Error(a(40));return!!e._reactRootContainer&&(dc((function(){Xc(null,null,e,!1,(function(){e._reactRootContainer=null,e[fs]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Zc(r))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Xc(e,t,r,!1,n)},t.version="18.3.1-next-f1338f8080-20240426"},2740:e=>{"use strict";e.exports=function(e,t,r,n,s,a,o,i){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[r,n,s,a,o,i],d=0;(l=new Error(t.replace(/%s/g,(function(){return c[d++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}},2761:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},2777:(e,t,r)=>{var n=r(5193),s=r(2761),a=Object.prototype,o=a.hasOwnProperty,i=a.propertyIsEnumerable,l=n(function(){return arguments}())?n:function(e){return s(e)&&o.call(e,"callee")&&!i.call(e,"callee")};e.exports=l},2823:function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),s=this&&this.__assign||function(){return s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},s.apply(this,arguments)},a=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),s=0;for(t=0;t<r;t++)for(var a=arguments[t],o=0,i=a.length;o<i;o++,s++)n[s]=a[o];return n},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=o(r(5043)),l=o(r(7950)),c=o(r(9853)),d=o(r(4175)),u=function(e){function t(t){var r=e.call(this,t)||this;r.dirtyProps=["modules","formats","bounds","theme","children"],r.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],r.state={generation:0},r.selection=null,r.onEditorChange=function(e,t,n,s){var a,o,i,l;"text-change"===e?null===(o=(a=r).onEditorChangeText)||void 0===o||o.call(a,r.editor.root.innerHTML,t,s,r.unprivilegedEditor):"selection-change"===e&&(null===(l=(i=r).onEditorChangeSelection)||void 0===l||l.call(i,t,s,r.unprivilegedEditor))};var n=r.isControlled()?t.value:t.defaultValue;return r.value=null!==n&&void 0!==n?n:"",r}return n(t,e),t.prototype.validateProps=function(e){var t;if(i.default.Children.count(e.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(i.default.Children.count(e.children)&&"textarea"===(null===(t=i.default.Children.only(e.children))||void 0===t?void 0:t.type))throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.");if(this.lastDeltaChangeSet&&e.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},t.prototype.shouldComponentUpdate=function(e,t){var r,n=this;if(this.validateProps(e),!this.editor||this.state.generation!==t.generation)return!0;if("value"in e){var s=this.getEditorContents(),o=null!==(r=e.value)&&void 0!==r?r:"";this.isEqualValue(o,s)||this.setEditorContents(this.editor,o)}return e.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,e.readOnly),a(this.cleanProps,this.dirtyProps).some((function(t){return!c.default(e[t],n.props[t])}))},t.prototype.shouldComponentRegenerate=function(e){var t=this;return this.dirtyProps.some((function(r){return!c.default(e[r],t.props[r])}))},t.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},t.prototype.componentWillUnmount=function(){this.destroyEditor()},t.prototype.componentDidUpdate=function(e,t){var r=this;if(this.editor&&this.shouldComponentRegenerate(e)){var n=this.editor.getContents(),s=this.editor.getSelection();this.regenerationSnapshot={delta:n,selection:s},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==t.generation){var a=this.regenerationSnapshot,o=(n=a.delta,a.selection);delete this.regenerationSnapshot,this.instantiateEditor();var i=this.editor;i.setContents(n),h((function(){return r.setEditorSelection(i,o)}))}},t.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},t.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},t.prototype.isControlled=function(){return"value"in this.props},t.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},t.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},t.prototype.createEditor=function(e,t){var r=new d.default(e,t);return null!=t.tabIndex&&this.setEditorTabIndex(r,t.tabIndex),this.hookEditor(r),r},t.prototype.hookEditor=function(e){this.unprivilegedEditor=this.makeUnprivilegedEditor(e),e.on("editor-change",this.onEditorChange)},t.prototype.unhookEditor=function(e){e.off("editor-change",this.onEditorChange)},t.prototype.getEditorContents=function(){return this.value},t.prototype.getEditorSelection=function(){return this.selection},t.prototype.isDelta=function(e){return e&&e.ops},t.prototype.isEqualValue=function(e,t){return this.isDelta(e)&&this.isDelta(t)?c.default(e.ops,t.ops):c.default(e,t)},t.prototype.setEditorContents=function(e,t){var r=this;this.value=t;var n=this.getEditorSelection();"string"===typeof t?e.setContents(e.clipboard.convert(t)):e.setContents(t),h((function(){return r.setEditorSelection(e,n)}))},t.prototype.setEditorSelection=function(e,t){if(this.selection=t,t){var r=e.getLength();t.index=Math.max(0,Math.min(t.index,r-1)),t.length=Math.max(0,Math.min(t.length,r-1-t.index)),e.setSelection(t)}},t.prototype.setEditorTabIndex=function(e,t){var r,n;(null===(n=null===(r=e)||void 0===r?void 0:r.scroll)||void 0===n?void 0:n.domNode)&&(e.scroll.domNode.tabIndex=t)},t.prototype.setEditorReadOnly=function(e,t){t?e.disable():e.enable()},t.prototype.makeUnprivilegedEditor=function(e){var t=e;return{getHTML:function(){return t.root.innerHTML},getLength:t.getLength.bind(t),getText:t.getText.bind(t),getContents:t.getContents.bind(t),getSelection:t.getSelection.bind(t),getBounds:t.getBounds.bind(t)}},t.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var e=l.default.findDOMNode(this.editingArea);if(!e)throw new Error("Cannot find element for editing area");if(3===e.nodeType)throw new Error("Editing area cannot be a text node");return e},t.prototype.renderEditingArea=function(){var e=this,t=this.props,r=t.children,n=t.preserveWhitespace,a={key:this.state.generation,ref:function(t){e.editingArea=t}};return i.default.Children.count(r)?i.default.cloneElement(i.default.Children.only(r),a):n?i.default.createElement("pre",s({},a)):i.default.createElement("div",s({},a))},t.prototype.render=function(){var e;return i.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(e=this.props.className,null!==e&&void 0!==e?e:""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},t.prototype.onEditorChangeText=function(e,t,r,n){var s,a;if(this.editor){var o=this.isDelta(this.value)?n.getContents():n.getHTML();o!==this.getEditorContents()&&(this.lastDeltaChangeSet=t,this.value=o,null===(a=(s=this.props).onChange)||void 0===a||a.call(s,e,t,r,n))}},t.prototype.onEditorChangeSelection=function(e,t,r){var n,s,a,o,i,l;if(this.editor){var d=this.getEditorSelection(),u=!d&&e,h=d&&!e;c.default(e,d)||(this.selection=e,null===(s=(n=this.props).onChangeSelection)||void 0===s||s.call(n,e,t,r),u?null===(o=(a=this.props).onFocus)||void 0===o||o.call(a,e,t,r):h&&(null===(l=(i=this.props).onBlur)||void 0===l||l.call(i,d,t,r)))}},t.prototype.focus=function(){this.editor&&this.editor.focus()},t.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},t.displayName="React Quill",t.Quill=d.default,t.defaultProps={theme:"snow",modules:{},readOnly:!1},t}(i.default.Component);function h(e){Promise.resolve().then(e)}e.exports=u},2929:(e,t,r)=>{var n=r(6552).Uint8Array;e.exports=n},3028:e=>{e.exports=function(e,t){return function(r){return e(t(r))}}},3204:(e,t,r)=>{var n=r(3343),s=r(2777),a=r(4052),o=r(4543),i=r(9194),l=r(1268),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var r=a(e),d=!r&&s(e),u=!r&&!d&&o(e),h=!r&&!d&&!u&&l(e),m=r||d||u||h,f=m?n(e.length,String):[],p=f.length;for(var g in e)!t&&!c.call(e,g)||m&&("length"==g||u&&("offset"==g||"parent"==g)||h&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||i(g,p))||f.push(g);return f}},3211:e=>{e.exports=function(e,t){return e===t||e!==e&&t!==t}},3218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},3343:e=>{e.exports=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}},3440:(e,t,r)=>{var n=r(6552)["__core-js_shared__"];e.exports=n},3668:(e,t,r)=>{var n=r(8902),s=r(2587),a=r(8114);e.exports=function(e,t,r,o,i,l){var c=1&r,d=e.length,u=t.length;if(d!=u&&!(c&&u>d))return!1;var h=l.get(e),m=l.get(t);if(h&&m)return h==t&&m==e;var f=-1,p=!0,g=2&r?new n:void 0;for(l.set(e,t),l.set(t,e);++f<d;){var x=e[f],b=t[f];if(o)var y=c?o(b,x,f,t,e,l):o(x,b,f,e,t,l);if(void 0!==y){if(y)continue;p=!1;break}if(g){if(!s(t,(function(e,t){if(!a(g,t)&&(x===e||i(x,e,r,o,l)))return g.push(t)}))){p=!1;break}}else if(x!==b&&!i(x,b,r,o,l)){p=!1;break}}return l.delete(e),l.delete(t),p}},3713:(e,t,r)=>{var n=r(6140),s=r(1143),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return s(e);var t=[];for(var r in Object(e))a.call(e,r)&&"constructor"!=r&&t.push(r);return t}},3892:e=>{e.exports=function(e){return this.__data__.has(e)}},4052:e=>{var t=Array.isArray;e.exports=t},4160:e=>{e.exports=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}},4175:function(e){var t;"undefined"!==typeof self&&self,t=function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=109)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(17),s=r(18),a=r(19),o=r(45),i=r(46),l=r(47),c=r(48),d=r(49),u=r(12),h=r(32),m=r(33),f=r(31),p=r(1),g={Scope:p.Scope,create:p.create,find:p.find,query:p.query,register:p.register,Container:n.default,Format:s.default,Leaf:a.default,Embed:c.default,Scroll:o.default,Block:l.default,Inline:i.default,Text:d.default,Attributor:{Attribute:u.default,Class:h.default,Style:m.default,Store:f.default}};t.default=g},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){function t(t){var r=this;return t="[Parchment] "+t,(r=e.call(this,t)||this).message=t,r.name=r.constructor.name,r}return n(t,e),t}(Error);t.ParchmentError=s;var a,o={},i={},l={},c={};function d(e,t){var r;if(void 0===t&&(t=a.ANY),"string"===typeof e)r=c[e]||o[e];else if(e instanceof Text||e.nodeType===Node.TEXT_NODE)r=c.text;else if("number"===typeof e)e&a.LEVEL&a.BLOCK?r=c.block:e&a.LEVEL&a.INLINE&&(r=c.inline);else if(e instanceof HTMLElement){var n=(e.getAttribute("class")||"").split(/\s+/);for(var s in n)if(r=i[n[s]])break;r=r||l[e.tagName]}return null==r?null:t&a.LEVEL&r.scope&&t&a.TYPE&r.scope?r:null}t.DATA_KEY="__blot",function(e){e[e.TYPE=3]="TYPE",e[e.LEVEL=12]="LEVEL",e[e.ATTRIBUTE=13]="ATTRIBUTE",e[e.BLOT=14]="BLOT",e[e.INLINE=7]="INLINE",e[e.BLOCK=11]="BLOCK",e[e.BLOCK_BLOT=10]="BLOCK_BLOT",e[e.INLINE_BLOT=6]="INLINE_BLOT",e[e.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",e[e.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",e[e.ANY=15]="ANY"}(a=t.Scope||(t.Scope={})),t.create=function(e,t){var r=d(e);if(null==r)throw new s("Unable to create "+e+" blot");var n=r,a=e instanceof Node||e.nodeType===Node.TEXT_NODE?e:n.create(t);return new n(a,t)},t.find=function e(r,n){return void 0===n&&(n=!1),null==r?null:null!=r[t.DATA_KEY]?r[t.DATA_KEY].blot:n?e(r.parentNode,n):null},t.query=d,t.register=function e(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(t.length>1)return t.map((function(t){return e(t)}));var n=t[0];if("string"!==typeof n.blotName&&"string"!==typeof n.attrName)throw new s("Invalid definition");if("abstract"===n.blotName)throw new s("Cannot register abstract class");return c[n.blotName||n.attrName]=n,"string"===typeof n.keyName?o[n.keyName]=n:(null!=n.className&&(i[n.className]=n),null!=n.tagName&&(Array.isArray(n.tagName)?n.tagName=n.tagName.map((function(e){return e.toUpperCase()})):n.tagName=n.tagName.toUpperCase(),(Array.isArray(n.tagName)?n.tagName:[n.tagName]).forEach((function(e){null!=l[e]&&null!=n.className||(l[e]=n)})))),n}},function(e,t,r){var n=r(51),s=r(11),a=r(3),o=r(20),i=String.fromCharCode(0),l=function(e){Array.isArray(e)?this.ops=e:null!=e&&Array.isArray(e.ops)?this.ops=e.ops:this.ops=[]};l.prototype.insert=function(e,t){var r={};return 0===e.length?this:(r.insert=e,null!=t&&"object"===typeof t&&Object.keys(t).length>0&&(r.attributes=t),this.push(r))},l.prototype.delete=function(e){return e<=0?this:this.push({delete:e})},l.prototype.retain=function(e,t){if(e<=0)return this;var r={retain:e};return null!=t&&"object"===typeof t&&Object.keys(t).length>0&&(r.attributes=t),this.push(r)},l.prototype.push=function(e){var t=this.ops.length,r=this.ops[t-1];if(e=a(!0,{},e),"object"===typeof r){if("number"===typeof e.delete&&"number"===typeof r.delete)return this.ops[t-1]={delete:r.delete+e.delete},this;if("number"===typeof r.delete&&null!=e.insert&&(t-=1,"object"!==typeof(r=this.ops[t-1])))return this.ops.unshift(e),this;if(s(e.attributes,r.attributes)){if("string"===typeof e.insert&&"string"===typeof r.insert)return this.ops[t-1]={insert:r.insert+e.insert},"object"===typeof e.attributes&&(this.ops[t-1].attributes=e.attributes),this;if("number"===typeof e.retain&&"number"===typeof r.retain)return this.ops[t-1]={retain:r.retain+e.retain},"object"===typeof e.attributes&&(this.ops[t-1].attributes=e.attributes),this}}return t===this.ops.length?this.ops.push(e):this.ops.splice(t,0,e),this},l.prototype.chop=function(){var e=this.ops[this.ops.length-1];return e&&e.retain&&!e.attributes&&this.ops.pop(),this},l.prototype.filter=function(e){return this.ops.filter(e)},l.prototype.forEach=function(e){this.ops.forEach(e)},l.prototype.map=function(e){return this.ops.map(e)},l.prototype.partition=function(e){var t=[],r=[];return this.forEach((function(n){(e(n)?t:r).push(n)})),[t,r]},l.prototype.reduce=function(e,t){return this.ops.reduce(e,t)},l.prototype.changeLength=function(){return this.reduce((function(e,t){return t.insert?e+o.length(t):t.delete?e-t.delete:e}),0)},l.prototype.length=function(){return this.reduce((function(e,t){return e+o.length(t)}),0)},l.prototype.slice=function(e,t){e=e||0,"number"!==typeof t&&(t=1/0);for(var r=[],n=o.iterator(this.ops),s=0;s<t&&n.hasNext();){var a;s<e?a=n.next(e-s):(a=n.next(t-s),r.push(a)),s+=o.length(a)}return new l(r)},l.prototype.compose=function(e){var t=o.iterator(this.ops),r=o.iterator(e.ops),n=[],a=r.peek();if(null!=a&&"number"===typeof a.retain&&null==a.attributes){for(var i=a.retain;"insert"===t.peekType()&&t.peekLength()<=i;)i-=t.peekLength(),n.push(t.next());a.retain-i>0&&r.next(a.retain-i)}for(var c=new l(n);t.hasNext()||r.hasNext();)if("insert"===r.peekType())c.push(r.next());else if("delete"===t.peekType())c.push(t.next());else{var d=Math.min(t.peekLength(),r.peekLength()),u=t.next(d),h=r.next(d);if("number"===typeof h.retain){var m={};"number"===typeof u.retain?m.retain=d:m.insert=u.insert;var f=o.attributes.compose(u.attributes,h.attributes,"number"===typeof u.retain);if(f&&(m.attributes=f),c.push(m),!r.hasNext()&&s(c.ops[c.ops.length-1],m)){var p=new l(t.rest());return c.concat(p).chop()}}else"number"===typeof h.delete&&"number"===typeof u.retain&&c.push(h)}return c.chop()},l.prototype.concat=function(e){var t=new l(this.ops.slice());return e.ops.length>0&&(t.push(e.ops[0]),t.ops=t.ops.concat(e.ops.slice(1))),t},l.prototype.diff=function(e,t){if(this.ops===e.ops)return new l;var r=[this,e].map((function(t){return t.map((function(r){if(null!=r.insert)return"string"===typeof r.insert?r.insert:i;throw new Error("diff() called "+(t===e?"on":"with")+" non-document")})).join("")})),a=new l,c=n(r[0],r[1],t),d=o.iterator(this.ops),u=o.iterator(e.ops);return c.forEach((function(e){for(var t=e[1].length;t>0;){var r=0;switch(e[0]){case n.INSERT:r=Math.min(u.peekLength(),t),a.push(u.next(r));break;case n.DELETE:r=Math.min(t,d.peekLength()),d.next(r),a.delete(r);break;case n.EQUAL:r=Math.min(d.peekLength(),u.peekLength(),t);var i=d.next(r),l=u.next(r);s(i.insert,l.insert)?a.retain(r,o.attributes.diff(i.attributes,l.attributes)):a.push(l).delete(r)}t-=r}})),a.chop()},l.prototype.eachLine=function(e,t){t=t||"\n";for(var r=o.iterator(this.ops),n=new l,s=0;r.hasNext();){if("insert"!==r.peekType())return;var a=r.peek(),i=o.length(a)-r.peekLength(),c="string"===typeof a.insert?a.insert.indexOf(t,i)-i:-1;if(c<0)n.push(r.next());else if(c>0)n.push(r.next(c));else{if(!1===e(n,r.next(1).attributes||{},s))return;s+=1,n=new l}}n.length()>0&&e(n,{},s)},l.prototype.transform=function(e,t){if(t=!!t,"number"===typeof e)return this.transformPosition(e,t);for(var r=o.iterator(this.ops),n=o.iterator(e.ops),s=new l;r.hasNext()||n.hasNext();)if("insert"!==r.peekType()||!t&&"insert"===n.peekType())if("insert"===n.peekType())s.push(n.next());else{var a=Math.min(r.peekLength(),n.peekLength()),i=r.next(a),c=n.next(a);if(i.delete)continue;c.delete?s.push(c):s.retain(a,o.attributes.transform(i.attributes,c.attributes,t))}else s.retain(o.length(r.next()));return s.chop()},l.prototype.transformPosition=function(e,t){t=!!t;for(var r=o.iterator(this.ops),n=0;r.hasNext()&&n<=e;){var s=r.peekLength(),a=r.peekType();r.next(),"delete"!==a?("insert"===a&&(n<e||!t)&&(e+=s),n+=s):e-=Math.min(s,e-n)}return e},e.exports=l},function(e,t){"use strict";var r=Object.prototype.hasOwnProperty,n=Object.prototype.toString,s=Object.defineProperty,a=Object.getOwnPropertyDescriptor,o=function(e){return"function"===typeof Array.isArray?Array.isArray(e):"[object Array]"===n.call(e)},i=function(e){if(!e||"[object Object]"!==n.call(e))return!1;var t,s=r.call(e,"constructor"),a=e.constructor&&e.constructor.prototype&&r.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!s&&!a)return!1;for(t in e);return"undefined"===typeof t||r.call(e,t)},l=function(e,t){s&&"__proto__"===t.name?s(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},c=function(e,t){if("__proto__"===t){if(!r.call(e,t))return;if(a)return a(e,t).value}return e[t]};e.exports=function e(){var t,r,n,s,a,d,u=arguments[0],h=1,m=arguments.length,f=!1;for("boolean"===typeof u&&(f=u,u=arguments[1]||{},h=2),(null==u||"object"!==typeof u&&"function"!==typeof u)&&(u={});h<m;++h)if(null!=(t=arguments[h]))for(r in t)n=c(u,r),u!==(s=c(t,r))&&(f&&s&&(i(s)||(a=o(s)))?(a?(a=!1,d=n&&o(n)?n:[]):d=n&&i(n)?n:{},l(u,{name:r,newValue:e(f,d,s)})):"undefined"!==typeof s&&l(u,{name:r,newValue:s}));return u}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BlockEmbed=t.bubbleFormats=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in s)return s.value;var o=s.get;return void 0!==o?o.call(n):void 0},a=u(r(3)),o=u(r(2)),i=u(r(0)),l=u(r(16)),c=u(r(6)),d=u(r(7));function u(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=function(e){function t(){return h(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f(t,e),n(t,[{key:"attach",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"attach",this).call(this),this.attributes=new i.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return(new o.default).insert(this.value(),(0,a.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(e,t){var r=i.default.query(e,i.default.Scope.BLOCK_ATTRIBUTE);null!=r&&this.attributes.attribute(r,t)}},{key:"formatAt",value:function(e,t,r,n){this.format(r,n)}},{key:"insertAt",value:function(e,r,n){if("string"===typeof r&&r.endsWith("\n")){var a=i.default.create(g.blotName);this.parent.insertBefore(a,0===e?this:this.next),a.insertAt(0,r.slice(0,-1))}else s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,e,r,n)}}]),t}(i.default.Embed);p.scope=i.default.Scope.BLOCK_BLOT;var g=function(e){function t(e){h(this,t);var r=m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.cache={},r}return f(t,e),n(t,[{key:"delta",value:function(){return null==this.cache.delta&&(this.cache.delta=this.descendants(i.default.Leaf).reduce((function(e,t){return 0===t.length()?e:e.insert(t.value(),x(t))}),new o.default).insert("\n",x(this))),this.cache.delta}},{key:"deleteAt",value:function(e,r){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"deleteAt",this).call(this,e,r),this.cache={}}},{key:"formatAt",value:function(e,r,n,a){r<=0||(i.default.query(n,i.default.Scope.BLOCK)?e+r===this.length()&&this.format(n,a):s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"formatAt",this).call(this,e,Math.min(r,this.length()-e-1),n,a),this.cache={})}},{key:"insertAt",value:function(e,r,n){if(null!=n)return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,e,r,n);if(0!==r.length){var a=r.split("\n"),o=a.shift();o.length>0&&(e<this.length()-1||null==this.children.tail?s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,Math.min(e,this.length()-1),o):this.children.tail.insertAt(this.children.tail.length(),o),this.cache={});var i=this;a.reduce((function(e,t){return(i=i.split(e,!0)).insertAt(0,t),t.length}),e+o.length)}}},{key:"insertBefore",value:function(e,r){var n=this.children.head;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertBefore",this).call(this,e,r),n instanceof l.default&&n.remove(),this.cache={}}},{key:"length",value:function(){return null==this.cache.length&&(this.cache.length=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"length",this).call(this)+1),this.cache.length}},{key:"moveChildren",value:function(e,r){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"moveChildren",this).call(this,e,r),this.cache={}}},{key:"optimize",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e),this.cache={}}},{key:"path",value:function(e){return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"path",this).call(this,e,!0)}},{key:"removeChild",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"removeChild",this).call(this,e),this.cache={}}},{key:"split",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(r&&(0===e||e>=this.length()-1)){var n=this.clone();return 0===e?(this.parent.insertBefore(n,this),this):(this.parent.insertBefore(n,this.next),n)}var a=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"split",this).call(this,e,r);return this.cache={},a}}]),t}(i.default.Block);function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==e?t:("function"===typeof e.formats&&(t=(0,a.default)(t,e.formats())),null==e.parent||"scroll"==e.parent.blotName||e.parent.statics.scope!==e.statics.scope?t:x(e.parent,t))}g.blotName="block",g.tagName="P",g.defaultChild="break",g.allowedChildren=[c.default,i.default.Embed,d.default],t.bubbleFormats=x,t.BlockEmbed=p,t.default=g},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.overload=t.expandConfig=void 0;var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,s=!1,a=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(l){s=!0,a=l}finally{try{!n&&i.return&&i.return()}finally{if(s)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();r(50);var o=g(r(2)),i=g(r(14)),l=g(r(8)),c=g(r(9)),d=g(r(0)),u=r(15),h=g(u),m=g(r(3)),f=g(r(10)),p=g(r(34));function g(e){return e&&e.__esModule?e:{default:e}}function x(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b=(0,f.default)("quill"),y=function(){function e(t){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=v(t,n),this.container=this.options.container,null==this.container)return b.error("Invalid Quill container",t);this.options.debug&&e.debug(this.options.debug);var s=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new l.default,this.scroll=d.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new i.default(this.scroll),this.selection=new h.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(l.default.events.EDITOR_CHANGE,(function(e){e===l.default.events.TEXT_CHANGE&&r.root.classList.toggle("ql-blank",r.editor.isBlank())})),this.emitter.on(l.default.events.SCROLL_UPDATE,(function(e,t){var n=r.selection.lastRange,s=n&&0===n.length?n.index:void 0;w.call(r,(function(){return r.editor.update(null,t,s)}),e)}));var a=this.clipboard.convert("<div class='ql-editor' style=\"white-space: normal;\">"+s+"<p><br></p></div>");this.setContents(a),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return a(e,null,[{key:"debug",value:function(e){!0===e&&(e="log"),f.default.level(e)}},{key:"find",value:function(e){return e.__quill||d.default.find(e)}},{key:"import",value:function(e){return null==this.imports[e]&&b.error("Cannot import "+e+". Are you sure it was registered?"),this.imports[e]}},{key:"register",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("string"!==typeof e){var s=e.attrName||e.blotName;"string"===typeof s?this.register("formats/"+s,e,t):Object.keys(e).forEach((function(n){r.register(n,e[n],t)}))}else null==this.imports[e]||n||b.warn("Overwriting "+e+" with",t),this.imports[e]=t,(e.startsWith("blots/")||e.startsWith("formats/"))&&"abstract"!==t.blotName?d.default.register(t):e.startsWith("modules")&&"function"===typeof t.register&&t.register()}}]),a(e,[{key:"addContainer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"===typeof e){var r=e;(e=document.createElement("div")).classList.add(r)}return this.container.insertBefore(e,t),e}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(e,t,r){var n=this,a=j(e,t,r),o=s(a,4);return e=o[0],t=o[1],r=o[3],w.call(this,(function(){return n.editor.deleteText(e,t)}),r,e,-1*t)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.scroll.enable(e),this.container.classList.toggle("ql-disabled",!e)}},{key:"focus",value:function(){var e=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=e,this.scrollIntoView()}},{key:"format",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.default.sources.API;return w.call(this,(function(){var n=r.getSelection(!0),s=new o.default;if(null==n)return s;if(d.default.query(e,d.default.Scope.BLOCK))s=r.editor.formatLine(n.index,n.length,x({},e,t));else{if(0===n.length)return r.selection.format(e,t),s;s=r.editor.formatText(n.index,n.length,x({},e,t))}return r.setSelection(n,l.default.sources.SILENT),s}),n)}},{key:"formatLine",value:function(e,t,r,n,a){var o,i=this,l=j(e,t,r,n,a),c=s(l,4);return e=c[0],t=c[1],o=c[2],a=c[3],w.call(this,(function(){return i.editor.formatLine(e,t,o)}),a,e,0)}},{key:"formatText",value:function(e,t,r,n,a){var o,i=this,l=j(e,t,r,n,a),c=s(l,4);return e=c[0],t=c[1],o=c[2],a=c[3],w.call(this,(function(){return i.editor.formatText(e,t,o)}),a,e,0)}},{key:"getBounds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=void 0;r="number"===typeof e?this.selection.getBounds(e,t):this.selection.getBounds(e.index,e.length);var n=this.container.getBoundingClientRect();return{bottom:r.bottom-n.top,height:r.height,left:r.left-n.left,right:r.right-n.left,top:r.top-n.top,width:r.width}}},{key:"getContents",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-e,r=j(e,t),n=s(r,2);return e=n[0],t=n[1],this.editor.getContents(e,t)}},{key:"getFormat",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSelection(!0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"number"===typeof e?this.editor.getFormat(e,t):this.editor.getFormat(e.index,e.length)}},{key:"getIndex",value:function(e){return e.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(e){return this.scroll.leaf(e)}},{key:"getLine",value:function(e){return this.scroll.line(e)}},{key:"getLines",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;return"number"!==typeof e?this.scroll.lines(e.index,e.length):this.scroll.lines(e,t)}},{key:"getModule",value:function(e){return this.theme.modules[e]}},{key:"getSelection",value:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-e,r=j(e,t),n=s(r,2);return e=n[0],t=n[1],this.editor.getText(e,t)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(t,r,n){var s=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.sources.API;return w.call(this,(function(){return s.editor.insertEmbed(t,r,n)}),a,t)}},{key:"insertText",value:function(e,t,r,n,a){var o,i=this,l=j(e,0,r,n,a),c=s(l,4);return e=c[0],o=c[2],a=c[3],w.call(this,(function(){return i.editor.insertText(e,t,o)}),a,e,t.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(e,t,r){this.clipboard.dangerouslyPasteHTML(e,t,r)}},{key:"removeFormat",value:function(e,t,r){var n=this,a=j(e,t,r),o=s(a,4);return e=o[0],t=o[1],r=o[3],w.call(this,(function(){return n.editor.removeFormat(e,t)}),r,e)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.sources.API;return w.call(this,(function(){e=new o.default(e);var r=t.getLength(),n=t.editor.deleteText(0,r),s=t.editor.applyDelta(e),a=s.ops[s.ops.length-1];return null!=a&&"string"===typeof a.insert&&"\n"===a.insert[a.insert.length-1]&&(t.editor.deleteText(t.getLength()-1,1),s.delete(1)),n.compose(s)}),r)}},{key:"setSelection",value:function(t,r,n){if(null==t)this.selection.setRange(null,r||e.sources.API);else{var a=j(t,r,n),o=s(a,4);t=o[0],r=o[1],n=o[3],this.selection.setRange(new u.Range(t,r),n),n!==l.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.sources.API,r=(new o.default).insert(e);return this.setContents(r,t)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.default.sources.USER,t=this.scroll.update(e);return this.selection.update(e),t}},{key:"updateContents",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.sources.API;return w.call(this,(function(){return e=new o.default(e),t.editor.applyDelta(e,r)}),r,!0)}}]),e}();function v(e,t){if((t=(0,m.default)(!0,{container:e,modules:{clipboard:!0,keyboard:!0,history:!0}},t)).theme&&t.theme!==y.DEFAULTS.theme){if(t.theme=y.import("themes/"+t.theme),null==t.theme)throw new Error("Invalid theme "+t.theme+". Did you register it?")}else t.theme=p.default;var r=(0,m.default)(!0,{},t.theme.DEFAULTS);[r,t].forEach((function(e){e.modules=e.modules||{},Object.keys(e.modules).forEach((function(t){!0===e.modules[t]&&(e.modules[t]={})}))}));var n=Object.keys(r.modules).concat(Object.keys(t.modules)).reduce((function(e,t){var r=y.import("modules/"+t);return null==r?b.error("Cannot load "+t+" module. Are you sure you registered it?"):e[t]=r.DEFAULTS||{},e}),{});return null!=t.modules&&t.modules.toolbar&&t.modules.toolbar.constructor!==Object&&(t.modules.toolbar={container:t.modules.toolbar}),t=(0,m.default)(!0,{},y.DEFAULTS,{modules:n},r,t),["bounds","container","scrollingContainer"].forEach((function(e){"string"===typeof t[e]&&(t[e]=document.querySelector(t[e]))})),t.modules=Object.keys(t.modules).reduce((function(e,r){return t.modules[r]&&(e[r]=t.modules[r]),e}),{}),t}function w(e,t,r,n){if(this.options.strict&&!this.isEnabled()&&t===l.default.sources.USER)return new o.default;var s=null==r?null:this.getSelection(),a=this.editor.delta,i=e();if(null!=s&&(!0===r&&(r=s.index),null==n?s=N(s,i,t):0!==n&&(s=N(s,r,n,t)),this.setSelection(s,l.default.sources.SILENT)),i.length()>0){var c,d,u=[l.default.events.TEXT_CHANGE,i,a,t];(c=this.emitter).emit.apply(c,[l.default.events.EDITOR_CHANGE].concat(u)),t!==l.default.sources.SILENT&&(d=this.emitter).emit.apply(d,u)}return i}function j(e,t,r,s,a){var o={};return"number"===typeof e.index&&"number"===typeof e.length?"number"!==typeof t?(a=s,s=r,r=t,t=e.length,e=e.index):(t=e.length,e=e.index):"number"!==typeof t&&(a=s,s=r,r=t,t=0),"object"===("undefined"===typeof r?"undefined":n(r))?(o=r,a=s):"string"===typeof r&&(null!=s?o[r]=s:a=r),[e,t,o,a=a||l.default.sources.API]}function N(e,t,r,n){if(null==e)return null;var a=void 0,i=void 0;if(t instanceof o.default){var c=[e.index,e.index+e.length].map((function(e){return t.transformPosition(e,n!==l.default.sources.USER)})),d=s(c,2);a=d[0],i=d[1]}else{var h=[e.index,e.index+e.length].map((function(e){return e<t||e===t&&n===l.default.sources.USER?e:r>=0?e+r:Math.max(t,e+r)})),m=s(h,2);a=m[0],i=m[1]}return new u.Range(a,i-a)}y.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},y.events=l.default.events,y.sources=l.default.sources,y.version="1.3.7",y.imports={delta:o.default,parchment:d.default,"core/module":c.default,"core/theme":p.default},t.expandConfig=v,t.overload=j,t.default=y},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in s)return s.value;var o=s.get;return void 0!==o?o.call(n):void 0},a=i(r(7)),o=i(r(0));function i(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"formatAt",value:function(e,r,n,a){if(t.compare(this.statics.blotName,n)<0&&o.default.query(n,o.default.Scope.BLOT)){var i=this.isolate(e,r);a&&i.wrap(n,a)}else s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"formatAt",this).call(this,e,r,n,a)}},{key:"optimize",value:function(e){if(s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e),this.parent instanceof t&&t.compare(this.statics.blotName,this.parent.statics.blotName)>0){var r=this.parent.isolate(this.offset(),this.length());this.moveChildren(r),r.wrap(this)}}}],[{key:"compare",value:function(e,r){var n=t.order.indexOf(e),s=t.order.indexOf(r);return n>=0||s>=0?n-s:e===r?0:e<r?-1:1}}]),t}(o.default.Inline);l.allowedChildren=[l,o.default.Embed,a.default],l.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,s=r(0),a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((n=s)&&n.__esModule?n:{default:n}).default.Text);t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in s)return s.value;var o=s.get;return void 0!==o?o.call(n):void 0},a=o(r(54));function o(e){return e&&e.__esModule?e:{default:e}}var i=(0,o(r(10)).default)("quill:events");["selectionchange","mousedown","mouseup","click"].forEach((function(e){document.addEventListener(e,(function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];[].slice.call(document.querySelectorAll(".ql-container")).forEach((function(e){var r;e.__quill&&e.__quill.emitter&&(r=e.__quill.emitter).handleDOM.apply(r,t)}))}))}));var l=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.listeners={},e.on("error",i.error),e}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"emit",value:function(){i.log.apply(i,arguments),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];(this.listeners[e.type]||[]).forEach((function(t){var n=t.node,s=t.handler;(e.target===n||n.contains(e.target))&&s.apply(void 0,[e].concat(r))}))}},{key:"listenDOM",value:function(e,t,r){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push({node:t,handler:r})}}]),t}(a.default);l.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},l.sources={API:"api",SILENT:"silent",USER:"user"},t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.quill=t,this.options=r};n.DEFAULTS={},t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=["error","warn","log","info"],s="warn";function a(e){if(n.indexOf(e)<=n.indexOf(s)){for(var t,r=arguments.length,a=Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];(t=console)[e].apply(t,a)}}function o(e){return n.reduce((function(t,r){return t[r]=a.bind(console,r,e),t}),{})}a.level=o.level=function(e){s=e},t.default=o},function(e,t,r){var n=Array.prototype.slice,s=r(52),a=r(53),o=e.exports=function(e,t,r){return r||(r={}),e===t||(e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():!e||!t||"object"!=typeof e&&"object"!=typeof t?r.strict?e===t:e==t:function(e,t,r){var c,d;if(i(e)||i(t))return!1;if(e.prototype!==t.prototype)return!1;if(a(e))return!!a(t)&&(e=n.call(e),t=n.call(t),o(e,t,r));if(l(e)){if(!l(t))return!1;if(e.length!==t.length)return!1;for(c=0;c<e.length;c++)if(e[c]!==t[c])return!1;return!0}try{var u=s(e),h=s(t)}catch(m){return!1}if(u.length!=h.length)return!1;for(u.sort(),h.sort(),c=u.length-1;c>=0;c--)if(u[c]!=h[c])return!1;for(c=u.length-1;c>=0;c--)if(d=u[c],!o(e[d],t[d],r))return!1;return typeof e===typeof t}(e,t,r))};function i(e){return null===e||void 0===e}function l(e){return!(!e||"object"!==typeof e||"number"!==typeof e.length)&&"function"===typeof e.copy&&"function"===typeof e.slice&&!(e.length>0&&"number"!==typeof e[0])}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),s=function(){function e(e,t,r){void 0===r&&(r={}),this.attrName=e,this.keyName=t;var s=n.Scope.TYPE&n.Scope.ATTRIBUTE;null!=r.scope?this.scope=r.scope&n.Scope.LEVEL|s:this.scope=n.Scope.ATTRIBUTE,null!=r.whitelist&&(this.whitelist=r.whitelist)}return e.keys=function(e){return[].map.call(e.attributes,(function(e){return e.name}))},e.prototype.add=function(e,t){return!!this.canAdd(e,t)&&(e.setAttribute(this.keyName,t),!0)},e.prototype.canAdd=function(e,t){return null!=n.query(e,n.Scope.BLOT&(this.scope|n.Scope.TYPE))&&(null==this.whitelist||("string"===typeof t?this.whitelist.indexOf(t.replace(/["']/g,""))>-1:this.whitelist.indexOf(t)>-1))},e.prototype.remove=function(e){e.removeAttribute(this.keyName)},e.prototype.value=function(e){var t=e.getAttribute(this.keyName);return this.canAdd(e,t)&&t?t:""},e}();t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Code=void 0;var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,s=!1,a=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(l){s=!0,a=l}finally{try{!n&&i.return&&i.return()}finally{if(s)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in s)return s.value;var o=s.get;return void 0!==o?o.call(n):void 0},o=u(r(2)),i=u(r(0)),l=u(r(4)),c=u(r(6)),d=u(r(7));function u(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=function(e){function t(){return h(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f(t,e),t}(c.default);p.blotName="code",p.tagName="CODE";var g=function(e){function t(){return h(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f(t,e),s(t,[{key:"delta",value:function(){var e=this,t=this.domNode.textContent;return t.endsWith("\n")&&(t=t.slice(0,-1)),t.split("\n").reduce((function(t,r){return t.insert(r).insert("\n",e.formats())}),new o.default)}},{key:"format",value:function(e,r){if(e!==this.statics.blotName||!r){var s=this.descendant(d.default,this.length()-1),o=n(s,1)[0];null!=o&&o.deleteAt(o.length()-1,1),a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,r)}}},{key:"formatAt",value:function(e,r,n,s){if(0!==r&&null!=i.default.query(n,i.default.Scope.BLOCK)&&(n!==this.statics.blotName||s!==this.statics.formats(this.domNode))){var a=this.newlineIndex(e);if(!(a<0||a>=e+r)){var o=this.newlineIndex(e,!0)+1,l=a-o+1,c=this.isolate(o,l),d=c.next;c.format(n,s),d instanceof t&&d.formatAt(0,e-o+r-l,n,s)}}}},{key:"insertAt",value:function(e,t,r){if(null==r){var s=this.descendant(d.default,e),a=n(s,2),o=a[0],i=a[1];o.insertAt(i,t)}}},{key:"length",value:function(){var e=this.domNode.textContent.length;return this.domNode.textContent.endsWith("\n")?e:e+1}},{key:"newlineIndex",value:function(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])return this.domNode.textContent.slice(0,e).lastIndexOf("\n");var t=this.domNode.textContent.slice(e).indexOf("\n");return t>-1?e+t:-1}},{key:"optimize",value:function(e){this.domNode.textContent.endsWith("\n")||this.appendChild(i.default.create("text","\n")),a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e);var r=this.next;null!=r&&r.prev===this&&r.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===r.statics.formats(r.domNode)&&(r.optimize(e),r.moveChildren(this),r.remove())}},{key:"replace",value:function(e){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replace",this).call(this,e),[].slice.call(this.domNode.querySelectorAll("*")).forEach((function(e){var t=i.default.find(e);null==t?e.parentNode.removeChild(e):t instanceof i.default.Embed?t.remove():t.unwrap()}))}}],[{key:"create",value:function(e){var r=a(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return r.setAttribute("spellcheck",!1),r}},{key:"formats",value:function(){return!0}}]),t}(l.default);g.blotName="code-block",g.tagName="PRE",g.TAB="  ",t.Code=p,t.default=g},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,s=!1,a=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(l){s=!0,a=l}finally{try{!n&&i.return&&i.return()}finally{if(s)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=x(r(2)),i=x(r(20)),l=x(r(0)),c=x(r(13)),d=x(r(24)),u=r(4),h=x(u),m=x(r(16)),f=x(r(21)),p=x(r(11)),g=x(r(3));function x(e){return e&&e.__esModule?e:{default:e}}var b=/^[ -~]*$/,y=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scroll=t,this.delta=this.getDelta()}return a(e,[{key:"applyDelta",value:function(e){var t=this,r=!1;this.scroll.update();var a=this.scroll.length();return this.scroll.batchStart(),(e=function(e){return e.reduce((function(e,t){if(1===t.insert){var r=(0,f.default)(t.attributes);return delete r.image,e.insert({image:t.attributes.image},r)}if(null==t.attributes||!0!==t.attributes.list&&!0!==t.attributes.bullet||((t=(0,f.default)(t)).attributes.list?t.attributes.list="ordered":(t.attributes.list="bullet",delete t.attributes.bullet)),"string"===typeof t.insert){var n=t.insert.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return e.insert(n,t.attributes)}return e.push(t)}),new o.default)}(e)).reduce((function(e,o){var c=o.retain||o.delete||o.insert.length||1,d=o.attributes||{};if(null!=o.insert){if("string"===typeof o.insert){var m=o.insert;m.endsWith("\n")&&r&&(r=!1,m=m.slice(0,-1)),e>=a&&!m.endsWith("\n")&&(r=!0),t.scroll.insertAt(e,m);var f=t.scroll.line(e),p=s(f,2),x=p[0],b=p[1],y=(0,g.default)({},(0,u.bubbleFormats)(x));if(x instanceof h.default){var v=x.descendant(l.default.Leaf,b),w=s(v,1)[0];y=(0,g.default)(y,(0,u.bubbleFormats)(w))}d=i.default.attributes.diff(y,d)||{}}else if("object"===n(o.insert)){var j=Object.keys(o.insert)[0];if(null==j)return e;t.scroll.insertAt(e,j,o.insert[j])}a+=c}return Object.keys(d).forEach((function(r){t.scroll.formatAt(e,c,r,d[r])})),e+c}),0),e.reduce((function(e,r){return"number"===typeof r.delete?(t.scroll.deleteAt(e,r.delete),e):e+(r.retain||r.insert.length||1)}),0),this.scroll.batchEnd(),this.update(e)}},{key:"deleteText",value:function(e,t){return this.scroll.deleteAt(e,t),this.update((new o.default).retain(e).delete(t))}},{key:"formatLine",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.scroll.update(),Object.keys(n).forEach((function(s){if(null==r.scroll.whitelist||r.scroll.whitelist[s]){var a=r.scroll.lines(e,Math.max(t,1)),o=t;a.forEach((function(t){var a=t.length();if(t instanceof c.default){var i=e-t.offset(r.scroll),l=t.newlineIndex(i+o)-i+1;t.formatAt(i,l,s,n[s])}else t.format(s,n[s]);o-=a}))}})),this.scroll.optimize(),this.update((new o.default).retain(e).retain(t,(0,f.default)(n)))}},{key:"formatText",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object.keys(n).forEach((function(s){r.scroll.formatAt(e,t,s,n[s])})),this.update((new o.default).retain(e).retain(t,(0,f.default)(n)))}},{key:"getContents",value:function(e,t){return this.delta.slice(e,e+t)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce((function(e,t){return e.concat(t.delta())}),new o.default)}},{key:"getFormat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=[],n=[];0===t?this.scroll.path(e).forEach((function(e){var t=s(e,1)[0];t instanceof h.default?r.push(t):t instanceof l.default.Leaf&&n.push(t)})):(r=this.scroll.lines(e,t),n=this.scroll.descendants(l.default.Leaf,e,t));var a=[r,n].map((function(e){if(0===e.length)return{};for(var t=(0,u.bubbleFormats)(e.shift());Object.keys(t).length>0;){var r=e.shift();if(null==r)return t;t=v((0,u.bubbleFormats)(r),t)}return t}));return g.default.apply(g.default,a)}},{key:"getText",value:function(e,t){return this.getContents(e,t).filter((function(e){return"string"===typeof e.insert})).map((function(e){return e.insert})).join("")}},{key:"insertEmbed",value:function(e,t,r){return this.scroll.insertAt(e,t,r),this.update((new o.default).retain(e).insert(function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},t,r)))}},{key:"insertText",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t=t.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),this.scroll.insertAt(e,t),Object.keys(n).forEach((function(s){r.scroll.formatAt(e,t.length,s,n[s])})),this.update((new o.default).retain(e).insert(t,(0,f.default)(n)))}},{key:"isBlank",value:function(){if(0==this.scroll.children.length)return!0;if(this.scroll.children.length>1)return!1;var e=this.scroll.children.head;return e.statics.blotName===h.default.blotName&&!(e.children.length>1)&&e.children.head instanceof m.default}},{key:"removeFormat",value:function(e,t){var r=this.getText(e,t),n=this.scroll.line(e+t),a=s(n,2),i=a[0],l=a[1],d=0,u=new o.default;null!=i&&(d=i instanceof c.default?i.newlineIndex(l)-l+1:i.length()-l,u=i.delta().slice(l,l+d-1).insert("\n"));var h=this.getContents(e,t+d).diff((new o.default).insert(r).concat(u)),m=(new o.default).retain(e).concat(h);return this.applyDelta(m)}},{key:"update",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=this.delta;if(1===t.length&&"characterData"===t[0].type&&t[0].target.data.match(b)&&l.default.find(t[0].target)){var s=l.default.find(t[0].target),a=(0,u.bubbleFormats)(s),i=s.offset(this.scroll),c=t[0].oldValue.replace(d.default.CONTENTS,""),h=(new o.default).insert(c),m=(new o.default).insert(s.value());e=(new o.default).retain(i).concat(h.diff(m,r)).reduce((function(e,t){return t.insert?e.insert(t.insert,a):e.push(t)}),new o.default),this.delta=n.compose(e)}else this.delta=this.getDelta(),e&&(0,p.default)(n.compose(e),this.delta)||(e=n.diff(this.delta,r));return e}}]),e}();function v(e,t){return Object.keys(t).reduce((function(r,n){return null==e[n]||(t[n]===e[n]?r[n]=t[n]:Array.isArray(t[n])?t[n].indexOf(e[n])<0&&(r[n]=t[n].concat([e[n]])):r[n]=[t[n],e[n]]),r}),{})}t.default=y},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Range=void 0;var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,s=!1,a=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(l){s=!0,a=l}finally{try{!n&&i.return&&i.return()}finally{if(s)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=c(r(0)),o=c(r(21)),i=c(r(11)),l=c(r(8));function c(e){return e&&e.__esModule?e:{default:e}}function d(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var h=(0,c(r(10)).default)("quill:selection"),m=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;u(this,e),this.index=t,this.length=r},f=function(){function e(t,r){var n=this;u(this,e),this.emitter=r,this.scroll=t,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=a.default.create("cursor",this),this.lastRange=this.savedRange=new m(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,(function(){n.mouseDown||setTimeout(n.update.bind(n,l.default.sources.USER),1)})),this.emitter.on(l.default.events.EDITOR_CHANGE,(function(e,t){e===l.default.events.TEXT_CHANGE&&t.length()>0&&n.update(l.default.sources.SILENT)})),this.emitter.on(l.default.events.SCROLL_BEFORE_UPDATE,(function(){if(n.hasFocus()){var e=n.getNativeRange();null!=e&&e.start.node!==n.cursor.textNode&&n.emitter.once(l.default.events.SCROLL_UPDATE,(function(){try{n.setNativeRange(e.start.node,e.start.offset,e.end.node,e.end.offset)}catch(t){}}))}})),this.emitter.on(l.default.events.SCROLL_OPTIMIZE,(function(e,t){if(t.range){var r=t.range,s=r.startNode,a=r.startOffset,o=r.endNode,i=r.endOffset;n.setNativeRange(s,a,o,i)}})),this.update(l.default.sources.SILENT)}return s(e,[{key:"handleComposition",value:function(){var e=this;this.root.addEventListener("compositionstart",(function(){e.composing=!0})),this.root.addEventListener("compositionend",(function(){if(e.composing=!1,e.cursor.parent){var t=e.cursor.restore();if(!t)return;setTimeout((function(){e.setNativeRange(t.startNode,t.startOffset,t.endNode,t.endOffset)}),1)}}))}},{key:"handleDragging",value:function(){var e=this;this.emitter.listenDOM("mousedown",document.body,(function(){e.mouseDown=!0})),this.emitter.listenDOM("mouseup",document.body,(function(){e.mouseDown=!1,e.update(l.default.sources.USER)}))}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(e,t){if(null==this.scroll.whitelist||this.scroll.whitelist[e]){this.scroll.update();var r=this.getNativeRange();if(null!=r&&r.native.collapsed&&!a.default.query(e,a.default.Scope.BLOCK)){if(r.start.node!==this.cursor.textNode){var n=a.default.find(r.start.node,!1);if(null==n)return;if(n instanceof a.default.Leaf){var s=n.split(r.start.offset);n.parent.insertBefore(this.cursor,s)}else n.insertBefore(this.cursor,r.start.node);this.cursor.attach()}this.cursor.format(e,t),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=this.scroll.length();e=Math.min(e,r-1),t=Math.min(e+t,r-1)-e;var s=void 0,a=this.scroll.leaf(e),o=n(a,2),i=o[0],l=o[1];if(null==i)return null;var c=i.position(l,!0),d=n(c,2);s=d[0],l=d[1];var u=document.createRange();if(t>0){u.setStart(s,l);var h=this.scroll.leaf(e+t),m=n(h,2);if(i=m[0],l=m[1],null==i)return null;var f=i.position(l,!0),p=n(f,2);return s=p[0],l=p[1],u.setEnd(s,l),u.getBoundingClientRect()}var g="left",x=void 0;return s instanceof Text?(l<s.data.length?(u.setStart(s,l),u.setEnd(s,l+1)):(u.setStart(s,l-1),u.setEnd(s,l),g="right"),x=u.getBoundingClientRect()):(x=i.domNode.getBoundingClientRect(),l>0&&(g="right")),{bottom:x.top+x.height,height:x.height,left:x[g],right:x[g],top:x.top,width:0}}},{key:"getNativeRange",value:function(){var e=document.getSelection();if(null==e||e.rangeCount<=0)return null;var t=e.getRangeAt(0);if(null==t)return null;var r=this.normalizeNative(t);return h.info("getNativeRange",r),r}},{key:"getRange",value:function(){var e=this.getNativeRange();return null==e?[null,null]:[this.normalizedToRange(e),e]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(e){var t=this,r=[[e.start.node,e.start.offset]];e.native.collapsed||r.push([e.end.node,e.end.offset]);var s=r.map((function(e){var r=n(e,2),s=r[0],o=r[1],i=a.default.find(s,!0),l=i.offset(t.scroll);return 0===o?l:i instanceof a.default.Container?l+i.length():l+i.index(s,o)})),o=Math.min(Math.max.apply(Math,d(s)),this.scroll.length()-1),i=Math.min.apply(Math,[o].concat(d(s)));return new m(i,o-i)}},{key:"normalizeNative",value:function(e){if(!p(this.root,e.startContainer)||!e.collapsed&&!p(this.root,e.endContainer))return null;var t={start:{node:e.startContainer,offset:e.startOffset},end:{node:e.endContainer,offset:e.endOffset},native:e};return[t.start,t.end].forEach((function(e){for(var t=e.node,r=e.offset;!(t instanceof Text)&&t.childNodes.length>0;)if(t.childNodes.length>r)t=t.childNodes[r],r=0;else{if(t.childNodes.length!==r)break;r=(t=t.lastChild)instanceof Text?t.data.length:t.childNodes.length+1}e.node=t,e.offset=r})),t}},{key:"rangeToNative",value:function(e){var t=this,r=e.collapsed?[e.index]:[e.index,e.index+e.length],s=[],a=this.scroll.length();return r.forEach((function(e,r){e=Math.min(a-1,e);var o,i=t.scroll.leaf(e),l=n(i,2),c=l[0],d=l[1],u=c.position(d,0!==r),h=n(u,2);o=h[0],d=h[1],s.push(o,d)})),s.length<2&&(s=s.concat(s)),s}},{key:"scrollIntoView",value:function(e){var t=this.lastRange;if(null!=t){var r=this.getBounds(t.index,t.length);if(null!=r){var s=this.scroll.length()-1,a=this.scroll.line(Math.min(t.index,s)),o=n(a,1)[0],i=o;if(t.length>0){var l=this.scroll.line(Math.min(t.index+t.length,s));i=n(l,1)[0]}if(null!=o&&null!=i){var c=e.getBoundingClientRect();r.top<c.top?e.scrollTop-=c.top-r.top:r.bottom>c.bottom&&(e.scrollTop+=r.bottom-c.bottom)}}}}},{key:"setNativeRange",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(h.info("setNativeRange",e,t,r,n),null==e||null!=this.root.parentNode&&null!=e.parentNode&&null!=r.parentNode){var a=document.getSelection();if(null!=a)if(null!=e){this.hasFocus()||this.root.focus();var o=(this.getNativeRange()||{}).native;if(null==o||s||e!==o.startContainer||t!==o.startOffset||r!==o.endContainer||n!==o.endOffset){"BR"==e.tagName&&(t=[].indexOf.call(e.parentNode.childNodes,e),e=e.parentNode),"BR"==r.tagName&&(n=[].indexOf.call(r.parentNode.childNodes,r),r=r.parentNode);var i=document.createRange();i.setStart(e,t),i.setEnd(r,n),a.removeAllRanges(),a.addRange(i)}}else a.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.default.sources.API;if("string"===typeof t&&(r=t,t=!1),h.info("setRange",e),null!=e){var n=this.rangeToNative(e);this.setNativeRange.apply(this,d(n).concat([t]))}else this.setNativeRange(null);this.update(r)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.default.sources.USER,t=this.lastRange,r=this.getRange(),s=n(r,2),a=s[0],c=s[1];if(this.lastRange=a,null!=this.lastRange&&(this.savedRange=this.lastRange),!(0,i.default)(t,this.lastRange)){var d;!this.composing&&null!=c&&c.native.collapsed&&c.start.node!==this.cursor.textNode&&this.cursor.restore();var u,h=[l.default.events.SELECTION_CHANGE,(0,o.default)(this.lastRange),(0,o.default)(t),e];(d=this.emitter).emit.apply(d,[l.default.events.EDITOR_CHANGE].concat(h)),e!==l.default.sources.SILENT&&(u=this.emitter).emit.apply(u,h)}}}]),e}();function p(e,t){try{t.parentNode}catch(r){return!1}return t instanceof Text&&(t=t.parentNode),e.contains(t)}t.Range=m,t.default=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in s)return s.value;var o=s.get;return void 0!==o?o.call(n):void 0},o=r(0),i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"insertInto",value:function(e,r){0===e.children.length?a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertInto",this).call(this,e,r):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),t}(((n=o)&&n.__esModule?n:{default:n}).default.Embed);i.blotName="break",i.tagName="BR",t.default=i},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var s=r(44),a=r(30),o=r(1),i=function(e){function t(t){var r=e.call(this,t)||this;return r.build(),r}return n(t,e),t.prototype.appendChild=function(e){this.insertBefore(e)},t.prototype.attach=function(){e.prototype.attach.call(this),this.children.forEach((function(e){e.attach()}))},t.prototype.build=function(){var e=this;this.children=new s.default,[].slice.call(this.domNode.childNodes).reverse().forEach((function(t){try{var r=l(t);e.insertBefore(r,e.children.head||void 0)}catch(n){if(n instanceof o.ParchmentError)return;throw n}}))},t.prototype.deleteAt=function(e,t){if(0===e&&t===this.length())return this.remove();this.children.forEachAt(e,t,(function(e,t,r){e.deleteAt(t,r)}))},t.prototype.descendant=function(e,r){var n=this.children.find(r),s=n[0],a=n[1];return null==e.blotName&&e(s)||null!=e.blotName&&s instanceof e?[s,a]:s instanceof t?s.descendant(e,a):[null,-1]},t.prototype.descendants=function(e,r,n){void 0===r&&(r=0),void 0===n&&(n=Number.MAX_VALUE);var s=[],a=n;return this.children.forEachAt(r,n,(function(r,n,o){(null==e.blotName&&e(r)||null!=e.blotName&&r instanceof e)&&s.push(r),r instanceof t&&(s=s.concat(r.descendants(e,n,a))),a-=o})),s},t.prototype.detach=function(){this.children.forEach((function(e){e.detach()})),e.prototype.detach.call(this)},t.prototype.formatAt=function(e,t,r,n){this.children.forEachAt(e,t,(function(e,t,s){e.formatAt(t,s,r,n)}))},t.prototype.insertAt=function(e,t,r){var n=this.children.find(e),s=n[0],a=n[1];if(s)s.insertAt(a,t,r);else{var i=null==r?o.create("text",t):o.create(t,r);this.appendChild(i)}},t.prototype.insertBefore=function(e,t){if(null!=this.statics.allowedChildren&&!this.statics.allowedChildren.some((function(t){return e instanceof t})))throw new o.ParchmentError("Cannot insert "+e.statics.blotName+" into "+this.statics.blotName);e.insertInto(this,t)},t.prototype.length=function(){return this.children.reduce((function(e,t){return e+t.length()}),0)},t.prototype.moveChildren=function(e,t){this.children.forEach((function(r){e.insertBefore(r,t)}))},t.prototype.optimize=function(t){if(e.prototype.optimize.call(this,t),0===this.children.length)if(null!=this.statics.defaultChild){var r=o.create(this.statics.defaultChild);this.appendChild(r),r.optimize(t)}else this.remove()},t.prototype.path=function(e,r){void 0===r&&(r=!1);var n=this.children.find(e,r),s=n[0],a=n[1],o=[[this,e]];return s instanceof t?o.concat(s.path(a,r)):(null!=s&&o.push([s,a]),o)},t.prototype.removeChild=function(e){this.children.remove(e)},t.prototype.replace=function(r){r instanceof t&&r.moveChildren(this),e.prototype.replace.call(this,r)},t.prototype.split=function(e,t){if(void 0===t&&(t=!1),!t){if(0===e)return this;if(e===this.length())return this.next}var r=this.clone();return this.parent.insertBefore(r,this.next),this.children.forEachAt(e,this.length(),(function(e,n,s){e=e.split(n,t),r.appendChild(e)})),r},t.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},t.prototype.update=function(e,t){var r=this,n=[],s=[];e.forEach((function(e){e.target===r.domNode&&"childList"===e.type&&(n.push.apply(n,e.addedNodes),s.push.apply(s,e.removedNodes))})),s.forEach((function(e){if(!(null!=e.parentNode&&"IFRAME"!==e.tagName&&document.body.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var t=o.find(e);null!=t&&(null!=t.domNode.parentNode&&t.domNode.parentNode!==r.domNode||t.detach())}})),n.filter((function(e){return e.parentNode==r.domNode})).sort((function(e,t){return e===t?0:e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1})).forEach((function(e){var t=null;null!=e.nextSibling&&(t=o.find(e.nextSibling));var n=l(e);n.next==t&&null!=n.next||(null!=n.parent&&n.parent.removeChild(r),r.insertBefore(n,t||void 0))}))},t}(a.default);function l(e){var t=o.find(e);if(null==t)try{t=o.create(e)}catch(r){t=o.create(o.Scope.INLINE),[].slice.call(e.childNodes).forEach((function(e){t.domNode.appendChild(e)})),e.parentNode&&e.parentNode.replaceChild(t.domNode,e),t.attach()}return t}t.default=i},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var s=r(12),a=r(31),o=r(17),i=r(1),l=function(e){function t(t){var r=e.call(this,t)||this;return r.attributes=new a.default(r.domNode),r}return n(t,e),t.formats=function(e){return"string"===typeof this.tagName||(Array.isArray(this.tagName)?e.tagName.toLowerCase():void 0)},t.prototype.format=function(e,t){var r=i.query(e);r instanceof s.default?this.attributes.attribute(r,t):t&&(null==r||e===this.statics.blotName&&this.formats()[e]===t||this.replaceWith(e,t))},t.prototype.formats=function(){var e=this.attributes.values(),t=this.statics.formats(this.domNode);return null!=t&&(e[this.statics.blotName]=t),e},t.prototype.replaceWith=function(t,r){var n=e.prototype.replaceWith.call(this,t,r);return this.attributes.copy(n),n},t.prototype.update=function(t,r){var n=this;e.prototype.update.call(this,t,r),t.some((function(e){return e.target===n.domNode&&"attributes"===e.type}))&&this.attributes.build()},t.prototype.wrap=function(r,n){var s=e.prototype.wrap.call(this,r,n);return s instanceof t&&s.statics.scope===this.statics.scope&&this.attributes.move(s),s},t}(o.default);t.default=l},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var s=r(30),a=r(1),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.value=function(e){return!0},t.prototype.index=function(e,t){return this.domNode===e||this.domNode.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(t,1):-1},t.prototype.position=function(e,t){var r=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return e>0&&(r+=1),[this.parent.domNode,r]},t.prototype.value=function(){var e;return(e={})[this.statics.blotName]=this.statics.value(this.domNode)||!0,e},t.scope=a.Scope.INLINE_BLOT,t}(s.default);t.default=o},function(e,t,r){var n=r(11),s=r(3),a={attributes:{compose:function(e,t,r){"object"!==typeof e&&(e={}),"object"!==typeof t&&(t={});var n=s(!0,{},t);for(var a in r||(n=Object.keys(n).reduce((function(e,t){return null!=n[t]&&(e[t]=n[t]),e}),{})),e)void 0!==e[a]&&void 0===t[a]&&(n[a]=e[a]);return Object.keys(n).length>0?n:void 0},diff:function(e,t){"object"!==typeof e&&(e={}),"object"!==typeof t&&(t={});var r=Object.keys(e).concat(Object.keys(t)).reduce((function(r,s){return n(e[s],t[s])||(r[s]=void 0===t[s]?null:t[s]),r}),{});return Object.keys(r).length>0?r:void 0},transform:function(e,t,r){if("object"!==typeof e)return t;if("object"===typeof t){if(!r)return t;var n=Object.keys(t).reduce((function(r,n){return void 0===e[n]&&(r[n]=t[n]),r}),{});return Object.keys(n).length>0?n:void 0}}},iterator:function(e){return new o(e)},length:function(e){return"number"===typeof e.delete?e.delete:"number"===typeof e.retain?e.retain:"string"===typeof e.insert?e.insert.length:1}};function o(e){this.ops=e,this.index=0,this.offset=0}o.prototype.hasNext=function(){return this.peekLength()<1/0},o.prototype.next=function(e){e||(e=1/0);var t=this.ops[this.index];if(t){var r=this.offset,n=a.length(t);if(e>=n-r?(e=n-r,this.index+=1,this.offset=0):this.offset+=e,"number"===typeof t.delete)return{delete:e};var s={};return t.attributes&&(s.attributes=t.attributes),"number"===typeof t.retain?s.retain=e:"string"===typeof t.insert?s.insert=t.insert.substr(r,e):s.insert=t.insert,s}return{retain:1/0}},o.prototype.peek=function(){return this.ops[this.index]},o.prototype.peekLength=function(){return this.ops[this.index]?a.length(this.ops[this.index])-this.offset:1/0},o.prototype.peekType=function(){return this.ops[this.index]?"number"===typeof this.ops[this.index].delete?"delete":"number"===typeof this.ops[this.index].retain?"retain":"insert":"retain"},o.prototype.rest=function(){if(this.hasNext()){if(0===this.offset)return this.ops.slice(this.index);var e=this.offset,t=this.index,r=this.next(),n=this.ops.slice(this.index);return this.offset=e,this.index=t,[r].concat(n)}return[]},e.exports=a},function(e,t){var r=function(){"use strict";function e(e,t){return null!=t&&e instanceof t}var t,r,n;try{t=Map}catch(i){t=function(){}}try{r=Set}catch(i){r=function(){}}try{n=Promise}catch(i){n=function(){}}function s(a,i,l,c,d){"object"===typeof i&&(l=i.depth,c=i.prototype,d=i.includeNonEnumerable,i=i.circular);var u=[],h=[],m="undefined"!=typeof Buffer;return"undefined"==typeof i&&(i=!0),"undefined"==typeof l&&(l=1/0),function a(l,f){if(null===l)return null;if(0===f)return l;var p,g;if("object"!=typeof l)return l;if(e(l,t))p=new t;else if(e(l,r))p=new r;else if(e(l,n))p=new n((function(e,t){l.then((function(t){e(a(t,f-1))}),(function(e){t(a(e,f-1))}))}));else if(s.__isArray(l))p=[];else if(s.__isRegExp(l))p=new RegExp(l.source,o(l)),l.lastIndex&&(p.lastIndex=l.lastIndex);else if(s.__isDate(l))p=new Date(l.getTime());else{if(m&&Buffer.isBuffer(l))return p=Buffer.allocUnsafe?Buffer.allocUnsafe(l.length):new Buffer(l.length),l.copy(p),p;e(l,Error)?p=Object.create(l):"undefined"==typeof c?(g=Object.getPrototypeOf(l),p=Object.create(g)):(p=Object.create(c),g=c)}if(i){var x=u.indexOf(l);if(-1!=x)return h[x];u.push(l),h.push(p)}for(var b in e(l,t)&&l.forEach((function(e,t){var r=a(t,f-1),n=a(e,f-1);p.set(r,n)})),e(l,r)&&l.forEach((function(e){var t=a(e,f-1);p.add(t)})),l){var y;g&&(y=Object.getOwnPropertyDescriptor(g,b)),y&&null==y.set||(p[b]=a(l[b],f-1))}if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(l);for(b=0;b<v.length;b++){var w=v[b];(!(N=Object.getOwnPropertyDescriptor(l,w))||N.enumerable||d)&&(p[w]=a(l[w],f-1),N.enumerable||Object.defineProperty(p,w,{enumerable:!1}))}}if(d){var j=Object.getOwnPropertyNames(l);for(b=0;b<j.length;b++){var N,k=j[b];(N=Object.getOwnPropertyDescriptor(l,k))&&N.enumerable||(p[k]=a(l[k],f-1),Object.defineProperty(p,k,{enumerable:!1}))}}return p}(a,l)}function a(e){return Object.prototype.toString.call(e)}function o(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return s.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},s.__objToStr=a,s.__isDate=function(e){return"object"===typeof e&&"[object Date]"===a(e)},s.__isArray=function(e){return"object"===typeof e&&"[object Array]"===a(e)},s.__isRegExp=function(e){return"object"===typeof e&&"[object RegExp]"===a(e)},s.__getRegExpFlags=o,s}();"object"===typeof e&&e.exports&&(e.exports=r)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,s=!1,a=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(l){s=!0,a=l}finally{try{!n&&i.return&&i.return()}finally{if(s)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in s)return s.value;var o=s.get;return void 0!==o?o.call(n):void 0},o=m(r(0)),i=m(r(8)),l=r(4),c=m(l),d=m(r(16)),u=m(r(13)),h=m(r(25));function m(e){return e&&e.__esModule?e:{default:e}}function f(e){return e instanceof c.default||e instanceof l.BlockEmbed}var p=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.emitter=r.emitter,Array.isArray(r.whitelist)&&(n.whitelist=r.whitelist.reduce((function(e,t){return e[t]=!0,e}),{})),n.domNode.addEventListener("DOMNodeInserted",(function(){})),n.optimize(),n.enable(),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(e,r){var s=this.line(e),o=n(s,2),i=o[0],c=o[1],h=this.line(e+r),m=n(h,1)[0];if(a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"deleteAt",this).call(this,e,r),null!=m&&i!==m&&c>0){if(i instanceof l.BlockEmbed||m instanceof l.BlockEmbed)return void this.optimize();if(i instanceof u.default){var f=i.newlineIndex(i.length(),!0);if(f>-1&&(i=i.split(f+1))===m)return void this.optimize()}else if(m instanceof u.default){var p=m.newlineIndex(0);p>-1&&m.split(p+1)}var g=m.children.head instanceof d.default?null:m.children.head;i.moveChildren(m,g),i.remove()}this.optimize()}},{key:"enable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.domNode.setAttribute("contenteditable",e)}},{key:"formatAt",value:function(e,r,n,s){(null==this.whitelist||this.whitelist[n])&&(a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"formatAt",this).call(this,e,r,n,s),this.optimize())}},{key:"insertAt",value:function(e,r,n){if(null==n||null==this.whitelist||this.whitelist[r]){if(e>=this.length())if(null==n||null==o.default.query(r,o.default.Scope.BLOCK)){var s=o.default.create(this.statics.defaultChild);this.appendChild(s),null==n&&r.endsWith("\n")&&(r=r.slice(0,-1)),s.insertAt(0,r,n)}else{var i=o.default.create(r,n);this.appendChild(i)}else a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,e,r,n);this.optimize()}}},{key:"insertBefore",value:function(e,r){if(e.statics.scope===o.default.Scope.INLINE_BLOT){var n=o.default.create(this.statics.defaultChild);n.appendChild(e),e=n}a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertBefore",this).call(this,e,r)}},{key:"leaf",value:function(e){return this.path(e).pop()||[null,-1]}},{key:"line",value:function(e){return e===this.length()?this.line(e-1):this.descendant(f,e)}},{key:"lines",value:function(){return function e(t,r,n){var s=[],a=n;return t.children.forEachAt(r,n,(function(t,r,n){f(t)?s.push(t):t instanceof o.default.Container&&(s=s.concat(e(t,r,a))),a-=n})),s}(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE)}},{key:"optimize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!0!==this.batch&&(a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e,r),e.length>0&&this.emitter.emit(i.default.events.SCROLL_OPTIMIZE,e,r))}},{key:"path",value:function(e){return a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"path",this).call(this,e).slice(1)}},{key:"update",value:function(e){if(!0!==this.batch){var r=i.default.sources.USER;"string"===typeof e&&(r=e),Array.isArray(e)||(e=this.observer.takeRecords()),e.length>0&&this.emitter.emit(i.default.events.SCROLL_BEFORE_UPDATE,r,e),a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this,e.concat([])),e.length>0&&this.emitter.emit(i.default.events.SCROLL_UPDATE,r,e)}}}]),t}(o.default.Scroll);p.blotName="scroll",p.className="ql-editor",p.tagName="DIV",p.defaultChild="block",p.allowedChildren=[c.default,l.BlockEmbed,h.default],t.default=p},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SHORTKEY=t.default=void 0;var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,s=!1,a=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(l){s=!0,a=l}finally{try{!n&&i.return&&i.return()}finally{if(s)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=p(r(21)),i=p(r(11)),l=p(r(3)),c=p(r(2)),d=p(r(20)),u=p(r(0)),h=p(r(5)),m=p(r(10)),f=p(r(9));function p(e){return e&&e.__esModule?e:{default:e}}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var x=(0,m.default)("quill:keyboard"),b=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",y=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.bindings={},Object.keys(n.options.bindings).forEach((function(t){("list autofill"!==t||null==e.scroll.whitelist||e.scroll.whitelist.list)&&n.options.bindings[t]&&n.addBinding(n.options.bindings[t])})),n.addBinding({key:t.keys.ENTER,shiftKey:null},k),n.addBinding({key:t.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},(function(){})),/Firefox/i.test(navigator.userAgent)?(n.addBinding({key:t.keys.BACKSPACE},{collapsed:!0},w),n.addBinding({key:t.keys.DELETE},{collapsed:!0},j)):(n.addBinding({key:t.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},w),n.addBinding({key:t.keys.DELETE},{collapsed:!0,suffix:/^.?$/},j)),n.addBinding({key:t.keys.BACKSPACE},{collapsed:!1},N),n.addBinding({key:t.keys.DELETE},{collapsed:!1},N),n.addBinding({key:t.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},w),n.listen(),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,null,[{key:"match",value:function(e,t){return t=_(t),!["altKey","ctrlKey","metaKey","shiftKey"].some((function(r){return!!t[r]!==e[r]&&null!==t[r]}))&&t.key===(e.which||e.keyCode)}}]),a(t,[{key:"addBinding",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=_(e);if(null==n||null==n.key)return x.warn("Attempted to add invalid keyboard binding",n);"function"===typeof t&&(t={handler:t}),"function"===typeof r&&(r={handler:r}),n=(0,l.default)(n,t,r),this.bindings[n.key]=this.bindings[n.key]||[],this.bindings[n.key].push(n)}},{key:"listen",value:function(){var e=this;this.quill.root.addEventListener("keydown",(function(r){if(!r.defaultPrevented){var a=r.which||r.keyCode,o=(e.bindings[a]||[]).filter((function(e){return t.match(r,e)}));if(0!==o.length){var l=e.quill.getSelection();if(null!=l&&e.quill.hasFocus()){var c=e.quill.getLine(l.index),d=s(c,2),h=d[0],m=d[1],f=e.quill.getLeaf(l.index),p=s(f,2),g=p[0],x=p[1],b=0===l.length?[g,x]:e.quill.getLeaf(l.index+l.length),y=s(b,2),v=y[0],w=y[1],j=g instanceof u.default.Text?g.value().slice(0,x):"",N=v instanceof u.default.Text?v.value().slice(w):"",k={collapsed:0===l.length,empty:0===l.length&&h.length()<=1,format:e.quill.getFormat(l),offset:m,prefix:j,suffix:N};o.some((function(t){if(null!=t.collapsed&&t.collapsed!==k.collapsed)return!1;if(null!=t.empty&&t.empty!==k.empty)return!1;if(null!=t.offset&&t.offset!==k.offset)return!1;if(Array.isArray(t.format)){if(t.format.every((function(e){return null==k.format[e]})))return!1}else if("object"===n(t.format)&&!Object.keys(t.format).every((function(e){return!0===t.format[e]?null!=k.format[e]:!1===t.format[e]?null==k.format[e]:(0,i.default)(t.format[e],k.format[e])})))return!1;return!(null!=t.prefix&&!t.prefix.test(k.prefix))&&!(null!=t.suffix&&!t.suffix.test(k.suffix))&&!0!==t.handler.call(e,l,k)}))&&r.preventDefault()}}}}))}}]),t}(f.default);function v(e,t){var r,n=e===y.keys.LEFT?"prefix":"suffix";return g(r={key:e,shiftKey:t,altKey:null},n,/^$/),g(r,"handler",(function(r){var n=r.index;e===y.keys.RIGHT&&(n+=r.length+1);var a=this.quill.getLeaf(n);return!(s(a,1)[0]instanceof u.default.Embed)||(e===y.keys.LEFT?t?this.quill.setSelection(r.index-1,r.length+1,h.default.sources.USER):this.quill.setSelection(r.index-1,h.default.sources.USER):t?this.quill.setSelection(r.index,r.length+1,h.default.sources.USER):this.quill.setSelection(r.index+r.length+1,h.default.sources.USER),!1)})),r}function w(e,t){if(!(0===e.index||this.quill.getLength()<=1)){var r=this.quill.getLine(e.index),n=s(r,1)[0],a={};if(0===t.offset){var o=this.quill.getLine(e.index-1),i=s(o,1)[0];if(null!=i&&i.length()>1){var l=n.formats(),c=this.quill.getFormat(e.index-1,1);a=d.default.attributes.diff(l,c)||{}}}var u=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(t.prefix)?2:1;this.quill.deleteText(e.index-u,u,h.default.sources.USER),Object.keys(a).length>0&&this.quill.formatLine(e.index-u,u,a,h.default.sources.USER),this.quill.focus()}}function j(e,t){var r=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(t.suffix)?2:1;if(!(e.index>=this.quill.getLength()-r)){var n={},a=0,o=this.quill.getLine(e.index),i=s(o,1)[0];if(t.offset>=i.length()-1){var l=this.quill.getLine(e.index+1),c=s(l,1)[0];if(c){var u=i.formats(),m=this.quill.getFormat(e.index,1);n=d.default.attributes.diff(u,m)||{},a=c.length()}}this.quill.deleteText(e.index,r,h.default.sources.USER),Object.keys(n).length>0&&this.quill.formatLine(e.index+a-1,r,n,h.default.sources.USER)}}function N(e){var t=this.quill.getLines(e),r={};if(t.length>1){var n=t[0].formats(),s=t[t.length-1].formats();r=d.default.attributes.diff(s,n)||{}}this.quill.deleteText(e,h.default.sources.USER),Object.keys(r).length>0&&this.quill.formatLine(e.index,1,r,h.default.sources.USER),this.quill.setSelection(e.index,h.default.sources.SILENT),this.quill.focus()}function k(e,t){var r=this;e.length>0&&this.quill.scroll.deleteAt(e.index,e.length);var n=Object.keys(t.format).reduce((function(e,r){return u.default.query(r,u.default.Scope.BLOCK)&&!Array.isArray(t.format[r])&&(e[r]=t.format[r]),e}),{});this.quill.insertText(e.index,"\n",n,h.default.sources.USER),this.quill.setSelection(e.index+1,h.default.sources.SILENT),this.quill.focus(),Object.keys(t.format).forEach((function(e){null==n[e]&&(Array.isArray(t.format[e])||"link"!==e&&r.quill.format(e,t.format[e],h.default.sources.USER))}))}function S(e){return{key:y.keys.TAB,shiftKey:!e,format:{"code-block":!0},handler:function(t){var r=u.default.query("code-block"),n=t.index,a=t.length,o=this.quill.scroll.descendant(r,n),i=s(o,2),l=i[0],c=i[1];if(null!=l){var d=this.quill.getIndex(l),m=l.newlineIndex(c,!0)+1,f=l.newlineIndex(d+c+a),p=l.domNode.textContent.slice(m,f).split("\n");c=0,p.forEach((function(t,s){e?(l.insertAt(m+c,r.TAB),c+=r.TAB.length,0===s?n+=r.TAB.length:a+=r.TAB.length):t.startsWith(r.TAB)&&(l.deleteAt(m+c,r.TAB.length),c-=r.TAB.length,0===s?n-=r.TAB.length:a-=r.TAB.length),c+=t.length+1})),this.quill.update(h.default.sources.USER),this.quill.setSelection(n,a,h.default.sources.SILENT)}}}}function C(e){return{key:e[0].toUpperCase(),shortKey:!0,handler:function(t,r){this.quill.format(e,!r.format[e],h.default.sources.USER)}}}function _(e){if("string"===typeof e||"number"===typeof e)return _({key:e});if("object"===("undefined"===typeof e?"undefined":n(e))&&(e=(0,o.default)(e,!1)),"string"===typeof e.key)if(null!=y.keys[e.key.toUpperCase()])e.key=y.keys[e.key.toUpperCase()];else{if(1!==e.key.length)return null;e.key=e.key.toUpperCase().charCodeAt(0)}return e.shortKey&&(e[b]=e.shortKey,delete e.shortKey),e}y.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},y.DEFAULTS={bindings:{bold:C("bold"),italic:C("italic"),underline:C("underline"),indent:{key:y.keys.TAB,format:["blockquote","indent","list"],handler:function(e,t){if(t.collapsed&&0!==t.offset)return!0;this.quill.format("indent","+1",h.default.sources.USER)}},outdent:{key:y.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(e,t){if(t.collapsed&&0!==t.offset)return!0;this.quill.format("indent","-1",h.default.sources.USER)}},"outdent backspace":{key:y.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(e,t){null!=t.format.indent?this.quill.format("indent","-1",h.default.sources.USER):null!=t.format.list&&this.quill.format("list",!1,h.default.sources.USER)}},"indent code-block":S(!0),"outdent code-block":S(!1),"remove tab":{key:y.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(e){this.quill.deleteText(e.index-1,1,h.default.sources.USER)}},tab:{key:y.keys.TAB,handler:function(e){this.quill.history.cutoff();var t=(new c.default).retain(e.index).delete(e.length).insert("\t");this.quill.updateContents(t,h.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(e.index+1,h.default.sources.SILENT)}},"list empty enter":{key:y.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(e,t){this.quill.format("list",!1,h.default.sources.USER),t.format.indent&&this.quill.format("indent",!1,h.default.sources.USER)}},"checklist enter":{key:y.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(e){var t=this.quill.getLine(e.index),r=s(t,2),n=r[0],a=r[1],o=(0,l.default)({},n.formats(),{list:"checked"}),i=(new c.default).retain(e.index).insert("\n",o).retain(n.length()-a-1).retain(1,{list:"unchecked"});this.quill.updateContents(i,h.default.sources.USER),this.quill.setSelection(e.index+1,h.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:y.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(e,t){var r=this.quill.getLine(e.index),n=s(r,2),a=n[0],o=n[1],i=(new c.default).retain(e.index).insert("\n",t.format).retain(a.length()-o-1).retain(1,{header:null});this.quill.updateContents(i,h.default.sources.USER),this.quill.setSelection(e.index+1,h.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(e,t){var r=t.prefix.length,n=this.quill.getLine(e.index),a=s(n,2),o=a[0],i=a[1];if(i>r)return!0;var l=void 0;switch(t.prefix.trim()){case"[]":case"[ ]":l="unchecked";break;case"[x]":l="checked";break;case"-":case"*":l="bullet";break;default:l="ordered"}this.quill.insertText(e.index," ",h.default.sources.USER),this.quill.history.cutoff();var d=(new c.default).retain(e.index-i).delete(r+1).retain(o.length()-2-i).retain(1,{list:l});this.quill.updateContents(d,h.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(e.index-r,h.default.sources.SILENT)}},"code exit":{key:y.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(e){var t=this.quill.getLine(e.index),r=s(t,2),n=r[0],a=r[1],o=(new c.default).retain(e.index+n.length()-a-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(o,h.default.sources.USER)}},"embed left":v(y.keys.LEFT,!1),"embed left shift":v(y.keys.LEFT,!0),"embed right":v(y.keys.RIGHT,!1),"embed right shift":v(y.keys.RIGHT,!0)}},t.default=y,t.SHORTKEY=b},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,s=!1,a=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(l){s=!0,a=l}finally{try{!n&&i.return&&i.return()}finally{if(s)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in s)return s.value;var o=s.get;return void 0!==o?o.call(n):void 0},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=l(r(0)),i=l(r(7));function l(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.selection=r,n.textNode=document.createTextNode(t.CONTENTS),n.domNode.appendChild(n.textNode),n._length=0,n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,null,[{key:"value",value:function(){}}]),a(t,[{key:"detach",value:function(){null!=this.parent&&this.parent.removeChild(this)}},{key:"format",value:function(e,r){if(0!==this._length)return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,r);for(var n=this,a=0;null!=n&&n.statics.scope!==o.default.Scope.BLOCK_BLOT;)a+=n.offset(n.parent),n=n.parent;null!=n&&(this._length=t.CONTENTS.length,n.optimize(),n.formatAt(a,t.CONTENTS.length,e,r),this._length=0)}},{key:"index",value:function(e,r){return e===this.textNode?0:s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"index",this).call(this,e,r)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!this.selection.composing&&null!=this.parent){var e=this.textNode,r=this.selection.getNativeRange(),s=void 0,a=void 0,l=void 0;if(null!=r&&r.start.node===e&&r.end.node===e){var c=[e,r.start.offset,r.end.offset];s=c[0],a=c[1],l=c[2]}for(;null!=this.domNode.lastChild&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==t.CONTENTS){var d=this.textNode.data.split(t.CONTENTS).join("");this.next instanceof i.default?(s=this.next.domNode,this.next.insertAt(0,d),this.textNode.data=t.CONTENTS):(this.textNode.data=d,this.parent.insertBefore(o.default.create(this.textNode),this),this.textNode=document.createTextNode(t.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),null!=a){var u=[a,l].map((function(e){return Math.max(0,Math.min(s.data.length,e-1))})),h=n(u,2);return a=h[0],l=h[1],{startNode:s,startOffset:a,endNode:s,endOffset:l}}}}},{key:"update",value:function(e,t){var r=this;if(e.some((function(e){return"characterData"===e.type&&e.target===r.textNode}))){var n=this.restore();n&&(t.range=n)}}},{key:"value",value:function(){return""}}]),t}(o.default.Embed);c.blotName="cursor",c.className="ql-cursor",c.tagName="span",c.CONTENTS="\ufeff",t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(r(0)),s=r(4),a=o(s);function o(e){return e&&e.__esModule?e:{default:e}}var i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(n.default.Container);i.allowedChildren=[a.default,s.BlockEmbed,i],t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColorStyle=t.ColorClass=t.ColorAttributor=void 0;var n,s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in s)return s.value;var o=s.get;return void 0!==o?o.call(n):void 0},o=r(0),i=(n=o)&&n.__esModule?n:{default:n},l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"value",value:function(e){var r=a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"value",this).call(this,e);return r.startsWith("rgb(")?(r=r.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+r.split(",").map((function(e){return("00"+parseInt(e).toString(16)).slice(-2)})).join("")):r}}]),t}(i.default.Attributor.Style),c=new i.default.Attributor.Class("color","ql-color",{scope:i.default.Scope.INLINE}),d=new l("color","color",{scope:i.default.Scope.INLINE});t.ColorAttributor=l,t.ColorClass=c,t.ColorStyle=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sanitize=t.default=void 0;var n,s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in s)return s.value;var o=s.get;return void 0!==o?o.call(n):void 0},o=r(6),i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"format",value:function(e,r){if(e!==this.statics.blotName||!r)return a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,r);r=this.constructor.sanitize(r),this.domNode.setAttribute("href",r)}}],[{key:"create",value:function(e){var r=a(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return e=this.sanitize(e),r.setAttribute("href",e),r.setAttribute("rel","noopener noreferrer"),r.setAttribute("target","_blank"),r}},{key:"formats",value:function(e){return e.getAttribute("href")}},{key:"sanitize",value:function(e){return l(e,this.PROTOCOL_WHITELIST)?e:this.SANITIZED_URL}}]),t}(((n=o)&&n.__esModule?n:{default:n}).default);function l(e,t){var r=document.createElement("a");r.href=e;var n=r.href.slice(0,r.href.indexOf(":"));return t.indexOf(n)>-1}i.blotName="link",i.tagName="A",i.SANITIZED_URL="about:blank",i.PROTOCOL_WHITELIST=["http","https","mailto","tel"],t.default=i,t.sanitize=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=i(r(23)),o=i(r(107));function i(e){return e&&e.__esModule?e:{default:e}}var l=0;function c(e,t){e.setAttribute(t,!("true"===e.getAttribute(t)))}var d=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.select=t,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",(function(){r.togglePicker()})),this.label.addEventListener("keydown",(function(e){switch(e.keyCode){case a.default.keys.ENTER:r.togglePicker();break;case a.default.keys.ESCAPE:r.escape(),e.preventDefault()}})),this.select.addEventListener("change",this.update.bind(this))}return s(e,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),c(this.label,"aria-expanded"),c(this.options,"aria-hidden")}},{key:"buildItem",value:function(e){var t=this,r=document.createElement("span");return r.tabIndex="0",r.setAttribute("role","button"),r.classList.add("ql-picker-item"),e.hasAttribute("value")&&r.setAttribute("data-value",e.getAttribute("value")),e.textContent&&r.setAttribute("data-label",e.textContent),r.addEventListener("click",(function(){t.selectItem(r,!0)})),r.addEventListener("keydown",(function(e){switch(e.keyCode){case a.default.keys.ENTER:t.selectItem(r,!0),e.preventDefault();break;case a.default.keys.ESCAPE:t.escape(),e.preventDefault()}})),r}},{key:"buildLabel",value:function(){var e=document.createElement("span");return e.classList.add("ql-picker-label"),e.innerHTML=o.default,e.tabIndex="0",e.setAttribute("role","button"),e.setAttribute("aria-expanded","false"),this.container.appendChild(e),e}},{key:"buildOptions",value:function(){var e=this,t=document.createElement("span");t.classList.add("ql-picker-options"),t.setAttribute("aria-hidden","true"),t.tabIndex="-1",t.id="ql-picker-options-"+l,l+=1,this.label.setAttribute("aria-controls",t.id),this.options=t,[].slice.call(this.select.options).forEach((function(r){var n=e.buildItem(r);t.appendChild(n),!0===r.selected&&e.selectItem(n)})),this.container.appendChild(t)}},{key:"buildPicker",value:function(){var e=this;[].slice.call(this.select.attributes).forEach((function(t){e.container.setAttribute(t.name,t.value)})),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var e=this;this.close(),setTimeout((function(){return e.label.focus()}),1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.container.querySelector(".ql-selected");if(e!==r&&(null!=r&&r.classList.remove("ql-selected"),null!=e&&(e.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(e.parentNode.children,e),e.hasAttribute("data-value")?this.label.setAttribute("data-value",e.getAttribute("data-value")):this.label.removeAttribute("data-value"),e.hasAttribute("data-label")?this.label.setAttribute("data-label",e.getAttribute("data-label")):this.label.removeAttribute("data-label"),t))){if("function"===typeof Event)this.select.dispatchEvent(new Event("change"));else if("object"===("undefined"===typeof Event?"undefined":n(Event))){var s=document.createEvent("Event");s.initEvent("change",!0,!0),this.select.dispatchEvent(s)}this.close()}}},{key:"update",value:function(){var e=void 0;if(this.select.selectedIndex>-1){var t=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];e=this.select.options[this.select.selectedIndex],this.selectItem(t)}else this.selectItem(null);var r=null!=e&&e!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",r)}}]),e}();t.default=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=x(r(0)),s=x(r(5)),a=r(4),o=x(a),i=x(r(16)),l=x(r(25)),c=x(r(24)),d=x(r(35)),u=x(r(6)),h=x(r(22)),m=x(r(7)),f=x(r(55)),p=x(r(42)),g=x(r(23));function x(e){return e&&e.__esModule?e:{default:e}}s.default.register({"blots/block":o.default,"blots/block/embed":a.BlockEmbed,"blots/break":i.default,"blots/container":l.default,"blots/cursor":c.default,"blots/embed":d.default,"blots/inline":u.default,"blots/scroll":h.default,"blots/text":m.default,"modules/clipboard":f.default,"modules/history":p.default,"modules/keyboard":g.default}),n.default.register(o.default,i.default,c.default,u.default,h.default,m.default),t.default=s.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),s=function(){function e(e){this.domNode=e,this.domNode[n.DATA_KEY]={blot:this}}return Object.defineProperty(e.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),e.create=function(e){if(null==this.tagName)throw new n.ParchmentError("Blot definition missing tagName");var t;return Array.isArray(this.tagName)?("string"===typeof e&&(e=e.toUpperCase(),parseInt(e).toString()===e&&(e=parseInt(e))),t="number"===typeof e?document.createElement(this.tagName[e-1]):this.tagName.indexOf(e)>-1?document.createElement(e):document.createElement(this.tagName[0])):t=document.createElement(this.tagName),this.className&&t.classList.add(this.className),t},e.prototype.attach=function(){null!=this.parent&&(this.scroll=this.parent.scroll)},e.prototype.clone=function(){var e=this.domNode.cloneNode(!1);return n.create(e)},e.prototype.detach=function(){null!=this.parent&&this.parent.removeChild(this),delete this.domNode[n.DATA_KEY]},e.prototype.deleteAt=function(e,t){this.isolate(e,t).remove()},e.prototype.formatAt=function(e,t,r,s){var a=this.isolate(e,t);if(null!=n.query(r,n.Scope.BLOT)&&s)a.wrap(r,s);else if(null!=n.query(r,n.Scope.ATTRIBUTE)){var o=n.create(this.statics.scope);a.wrap(o),o.format(r,s)}},e.prototype.insertAt=function(e,t,r){var s=null==r?n.create("text",t):n.create(t,r),a=this.split(e);this.parent.insertBefore(s,a)},e.prototype.insertInto=function(e,t){void 0===t&&(t=null),null!=this.parent&&this.parent.children.remove(this);var r=null;e.children.insertBefore(this,t),null!=t&&(r=t.domNode),this.domNode.parentNode==e.domNode&&this.domNode.nextSibling==r||e.domNode.insertBefore(this.domNode,r),this.parent=e,this.attach()},e.prototype.isolate=function(e,t){var r=this.split(e);return r.split(t),r},e.prototype.length=function(){return 1},e.prototype.offset=function(e){return void 0===e&&(e=this.parent),null==this.parent||this==e?0:this.parent.children.offset(this)+this.parent.offset(e)},e.prototype.optimize=function(e){null!=this.domNode[n.DATA_KEY]&&delete this.domNode[n.DATA_KEY].mutations},e.prototype.remove=function(){null!=this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},e.prototype.replace=function(e){null!=e.parent&&(e.parent.insertBefore(this,e.next),e.remove())},e.prototype.replaceWith=function(e,t){var r="string"===typeof e?n.create(e,t):e;return r.replace(this),r},e.prototype.split=function(e,t){return 0===e?this:this.next},e.prototype.update=function(e,t){},e.prototype.wrap=function(e,t){var r="string"===typeof e?n.create(e,t):e;return null!=this.parent&&this.parent.insertBefore(r,this.next),r.appendChild(this),r},e.blotName="abstract",e}();t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(12),s=r(32),a=r(33),o=r(1),i=function(){function e(e){this.attributes={},this.domNode=e,this.build()}return e.prototype.attribute=function(e,t){t?e.add(this.domNode,t)&&(null!=e.value(this.domNode)?this.attributes[e.attrName]=e:delete this.attributes[e.attrName]):(e.remove(this.domNode),delete this.attributes[e.attrName])},e.prototype.build=function(){var e=this;this.attributes={};var t=n.default.keys(this.domNode),r=s.default.keys(this.domNode),i=a.default.keys(this.domNode);t.concat(r).concat(i).forEach((function(t){var r=o.query(t,o.Scope.ATTRIBUTE);r instanceof n.default&&(e.attributes[r.attrName]=r)}))},e.prototype.copy=function(e){var t=this;Object.keys(this.attributes).forEach((function(r){var n=t.attributes[r].value(t.domNode);e.format(r,n)}))},e.prototype.move=function(e){var t=this;this.copy(e),Object.keys(this.attributes).forEach((function(e){t.attributes[e].remove(t.domNode)})),this.attributes={}},e.prototype.values=function(){var e=this;return Object.keys(this.attributes).reduce((function(t,r){return t[r]=e.attributes[r].value(e.domNode),t}),{})},e}();t.default=i},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function s(e,t){return(e.getAttribute("class")||"").split(/\s+/).filter((function(e){return 0===e.indexOf(t+"-")}))}Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.keys=function(e){return(e.getAttribute("class")||"").split(/\s+/).map((function(e){return e.split("-").slice(0,-1).join("-")}))},t.prototype.add=function(e,t){return!!this.canAdd(e,t)&&(this.remove(e),e.classList.add(this.keyName+"-"+t),!0)},t.prototype.remove=function(e){s(e,this.keyName).forEach((function(t){e.classList.remove(t)})),0===e.classList.length&&e.removeAttribute("class")},t.prototype.value=function(e){var t=(s(e,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(e,t)?t:""},t}(r(12).default);t.default=a},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function s(e){var t=e.split("-"),r=t.slice(1).map((function(e){return e[0].toUpperCase()+e.slice(1)})).join("");return t[0]+r}Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.keys=function(e){return(e.getAttribute("style")||"").split(";").map((function(e){return e.split(":")[0].trim()}))},t.prototype.add=function(e,t){return!!this.canAdd(e,t)&&(e.style[s(this.keyName)]=t,!0)},t.prototype.remove=function(e){e.style[s(this.keyName)]="",e.getAttribute("style")||e.removeAttribute("style")},t.prototype.value=function(e){var t=e.style[s(this.keyName)];return this.canAdd(e,t)?t:""},t}(r(12).default);t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.quill=t,this.options=r,this.modules={}}return n(e,[{key:"init",value:function(){var e=this;Object.keys(this.options.modules).forEach((function(t){null==e.modules[t]&&e.addModule(t)}))}},{key:"addModule",value:function(e){var t=this.quill.constructor.import("modules/"+e);return this.modules[e]=new t(this.quill,this.options.modules[e]||{}),this.modules[e]}}]),e}();s.DEFAULTS={modules:{}},s.themes={default:s},t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in s)return s.value;var o=s.get;return void 0!==o?o.call(n):void 0},a=i(r(0)),o=i(r(7));function i(e){return e&&e.__esModule?e:{default:e}}var l="\ufeff",c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.contentNode=document.createElement("span"),r.contentNode.setAttribute("contenteditable",!1),[].slice.call(r.domNode.childNodes).forEach((function(e){r.contentNode.appendChild(e)})),r.leftGuard=document.createTextNode(l),r.rightGuard=document.createTextNode(l),r.domNode.appendChild(r.leftGuard),r.domNode.appendChild(r.contentNode),r.domNode.appendChild(r.rightGuard),r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"index",value:function(e,r){return e===this.leftGuard?0:e===this.rightGuard?1:s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"index",this).call(this,e,r)}},{key:"restore",value:function(e){var t=void 0,r=void 0,n=e.data.split(l).join("");if(e===this.leftGuard)if(this.prev instanceof o.default){var s=this.prev.length();this.prev.insertAt(s,n),t={startNode:this.prev.domNode,startOffset:s+n.length}}else r=document.createTextNode(n),this.parent.insertBefore(a.default.create(r),this),t={startNode:r,startOffset:n.length};else e===this.rightGuard&&(this.next instanceof o.default?(this.next.insertAt(0,n),t={startNode:this.next.domNode,startOffset:n.length}):(r=document.createTextNode(n),this.parent.insertBefore(a.default.create(r),this.next),t={startNode:r,startOffset:n.length}));return e.data=l,t}},{key:"update",value:function(e,t){var r=this;e.forEach((function(e){if("characterData"===e.type&&(e.target===r.leftGuard||e.target===r.rightGuard)){var n=r.restore(e.target);n&&(t.range=n)}}))}}]),t}(a.default.Embed);t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AlignStyle=t.AlignClass=t.AlignAttribute=void 0;var n,s=r(0),a=(n=s)&&n.__esModule?n:{default:n},o={scope:a.default.Scope.BLOCK,whitelist:["right","center","justify"]},i=new a.default.Attributor.Attribute("align","align",o),l=new a.default.Attributor.Class("align","ql-align",o),c=new a.default.Attributor.Style("align","text-align",o);t.AlignAttribute=i,t.AlignClass=l,t.AlignStyle=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BackgroundStyle=t.BackgroundClass=void 0;var n,s=r(0),a=(n=s)&&n.__esModule?n:{default:n},o=r(26),i=new a.default.Attributor.Class("background","ql-bg",{scope:a.default.Scope.INLINE}),l=new o.ColorAttributor("background","background-color",{scope:a.default.Scope.INLINE});t.BackgroundClass=i,t.BackgroundStyle=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DirectionStyle=t.DirectionClass=t.DirectionAttribute=void 0;var n,s=r(0),a=(n=s)&&n.__esModule?n:{default:n},o={scope:a.default.Scope.BLOCK,whitelist:["rtl"]},i=new a.default.Attributor.Attribute("direction","dir",o),l=new a.default.Attributor.Class("direction","ql-direction",o),c=new a.default.Attributor.Style("direction","direction",o);t.DirectionAttribute=i,t.DirectionClass=l,t.DirectionStyle=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FontClass=t.FontStyle=void 0;var n,s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in s)return s.value;var o=s.get;return void 0!==o?o.call(n):void 0},o=r(0),i=(n=o)&&n.__esModule?n:{default:n},l={scope:i.default.Scope.INLINE,whitelist:["serif","monospace"]},c=new i.default.Attributor.Class("font","ql-font",l),d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"value",value:function(e){return a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"value",this).call(this,e).replace(/["']/g,"")}}]),t}(i.default.Attributor.Style),u=new d("font","font-family",l);t.FontStyle=u,t.FontClass=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SizeStyle=t.SizeClass=void 0;var n,s=r(0),a=(n=s)&&n.__esModule?n:{default:n},o=new a.default.Attributor.Class("size","ql-size",{scope:a.default.Scope.INLINE,whitelist:["small","large","huge"]}),i=new a.default.Attributor.Style("size","font-size",{scope:a.default.Scope.INLINE,whitelist:["10px","18px","32px"]});t.SizeClass=o,t.SizeStyle=i},function(e,t,r){"use strict";e.exports={align:{"":r(76),center:r(77),right:r(78),justify:r(79)},background:r(80),blockquote:r(81),bold:r(82),clean:r(83),code:r(58),"code-block":r(58),color:r(84),direction:{"":r(85),rtl:r(86)},float:{center:r(87),full:r(88),left:r(89),right:r(90)},formula:r(91),header:{1:r(92),2:r(93)},italic:r(94),image:r(95),indent:{"+1":r(96),"-1":r(97)},link:r(98),list:{ordered:r(99),bullet:r(100),check:r(101)},script:{sub:r(102),super:r(103)},strike:r(104),underline:r(105),video:r(106)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLastChangeIndex=t.default=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=o(r(0)),a=o(r(5));function o(e){return e&&e.__esModule?e:{default:e}}var i=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.lastRecorded=0,n.ignoreChange=!1,n.clear(),n.quill.on(a.default.events.EDITOR_CHANGE,(function(e,t,r,s){e!==a.default.events.TEXT_CHANGE||n.ignoreChange||(n.options.userOnly&&s!==a.default.sources.USER?n.transform(t):n.record(t,r))})),n.quill.keyboard.addBinding({key:"Z",shortKey:!0},n.undo.bind(n)),n.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},n.redo.bind(n)),/Win/i.test(navigator.platform)&&n.quill.keyboard.addBinding({key:"Y",shortKey:!0},n.redo.bind(n)),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"change",value:function(e,t){if(0!==this.stack[e].length){var r=this.stack[e].pop();this.stack[t].push(r),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(r[e],a.default.sources.USER),this.ignoreChange=!1;var n=l(r[e]);this.quill.setSelection(n)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(e,t){if(0!==e.ops.length){this.stack.redo=[];var r=this.quill.getContents().diff(t),n=Date.now();if(this.lastRecorded+this.options.delay>n&&this.stack.undo.length>0){var s=this.stack.undo.pop();r=r.compose(s.undo),e=s.redo.compose(e)}else this.lastRecorded=n;this.stack.undo.push({redo:e,undo:r}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(e){this.stack.undo.forEach((function(t){t.undo=e.transform(t.undo,!0),t.redo=e.transform(t.redo,!0)})),this.stack.redo.forEach((function(t){t.undo=e.transform(t.undo,!0),t.redo=e.transform(t.redo,!0)}))}},{key:"undo",value:function(){this.change("undo","redo")}}]),t}(o(r(9)).default);function l(e){var t=e.reduce((function(e,t){return e+=t.delete||0}),0),r=e.length()-t;return function(e){var t=e.ops[e.ops.length-1];return null!=t&&(null!=t.insert?"string"===typeof t.insert&&t.insert.endsWith("\n"):null!=t.attributes&&Object.keys(t.attributes).some((function(e){return null!=s.default.query(e,s.default.Scope.BLOCK)})))}(e)&&(r-=1),r}i.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1},t.default=i,t.getLastChangeIndex=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BaseTooltip=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in s)return s.value;var o=s.get;return void 0!==o?o.call(n):void 0},a=f(r(3)),o=f(r(2)),i=f(r(8)),l=f(r(23)),c=f(r(34)),d=f(r(59)),u=f(r(60)),h=f(r(28)),m=f(r(61));function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function x(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=[!1,"center","right","justify"],y=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],v=[!1,"serif","monospace"],w=["1","2","3",!1],j=["small",!1,"large","huge"],N=function(e){function t(e,r){p(this,t);var n=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return e.emitter.listenDOM("click",document.body,(function t(r){if(!document.body.contains(e.root))return document.body.removeEventListener("click",t);null==n.tooltip||n.tooltip.root.contains(r.target)||document.activeElement===n.tooltip.textbox||n.quill.hasFocus()||n.tooltip.hide(),null!=n.pickers&&n.pickers.forEach((function(e){e.container.contains(r.target)||e.close()}))})),n}return x(t,e),n(t,[{key:"addModule",value:function(e){var r=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addModule",this).call(this,e);return"toolbar"===e&&this.extendToolbar(r),r}},{key:"buildButtons",value:function(e,t){e.forEach((function(e){(e.getAttribute("class")||"").split(/\s+/).forEach((function(r){if(r.startsWith("ql-")&&(r=r.slice(3),null!=t[r]))if("direction"===r)e.innerHTML=t[r][""]+t[r].rtl;else if("string"===typeof t[r])e.innerHTML=t[r];else{var n=e.value||"";null!=n&&t[r][n]&&(e.innerHTML=t[r][n])}}))}))}},{key:"buildPickers",value:function(e,t){var r=this;this.pickers=e.map((function(e){if(e.classList.contains("ql-align"))return null==e.querySelector("option")&&S(e,b),new u.default(e,t.align);if(e.classList.contains("ql-background")||e.classList.contains("ql-color")){var r=e.classList.contains("ql-background")?"background":"color";return null==e.querySelector("option")&&S(e,y,"background"===r?"#ffffff":"#000000"),new d.default(e,t[r])}return null==e.querySelector("option")&&(e.classList.contains("ql-font")?S(e,v):e.classList.contains("ql-header")?S(e,w):e.classList.contains("ql-size")&&S(e,j)),new h.default(e)})),this.quill.on(i.default.events.EDITOR_CHANGE,(function(){r.pickers.forEach((function(e){e.update()}))}))}}]),t}(c.default);N.DEFAULTS=(0,a.default)(!0,{},c.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var e=this,t=this.container.querySelector("input.ql-image[type=file]");null==t&&((t=document.createElement("input")).setAttribute("type","file"),t.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),t.classList.add("ql-image"),t.addEventListener("change",(function(){if(null!=t.files&&null!=t.files[0]){var r=new FileReader;r.onload=function(r){var n=e.quill.getSelection(!0);e.quill.updateContents((new o.default).retain(n.index).delete(n.length).insert({image:r.target.result}),i.default.sources.USER),e.quill.setSelection(n.index+1,i.default.sources.SILENT),t.value=""},r.readAsDataURL(t.files[0])}})),this.container.appendChild(t)),t.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var k=function(e){function t(e,r){p(this,t);var n=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.textbox=n.root.querySelector('input[type="text"]'),n.listen(),n}return x(t,e),n(t,[{key:"listen",value:function(){var e=this;this.textbox.addEventListener("keydown",(function(t){l.default.match(t,"enter")?(e.save(),t.preventDefault()):l.default.match(t,"escape")&&(e.cancel(),t.preventDefault())}))}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"link",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),null!=t?this.textbox.value=t:e!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+e)||""),this.root.setAttribute("data-mode",e)}},{key:"restoreFocus",value:function(){var e=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=e}},{key:"save",value:function(){var e=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":var t=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",e,i.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",e,i.default.sources.USER)),this.quill.root.scrollTop=t;break;case"video":e=function(e){var t=e.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||e.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return t?(t[1]||"https")+"://www.youtube.com/embed/"+t[2]+"?showinfo=0":(t=e.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(t[1]||"https")+"://player.vimeo.com/video/"+t[2]+"/":e}(e);case"formula":if(!e)break;var r=this.quill.getSelection(!0);if(null!=r){var n=r.index+r.length;this.quill.insertEmbed(n,this.root.getAttribute("data-mode"),e,i.default.sources.USER),"formula"===this.root.getAttribute("data-mode")&&this.quill.insertText(n+1," ",i.default.sources.USER),this.quill.setSelection(n+2,i.default.sources.USER)}}this.textbox.value="",this.hide()}}]),t}(m.default);function S(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t.forEach((function(t){var n=document.createElement("option");t===r?n.setAttribute("selected","selected"):n.setAttribute("value",t),e.appendChild(n)}))}t.BaseTooltip=k,t.default=N},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.head=this.tail=null,this.length=0}return e.prototype.append=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.insertBefore(e[0],null),e.length>1&&this.append.apply(this,e.slice(1))},e.prototype.contains=function(e){for(var t,r=this.iterator();t=r();)if(t===e)return!0;return!1},e.prototype.insertBefore=function(e,t){e&&(e.next=t,null!=t?(e.prev=t.prev,null!=t.prev&&(t.prev.next=e),t.prev=e,t===this.head&&(this.head=e)):null!=this.tail?(this.tail.next=e,e.prev=this.tail,this.tail=e):(e.prev=null,this.head=this.tail=e),this.length+=1)},e.prototype.offset=function(e){for(var t=0,r=this.head;null!=r;){if(r===e)return t;t+=r.length(),r=r.next}return-1},e.prototype.remove=function(e){this.contains(e)&&(null!=e.prev&&(e.prev.next=e.next),null!=e.next&&(e.next.prev=e.prev),e===this.head&&(this.head=e.next),e===this.tail&&(this.tail=e.prev),this.length-=1)},e.prototype.iterator=function(e){return void 0===e&&(e=this.head),function(){var t=e;return null!=e&&(e=e.next),t}},e.prototype.find=function(e,t){void 0===t&&(t=!1);for(var r,n=this.iterator();r=n();){var s=r.length();if(e<s||t&&e===s&&(null==r.next||0!==r.next.length()))return[r,e];e-=s}return[null,0]},e.prototype.forEach=function(e){for(var t,r=this.iterator();t=r();)e(t)},e.prototype.forEachAt=function(e,t,r){if(!(t<=0))for(var n,s=this.find(e),a=s[0],o=e-s[1],i=this.iterator(a);(n=i())&&o<e+t;){var l=n.length();e>o?r(n,e-o,Math.min(t,o+l-e)):r(n,0,Math.min(l,e+t-o)),o+=l}},e.prototype.map=function(e){return this.reduce((function(t,r){return t.push(e(r)),t}),[])},e.prototype.reduce=function(e,t){for(var r,n=this.iterator();r=n();)t=e(t,r);return t},e}();t.default=n},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var s=r(17),a=r(1),o={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},i=function(e){function t(t){var r=e.call(this,t)||this;return r.scroll=r,r.observer=new MutationObserver((function(e){r.update(e)})),r.observer.observe(r.domNode,o),r.attach(),r}return n(t,e),t.prototype.detach=function(){e.prototype.detach.call(this),this.observer.disconnect()},t.prototype.deleteAt=function(t,r){this.update(),0===t&&r===this.length()?this.children.forEach((function(e){e.remove()})):e.prototype.deleteAt.call(this,t,r)},t.prototype.formatAt=function(t,r,n,s){this.update(),e.prototype.formatAt.call(this,t,r,n,s)},t.prototype.insertAt=function(t,r,n){this.update(),e.prototype.insertAt.call(this,t,r,n)},t.prototype.optimize=function(t,r){var n=this;void 0===t&&(t=[]),void 0===r&&(r={}),e.prototype.optimize.call(this,r);for(var o=[].slice.call(this.observer.takeRecords());o.length>0;)t.push(o.pop());for(var i=function(e,t){void 0===t&&(t=!0),null!=e&&e!==n&&null!=e.domNode.parentNode&&(null==e.domNode[a.DATA_KEY].mutations&&(e.domNode[a.DATA_KEY].mutations=[]),t&&i(e.parent))},l=function(e){null!=e.domNode[a.DATA_KEY]&&null!=e.domNode[a.DATA_KEY].mutations&&(e instanceof s.default&&e.children.forEach(l),e.optimize(r))},c=t,d=0;c.length>0;d+=1){if(d>=100)throw new Error("[Parchment] Maximum optimize iterations reached");for(c.forEach((function(e){var t=a.find(e.target,!0);null!=t&&(t.domNode===e.target&&("childList"===e.type?(i(a.find(e.previousSibling,!1)),[].forEach.call(e.addedNodes,(function(e){var t=a.find(e,!1);i(t,!1),t instanceof s.default&&t.children.forEach((function(e){i(e,!1)}))}))):"attributes"===e.type&&i(t.prev)),i(t))})),this.children.forEach(l),o=(c=[].slice.call(this.observer.takeRecords())).slice();o.length>0;)t.push(o.pop())}},t.prototype.update=function(t,r){var n=this;void 0===r&&(r={}),(t=t||this.observer.takeRecords()).map((function(e){var t=a.find(e.target,!0);return null==t?null:null==t.domNode[a.DATA_KEY].mutations?(t.domNode[a.DATA_KEY].mutations=[e],t):(t.domNode[a.DATA_KEY].mutations.push(e),null)})).forEach((function(e){null!=e&&e!==n&&null!=e.domNode[a.DATA_KEY]&&e.update(e.domNode[a.DATA_KEY].mutations||[],r)})),null!=this.domNode[a.DATA_KEY].mutations&&e.prototype.update.call(this,this.domNode[a.DATA_KEY].mutations,r),this.optimize(t,r)},t.blotName="scroll",t.defaultChild="block",t.scope=a.Scope.BLOCK_BLOT,t.tagName="DIV",t}(s.default);t.default=i},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var s=r(18),a=r(1),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.formats=function(r){if(r.tagName!==t.tagName)return e.formats.call(this,r)},t.prototype.format=function(r,n){var a=this;r!==this.statics.blotName||n?e.prototype.format.call(this,r,n):(this.children.forEach((function(e){e instanceof s.default||(e=e.wrap(t.blotName,!0)),a.attributes.copy(e)})),this.unwrap())},t.prototype.formatAt=function(t,r,n,s){null!=this.formats()[n]||a.query(n,a.Scope.ATTRIBUTE)?this.isolate(t,r).format(n,s):e.prototype.formatAt.call(this,t,r,n,s)},t.prototype.optimize=function(r){e.prototype.optimize.call(this,r);var n=this.formats();if(0===Object.keys(n).length)return this.unwrap();var s=this.next;s instanceof t&&s.prev===this&&function(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var r in e)if(e[r]!==t[r])return!1;return!0}(n,s.formats())&&(s.moveChildren(this),s.remove())},t.blotName="inline",t.scope=a.Scope.INLINE_BLOT,t.tagName="SPAN",t}(s.default);t.default=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var s=r(18),a=r(1),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.formats=function(r){var n=a.query(t.blotName).tagName;if(r.tagName!==n)return e.formats.call(this,r)},t.prototype.format=function(r,n){null!=a.query(r,a.Scope.BLOCK)&&(r!==this.statics.blotName||n?e.prototype.format.call(this,r,n):this.replaceWith(t.blotName))},t.prototype.formatAt=function(t,r,n,s){null!=a.query(n,a.Scope.BLOCK)?this.format(n,s):e.prototype.formatAt.call(this,t,r,n,s)},t.prototype.insertAt=function(t,r,n){if(null==n||null!=a.query(r,a.Scope.INLINE))e.prototype.insertAt.call(this,t,r,n);else{var s=this.split(t),o=a.create(r,n);s.parent.insertBefore(o,s)}},t.prototype.update=function(t,r){navigator.userAgent.match(/Trident/)?this.build():e.prototype.update.call(this,t,r)},t.blotName="block",t.scope=a.Scope.BLOCK_BLOT,t.tagName="P",t}(s.default);t.default=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.formats=function(e){},t.prototype.format=function(t,r){e.prototype.formatAt.call(this,0,this.length(),t,r)},t.prototype.formatAt=function(t,r,n,s){0===t&&r===this.length()?this.format(n,s):e.prototype.formatAt.call(this,t,r,n,s)},t.prototype.formats=function(){return this.statics.formats(this.domNode)},t}(r(19).default);t.default=s},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var s=r(19),a=r(1),o=function(e){function t(t){var r=e.call(this,t)||this;return r.text=r.statics.value(r.domNode),r}return n(t,e),t.create=function(e){return document.createTextNode(e)},t.value=function(e){var t=e.data;return t.normalize&&(t=t.normalize()),t},t.prototype.deleteAt=function(e,t){this.domNode.data=this.text=this.text.slice(0,e)+this.text.slice(e+t)},t.prototype.index=function(e,t){return this.domNode===e?t:-1},t.prototype.insertAt=function(t,r,n){null==n?(this.text=this.text.slice(0,t)+r+this.text.slice(t),this.domNode.data=this.text):e.prototype.insertAt.call(this,t,r,n)},t.prototype.length=function(){return this.text.length},t.prototype.optimize=function(r){e.prototype.optimize.call(this,r),this.text=this.statics.value(this.domNode),0===this.text.length?this.remove():this.next instanceof t&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},t.prototype.position=function(e,t){return void 0===t&&(t=!1),[this.domNode,e]},t.prototype.split=function(e,t){if(void 0===t&&(t=!1),!t){if(0===e)return this;if(e===this.length())return this.next}var r=a.create(this.domNode.splitText(e));return this.parent.insertBefore(r,this.next),this.text=this.statics.value(this.domNode),r},t.prototype.update=function(e,t){var r=this;e.some((function(e){return"characterData"===e.type&&e.target===r.domNode}))&&(this.text=this.statics.value(this.domNode))},t.prototype.value=function(){return this.text},t.blotName="text",t.scope=a.Scope.INLINE_BLOT,t}(s.default);t.default=o},function(e,t,r){"use strict";var n=document.createElement("div");if(n.classList.toggle("test-class",!1),n.classList.contains("test-class")){var s=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(e,t){return arguments.length>1&&!this.contains(e)===!t?t:s.call(this,e)}}String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.substr(t,e.length)===e}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var r=this.toString();("number"!==typeof t||!isFinite(t)||Math.floor(t)!==t||t>r.length)&&(t=r.length),t-=e.length;var n=r.indexOf(e,t);return-1!==n&&n===t}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!==typeof e)throw new TypeError("predicate must be a function");for(var t,r=Object(this),n=r.length>>>0,s=arguments[1],a=0;a<n;a++)if(t=r[a],e.call(s,t,a,r))return t}}),document.addEventListener("DOMContentLoaded",(function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)}))},function(e,t){var r=-1;function n(e,t,l){if(e==t)return e?[[0,e]]:[];(l<0||e.length<l)&&(l=null);var d=a(e,t),u=e.substring(0,d);d=o(e=e.substring(d),t=t.substring(d));var h=e.substring(e.length-d),m=function(e,t){var i;if(!e)return[[1,t]];if(!t)return[[r,e]];var l=e.length>t.length?e:t,c=e.length>t.length?t:e,d=l.indexOf(c);if(-1!=d)return i=[[1,l.substring(0,d)],[0,c],[1,l.substring(d+c.length)]],e.length>t.length&&(i[0][0]=i[2][0]=r),i;if(1==c.length)return[[r,e],[1,t]];var u=function(e,t){var r=e.length>t.length?e:t,n=e.length>t.length?t:e;if(r.length<4||2*n.length<r.length)return null;function s(e,t,r){for(var n,s,i,l,c=e.substring(r,r+Math.floor(e.length/4)),d=-1,u="";-1!=(d=t.indexOf(c,d+1));){var h=a(e.substring(r),t.substring(d)),m=o(e.substring(0,r),t.substring(0,d));u.length<m+h&&(u=t.substring(d-m,d)+t.substring(d,d+h),n=e.substring(0,r-m),s=e.substring(r+h),i=t.substring(0,d-m),l=t.substring(d+h))}return 2*u.length>=e.length?[n,s,i,l,u]:null}var i,l,c,d,u,h=s(r,n,Math.ceil(r.length/4)),m=s(r,n,Math.ceil(r.length/2));if(!h&&!m)return null;i=m?h&&h[4].length>m[4].length?h:m:h,e.length>t.length?(l=i[0],c=i[1],d=i[2],u=i[3]):(d=i[0],u=i[1],l=i[2],c=i[3]);var f=i[4];return[l,c,d,u,f]}(e,t);if(u){var h=u[0],m=u[1],f=u[2],p=u[3],g=u[4],x=n(h,f),b=n(m,p);return x.concat([[0,g]],b)}return function(e,t){for(var n=e.length,a=t.length,o=Math.ceil((n+a)/2),i=o,l=2*o,c=new Array(l),d=new Array(l),u=0;u<l;u++)c[u]=-1,d[u]=-1;c[i+1]=0,d[i+1]=0;for(var h=n-a,m=h%2!=0,f=0,p=0,g=0,x=0,b=0;b<o;b++){for(var y=-b+f;y<=b-p;y+=2){for(var v=i+y,w=(C=y==-b||y!=b&&c[v-1]<c[v+1]?c[v+1]:c[v-1]+1)-y;C<n&&w<a&&e.charAt(C)==t.charAt(w);)C++,w++;if(c[v]=C,C>n)p+=2;else if(w>a)f+=2;else if(m&&(k=i+h-y)>=0&&k<l&&-1!=d[k]&&C>=(N=n-d[k]))return s(e,t,C,w)}for(var j=-b+g;j<=b-x;j+=2){for(var N,k=i+j,S=(N=j==-b||j!=b&&d[k-1]<d[k+1]?d[k+1]:d[k-1]+1)-j;N<n&&S<a&&e.charAt(n-N-1)==t.charAt(a-S-1);)N++,S++;if(d[k]=N,N>n)x+=2;else if(S>a)g+=2;else if(!m){var C;if((v=i+h-j)>=0&&v<l&&-1!=c[v])if(w=i+(C=c[v])-v,C>=(N=n-N))return s(e,t,C,w)}}}return[[r,e],[1,t]]}(e,t)}(e=e.substring(0,e.length-d),t=t.substring(0,t.length-d));return u&&m.unshift([0,u]),h&&m.push([0,h]),i(m),null!=l&&(m=function(e,t){var n=function(e,t){if(0===t)return[0,e];for(var n=0,s=0;s<e.length;s++){var a=e[s];if(a[0]===r||0===a[0]){var o=n+a[1].length;if(t===o)return[s+1,e];if(t<o){e=e.slice();var i=t-n,l=[a[0],a[1].slice(0,i)],c=[a[0],a[1].slice(i)];return e.splice(s,1,l,c),[s+1,e]}n=o}}throw new Error("cursor_pos is out of bounds!")}(e,t),s=n[1],a=n[0],o=s[a],i=s[a+1];if(null==o)return e;if(0!==o[0])return e;if(null!=i&&o[1]+i[1]===i[1]+o[1])return s.splice(a,2,i,o),c(s,a,2);if(null!=i&&0===i[1].indexOf(o[1])){s.splice(a,2,[i[0],o[1]],[0,o[1]]);var l=i[1].slice(o[1].length);return l.length>0&&s.splice(a+2,0,[i[0],l]),c(s,a,3)}return e}(m,l)),m=function(e){for(var t=!1,n=function(e){return e.charCodeAt(0)>=56320&&e.charCodeAt(0)<=57343},s=function(e){return e.charCodeAt(e.length-1)>=55296&&e.charCodeAt(e.length-1)<=56319},a=2;a<e.length;a+=1)0===e[a-2][0]&&s(e[a-2][1])&&e[a-1][0]===r&&n(e[a-1][1])&&1===e[a][0]&&n(e[a][1])&&(t=!0,e[a-1][1]=e[a-2][1].slice(-1)+e[a-1][1],e[a][1]=e[a-2][1].slice(-1)+e[a][1],e[a-2][1]=e[a-2][1].slice(0,-1));if(!t)return e;var o=[];for(a=0;a<e.length;a+=1)e[a][1].length>0&&o.push(e[a]);return o}(m)}function s(e,t,r,s){var a=e.substring(0,r),o=t.substring(0,s),i=e.substring(r),l=t.substring(s),c=n(a,o),d=n(i,l);return c.concat(d)}function a(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var r=0,n=Math.min(e.length,t.length),s=n,a=0;r<s;)e.substring(a,s)==t.substring(a,s)?a=r=s:n=s,s=Math.floor((n-r)/2+r);return s}function o(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var r=0,n=Math.min(e.length,t.length),s=n,a=0;r<s;)e.substring(e.length-s,e.length-a)==t.substring(t.length-s,t.length-a)?a=r=s:n=s,s=Math.floor((n-r)/2+r);return s}function i(e){e.push([0,""]);for(var t,n=0,s=0,l=0,c="",d="";n<e.length;)switch(e[n][0]){case 1:l++,d+=e[n][1],n++;break;case r:s++,c+=e[n][1],n++;break;case 0:s+l>1?(0!==s&&0!==l&&(0!==(t=a(d,c))&&(n-s-l>0&&0==e[n-s-l-1][0]?e[n-s-l-1][1]+=d.substring(0,t):(e.splice(0,0,[0,d.substring(0,t)]),n++),d=d.substring(t),c=c.substring(t)),0!==(t=o(d,c))&&(e[n][1]=d.substring(d.length-t)+e[n][1],d=d.substring(0,d.length-t),c=c.substring(0,c.length-t))),0===s?e.splice(n-l,s+l,[1,d]):0===l?e.splice(n-s,s+l,[r,c]):e.splice(n-s-l,s+l,[r,c],[1,d]),n=n-s-l+(s?1:0)+(l?1:0)+1):0!==n&&0==e[n-1][0]?(e[n-1][1]+=e[n][1],e.splice(n,1)):n++,l=0,s=0,c="",d=""}""===e[e.length-1][1]&&e.pop();var u=!1;for(n=1;n<e.length-1;)0==e[n-1][0]&&0==e[n+1][0]&&(e[n][1].substring(e[n][1].length-e[n-1][1].length)==e[n-1][1]?(e[n][1]=e[n-1][1]+e[n][1].substring(0,e[n][1].length-e[n-1][1].length),e[n+1][1]=e[n-1][1]+e[n+1][1],e.splice(n-1,1),u=!0):e[n][1].substring(0,e[n+1][1].length)==e[n+1][1]&&(e[n-1][1]+=e[n+1][1],e[n][1]=e[n][1].substring(e[n+1][1].length)+e[n+1][1],e.splice(n+1,1),u=!0)),n++;u&&i(e)}var l=n;function c(e,t,r){for(var n=t+r-1;n>=0&&n>=t-1;n--)if(n+1<e.length){var s=e[n],a=e[n+1];s[0]===a[1]&&e.splice(n,2,[s[0],s[1]+a[1]])}return e}l.INSERT=1,l.DELETE=r,l.EQUAL=0,e.exports=l},function(e,t){function r(e){var t=[];for(var r in e)t.push(r);return t}(e.exports="function"===typeof Object.keys?Object.keys:r).shim=r},function(e,t){var r="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function n(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function s(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Object.prototype.hasOwnProperty.call(e,"callee")&&!Object.prototype.propertyIsEnumerable.call(e,"callee")||!1}(t=e.exports=r?n:s).supported=n,t.unsupported=s},function(e,t){"use strict";var r=Object.prototype.hasOwnProperty,n="~";function s(){}function a(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function o(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),(new s).__proto__||(n=!1)),o.prototype.eventNames=function(){var e,t,s=[];if(0===this._eventsCount)return s;for(t in e=this._events)r.call(e,t)&&s.push(n?t.slice(1):t);return Object.getOwnPropertySymbols?s.concat(Object.getOwnPropertySymbols(e)):s},o.prototype.listeners=function(e,t){var r=n?n+e:e,s=this._events[r];if(t)return!!s;if(!s)return[];if(s.fn)return[s.fn];for(var a=0,o=s.length,i=new Array(o);a<o;a++)i[a]=s[a].fn;return i},o.prototype.emit=function(e,t,r,s,a,o){var i=n?n+e:e;if(!this._events[i])return!1;var l,c,d=this._events[i],u=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),u){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,r),!0;case 4:return d.fn.call(d.context,t,r,s),!0;case 5:return d.fn.call(d.context,t,r,s,a),!0;case 6:return d.fn.call(d.context,t,r,s,a,o),!0}for(c=1,l=new Array(u-1);c<u;c++)l[c-1]=arguments[c];d.fn.apply(d.context,l)}else{var h,m=d.length;for(c=0;c<m;c++)switch(d[c].once&&this.removeListener(e,d[c].fn,void 0,!0),u){case 1:d[c].fn.call(d[c].context);break;case 2:d[c].fn.call(d[c].context,t);break;case 3:d[c].fn.call(d[c].context,t,r);break;case 4:d[c].fn.call(d[c].context,t,r,s);break;default:if(!l)for(h=1,l=new Array(u-1);h<u;h++)l[h-1]=arguments[h];d[c].fn.apply(d[c].context,l)}}return!0},o.prototype.on=function(e,t,r){var s=new a(t,r||this),o=n?n+e:e;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],s]:this._events[o].push(s):(this._events[o]=s,this._eventsCount++),this},o.prototype.once=function(e,t,r){var s=new a(t,r||this,!0),o=n?n+e:e;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],s]:this._events[o].push(s):(this._events[o]=s,this._eventsCount++),this},o.prototype.removeListener=function(e,t,r,a){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return 0===--this._eventsCount?this._events=new s:delete this._events[o],this;var i=this._events[o];if(i.fn)i.fn!==t||a&&!i.once||r&&i.context!==r||(0===--this._eventsCount?this._events=new s:delete this._events[o]);else{for(var l=0,c=[],d=i.length;l<d;l++)(i[l].fn!==t||a&&!i[l].once||r&&i[l].context!==r)&&c.push(i[l]);c.length?this._events[o]=1===c.length?c[0]:c:0===--this._eventsCount?this._events=new s:delete this._events[o]}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&(0===--this._eventsCount?this._events=new s:delete this._events[t])):(this._events=new s,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prototype.setMaxListeners=function(){return this},o.prefixed=n,o.EventEmitter=o,"undefined"!==typeof e&&(e.exports=o)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.matchText=t.matchSpacing=t.matchNewline=t.matchBlot=t.matchAttributor=t.default=void 0;var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,s=!1,a=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(l){s=!0,a=l}finally{try{!n&&i.return&&i.return()}finally{if(s)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=y(r(3)),i=y(r(2)),l=y(r(0)),c=y(r(5)),d=y(r(10)),u=y(r(9)),h=r(36),m=r(37),f=y(r(13)),p=r(26),g=r(38),x=r(39),b=r(40);function y(e){return e&&e.__esModule?e:{default:e}}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var w=(0,d.default)("quill:clipboard"),j="__ql-matcher",N=[[Node.TEXT_NODE,q],[Node.TEXT_NODE,L],["br",function(e,t){return A(t,"\n")||t.insert("\n"),t}],[Node.ELEMENT_NODE,L],[Node.ELEMENT_NODE,I],[Node.ELEMENT_NODE,M],[Node.ELEMENT_NODE,P],[Node.ELEMENT_NODE,function(e,t){var r={},n=e.style||{};return n.fontStyle&&"italic"===E(e).fontStyle&&(r.italic=!0),n.fontWeight&&(E(e).fontWeight.startsWith("bold")||parseInt(E(e).fontWeight)>=700)&&(r.bold=!0),Object.keys(r).length>0&&(t=_(t,r)),parseFloat(n.textIndent||0)>0&&(t=(new i.default).insert("\t").concat(t)),t}],["li",function(e,t){var r=l.default.query(e);if(null==r||"list-item"!==r.blotName||!A(t,"\n"))return t;for(var n=-1,s=e.parentNode;!s.classList.contains("ql-clipboard");)"list"===(l.default.query(s)||{}).blotName&&(n+=1),s=s.parentNode;return n<=0?t:t.compose((new i.default).retain(t.length()-1).retain(1,{indent:n}))}],["b",z.bind(z,"bold")],["i",z.bind(z,"italic")],["style",function(){return new i.default}]],k=[h.AlignAttribute,g.DirectionAttribute].reduce((function(e,t){return e[t.keyName]=t,e}),{}),S=[h.AlignStyle,m.BackgroundStyle,p.ColorStyle,g.DirectionStyle,x.FontStyle,b.SizeStyle].reduce((function(e,t){return e[t.keyName]=t,e}),{}),C=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.quill.root.addEventListener("paste",n.onPaste.bind(n)),n.container=n.quill.addContainer("ql-clipboard"),n.container.setAttribute("contenteditable",!0),n.container.setAttribute("tabindex",-1),n.matchers=[],N.concat(n.options.matchers).forEach((function(e){var t=s(e,2),a=t[0],o=t[1];(r.matchVisual||o!==M)&&n.addMatcher(a,o)})),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"addMatcher",value:function(e,t){this.matchers.push([e,t])}},{key:"convert",value:function(e){if("string"===typeof e)return this.container.innerHTML=e.replace(/\>\r?\n +\</g,"><"),this.convert();var t=this.quill.getFormat(this.quill.selection.savedRange.index);if(t[f.default.blotName]){var r=this.container.innerText;return this.container.innerHTML="",(new i.default).insert(r,v({},f.default.blotName,t[f.default.blotName]))}var n=this.prepareMatching(),a=s(n,2),o=a[0],l=a[1],c=T(this.container,o,l);return A(c,"\n")&&null==c.ops[c.ops.length-1].attributes&&(c=c.compose((new i.default).retain(c.length()-1).delete(1))),w.log("convert",this.container.innerHTML,c),this.container.innerHTML="",c}},{key:"dangerouslyPasteHTML",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.default.sources.API;if("string"===typeof e)this.quill.setContents(this.convert(e),t),this.quill.setSelection(0,c.default.sources.SILENT);else{var n=this.convert(t);this.quill.updateContents((new i.default).retain(e).concat(n),r),this.quill.setSelection(e+n.length(),c.default.sources.SILENT)}}},{key:"onPaste",value:function(e){var t=this;if(!e.defaultPrevented&&this.quill.isEnabled()){var r=this.quill.getSelection(),n=(new i.default).retain(r.index),s=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(c.default.sources.SILENT),setTimeout((function(){n=n.concat(t.convert()).delete(r.length),t.quill.updateContents(n,c.default.sources.USER),t.quill.setSelection(n.length()-r.length,c.default.sources.SILENT),t.quill.scrollingContainer.scrollTop=s,t.quill.focus()}),1)}}},{key:"prepareMatching",value:function(){var e=this,t=[],r=[];return this.matchers.forEach((function(n){var a=s(n,2),o=a[0],i=a[1];switch(o){case Node.TEXT_NODE:r.push(i);break;case Node.ELEMENT_NODE:t.push(i);break;default:[].forEach.call(e.container.querySelectorAll(o),(function(e){e[j]=e[j]||[],e[j].push(i)}))}})),[t,r]}}]),t}(u.default);function _(e,t,r){return"object"===("undefined"===typeof t?"undefined":n(t))?Object.keys(t).reduce((function(e,r){return _(e,r,t[r])}),e):e.reduce((function(e,n){return n.attributes&&n.attributes[t]?e.push(n):e.insert(n.insert,(0,o.default)({},v({},t,r),n.attributes))}),new i.default)}function E(e){if(e.nodeType!==Node.ELEMENT_NODE)return{};var t="__ql-computed-style";return e[t]||(e[t]=window.getComputedStyle(e))}function A(e,t){for(var r="",n=e.ops.length-1;n>=0&&r.length<t.length;--n){var s=e.ops[n];if("string"!==typeof s.insert)break;r=s.insert+r}return r.slice(-1*t.length)===t}function O(e){if(0===e.childNodes.length)return!1;var t=E(e);return["block","list-item"].indexOf(t.display)>-1}function T(e,t,r){return e.nodeType===e.TEXT_NODE?r.reduce((function(t,r){return r(e,t)}),new i.default):e.nodeType===e.ELEMENT_NODE?[].reduce.call(e.childNodes||[],(function(n,s){var a=T(s,t,r);return s.nodeType===e.ELEMENT_NODE&&(a=t.reduce((function(e,t){return t(s,e)}),a),a=(s[j]||[]).reduce((function(e,t){return t(s,e)}),a)),n.concat(a)}),new i.default):new i.default}function z(e,t,r){return _(r,e,!0)}function P(e,t){var r=l.default.Attributor.Attribute.keys(e),n=l.default.Attributor.Class.keys(e),s=l.default.Attributor.Style.keys(e),a={};return r.concat(n).concat(s).forEach((function(t){var r=l.default.query(t,l.default.Scope.ATTRIBUTE);null!=r&&(a[r.attrName]=r.value(e),a[r.attrName])||(null==(r=k[t])||r.attrName!==t&&r.keyName!==t||(a[r.attrName]=r.value(e)||void 0),null==(r=S[t])||r.attrName!==t&&r.keyName!==t||(r=S[t],a[r.attrName]=r.value(e)||void 0))})),Object.keys(a).length>0&&(t=_(t,a)),t}function I(e,t){var r=l.default.query(e);if(null==r)return t;if(r.prototype instanceof l.default.Embed){var n={},s=r.value(e);null!=s&&(n[r.blotName]=s,t=(new i.default).insert(n,r.formats(e)))}else"function"===typeof r.formats&&(t=_(t,r.blotName,r.formats(e)));return t}function L(e,t){return A(t,"\n")||(O(e)||t.length()>0&&e.nextSibling&&O(e.nextSibling))&&t.insert("\n"),t}function M(e,t){if(O(e)&&null!=e.nextElementSibling&&!A(t,"\n\n")){var r=e.offsetHeight+parseFloat(E(e).marginTop)+parseFloat(E(e).marginBottom);e.nextElementSibling.offsetTop>e.offsetTop+1.5*r&&t.insert("\n")}return t}function q(e,t){var r=e.data;if("O:P"===e.parentNode.tagName)return t.insert(r.trim());if(0===r.trim().length&&e.parentNode.classList.contains("ql-clipboard"))return t;if(!E(e.parentNode).whiteSpace.startsWith("pre")){var n=function(e,t){return(t=t.replace(/[^\u00a0]/g,"")).length<1&&e?" ":t};r=(r=r.replace(/\r\n/g," ").replace(/\n/g," ")).replace(/\s\s+/g,n.bind(n,!0)),(null==e.previousSibling&&O(e.parentNode)||null!=e.previousSibling&&O(e.previousSibling))&&(r=r.replace(/^\s+/,n.bind(n,!1))),(null==e.nextSibling&&O(e.parentNode)||null!=e.nextSibling&&O(e.nextSibling))&&(r=r.replace(/\s+$/,n.bind(n,!1)))}return t.insert(r)}C.DEFAULTS={matchers:[],matchVisual:!0},t.default=C,t.matchAttributor=P,t.matchBlot=I,t.matchNewline=L,t.matchSpacing=M,t.matchText=q},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in s)return s.value;var o=s.get;return void 0!==o?o.call(n):void 0},o=r(6),i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"optimize",value:function(e){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return a(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),t}(((n=o)&&n.__esModule?n:{default:n}).default);i.blotName="bold",i.tagName=["STRONG","B"],t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addControls=t.default=void 0;var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,s=!1,a=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(l){s=!0,a=l}finally{try{!n&&i.return&&i.return()}finally{if(s)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=d(r(2)),o=d(r(0)),i=d(r(5)),l=d(r(10)),c=d(r(9));function d(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var h=(0,l.default)("quill:toolbar"),m=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var s,a=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));if(Array.isArray(a.options.container)){var o=document.createElement("div");p(o,a.options.container),e.container.parentNode.insertBefore(o,e.container),a.container=o}else"string"===typeof a.options.container?a.container=document.querySelector(a.options.container):a.container=a.options.container;return a.container instanceof HTMLElement?(a.container.classList.add("ql-toolbar"),a.controls=[],a.handlers={},Object.keys(a.options.handlers).forEach((function(e){a.addHandler(e,a.options.handlers[e])})),[].forEach.call(a.container.querySelectorAll("button, select"),(function(e){a.attach(e)})),a.quill.on(i.default.events.EDITOR_CHANGE,(function(e,t){e===i.default.events.SELECTION_CHANGE&&a.update(t)})),a.quill.on(i.default.events.SCROLL_OPTIMIZE,(function(){var e=a.quill.selection.getRange(),t=n(e,1)[0];a.update(t)})),a):(s=h.error("Container required for toolbar",a.options),u(a,s))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"addHandler",value:function(e,t){this.handlers[e]=t}},{key:"attach",value:function(e){var t=this,r=[].find.call(e.classList,(function(e){return 0===e.indexOf("ql-")}));if(r){if(r=r.slice(3),"BUTTON"===e.tagName&&e.setAttribute("type","button"),null==this.handlers[r]){if(null!=this.quill.scroll.whitelist&&null==this.quill.scroll.whitelist[r])return void h.warn("ignoring attaching to disabled format",r,e);if(null==o.default.query(r))return void h.warn("ignoring attaching to nonexistent format",r,e)}var s="SELECT"===e.tagName?"change":"click";e.addEventListener(s,(function(s){var l=void 0;if("SELECT"===e.tagName){if(e.selectedIndex<0)return;var c=e.options[e.selectedIndex];l=!c.hasAttribute("selected")&&(c.value||!1)}else l=!e.classList.contains("ql-active")&&(e.value||!e.hasAttribute("value")),s.preventDefault();t.quill.focus();var d=t.quill.selection.getRange(),u=n(d,1)[0];if(null!=t.handlers[r])t.handlers[r].call(t,l);else if(o.default.query(r).prototype instanceof o.default.Embed){if(!(l=prompt("Enter "+r)))return;t.quill.updateContents((new a.default).retain(u.index).delete(u.length).insert(function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},r,l)),i.default.sources.USER)}else t.quill.format(r,l,i.default.sources.USER);t.update(u)})),this.controls.push([r,e])}}},{key:"update",value:function(e){var t=null==e?{}:this.quill.getFormat(e);this.controls.forEach((function(r){var s=n(r,2),a=s[0],o=s[1];if("SELECT"===o.tagName){var i=void 0;if(null==e)i=null;else if(null==t[a])i=o.querySelector("option[selected]");else if(!Array.isArray(t[a])){var l=t[a];"string"===typeof l&&(l=l.replace(/\"/g,'\\"')),i=o.querySelector('option[value="'+l+'"]')}null==i?(o.value="",o.selectedIndex=-1):i.selected=!0}else if(null==e)o.classList.remove("ql-active");else if(o.hasAttribute("value")){var c=t[a]===o.getAttribute("value")||null!=t[a]&&t[a].toString()===o.getAttribute("value")||null==t[a]&&!o.getAttribute("value");o.classList.toggle("ql-active",c)}else o.classList.toggle("ql-active",null!=t[a])}))}}]),t}(c.default);function f(e,t,r){var n=document.createElement("button");n.setAttribute("type","button"),n.classList.add("ql-"+t),null!=r&&(n.value=r),e.appendChild(n)}function p(e,t){Array.isArray(t[0])||(t=[t]),t.forEach((function(t){var r=document.createElement("span");r.classList.add("ql-formats"),t.forEach((function(e){if("string"===typeof e)f(r,e);else{var t=Object.keys(e)[0],n=e[t];Array.isArray(n)?function(e,t,r){var n=document.createElement("select");n.classList.add("ql-"+t),r.forEach((function(e){var t=document.createElement("option");!1!==e?t.setAttribute("value",e):t.setAttribute("selected","selected"),n.appendChild(t)})),e.appendChild(n)}(r,t,n):f(r,t,n)}})),e.appendChild(r)}))}m.DEFAULTS={},m.DEFAULTS={container:null,handlers:{clean:function(){var e=this,t=this.quill.getSelection();if(null!=t)if(0==t.length){var r=this.quill.getFormat();Object.keys(r).forEach((function(t){null!=o.default.query(t,o.default.Scope.INLINE)&&e.quill.format(t,!1)}))}else this.quill.removeFormat(t,i.default.sources.USER)},direction:function(e){var t=this.quill.getFormat().align;"rtl"===e&&null==t?this.quill.format("align","right",i.default.sources.USER):e||"right"!==t||this.quill.format("align",!1,i.default.sources.USER),this.quill.format("direction",e,i.default.sources.USER)},indent:function(e){var t=this.quill.getSelection(),r=this.quill.getFormat(t),n=parseInt(r.indent||0);if("+1"===e||"-1"===e){var s="+1"===e?1:-1;"rtl"===r.direction&&(s*=-1),this.quill.format("indent",n+s,i.default.sources.USER)}},link:function(e){!0===e&&(e=prompt("Enter link URL:")),this.quill.format("link",e,i.default.sources.USER)},list:function(e){var t=this.quill.getSelection(),r=this.quill.getFormat(t);"check"===e?"checked"===r.list||"unchecked"===r.list?this.quill.format("list",!1,i.default.sources.USER):this.quill.format("list","unchecked",i.default.sources.USER):this.quill.format("list",e,i.default.sources.USER)}}},t.default=m,t.addControls=p},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in s)return s.value;var o=s.get;return void 0!==o?o.call(n):void 0},o=r(28),i=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.label.innerHTML=r,n.container.classList.add("ql-color-picker"),[].slice.call(n.container.querySelectorAll(".ql-picker-item"),0,7).forEach((function(e){e.classList.add("ql-primary")})),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"buildItem",value:function(e){var r=a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"buildItem",this).call(this,e);return r.style.backgroundColor=e.getAttribute("value")||"",r}},{key:"selectItem",value:function(e,r){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"selectItem",this).call(this,e,r);var n=this.label.querySelector(".ql-color-label"),s=e&&e.getAttribute("data-value")||"";n&&("line"===n.tagName?n.style.stroke=s:n.style.fill=s)}}]),t}(((n=o)&&n.__esModule?n:{default:n}).default);t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in s)return s.value;var o=s.get;return void 0!==o?o.call(n):void 0},o=r(28),i=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.container.classList.add("ql-icon-picker"),[].forEach.call(n.container.querySelectorAll(".ql-picker-item"),(function(e){e.innerHTML=r[e.getAttribute("data-value")||""]})),n.defaultItem=n.container.querySelector(".ql-selected"),n.selectItem(n.defaultItem),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"selectItem",value:function(e,r){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"selectItem",this).call(this,e,r),e=e||this.defaultItem,this.label.innerHTML=e.innerHTML}}]),t}(((n=o)&&n.__esModule?n:{default:n}).default);t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function(){function e(t,r){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.quill=t,this.boundsContainer=r||document.body,this.root=t.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",(function(){n.root.style.marginTop=-1*n.quill.root.scrollTop+"px"})),this.hide()}return n(e,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(e){var t=e.left+e.width/2-this.root.offsetWidth/2,r=e.bottom+this.quill.root.scrollTop;this.root.style.left=t+"px",this.root.style.top=r+"px",this.root.classList.remove("ql-flip");var n=this.boundsContainer.getBoundingClientRect(),s=this.root.getBoundingClientRect(),a=0;if(s.right>n.right&&(a=n.right-s.right,this.root.style.left=t+a+"px"),s.left<n.left&&(a=n.left-s.left,this.root.style.left=t+a+"px"),s.bottom>n.bottom){var o=s.bottom-s.top,i=e.bottom-e.top+o;this.root.style.top=r-i+"px",this.root.classList.add("ql-flip")}return a}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),e}();t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,s=!1,a=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(l){s=!0,a=l}finally{try{!n&&i.return&&i.return()}finally{if(s)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in s)return s.value;var o=s.get;return void 0!==o?o.call(n):void 0},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=m(r(3)),i=m(r(8)),l=r(43),c=m(l),d=m(r(27)),u=r(15),h=m(r(41));function m(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var x=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],b=function(e){function t(e,r){f(this,t),null!=r.modules.toolbar&&null==r.modules.toolbar.container&&(r.modules.toolbar.container=x);var n=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.quill.container.classList.add("ql-snow"),n}return g(t,e),a(t,[{key:"extendToolbar",value:function(e){e.container.classList.add("ql-snow"),this.buildButtons([].slice.call(e.container.querySelectorAll("button")),h.default),this.buildPickers([].slice.call(e.container.querySelectorAll("select")),h.default),this.tooltip=new y(this.quill,this.options.bounds),e.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},(function(t,r){e.handlers.link.call(e,!r.format.link)}))}}]),t}(c.default);b.DEFAULTS=(0,o.default)(!0,{},c.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(e){if(e){var t=this.quill.getSelection();if(null==t||0==t.length)return;var r=this.quill.getText(t);/^\S+@\S+\.\S+$/.test(r)&&0!==r.indexOf("mailto:")&&(r="mailto:"+r),this.quill.theme.tooltip.edit("link",r)}else this.quill.format("link",!1)}}}}});var y=function(e){function t(e,r){f(this,t);var n=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.preview=n.root.querySelector("a.ql-preview"),n}return g(t,e),a(t,[{key:"listen",value:function(){var e=this;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",(function(t){e.root.classList.contains("ql-editing")?e.save():e.edit("link",e.preview.textContent),t.preventDefault()})),this.root.querySelector("a.ql-remove").addEventListener("click",(function(t){if(null!=e.linkRange){var r=e.linkRange;e.restoreFocus(),e.quill.formatText(r,"link",!1,i.default.sources.USER),delete e.linkRange}t.preventDefault(),e.hide()})),this.quill.on(i.default.events.SELECTION_CHANGE,(function(t,r,s){if(null!=t){if(0===t.length&&s===i.default.sources.USER){var a=e.quill.scroll.descendant(d.default,t.index),o=n(a,2),l=o[0],c=o[1];if(null!=l){e.linkRange=new u.Range(t.index-c,l.length());var h=d.default.formats(l.domNode);return e.preview.textContent=h,e.preview.setAttribute("href",h),e.show(),void e.position(e.quill.getBounds(e.linkRange))}}else delete e.linkRange;e.hide()}}))}},{key:"show",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),t}(l.BaseTooltip);y.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),t.default=b},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=L(r(29)),s=r(36),a=r(38),o=r(64),i=L(r(65)),l=L(r(66)),c=r(67),d=L(c),u=r(37),h=r(26),m=r(39),f=r(40),p=L(r(56)),g=L(r(68)),x=L(r(27)),b=L(r(69)),y=L(r(70)),v=L(r(71)),w=L(r(72)),j=L(r(73)),N=r(13),k=L(N),S=L(r(74)),C=L(r(75)),_=L(r(57)),E=L(r(41)),A=L(r(28)),O=L(r(59)),T=L(r(60)),z=L(r(61)),P=L(r(108)),I=L(r(62));function L(e){return e&&e.__esModule?e:{default:e}}n.default.register({"attributors/attribute/direction":a.DirectionAttribute,"attributors/class/align":s.AlignClass,"attributors/class/background":u.BackgroundClass,"attributors/class/color":h.ColorClass,"attributors/class/direction":a.DirectionClass,"attributors/class/font":m.FontClass,"attributors/class/size":f.SizeClass,"attributors/style/align":s.AlignStyle,"attributors/style/background":u.BackgroundStyle,"attributors/style/color":h.ColorStyle,"attributors/style/direction":a.DirectionStyle,"attributors/style/font":m.FontStyle,"attributors/style/size":f.SizeStyle},!0),n.default.register({"formats/align":s.AlignClass,"formats/direction":a.DirectionClass,"formats/indent":o.IndentClass,"formats/background":u.BackgroundStyle,"formats/color":h.ColorStyle,"formats/font":m.FontClass,"formats/size":f.SizeClass,"formats/blockquote":i.default,"formats/code-block":k.default,"formats/header":l.default,"formats/list":d.default,"formats/bold":p.default,"formats/code":N.Code,"formats/italic":g.default,"formats/link":x.default,"formats/script":b.default,"formats/strike":y.default,"formats/underline":v.default,"formats/image":w.default,"formats/video":j.default,"formats/list/item":c.ListItem,"modules/formula":S.default,"modules/syntax":C.default,"modules/toolbar":_.default,"themes/bubble":P.default,"themes/snow":I.default,"ui/icons":E.default,"ui/picker":A.default,"ui/icon-picker":T.default,"ui/color-picker":O.default,"ui/tooltip":z.default},!0),t.default=n.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IndentClass=void 0;var n,s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in s)return s.value;var o=s.get;return void 0!==o?o.call(n):void 0},o=r(0),i=(n=o)&&n.__esModule?n:{default:n},l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"add",value:function(e,r){if("+1"===r||"-1"===r){var n=this.value(e)||0;r="+1"===r?n+1:n-1}return 0===r?(this.remove(e),!0):a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"add",this).call(this,e,r)}},{key:"canAdd",value:function(e,r){return a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"canAdd",this).call(this,e,r)||a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"canAdd",this).call(this,e,parseInt(r))}},{key:"value",value:function(e){return parseInt(a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"value",this).call(this,e))||void 0}}]),t}(i.default.Attributor.Class),c=new l("indent","ql-indent",{scope:i.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});t.IndentClass=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,s=r(4),a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((n=s)&&n.__esModule?n:{default:n}).default);a.blotName="blockquote",a.tagName="blockquote",t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(4),o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,null,[{key:"formats",value:function(e){return this.tagName.indexOf(e.tagName)+1}}]),t}(((n=a)&&n.__esModule?n:{default:n}).default);o.blotName="header",o.tagName=["H1","H2","H3","H4","H5","H6"],t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ListItem=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in s)return s.value;var o=s.get;return void 0!==o?o.call(n):void 0},a=l(r(0)),o=l(r(4)),i=l(r(25));function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=function(e){function t(){return c(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),n(t,[{key:"format",value:function(e,r){e!==m.blotName||r?s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,r):this.replaceWith(a.default.create(this.statics.scope))}},{key:"remove",value:function(){null==this.prev&&null==this.next?this.parent.remove():s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(e,r){return this.parent.isolate(this.offset(this.parent),this.length()),e===this.parent.statics.blotName?(this.parent.replaceWith(e,r),this):(this.parent.unwrap(),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replaceWith",this).call(this,e,r))}}],[{key:"formats",value:function(e){return e.tagName===this.tagName?void 0:s(t.__proto__||Object.getPrototypeOf(t),"formats",this).call(this,e)}}]),t}(o.default);h.blotName="list-item",h.tagName="LI";var m=function(e){function t(e){c(this,t);var r=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),n=function(t){if(t.target.parentNode===e){var n=r.statics.formats(e),s=a.default.find(t.target);"checked"===n?s.format("list","unchecked"):"unchecked"===n&&s.format("list","checked")}};return e.addEventListener("touchstart",n),e.addEventListener("mousedown",n),r}return u(t,e),n(t,null,[{key:"create",value:function(e){var r="ordered"===e?"OL":"UL",n=s(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,r);return"checked"!==e&&"unchecked"!==e||n.setAttribute("data-checked","checked"===e),n}},{key:"formats",value:function(e){return"OL"===e.tagName?"ordered":"UL"===e.tagName?e.hasAttribute("data-checked")?"true"===e.getAttribute("data-checked")?"checked":"unchecked":"bullet":void 0}}]),n(t,[{key:"format",value:function(e,t){this.children.length>0&&this.children.tail.format(e,t)}},{key:"formats",value:function(){return e={},t=this.statics.blotName,r=this.statics.formats(this.domNode),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e;var e,t,r}},{key:"insertBefore",value:function(e,r){if(e instanceof h)s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertBefore",this).call(this,e,r);else{var n=null==r?this.length():r.offset(this),a=this.split(n);a.parent.insertBefore(e,a)}}},{key:"optimize",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e);var r=this.next;null!=r&&r.prev===this&&r.statics.blotName===this.statics.blotName&&r.domNode.tagName===this.domNode.tagName&&r.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(r.moveChildren(this),r.remove())}},{key:"replace",value:function(e){if(e.statics.blotName!==this.statics.blotName){var r=a.default.create(this.statics.defaultChild);e.moveChildren(r),this.appendChild(r)}s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replace",this).call(this,e)}}]),t}(i.default);m.blotName="list",m.scope=a.default.Scope.BLOCK_BLOT,m.tagName=["OL","UL"],m.defaultChild="list-item",m.allowedChildren=[h],t.ListItem=h,t.default=m},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,s=r(56),a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((n=s)&&n.__esModule?n:{default:n}).default);a.blotName="italic",a.tagName=["EM","I"],t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in s)return s.value;var o=s.get;return void 0!==o?o.call(n):void 0},o=r(6),i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,null,[{key:"create",value:function(e){return"super"===e?document.createElement("sup"):"sub"===e?document.createElement("sub"):a(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e)}},{key:"formats",value:function(e){return"SUB"===e.tagName?"sub":"SUP"===e.tagName?"super":void 0}}]),t}(((n=o)&&n.__esModule?n:{default:n}).default);i.blotName="script",i.tagName=["SUB","SUP"],t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,s=r(6),a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((n=s)&&n.__esModule?n:{default:n}).default);a.blotName="strike",a.tagName="S",t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,s=r(6),a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((n=s)&&n.__esModule?n:{default:n}).default);a.blotName="underline",a.tagName="U",t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in s)return s.value;var o=s.get;return void 0!==o?o.call(n):void 0},o=r(0),i=(n=o)&&n.__esModule?n:{default:n},l=r(27),c=["alt","height","width"],d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"format",value:function(e,r){c.indexOf(e)>-1?r?this.domNode.setAttribute(e,r):this.domNode.removeAttribute(e):a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,r)}}],[{key:"create",value:function(e){var r=a(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return"string"===typeof e&&r.setAttribute("src",this.sanitize(e)),r}},{key:"formats",value:function(e){return c.reduce((function(t,r){return e.hasAttribute(r)&&(t[r]=e.getAttribute(r)),t}),{})}},{key:"match",value:function(e){return/\.(jpe?g|gif|png)$/.test(e)||/^data:image\/.+;base64/.test(e)}},{key:"sanitize",value:function(e){return(0,l.sanitize)(e,["http","https","data"])?e:"//:0"}},{key:"value",value:function(e){return e.getAttribute("src")}}]),t}(i.default.Embed);d.blotName="image",d.tagName="IMG",t.default=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in s)return s.value;var o=s.get;return void 0!==o?o.call(n):void 0},o=r(4),i=r(27),l=(n=i)&&n.__esModule?n:{default:n},c=["height","width"],d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"format",value:function(e,r){c.indexOf(e)>-1?r?this.domNode.setAttribute(e,r):this.domNode.removeAttribute(e):a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,r)}}],[{key:"create",value:function(e){var r=a(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return r.setAttribute("frameborder","0"),r.setAttribute("allowfullscreen",!0),r.setAttribute("src",this.sanitize(e)),r}},{key:"formats",value:function(e){return c.reduce((function(t,r){return e.hasAttribute(r)&&(t[r]=e.getAttribute(r)),t}),{})}},{key:"sanitize",value:function(e){return l.default.sanitize(e)}},{key:"value",value:function(e){return e.getAttribute("src")}}]),t}(o.BlockEmbed);d.blotName="video",d.className="ql-video",d.tagName="IFRAME",t.default=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.FormulaBlot=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in s)return s.value;var o=s.get;return void 0!==o?o.call(n):void 0},a=l(r(35)),o=l(r(5)),i=l(r(9));function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=function(e){function t(){return c(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),n(t,null,[{key:"create",value:function(e){var r=s(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return"string"===typeof e&&(window.katex.render(e,r,{throwOnError:!1,errorColor:"#f00"}),r.setAttribute("data-value",e)),r}},{key:"value",value:function(e){return e.getAttribute("data-value")}}]),t}(a.default);h.blotName="formula",h.className="ql-formula",h.tagName="SPAN";var m=function(e){function t(){c(this,t);var e=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(null==window.katex)throw new Error("Formula module requires KaTeX.");return e}return u(t,e),n(t,null,[{key:"register",value:function(){o.default.register(h,!0)}}]),t}(i.default);t.FormulaBlot=h,t.default=m},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CodeToken=t.CodeBlock=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in s)return s.value;var o=s.get;return void 0!==o?o.call(n):void 0},a=l(r(0)),o=l(r(5)),i=l(r(9));function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=function(e){function t(){return c(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),n(t,[{key:"replaceWith",value:function(e){this.domNode.textContent=this.domNode.textContent,this.attach(),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replaceWith",this).call(this,e)}},{key:"highlight",value:function(e){var t=this.domNode.textContent;this.cachedText!==t&&((t.trim().length>0||null==this.cachedText)&&(this.domNode.innerHTML=e(t),this.domNode.normalize(),this.attach()),this.cachedText=t)}}]),t}(l(r(13)).default);h.className="ql-syntax";var m=new a.default.Attributor.Class("token","hljs",{scope:a.default.Scope.INLINE}),f=function(e){function t(e,r){c(this,t);var n=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));if("function"!==typeof n.options.highlight)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var s=null;return n.quill.on(o.default.events.SCROLL_OPTIMIZE,(function(){clearTimeout(s),s=setTimeout((function(){n.highlight(),s=null}),n.options.interval)})),n.highlight(),n}return u(t,e),n(t,null,[{key:"register",value:function(){o.default.register(m,!0),o.default.register(h,!0)}}]),n(t,[{key:"highlight",value:function(){var e=this;if(!this.quill.selection.composing){this.quill.update(o.default.sources.USER);var t=this.quill.getSelection();this.quill.scroll.descendants(h).forEach((function(t){t.highlight(e.options.highlight)})),this.quill.update(o.default.sources.SILENT),null!=t&&this.quill.setSelection(t,o.default.sources.SILENT)}}}]),t}(i.default);f.DEFAULTS={highlight:null==window.hljs?null:function(e){return window.hljs.highlightAuto(e).value},interval:1e3},t.CodeBlock=h,t.CodeToken=m,t.default=f},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(e,t){e.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(e,t){e.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(e,t){e.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(e,t){e.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BubbleTooltip=void 0;var n=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in s)return s.value;var o=s.get;return void 0!==o?o.call(n):void 0},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=u(r(3)),o=u(r(8)),i=r(43),l=u(i),c=r(15),d=u(r(41));function u(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],g=function(e){function t(e,r){h(this,t),null!=r.modules.toolbar&&null==r.modules.toolbar.container&&(r.modules.toolbar.container=p);var n=m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.quill.container.classList.add("ql-bubble"),n}return f(t,e),s(t,[{key:"extendToolbar",value:function(e){this.tooltip=new x(this.quill,this.options.bounds),this.tooltip.root.appendChild(e.container),this.buildButtons([].slice.call(e.container.querySelectorAll("button")),d.default),this.buildPickers([].slice.call(e.container.querySelectorAll("select")),d.default)}}]),t}(l.default);g.DEFAULTS=(0,a.default)(!0,{},l.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(e){e?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var x=function(e){function t(e,r){h(this,t);var n=m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.quill.on(o.default.events.EDITOR_CHANGE,(function(e,t,r,s){if(e===o.default.events.SELECTION_CHANGE)if(null!=t&&t.length>0&&s===o.default.sources.USER){n.show(),n.root.style.left="0px",n.root.style.width="",n.root.style.width=n.root.offsetWidth+"px";var a=n.quill.getLines(t.index,t.length);if(1===a.length)n.position(n.quill.getBounds(t));else{var i=a[a.length-1],l=n.quill.getIndex(i),d=Math.min(i.length()-1,t.index+t.length-l),u=n.quill.getBounds(new c.Range(l,d));n.position(u)}}else document.activeElement!==n.textbox&&n.quill.hasFocus()&&n.hide()})),n}return f(t,e),s(t,[{key:"listen",value:function(){var e=this;n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",(function(){e.root.classList.remove("ql-editing")})),this.quill.on(o.default.events.SCROLL_OPTIMIZE,(function(){setTimeout((function(){if(!e.root.classList.contains("ql-hidden")){var t=e.quill.getSelection();null!=t&&e.position(e.quill.getBounds(t))}}),1)}))}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(e){var r=n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"position",this).call(this,e),s=this.root.querySelector(".ql-tooltip-arrow");if(s.style.marginLeft="",0===r)return r;s.style.marginLeft=-1*r-s.offsetWidth/2+"px"}}]),t}(i.BaseTooltip);x.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),t.BubbleTooltip=x,t.default=g},function(e,t,r){e.exports=r(63)}]).default},e.exports=t()},4190:(e,t,r)=>{var n=r(1340);e.exports=function(e){var t=this.__data__,r=n(t,e);return r<0?void 0:t[r][1]}},4202:(e,t)=>{"use strict";var r=Symbol.for("react.element"),n=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,g={};function x(e,t,r){this.props=e,this.context=t,this.refs=g,this.updater=r||f}function b(){}function y(e,t,r){this.props=e,this.context=t,this.refs=g,this.updater=r||f}x.prototype.isReactComponent={},x.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},x.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=x.prototype;var v=y.prototype=new b;v.constructor=y,p(v,x.prototype),v.isPureReactComponent=!0;var w=Array.isArray,j=Object.prototype.hasOwnProperty,N={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,n){var s,a={},o=null,i=null;if(null!=t)for(s in void 0!==t.ref&&(i=t.ref),void 0!==t.key&&(o=""+t.key),t)j.call(t,s)&&!k.hasOwnProperty(s)&&(a[s]=t[s]);var l=arguments.length-2;if(1===l)a.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps)void 0===a[s]&&(a[s]=l[s]);return{$$typeof:r,type:e,key:o,ref:i,props:a,_owner:N.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===r}var _=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,s,a,o){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var l=!1;if(null===e)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case r:case n:l=!0}}if(l)return o=o(l=e),e=""===a?"."+E(l,0):a,w(o)?(s="",null!=e&&(s=e.replace(_,"$&/")+"/"),A(o,t,s,"",(function(e){return e}))):null!=o&&(C(o)&&(o=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,s+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(_,"$&/")+"/")+e)),t.push(o)),1;if(l=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var d=a+E(i=e[c],c);l+=A(i,t,s,d,o)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=m&&e[m]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(i=e.next()).done;)l+=A(i=i.value,t,s,d=a+E(i,c++),o);else if("object"===i)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function O(e,t,r){if(null==e)return e;var n=[],s=0;return A(e,n,"","",(function(e){return t.call(r,e,s++)})),n}function T(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var z={current:null},P={transition:null},I={ReactCurrentDispatcher:z,ReactCurrentBatchConfig:P,ReactCurrentOwner:N};function L(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:O,forEach:function(e,t,r){O(e,(function(){t.apply(this,arguments)}),r)},count:function(e){var t=0;return O(e,(function(){t++})),t},toArray:function(e){return O(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=x,t.Fragment=s,t.Profiler=o,t.PureComponent=y,t.StrictMode=a,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I,t.act=L,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=p({},e.props),a=e.key,o=e.ref,i=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,i=N.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)j.call(t,c)&&!k.hasOwnProperty(c)&&(s[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)s.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];s.children=l}return{$$typeof:r,type:e.type,key:a,ref:o,props:s,_owner:i}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:i,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:T}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=L,t.useCallback=function(e,t){return z.current.useCallback(e,t)},t.useContext=function(e){return z.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return z.current.useDeferredValue(e)},t.useEffect=function(e,t){return z.current.useEffect(e,t)},t.useId=function(){return z.current.useId()},t.useImperativeHandle=function(e,t,r){return z.current.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return z.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return z.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return z.current.useMemo(e,t)},t.useReducer=function(e,t,r){return z.current.useReducer(e,t,r)},t.useRef=function(e){return z.current.useRef(e)},t.useState=function(e){return z.current.useState(e)},t.useSyncExternalStore=function(e,t,r){return z.current.useSyncExternalStore(e,t,r)},t.useTransition=function(){return z.current.useTransition()},t.version="18.3.1"},4262:(e,t,r)=>{var n=r(8895),s=r(4052);e.exports=function(e,t,r){var a=t(e);return s(e)?a:n(a,r(e))}},4391:(e,t,r)=>{"use strict";var n=r(7950);t.createRoot=n.createRoot,t.hydrateRoot=n.hydrateRoot},4543:(e,t,r)=>{e=r.nmd(e);var n=r(6552),s=r(14),a=t&&!t.nodeType&&t,o=a&&e&&!e.nodeType&&e,i=o&&o.exports===a?n.Buffer:void 0,l=(i?i.isBuffer:void 0)||s;e.exports=l},4545:(e,t,r)=>{var n=r(7160);e.exports=function(){this.__data__=new n,this.size=0}},4552:(e,t,r)=>{var n=r(9812),s=Object.prototype,a=s.hasOwnProperty,o=s.toString,i=n?n.toStringTag:void 0;e.exports=function(e){var t=a.call(e,i),r=e[i];try{e[i]=void 0;var n=!0}catch(l){}var s=o.call(e);return n&&(t?e[i]=r:delete e[i]),s}},4657:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},4816:(e,t,r)=>{var n=r(7251),s=r(7159),a=r(438),o=r(9394),i=r(6874);function l(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=s,l.prototype.get=a,l.prototype.has=o,l.prototype.set=i,e.exports=l},5043:(e,t,r)=>{"use strict";e.exports=r(4202)},5051:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},5173:(e,t,r)=>{e.exports=r(1497)()},5193:(e,t,r)=>{var n=r(6913),s=r(2761);e.exports=function(e){return s(e)&&"[object Arguments]"==n(e)}},5204:(e,t,r)=>{var n=r(7937)(r(6552),"Map");e.exports=n},5387:(e,t,r)=>{var n=r(7937)(r(6552),"Promise");e.exports=n},5428:(e,t,r)=>{var n=r(6913),s=r(6173),a=r(2761),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,e.exports=function(e){return a(e)&&s(e.length)&&!!o[n(e)]}},5538:(e,t,r)=>{var n=r(7160),s=r(4545),a=r(793),o=r(7760),i=r(3892),l=r(6788);function c(e){var t=this.__data__=new n(e);this.size=t.size}c.prototype.clear=s,c.prototype.delete=a,c.prototype.get=o,c.prototype.has=i,c.prototype.set=l,e.exports=c},5575:(e,t,r)=>{var n=r(7937)(Object,"create");e.exports=n},5752:(e,t,r)=>{var n=r(9395),s=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,a,o,i){var l=1&r,c=n(e),d=c.length;if(d!=n(t).length&&!l)return!1;for(var u=d;u--;){var h=c[u];if(!(l?h in t:s.call(t,h)))return!1}var m=i.get(e),f=i.get(t);if(m&&f)return m==t&&f==e;var p=!0;i.set(e,t),i.set(t,e);for(var g=l;++u<d;){var x=e[h=c[u]],b=t[h];if(a)var y=l?a(b,x,h,t,e,i):a(x,b,h,e,t,i);if(!(void 0===y?x===b||o(x,b,r,a,i):y)){p=!1;break}g||(g="constructor"==h)}if(p&&!g){var v=e.constructor,w=t.constructor;v==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof w&&w instanceof w||(p=!1)}return i.delete(e),i.delete(t),p}},6095:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},6140:e=>{var t=Object.prototype;e.exports=function(e){var r=e&&e.constructor;return e===("function"==typeof r&&r.prototype||t)}},6173:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},6179:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},6399:(e,t,r)=>{var n=r(5538),s=r(3668),a=r(9987),o=r(5752),i=r(6924),l=r(4052),c=r(4543),d=r(1268),u="[object Arguments]",h="[object Array]",m="[object Object]",f=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,p,g,x){var b=l(e),y=l(t),v=b?h:i(e),w=y?h:i(t),j=(v=v==u?m:v)==m,N=(w=w==u?m:w)==m,k=v==w;if(k&&c(e)){if(!c(t))return!1;b=!0,j=!1}if(k&&!j)return x||(x=new n),b||d(e)?s(e,t,r,p,g,x):a(e,t,v,r,p,g,x);if(!(1&r)){var S=j&&f.call(e,"__wrapped__"),C=N&&f.call(t,"__wrapped__");if(S||C){var _=S?e.value():e,E=C?t.value():t;return x||(x=new n),g(_,E,r,p,x)}}return!!k&&(x||(x=new n),o(e,t,r,p,g,x))}},6440:e=>{"use strict";var t=function(){};e.exports=t},6552:(e,t,r)=>{var n=r(7105),s="object"==typeof self&&self&&self.Object===Object&&self,a=n||s||Function("return this")();e.exports=a},6571:(e,t,r)=>{var n=r(1629),s=r(6173);e.exports=function(e){return null!=e&&s(e.length)&&!n(e)}},6600:(e,t,r)=>{var n=r(7937)(r(6552),"WeakMap");e.exports=n},6686:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},6704:e=>{e.exports=function(e){return this.__data__.has(e)}},6788:(e,t,r)=>{var n=r(7160),s=r(5204),a=r(4816);e.exports=function(e,t){var r=this.__data__;if(r instanceof n){var o=r.__data__;if(!s||o.length<199)return o.push([e,t]),this.size=++r.size,this;r=this.__data__=new a(o)}return r.set(e,t),this.size=r.size,this}},6832:(e,t,r)=>{e=r.nmd(e);var n=r(7105),s=t&&!t.nodeType&&t,a=s&&e&&!e.nodeType&&e,o=a&&a.exports===s&&n.process,i=function(){try{var e=a&&a.require&&a.require("util").types;return e||o&&o.binding&&o.binding("util")}catch(t){}}();e.exports=i},6874:(e,t,r)=>{var n=r(2622);e.exports=function(e,t){var r=n(this,e),s=r.size;return r.set(e,t),this.size+=r.size==s?0:1,this}},6913:(e,t,r)=>{var n=r(9812),s=r(4552),a=r(6095),o=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":o&&o in Object(e)?s(e):a(e)}},6924:(e,t,r)=>{var n=r(7685),s=r(5204),a=r(5387),o=r(2070),i=r(6600),l=r(6913),c=r(6996),d="[object Map]",u="[object Promise]",h="[object Set]",m="[object WeakMap]",f="[object DataView]",p=c(n),g=c(s),x=c(a),b=c(o),y=c(i),v=l;(n&&v(new n(new ArrayBuffer(1)))!=f||s&&v(new s)!=d||a&&v(a.resolve())!=u||o&&v(new o)!=h||i&&v(new i)!=m)&&(v=function(e){var t=l(e),r="[object Object]"==t?e.constructor:void 0,n=r?c(r):"";if(n)switch(n){case p:return f;case g:return d;case x:return u;case b:return h;case y:return m}return t}),e.exports=v},6954:(e,t,r)=>{var n=r(1629),s=r(7857),a=r(6686),o=r(6996),i=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,d=l.toString,u=c.hasOwnProperty,h=RegExp("^"+d.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!a(e)||s(e))&&(n(e)?h:i).test(o(e))}},6989:(e,t,r)=>{var n=r(6399),s=r(2761);e.exports=function e(t,r,a,o,i){return t===r||(null==t||null==r||!s(t)&&!s(r)?t!==t&&r!==r:n(t,r,a,o,e,i))}},6996:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(r){}try{return e+""}catch(r){}}return""}},7105:(e,t,r)=>{var n="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;e.exports=n},7159:(e,t,r)=>{var n=r(2622);e.exports=function(e){var t=n(this,e).delete(e);return this.size-=t?1:0,t}},7160:(e,t,r)=>{var n=r(7563),s=r(9935),a=r(4190),o=r(1946),i=r(1714);function l(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=s,l.prototype.get=a,l.prototype.has=o,l.prototype.set=i,e.exports=l},7234:(e,t)=>{"use strict";function r(e,t){var r=e.length;e.push(t);e:for(;0<r;){var n=r-1>>>1,s=e[n];if(!(0<a(s,t)))break e;e[n]=t,e[r]=s,r=n}}function n(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,s=e.length,o=s>>>1;n<o;){var i=2*(n+1)-1,l=e[i],c=i+1,d=e[c];if(0>a(l,r))c<s&&0>a(d,l)?(e[n]=d,e[c]=r,n=c):(e[n]=l,e[i]=r,n=i);else{if(!(c<s&&0>a(d,r)))break e;e[n]=d,e[c]=r,n=c}}}return t}function a(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var i=Date,l=i.now();t.unstable_now=function(){return i.now()-l}}var c=[],d=[],u=1,h=null,m=3,f=!1,p=!1,g=!1,x="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function v(e){for(var t=n(d);null!==t;){if(null===t.callback)s(d);else{if(!(t.startTime<=e))break;s(d),t.sortIndex=t.expirationTime,r(c,t)}t=n(d)}}function w(e){if(g=!1,v(e),!p)if(null!==n(c))p=!0,P(j);else{var t=n(d);null!==t&&I(w,t.startTime-e)}}function j(e,r){p=!1,g&&(g=!1,b(C),C=-1),f=!0;var a=m;try{for(v(r),h=n(c);null!==h&&(!(h.expirationTime>r)||e&&!A());){var o=h.callback;if("function"===typeof o){h.callback=null,m=h.priorityLevel;var i=o(h.expirationTime<=r);r=t.unstable_now(),"function"===typeof i?h.callback=i:h===n(c)&&s(c),v(r)}else s(c);h=n(c)}if(null!==h)var l=!0;else{var u=n(d);null!==u&&I(w,u.startTime-r),l=!1}return l}finally{h=null,m=a,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var N,k=!1,S=null,C=-1,_=5,E=-1;function A(){return!(t.unstable_now()-E<_)}function O(){if(null!==S){var e=t.unstable_now();E=e;var r=!0;try{r=S(!0,e)}finally{r?N():(k=!1,S=null)}}else k=!1}if("function"===typeof y)N=function(){y(O)};else if("undefined"!==typeof MessageChannel){var T=new MessageChannel,z=T.port2;T.port1.onmessage=O,N=function(){z.postMessage(null)}}else N=function(){x(O,0)};function P(e){S=e,k||(k=!0,N())}function I(e,r){C=x((function(){e(t.unstable_now())}),r)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,P(j))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(e){switch(m){case 1:case 2:case 3:var t=3;break;default:t=m}var r=m;m=t;try{return e()}finally{m=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=m;m=e;try{return t()}finally{m=r}},t.unstable_scheduleCallback=function(e,s,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var i=-1;break;case 2:i=250;break;case 5:i=1073741823;break;case 4:i=1e4;break;default:i=5e3}return e={id:u++,callback:s,priorityLevel:e,startTime:a,expirationTime:i=a+i,sortIndex:-1},a>o?(e.sortIndex=a,r(d,e),null===n(c)&&e===n(d)&&(g?(b(C),C=-1):g=!0,I(w,a-o))):(e.sortIndex=i,r(c,e),p||f||(p=!0,P(j))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=m;return function(){var r=m;m=t;try{return e.apply(this,arguments)}finally{m=r}}}},7251:(e,t,r)=>{var n=r(8724),s=r(7160),a=r(5204);e.exports=function(){this.size=0,this.__data__={hash:new n,map:new(a||s),string:new n}}},7529:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,s=0,a=[];++r<n;){var o=e[r];t(o,r,e)&&(a[s++]=o)}return a}},7563:e=>{e.exports=function(){this.__data__=[],this.size=0}},7574:e=>{e.exports=function(e){return function(t){return e(t)}}},7615:(e,t,r)=>{var n=r(5575);e.exports=function(){this.__data__=n?n(null):{},this.size=0}},7685:(e,t,r)=>{var n=r(7937)(r(6552),"DataView");e.exports=n},7760:e=>{e.exports=function(e){return this.__data__.get(e)}},7828:e=>{e.exports=function(){return[]}},7857:(e,t,r)=>{var n=r(3440),s=function(){var e=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=function(e){return!!s&&s in e}},7937:(e,t,r)=>{var n=r(6954),s=r(4657);e.exports=function(e,t){var r=s(e,t);return n(r)?r:void 0}},7950:(e,t,r)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=r(2730)},8114:e=>{e.exports=function(e,t){return e.has(t)}},8139:(e,t)=>{var r;!function(){"use strict";var n={}.hasOwnProperty;function s(){for(var e="",t=0;t<arguments.length;t++){var r=arguments[t];r&&(e=o(e,a(r)))}return e}function a(e){if("string"===typeof e||"number"===typeof e)return e;if("object"!==typeof e)return"";if(Array.isArray(e))return s.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var r in e)n.call(e,r)&&e[r]&&(t=o(t,r));return t}function o(e,t){return t?e?e+" "+t:e+t:e}e.exports?(s.default=s,e.exports=s):void 0===(r=function(){return s}.apply(t,[]))||(e.exports=r)}()},8673:(e,t,r)=>{var n=r(3204),s=r(3713),a=r(6571);e.exports=function(e){return a(e)?n(e):s(e)}},8724:(e,t,r)=>{var n=r(7615),s=r(5051),a=r(2154),o=r(8734),i=r(2662);function l(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=s,l.prototype.get=a,l.prototype.has=o,l.prototype.set=i,e.exports=l},8734:(e,t,r)=>{var n=r(5575),s=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return n?void 0!==t[e]:s.call(t,e)}},8853:(e,t,r)=>{"use strict";e.exports=r(7234)},8895:e=>{e.exports=function(e,t){for(var r=-1,n=t.length,s=e.length;++r<n;)e[s+r]=t[r];return e}},8902:(e,t,r)=>{var n=r(4816),s=r(6179),a=r(6704);function o(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new n;++t<r;)this.add(e[t])}o.prototype.add=o.prototype.push=s,o.prototype.has=a,e.exports=o},9194:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,r){var n=typeof e;return!!(r=null==r?9007199254740991:r)&&("number"==n||"symbol"!=n&&t.test(e))&&e>-1&&e%1==0&&e<r}},9394:(e,t,r)=>{var n=r(2622);e.exports=function(e){return n(this,e).has(e)}},9395:(e,t,r)=>{var n=r(4262),s=r(9621),a=r(8673);e.exports=function(e){return n(e,a,s)}},9461:(e,t,r)=>{"use strict";e.exports=r(2330)},9621:(e,t,r)=>{var n=r(7529),s=r(7828),a=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols,i=o?function(e){return null==e?[]:(e=Object(e),n(o(e),(function(t){return a.call(e,t)})))}:s;e.exports=i},9812:(e,t,r)=>{var n=r(6552).Symbol;e.exports=n},9853:(e,t,r)=>{var n=r(6989);e.exports=function(e,t){return n(e,t)}},9935:(e,t,r)=>{var n=r(1340),s=Array.prototype.splice;e.exports=function(e){var t=this.__data__,r=n(t,e);return!(r<0)&&(r==t.length-1?t.pop():s.call(t,r,1),--this.size,!0)}},9987:(e,t,r)=>{var n=r(9812),s=r(2929),a=r(3211),o=r(3668),i=r(4160),l=r(2074),c=n?n.prototype:void 0,d=c?c.valueOf:void 0;e.exports=function(e,t,r,n,c,u,h){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!u(new s(e),new s(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return a(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var m=i;case"[object Set]":var f=1&n;if(m||(m=l),e.size!=t.size&&!f)return!1;var p=h.get(e);if(p)return p==t;n|=2,h.set(e,t);var g=o(m(e),m(t),n,c,u,h);return h.delete(e),g;case"[object Symbol]":if(d)return d.call(e)==d.call(t)}return!1}}},t={};function r(n){var s=t[n];if(void 0!==s)return s.exports;var a=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.loaded=!0,a.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;r.t=function(n,s){if(1&s&&(n=this(n)),8&s)return n;if("object"===typeof n&&n){if(4&s&&n.__esModule)return n;if(16&s&&"function"===typeof n.then)return n}var a=Object.create(null);r.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var i=2&s&&n;"object"==typeof i&&!~e.indexOf(i);i=t(i))Object.getOwnPropertyNames(i).forEach((e=>o[e]=()=>n[e]));return o.default=()=>n,r.d(a,o),a}})(),r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),r.p="/",(()=>{"use strict";var e={};r.r(e),r.d(e,{hasBrowserEnv:()=>Mr,hasStandardBrowserEnv:()=>Rr,hasStandardBrowserWebWorkerEnv:()=>Dr,navigator:()=>qr,origin:()=>Fr});var t,n=r(5043),s=r.t(n,2),a=r(4391);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));const i="popstate";function l(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function c(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(Ie){}}}function d(e,t){return{usr:e.state,key:e.key,idx:t}}function u(e,t,r,n){return void 0===r&&(r=null),o({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?m(t):t,{state:r,key:t&&t.key||n||Math.random().toString(36).substr(2,8)})}function h(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&"?"!==r&&(t+="?"===r.charAt(0)?r:"?"+r),n&&"#"!==n&&(t+="#"===n.charAt(0)?n:"#"+n),t}function m(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function f(e,r,n,s){void 0===s&&(s={});let{window:a=document.defaultView,v5Compat:c=!1}=s,m=a.history,f=t.Pop,p=null,g=x();function x(){return(m.state||{idx:null}).idx}function b(){f=t.Pop;let e=x(),r=null==e?null:e-g;g=e,p&&p({action:f,location:v.location,delta:r})}function y(e){let t="null"!==a.location.origin?a.location.origin:a.location.href,r="string"===typeof e?e:h(e);return r=r.replace(/ $/,"%20"),l(t,"No window.location.(origin|href) available to create URL for href: "+r),new URL(r,t)}null==g&&(g=0,m.replaceState(o({},m.state,{idx:g}),""));let v={get action(){return f},get location(){return e(a,m)},listen(e){if(p)throw new Error("A history only accepts one active listener");return a.addEventListener(i,b),p=e,()=>{a.removeEventListener(i,b),p=null}},createHref:e=>r(a,e),createURL:y,encodeLocation(e){let t=y(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,r){f=t.Push;let s=u(v.location,e,r);n&&n(s,e),g=x()+1;let o=d(s,g),i=v.createHref(s);try{m.pushState(o,"",i)}catch(l){if(l instanceof DOMException&&"DataCloneError"===l.name)throw l;a.location.assign(i)}c&&p&&p({action:f,location:v.location,delta:1})},replace:function(e,r){f=t.Replace;let s=u(v.location,e,r);n&&n(s,e),g=x();let a=d(s,g),o=v.createHref(s);m.replaceState(a,"",o),c&&p&&p({action:f,location:v.location,delta:0})},go:e=>m.go(e)};return v}var p;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(p||(p={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function g(e,t,r){return void 0===r&&(r="/"),x(e,t,r,!1)}function x(e,t,r,n){let s=T(("string"===typeof t?m(t):t).pathname||"/",r);if(null==s)return null;let a=b(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let r=e.length===t.length&&e.slice(0,-1).every(((e,r)=>e===t[r]));return r?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(a);let o=null;for(let i=0;null==o&&i<a.length;++i){let e=O(s);o=E(a[i],e,n)}return o}function b(e,t,r,n){void 0===t&&(t=[]),void 0===r&&(r=[]),void 0===n&&(n="");let s=(e,s,a)=>{let o={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};o.relativePath.startsWith("/")&&(l(o.relativePath.startsWith(n),'Absolute route path "'+o.relativePath+'" nested under path "'+n+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(n.length));let i=M([n,o.relativePath]),c=r.concat(o);e.children&&e.children.length>0&&(l(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+i+'".'),b(e.children,t,c,i)),(null!=e.path||e.index)&&t.push({path:i,score:_(i,e.index),routesMeta:c})};return e.forEach(((e,t)=>{var r;if(""!==e.path&&null!=(r=e.path)&&r.includes("?"))for(let n of y(e.path))s(e,t,n);else s(e,t)})),t}function y(e){let t=e.split("/");if(0===t.length)return[];let[r,...n]=t,s=r.endsWith("?"),a=r.replace(/\?$/,"");if(0===n.length)return s?[a,""]:[a];let o=y(n.join("/")),i=[];return i.push(...o.map((e=>""===e?a:[a,e].join("/")))),s&&i.push(...o),i.map((t=>e.startsWith("/")&&""===t?"/":t))}const v=/^:[\w-]+$/,w=3,j=2,N=1,k=10,S=-2,C=e=>"*"===e;function _(e,t){let r=e.split("/"),n=r.length;return r.some(C)&&(n+=S),t&&(n+=j),r.filter((e=>!C(e))).reduce(((e,t)=>e+(v.test(t)?w:""===t?N:k)),n)}function E(e,t,r){void 0===r&&(r=!1);let{routesMeta:n}=e,s={},a="/",o=[];for(let i=0;i<n.length;++i){let e=n[i],l=i===n.length-1,c="/"===a?t:t.slice(a.length)||"/",d=A({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),u=e.route;if(!d&&l&&r&&!n[n.length-1].route.index&&(d=A({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:M([a,d.pathname]),pathnameBase:q(M([a,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(a=M([a,d.pathnameBase]))}return o}function A(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=function(e,t,r){void 0===t&&(t=!1);void 0===r&&(r=!0);c("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,r)=>(n.push({paramName:t,isOptional:null!=r}),r?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(n.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))");let a=new RegExp(s,t?void 0:"i");return[a,n]}(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let a=s[0],o=a.replace(/(.)\/+$/,"$1"),i=s.slice(1),l=n.reduce(((e,t,r)=>{let{paramName:n,isOptional:s}=t;if("*"===n){let e=i[r]||"";o=a.slice(0,a.length-e.length).replace(/(.)\/+$/,"$1")}const l=i[r];return e[n]=s&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{});return{params:l,pathname:a,pathnameBase:o,pattern:e}}function O(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return c(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function T(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&"/"!==n?null:e.slice(r)||"/"}function z(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the `to."+r+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function P(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function I(e,t){let r=P(e);return t?r.map(((e,t)=>t===r.length-1?e.pathname:e.pathnameBase)):r.map((e=>e.pathnameBase))}function L(e,t,r,n){let s;void 0===n&&(n=!1),"string"===typeof e?s=m(e):(s=o({},e),l(!s.pathname||!s.pathname.includes("?"),z("?","pathname","search",s)),l(!s.pathname||!s.pathname.includes("#"),z("#","pathname","hash",s)),l(!s.search||!s.search.includes("#"),z("#","search","hash",s)));let a,i=""===e||""===s.pathname,c=i?"/":s.pathname;if(null==c)a=r;else{let e=t.length-1;if(!n&&c.startsWith("..")){let t=c.split("/");for(;".."===t[0];)t.shift(),e-=1;s.pathname=t.join("/")}a=e>=0?t[e]:"/"}let d=function(e,t){void 0===t&&(t="/");let{pathname:r,search:n="",hash:s=""}="string"===typeof e?m(e):e,a=r?r.startsWith("/")?r:function(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)})),r.length>1?r.join("/"):"/"}(r,t):t;return{pathname:a,search:R(n),hash:D(s)}}(s,a),u=c&&"/"!==c&&c.endsWith("/"),h=(i||"."===c)&&r.endsWith("/");return d.pathname.endsWith("/")||!u&&!h||(d.pathname+="/"),d}const M=e=>e.join("/").replace(/\/\/+/g,"/"),q=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),R=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",D=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function F(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const B=["post","put","patch","delete"],$=(new Set(B),["get",...B]);new Set($),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function U(){return U=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},U.apply(this,arguments)}const H=n.createContext(null);const W=n.createContext(null);const Q=n.createContext(null);const V=n.createContext(null);const G=n.createContext({outlet:null,matches:[],isDataRoute:!1});const K=n.createContext(null);function Y(){return null!=n.useContext(V)}function Z(){return Y()||l(!1),n.useContext(V).location}function J(e){n.useContext(Q).static||n.useLayoutEffect(e)}function X(){let{isDataRoute:e}=n.useContext(G);return e?function(){let{router:e}=ue(ce.UseNavigateStable),t=me(de.UseNavigateStable),r=n.useRef(!1);J((()=>{r.current=!0}));let s=n.useCallback((function(n,s){void 0===s&&(s={}),r.current&&("number"===typeof n?e.navigate(n):e.navigate(n,U({fromRouteId:t},s)))}),[e,t]);return s}():function(){Y()||l(!1);let e=n.useContext(H),{basename:t,future:r,navigator:s}=n.useContext(Q),{matches:a}=n.useContext(G),{pathname:o}=Z(),i=JSON.stringify(I(a,r.v7_relativeSplatPath)),c=n.useRef(!1);J((()=>{c.current=!0}));let d=n.useCallback((function(r,n){if(void 0===n&&(n={}),!c.current)return;if("number"===typeof r)return void s.go(r);let a=L(r,JSON.parse(i),o,"path"===n.relative);null==e&&"/"!==t&&(a.pathname="/"===a.pathname?t:M([t,a.pathname])),(n.replace?s.replace:s.push)(a,n.state,n)}),[t,s,i,o,e]);return d}()}const ee=n.createContext(null);function te(){let{matches:e}=n.useContext(G),t=e[e.length-1];return t?t.params:{}}function re(e,t){let{relative:r}=void 0===t?{}:t,{future:s}=n.useContext(Q),{matches:a}=n.useContext(G),{pathname:o}=Z(),i=JSON.stringify(I(a,s.v7_relativeSplatPath));return n.useMemo((()=>L(e,JSON.parse(i),o,"path"===r)),[e,i,o,r])}function ne(e,r,s,a){Y()||l(!1);let{navigator:o,static:i}=n.useContext(Q),{matches:c}=n.useContext(G),d=c[c.length-1],u=d?d.params:{},h=(d&&d.pathname,d?d.pathnameBase:"/");d&&d.route;let f,p=Z();if(r){var x;let e="string"===typeof r?m(r):r;"/"===h||(null==(x=e.pathname)?void 0:x.startsWith(h))||l(!1),f=e}else f=p;let b=f.pathname||"/",y=b;if("/"!==h){let e=h.replace(/^\//,"").split("/");y="/"+b.replace(/^\//,"").split("/").slice(e.length).join("/")}let v=!i&&s&&s.matches&&s.matches.length>0?s.matches:g(e,{pathname:y});let w=le(v&&v.map((e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:M([h,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:M([h,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),c,s,a);return r&&w?n.createElement(V.Provider,{value:{location:U({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:t.Pop}},w):w}function se(){let e=function(){var e;let t=n.useContext(K),r=he(de.UseRouteError),s=me(de.UseRouteError);if(void 0!==t)return t;return null==(e=r.errors)?void 0:e[s]}(),t=F(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:s};return n.createElement(n.Fragment,null,n.createElement("h2",null,"Unexpected Application Error!"),n.createElement("h3",{style:{fontStyle:"italic"}},t),r?n.createElement("pre",{style:a},r):null,null)}const ae=n.createElement(se,null);class oe extends n.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?n.createElement(G.Provider,{value:this.props.routeContext},n.createElement(K.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ie(e){let{routeContext:t,match:r,children:s}=e,a=n.useContext(H);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),n.createElement(G.Provider,{value:t},s)}function le(e,t,r,s){var a;if(void 0===t&&(t=[]),void 0===r&&(r=null),void 0===s&&(s=null),null==e){var o;if(!r)return null;if(r.errors)e=r.matches;else{if(!(null!=(o=s)&&o.v7_partialHydration&&0===t.length&&!r.initialized&&r.matches.length>0))return null;e=r.matches}}let i=e,c=null==(a=r)?void 0:a.errors;if(null!=c){let e=i.findIndex((e=>e.route.id&&void 0!==(null==c?void 0:c[e.route.id])));e>=0||l(!1),i=i.slice(0,Math.min(i.length,e+1))}let d=!1,u=-1;if(r&&s&&s.v7_partialHydration)for(let n=0;n<i.length;n++){let e=i[n];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=n),e.route.id){let{loaderData:t,errors:n}=r,s=e.route.loader&&void 0===t[e.route.id]&&(!n||void 0===n[e.route.id]);if(e.route.lazy||s){d=!0,i=u>=0?i.slice(0,u+1):[i[0]];break}}}return i.reduceRight(((e,s,a)=>{let o,l=!1,h=null,m=null;var f;r&&(o=c&&s.route.id?c[s.route.id]:void 0,h=s.route.errorElement||ae,d&&(u<0&&0===a?(f="route-fallback",!1||fe[f]||(fe[f]=!0),l=!0,m=null):u===a&&(l=!0,m=s.route.hydrateFallbackElement||null)));let p=t.concat(i.slice(0,a+1)),g=()=>{let t;return t=o?h:l?m:s.route.Component?n.createElement(s.route.Component,null):s.route.element?s.route.element:e,n.createElement(ie,{match:s,routeContext:{outlet:e,matches:p,isDataRoute:null!=r},children:t})};return r&&(s.route.ErrorBoundary||s.route.errorElement||0===a)?n.createElement(oe,{location:r.location,revalidation:r.revalidation,component:h,error:o,children:g(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):g()}),null)}var ce=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ce||{}),de=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(de||{});function ue(e){let t=n.useContext(H);return t||l(!1),t}function he(e){let t=n.useContext(W);return t||l(!1),t}function me(e){let t=function(){let e=n.useContext(G);return e||l(!1),e}(),r=t.matches[t.matches.length-1];return r.route.id||l(!1),r.route.id}const fe={};function pe(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}s.startTransition;function ge(e){let{to:t,replace:r,state:s,relative:a}=e;Y()||l(!1);let{future:o,static:i}=n.useContext(Q),{matches:c}=n.useContext(G),{pathname:d}=Z(),u=X(),h=L(t,I(c,o.v7_relativeSplatPath),d,"path"===a),m=JSON.stringify(h);return n.useEffect((()=>u(JSON.parse(m),{replace:r,state:s,relative:a})),[u,m,a,r,s]),null}function xe(e){return function(e){let t=n.useContext(G).outlet;return t?n.createElement(ee.Provider,{value:e},t):t}(e.context)}function be(e){l(!1)}function ye(e){let{basename:r="/",children:s=null,location:a,navigationType:o=t.Pop,navigator:i,static:c=!1,future:d}=e;Y()&&l(!1);let u=r.replace(/^\/*/,"/"),h=n.useMemo((()=>({basename:u,navigator:i,static:c,future:U({v7_relativeSplatPath:!1},d)})),[u,d,i,c]);"string"===typeof a&&(a=m(a));let{pathname:f="/",search:p="",hash:g="",state:x=null,key:b="default"}=a,y=n.useMemo((()=>{let e=T(f,u);return null==e?null:{location:{pathname:e,search:p,hash:g,state:x,key:b},navigationType:o}}),[u,f,p,g,x,b,o]);return null==y?null:n.createElement(Q.Provider,{value:h},n.createElement(V.Provider,{children:s,value:y}))}function ve(e){let{children:t,location:r}=e;return ne(we(t),r)}new Promise((()=>{}));n.Component;function we(e,t){void 0===t&&(t=[]);let r=[];return n.Children.forEach(e,((e,s)=>{if(!n.isValidElement(e))return;let a=[...t,s];if(e.type===n.Fragment)return void r.push.apply(r,we(e.props.children,a));e.type!==be&&l(!1),e.props.index&&e.props.children&&l(!1);let o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=we(e.props.children,a)),r.push(o)})),r}var je=r(7950),Ne=r.t(je,2);function ke(){return ke=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ke.apply(this,arguments)}function Se(e,t){if(null==e)return{};var r,n,s={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(s[r]=e[r]);return s}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Ce=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(Ie){}new Map;const _e=s.startTransition;Ne.flushSync,s.useId;function Ee(e){let{basename:t,children:r,future:s,window:a}=e,o=n.useRef();null==o.current&&(o.current=function(e){return void 0===e&&(e={}),f((function(e,t){let{pathname:r,search:n,hash:s}=e.location;return u("",{pathname:r,search:n,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:h(t)}),null,e)}({window:a,v5Compat:!0}));let i=o.current,[l,c]=n.useState({action:i.action,location:i.location}),{v7_startTransition:d}=s||{},m=n.useCallback((e=>{d&&_e?_e((()=>c(e))):c(e)}),[c,d]);return n.useLayoutEffect((()=>i.listen(m)),[i,m]),n.useEffect((()=>pe(s)),[s]),n.createElement(ye,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:i,future:s})}const Ae="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Oe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Te=n.forwardRef((function(e,t){let r,{onClick:s,relative:a,reloadDocument:o,replace:i,state:c,target:d,to:u,preventScrollReset:m,viewTransition:f}=e,p=Se(e,Ce),{basename:g}=n.useContext(Q),x=!1;if("string"===typeof u&&Oe.test(u)&&(r=u,Ae))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),r=T(t.pathname,g);t.origin===e.origin&&null!=r?u=r+t.search+t.hash:x=!0}catch(Ie){}let b=function(e,t){let{relative:r}=void 0===t?{}:t;Y()||l(!1);let{basename:s,navigator:a}=n.useContext(Q),{hash:o,pathname:i,search:c}=re(e,{relative:r}),d=i;return"/"!==s&&(d="/"===i?s:M([s,i])),a.createHref({pathname:d,search:c,hash:o})}(u,{relative:a}),y=function(e,t){let{target:r,replace:s,state:a,preventScrollReset:o,relative:i,viewTransition:l}=void 0===t?{}:t,c=X(),d=Z(),u=re(e,{relative:i});return n.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,r)){t.preventDefault();let r=void 0!==s?s:h(d)===h(u);c(e,{replace:r,state:a,preventScrollReset:o,relative:i,viewTransition:l})}}),[d,c,u,s,a,r,e,o,i,l])}(u,{replace:i,state:c,target:d,preventScrollReset:m,relative:a,viewTransition:f});return n.createElement("a",ke({},p,{href:r||b,onClick:x||o?s:function(e){s&&s(e),e.defaultPrevented||y(e)},ref:t,target:d}))}));var ze,Pe;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(ze||(ze={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Pe||(Pe={}));let Ie={data:""},Le=e=>"object"==typeof window?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||Ie,Me=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,qe=/\/\*[^]*?\*\/|  +/g,Re=/\n+/g,De=(e,t)=>{let r="",n="",s="";for(let a in e){let o=e[a];"@"==a[0]?"i"==a[1]?r=a+" "+o+";":n+="f"==a[1]?De(o,a):a+"{"+De(o,"k"==a[1]?"":t)+"}":"object"==typeof o?n+=De(o,t?t.replace(/([^,])+/g,(e=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,(t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)))):a):null!=o&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=De.p?De.p(a,o):a+":"+o+";")}return r+(t&&s?t+"{"+s+"}":s)+n},Fe={},Be=e=>{if("object"==typeof e){let t="";for(let r in e)t+=r+Be(e[r]);return t}return e},$e=(e,t,r,n,s)=>{let a=Be(e),o=Fe[a]||(Fe[a]=(e=>{let t=0,r=11;for(;t<e.length;)r=101*r+e.charCodeAt(t++)>>>0;return"go"+r})(a));if(!Fe[o]){let t=a!==e?e:(e=>{let t,r,n=[{}];for(;t=Me.exec(e.replace(qe,""));)t[4]?n.shift():t[3]?(r=t[3].replace(Re," ").trim(),n.unshift(n[0][r]=n[0][r]||{})):n[0][t[1]]=t[2].replace(Re," ").trim();return n[0]})(e);Fe[o]=De(s?{["@keyframes "+o]:t}:t,r?"":"."+o)}let i=r&&Fe.g?Fe.g:null;return r&&(Fe.g=Fe[o]),((e,t,r,n)=>{n?t.data=t.data.replace(n,e):-1===t.data.indexOf(e)&&(t.data=r?e+t.data:t.data+e)})(Fe[o],t,n,i),o};function Ue(e){let t=this||{},r=e.call?e(t.p):e;return $e(r.unshift?r.raw?((e,t,r)=>e.reduce(((e,n,s)=>{let a=t[s];if(a&&a.call){let e=a(r),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;a=t?"."+t:e&&"object"==typeof e?e.props?"":De(e,""):!1===e?"":e}return e+n+(null==a?"":a)}),""))(r,[].slice.call(arguments,1),t.p):r.reduce(((e,r)=>Object.assign(e,r&&r.call?r(t.p):r)),{}):r,Le(t.target),t.g,t.o,t.k)}Ue.bind({g:1});let He,We,Qe,Ve=Ue.bind({k:1});function Ge(e,t){let r=this||{};return function(){let n=arguments;function s(a,o){let i=Object.assign({},a),l=i.className||s.className;r.p=Object.assign({theme:We&&We()},i),r.o=/ *go\d+/.test(l),i.className=Ue.apply(r,n)+(l?" "+l:""),t&&(i.ref=o);let c=e;return e[0]&&(c=i.as||e,delete i.as),Qe&&c[0]&&Qe(i),He(c,i)}return t?t(s):s}}var Ke=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,Ye=(()=>{let e=0;return()=>(++e).toString()})(),Ze=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),Je=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,20)};case 1:return{...e,toasts:e.toasts.map((e=>e.id===t.toast.id?{...e,...t.toast}:e))};case 2:let{toast:r}=t;return Je(e,{type:e.toasts.find((e=>e.id===r.id))?1:0,toast:r});case 3:let{toastId:n}=t;return{...e,toasts:e.toasts.map((e=>e.id===n||void 0===n?{...e,dismissed:!0,visible:!1}:e))};case 4:return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter((e=>e.id!==t.toastId))};case 5:return{...e,pausedAt:t.time};case 6:let s=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map((e=>({...e,pauseDuration:e.pauseDuration+s})))}}},Xe=[],et={toasts:[],pausedAt:void 0},tt=e=>{et=Je(et,e),Xe.forEach((e=>{e(et)}))},rt={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},nt=e=>(t,r)=>{let n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blank",r=arguments.length>2?arguments[2]:void 0;return{createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...r,id:(null==r?void 0:r.id)||Ye()}}(t,e,r);return tt({type:2,toast:n}),n.id},st=(e,t)=>nt("blank")(e,t);st.error=nt("error"),st.success=nt("success"),st.loading=nt("loading"),st.custom=nt("custom"),st.dismiss=e=>{tt({type:3,toastId:e})},st.remove=e=>tt({type:4,toastId:e}),st.promise=(e,t,r)=>{let n=st.loading(t.loading,{...r,...null==r?void 0:r.loading});return"function"==typeof e&&(e=e()),e.then((e=>{let s=t.success?Ke(t.success,e):void 0;return s?st.success(s,{id:n,...r,...null==r?void 0:r.success}):st.dismiss(n),e})).catch((e=>{let s=t.error?Ke(t.error,e):void 0;s?st.error(s,{id:n,...r,...null==r?void 0:r.error}):st.dismiss(n)})),e};var at=(e,t)=>{tt({type:1,toast:{id:e,height:t}})},ot=()=>{tt({type:5,time:Date.now()})},it=new Map,lt=e=>{let{toasts:t,pausedAt:r}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[t,r]=(0,n.useState)(et),s=(0,n.useRef)(et);(0,n.useEffect)((()=>(s.current!==et&&r(et),Xe.push(r),()=>{let e=Xe.indexOf(r);e>-1&&Xe.splice(e,1)})),[]);let a=t.toasts.map((t=>{var r,n,s;return{...e,...e[t.type],...t,removeDelay:t.removeDelay||(null==(r=e[t.type])?void 0:r.removeDelay)||(null==e?void 0:e.removeDelay),duration:t.duration||(null==(n=e[t.type])?void 0:n.duration)||(null==e?void 0:e.duration)||rt[t.type],style:{...e.style,...null==(s=e[t.type])?void 0:s.style,...t.style}}}));return{...t,toasts:a}}(e);(0,n.useEffect)((()=>{if(r)return;let e=Date.now(),n=t.map((t=>{if(t.duration===1/0)return;let r=(t.duration||0)+t.pauseDuration-(e-t.createdAt);if(!(r<0))return setTimeout((()=>st.dismiss(t.id)),r);t.visible&&st.dismiss(t.id)}));return()=>{n.forEach((e=>e&&clearTimeout(e)))}}),[t,r]);let s=(0,n.useCallback)((()=>{r&&tt({type:6,time:Date.now()})}),[r]),a=(0,n.useCallback)(((e,r)=>{let{reverseOrder:n=!1,gutter:s=8,defaultPosition:a}=r||{},o=t.filter((t=>(t.position||a)===(e.position||a)&&t.height)),i=o.findIndex((t=>t.id===e.id)),l=o.filter(((e,t)=>t<i&&e.visible)).length;return o.filter((e=>e.visible)).slice(...n?[l+1]:[0,l]).reduce(((e,t)=>e+(t.height||0)+s),0)}),[t]);return(0,n.useEffect)((()=>{t.forEach((e=>{if(e.dismissed)!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;if(it.has(e))return;let r=setTimeout((()=>{it.delete(e),tt({type:4,toastId:e})}),t);it.set(e,r)}(e.id,e.removeDelay);else{let t=it.get(e.id);t&&(clearTimeout(t),it.delete(e.id))}}))}),[t]),{toasts:t,handlers:{updateHeight:at,startPause:ot,endPause:s,calculateOffset:a}}},ct=Ve`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,dt=Ve`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,ut=Ve`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,ht=Ge("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${ct} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${dt} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${ut} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,mt=Ve`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,ft=Ge("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${mt} 1s linear infinite;
`,pt=Ve`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,gt=Ve`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,xt=Ge("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${pt} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${gt} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,bt=Ge("div")`
  position: absolute;
`,yt=Ge("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,vt=Ve`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,wt=Ge("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${vt} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,jt=e=>{let{toast:t}=e,{icon:r,type:s,iconTheme:a}=t;return void 0!==r?"string"==typeof r?n.createElement(wt,null,r):r:"blank"===s?null:n.createElement(yt,null,n.createElement(ft,{...a}),"loading"!==s&&n.createElement(bt,null,"error"===s?n.createElement(ht,{...a}):n.createElement(xt,{...a})))},Nt=e=>`\n0% {transform: translate3d(0,${-200*e}%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n`,kt=e=>`\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,${-150*e}%,-1px) scale(.6); opacity:0;}\n`,St=Ge("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Ct=Ge("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,_t=n.memo((e=>{let{toast:t,position:r,style:s,children:a}=e,o=t.height?((e,t)=>{let r=e.includes("top")?1:-1,[n,s]=Ze()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[Nt(r),kt(r)];return{animation:t?`${Ve(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Ve(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}})(t.position||r||"top-center",t.visible):{opacity:0},i=n.createElement(jt,{toast:t}),l=n.createElement(Ct,{...t.ariaProps},Ke(t.message,t));return n.createElement(St,{className:t.className,style:{...o,...s,...t.style}},"function"==typeof a?a({icon:i,message:l}):n.createElement(n.Fragment,null,i,l))}));!function(e,t,r,n){De.p=t,He=e,We=r,Qe=n}(n.createElement);var Et=e=>{let{id:t,className:r,style:s,onHeightUpdate:a,children:o}=e,i=n.useCallback((e=>{if(e){let r=()=>{let r=e.getBoundingClientRect().height;a(t,r)};r(),new MutationObserver(r).observe(e,{subtree:!0,childList:!0,characterData:!0})}}),[t,a]);return n.createElement("div",{ref:i,className:r,style:s},o)},At=Ue`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Ot=e=>{let{reverseOrder:t,position:r="top-center",toastOptions:s,gutter:a,children:o,containerStyle:i,containerClassName:l}=e,{toasts:c,handlers:d}=lt(s);return n.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none",...i},className:l,onMouseEnter:d.startPause,onMouseLeave:d.endPause},c.map((e=>{let s=e.position||r,i=((e,t)=>{let r=e.includes("top"),n=r?{top:0}:{bottom:0},s=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Ze()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(r?1:-1)}px)`,...n,...s}})(s,d.calculateOffset(e,{reverseOrder:t,gutter:a,defaultPosition:r}));return n.createElement(Et,{id:e.id,key:e.id,onHeightUpdate:d.updateHeight,className:e.visible?At:"",style:i},"custom"===e.type?Ke(e.message,e):o?o(e):n.createElement(_t,{toast:e,position:s}))})))},Tt=st;function zt(e,t){return function(){return e.apply(t,arguments)}}const{toString:Pt}=Object.prototype,{getPrototypeOf:It}=Object,{iterator:Lt,toStringTag:Mt}=Symbol,qt=(Rt=Object.create(null),e=>{const t=Pt.call(e);return Rt[t]||(Rt[t]=t.slice(8,-1).toLowerCase())});var Rt;const Dt=e=>(e=e.toLowerCase(),t=>qt(t)===e),Ft=e=>t=>typeof t===e,{isArray:Bt}=Array,$t=Ft("undefined");const Ut=Dt("ArrayBuffer");const Ht=Ft("string"),Wt=Ft("function"),Qt=Ft("number"),Vt=e=>null!==e&&"object"===typeof e,Gt=e=>{if("object"!==qt(e))return!1;const t=It(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Mt in e)&&!(Lt in e)},Kt=Dt("Date"),Yt=Dt("File"),Zt=Dt("Blob"),Jt=Dt("FileList"),Xt=Dt("URLSearchParams"),[er,tr,rr,nr]=["ReadableStream","Request","Response","Headers"].map(Dt);function sr(e,t){let r,n,{allOwnKeys:s=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),Bt(e))for(r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else{const n=s?Object.getOwnPropertyNames(e):Object.keys(e),a=n.length;let o;for(r=0;r<a;r++)o=n[r],t.call(null,e[o],o,e)}}function ar(e,t){t=t.toLowerCase();const r=Object.keys(e);let n,s=r.length;for(;s-- >0;)if(n=r[s],t===n.toLowerCase())return n;return null}const or="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,ir=e=>!$t(e)&&e!==or;const lr=(cr="undefined"!==typeof Uint8Array&&It(Uint8Array),e=>cr&&e instanceof cr);var cr;const dr=Dt("HTMLFormElement"),ur=(e=>{let{hasOwnProperty:t}=e;return(e,r)=>t.call(e,r)})(Object.prototype),hr=Dt("RegExp"),mr=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};sr(r,((r,s)=>{let a;!1!==(a=t(r,s,e))&&(n[s]=a||r)})),Object.defineProperties(e,n)};const fr=Dt("AsyncFunction"),pr=((e,t)=>{return e?setImmediate:t?(r=`axios@${Math.random()}`,n=[],or.addEventListener("message",(e=>{let{source:t,data:s}=e;t===or&&s===r&&n.length&&n.shift()()}),!1),e=>{n.push(e),or.postMessage(r,"*")}):e=>setTimeout(e);var r,n})("function"===typeof setImmediate,Wt(or.postMessage)),gr="undefined"!==typeof queueMicrotask?queueMicrotask.bind(or):"undefined"!==typeof process&&process.nextTick||pr,xr={isArray:Bt,isArrayBuffer:Ut,isBuffer:function(e){return null!==e&&!$t(e)&&null!==e.constructor&&!$t(e.constructor)&&Wt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||Wt(e.append)&&("formdata"===(t=qt(e))||"object"===t&&Wt(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Ut(e.buffer),t},isString:Ht,isNumber:Qt,isBoolean:e=>!0===e||!1===e,isObject:Vt,isPlainObject:Gt,isReadableStream:er,isRequest:tr,isResponse:rr,isHeaders:nr,isUndefined:$t,isDate:Kt,isFile:Yt,isBlob:Zt,isRegExp:hr,isFunction:Wt,isStream:e=>Vt(e)&&Wt(e.pipe),isURLSearchParams:Xt,isTypedArray:lr,isFileList:Jt,forEach:sr,merge:function e(){const{caseless:t}=ir(this)&&this||{},r={},n=(n,s)=>{const a=t&&ar(r,s)||s;Gt(r[a])&&Gt(n)?r[a]=e(r[a],n):Gt(n)?r[a]=e({},n):Bt(n)?r[a]=n.slice():r[a]=n};for(let s=0,a=arguments.length;s<a;s++)arguments[s]&&sr(arguments[s],n);return r},extend:function(e,t,r){let{allOwnKeys:n}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return sr(t,((t,n)=>{r&&Wt(t)?e[n]=zt(t,r):e[n]=t}),{allOwnKeys:n}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},toFlatObject:(e,t,r,n)=>{let s,a,o;const i={};if(t=t||{},null==e)return t;do{for(s=Object.getOwnPropertyNames(e),a=s.length;a-- >0;)o=s[a],n&&!n(o,e,t)||i[o]||(t[o]=e[o],i[o]=!0);e=!1!==r&&It(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},kindOf:qt,kindOfTest:Dt,endsWith:(e,t,r)=>{e=String(e),(void 0===r||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return-1!==n&&n===r},toArray:e=>{if(!e)return null;if(Bt(e))return e;let t=e.length;if(!Qt(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},forEachEntry:(e,t)=>{const r=(e&&e[Lt]).call(e);let n;for(;(n=r.next())&&!n.done;){const r=n.value;t.call(e,r[0],r[1])}},matchAll:(e,t)=>{let r;const n=[];for(;null!==(r=e.exec(t));)n.push(r);return n},isHTMLForm:dr,hasOwnProperty:ur,hasOwnProp:ur,reduceDescriptors:mr,freezeMethods:e=>{mr(e,((t,r)=>{if(Wt(e)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;const n=e[r];Wt(n)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")}))}))},toObjectSet:(e,t)=>{const r={},n=e=>{e.forEach((e=>{r[e]=!0}))};return Bt(e)?n(e):n(String(e).split(t)),r},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,r){return t.toUpperCase()+r})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:ar,global:or,isContextDefined:ir,isSpecCompliantForm:function(e){return!!(e&&Wt(e.append)&&"FormData"===e[Mt]&&e[Lt])},toJSONObject:e=>{const t=new Array(10),r=(e,n)=>{if(Vt(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[n]=e;const s=Bt(e)?[]:{};return sr(e,((e,t)=>{const a=r(e,n+1);!$t(a)&&(s[t]=a)})),t[n]=void 0,s}}return e};return r(e,0)},isAsyncFn:fr,isThenable:e=>e&&(Vt(e)||Wt(e))&&Wt(e.then)&&Wt(e.catch),setImmediate:pr,asap:gr,isIterable:e=>null!=e&&Wt(e[Lt])};function br(e,t,r,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),s&&(this.response=s,this.status=s.status?s.status:null)}xr.inherits(br,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:xr.toJSONObject(this.config),code:this.code,status:this.status}}});const yr=br.prototype,vr={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{vr[e]={value:e}})),Object.defineProperties(br,vr),Object.defineProperty(yr,"isAxiosError",{value:!0}),br.from=(e,t,r,n,s,a)=>{const o=Object.create(yr);return xr.toFlatObject(e,o,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),br.call(o,e.message,t,r,n,s),o.cause=e,o.name=e.name,a&&Object.assign(o,a),o};const wr=br;function jr(e){return xr.isPlainObject(e)||xr.isArray(e)}function Nr(e){return xr.endsWith(e,"[]")?e.slice(0,-2):e}function kr(e,t,r){return e?e.concat(t).map((function(e,t){return e=Nr(e),!r&&t?"["+e+"]":e})).join(r?".":""):t}const Sr=xr.toFlatObject(xr,{},null,(function(e){return/^is[A-Z]/.test(e)}));const Cr=function(e,t,r){if(!xr.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const n=(r=xr.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!xr.isUndefined(t[e])}))).metaTokens,s=r.visitor||c,a=r.dots,o=r.indexes,i=(r.Blob||"undefined"!==typeof Blob&&Blob)&&xr.isSpecCompliantForm(t);if(!xr.isFunction(s))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(xr.isDate(e))return e.toISOString();if(!i&&xr.isBlob(e))throw new wr("Blob is not supported. Use a Buffer instead.");return xr.isArrayBuffer(e)||xr.isTypedArray(e)?i&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,r,s){let i=e;if(e&&!s&&"object"===typeof e)if(xr.endsWith(r,"{}"))r=n?r:r.slice(0,-2),e=JSON.stringify(e);else if(xr.isArray(e)&&function(e){return xr.isArray(e)&&!e.some(jr)}(e)||(xr.isFileList(e)||xr.endsWith(r,"[]"))&&(i=xr.toArray(e)))return r=Nr(r),i.forEach((function(e,n){!xr.isUndefined(e)&&null!==e&&t.append(!0===o?kr([r],n,a):null===o?r:r+"[]",l(e))})),!1;return!!jr(e)||(t.append(kr(s,r,a),l(e)),!1)}const d=[],u=Object.assign(Sr,{defaultVisitor:c,convertValue:l,isVisitable:jr});if(!xr.isObject(e))throw new TypeError("data must be an object");return function e(r,n){if(!xr.isUndefined(r)){if(-1!==d.indexOf(r))throw Error("Circular reference detected in "+n.join("."));d.push(r),xr.forEach(r,(function(r,a){!0===(!(xr.isUndefined(r)||null===r)&&s.call(t,r,xr.isString(a)?a.trim():a,n,u))&&e(r,n?n.concat(a):[a])})),d.pop()}}(e),t};function _r(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function Er(e,t){this._pairs=[],e&&Cr(e,this,t)}const Ar=Er.prototype;Ar.append=function(e,t){this._pairs.push([e,t])},Ar.toString=function(e){const t=e?function(t){return e.call(this,t,_r)}:_r;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const Or=Er;function Tr(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function zr(e,t,r){if(!t)return e;const n=r&&r.encode||Tr;xr.isFunction(r)&&(r={serialize:r});const s=r&&r.serialize;let a;if(a=s?s(t,r):xr.isURLSearchParams(t)?t.toString():new Or(t,r).toString(n),a){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+a}return e}const Pr=class{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){xr.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},Ir={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Lr={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:Or,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Mr="undefined"!==typeof window&&"undefined"!==typeof document,qr="object"===typeof navigator&&navigator||void 0,Rr=Mr&&(!qr||["ReactNative","NativeScript","NS"].indexOf(qr.product)<0),Dr="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,Fr=Mr&&window.location.href||"http://localhost",Br={...e,...Lr};const $r=function(e){function t(e,r,n,s){let a=e[s++];if("__proto__"===a)return!0;const o=Number.isFinite(+a),i=s>=e.length;if(a=!a&&xr.isArray(n)?n.length:a,i)return xr.hasOwnProp(n,a)?n[a]=[n[a],r]:n[a]=r,!o;n[a]&&xr.isObject(n[a])||(n[a]=[]);return t(e,r,n[a],s)&&xr.isArray(n[a])&&(n[a]=function(e){const t={},r=Object.keys(e);let n;const s=r.length;let a;for(n=0;n<s;n++)a=r[n],t[a]=e[a];return t}(n[a])),!o}if(xr.isFormData(e)&&xr.isFunction(e.entries)){const r={};return xr.forEachEntry(e,((e,n)=>{t(function(e){return xr.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),n,r,0)})),r}return null};const Ur={transitional:Ir,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",n=r.indexOf("application/json")>-1,s=xr.isObject(e);s&&xr.isHTMLForm(e)&&(e=new FormData(e));if(xr.isFormData(e))return n?JSON.stringify($r(e)):e;if(xr.isArrayBuffer(e)||xr.isBuffer(e)||xr.isStream(e)||xr.isFile(e)||xr.isBlob(e)||xr.isReadableStream(e))return e;if(xr.isArrayBufferView(e))return e.buffer;if(xr.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Cr(e,new Br.classes.URLSearchParams,Object.assign({visitor:function(e,t,r,n){return Br.isNode&&xr.isBuffer(e)?(this.append(t,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((a=xr.isFileList(e))||r.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Cr(a?{"files[]":e}:e,t&&new t,this.formSerializer)}}return s||n?(t.setContentType("application/json",!1),function(e,t,r){if(xr.isString(e))try{return(t||JSON.parse)(e),xr.trim(e)}catch(Ie){if("SyntaxError"!==Ie.name)throw Ie}return(r||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Ur.transitional,r=t&&t.forcedJSONParsing,n="json"===this.responseType;if(xr.isResponse(e)||xr.isReadableStream(e))return e;if(e&&xr.isString(e)&&(r&&!this.responseType||n)){const r=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e)}catch(Ie){if(r){if("SyntaxError"===Ie.name)throw wr.from(Ie,wr.ERR_BAD_RESPONSE,this,null,this.response);throw Ie}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Br.classes.FormData,Blob:Br.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};xr.forEach(["delete","get","head","post","put","patch"],(e=>{Ur.headers[e]={}}));const Hr=Ur,Wr=xr.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Qr=Symbol("internals");function Vr(e){return e&&String(e).trim().toLowerCase()}function Gr(e){return!1===e||null==e?e:xr.isArray(e)?e.map(Gr):String(e)}function Kr(e,t,r,n,s){return xr.isFunction(n)?n.call(this,t,r):(s&&(t=r),xr.isString(t)?xr.isString(n)?-1!==t.indexOf(n):xr.isRegExp(n)?n.test(t):void 0:void 0)}class Yr{constructor(e){e&&this.set(e)}set(e,t,r){const n=this;function s(e,t,r){const s=Vr(t);if(!s)throw new Error("header name must be a non-empty string");const a=xr.findKey(n,s);(!a||void 0===n[a]||!0===r||void 0===r&&!1!==n[a])&&(n[a||t]=Gr(e))}const a=(e,t)=>xr.forEach(e,((e,r)=>s(e,r,t)));if(xr.isPlainObject(e)||e instanceof this.constructor)a(e,t);else if(xr.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))a((e=>{const t={};let r,n,s;return e&&e.split("\n").forEach((function(e){s=e.indexOf(":"),r=e.substring(0,s).trim().toLowerCase(),n=e.substring(s+1).trim(),!r||t[r]&&Wr[r]||("set-cookie"===r?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)})),t})(e),t);else if(xr.isObject(e)&&xr.isIterable(e)){let r,n,s={};for(const t of e){if(!xr.isArray(t))throw TypeError("Object iterator must return a key-value pair");s[n=t[0]]=(r=s[n])?xr.isArray(r)?[...r,t[1]]:[r,t[1]]:t[1]}a(s,t)}else null!=e&&s(t,e,r);return this}get(e,t){if(e=Vr(e)){const r=xr.findKey(this,e);if(r){const e=this[r];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}(e);if(xr.isFunction(t))return t.call(this,e,r);if(xr.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Vr(e)){const r=xr.findKey(this,e);return!(!r||void 0===this[r]||t&&!Kr(0,this[r],r,t))}return!1}delete(e,t){const r=this;let n=!1;function s(e){if(e=Vr(e)){const s=xr.findKey(r,e);!s||t&&!Kr(0,r[s],s,t)||(delete r[s],n=!0)}}return xr.isArray(e)?e.forEach(s):s(e),n}clear(e){const t=Object.keys(this);let r=t.length,n=!1;for(;r--;){const s=t[r];e&&!Kr(0,this[s],s,e,!0)||(delete this[s],n=!0)}return n}normalize(e){const t=this,r={};return xr.forEach(this,((n,s)=>{const a=xr.findKey(r,s);if(a)return t[a]=Gr(n),void delete t[s];const o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,r)=>t.toUpperCase()+r))}(s):String(s).trim();o!==s&&delete t[s],t[o]=Gr(n),r[o]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return xr.forEach(this,((r,n)=>{null!=r&&!1!==r&&(t[n]=e&&xr.isArray(r)?r.join(", "):r)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,r]=e;return t+": "+r})).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var r=arguments.length,n=new Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];return n.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[Qr]=this[Qr]={accessors:{}}).accessors,r=this.prototype;function n(e){const n=Vr(e);t[n]||(!function(e,t){const r=xr.toCamelCase(" "+t);["get","set","has"].forEach((n=>{Object.defineProperty(e,n+r,{value:function(e,r,s){return this[n].call(this,t,e,r,s)},configurable:!0})}))}(r,e),t[n]=!0)}return xr.isArray(e)?e.forEach(n):n(e),this}}Yr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),xr.reduceDescriptors(Yr.prototype,((e,t)=>{let{value:r}=e,n=t[0].toUpperCase()+t.slice(1);return{get:()=>r,set(e){this[n]=e}}})),xr.freezeMethods(Yr);const Zr=Yr;function Jr(e,t){const r=this||Hr,n=t||r,s=Zr.from(n.headers);let a=n.data;return xr.forEach(e,(function(e){a=e.call(r,a,s.normalize(),t?t.status:void 0)})),s.normalize(),a}function Xr(e){return!(!e||!e.__CANCEL__)}function en(e,t,r){wr.call(this,null==e?"canceled":e,wr.ERR_CANCELED,t,r),this.name="CanceledError"}xr.inherits(en,wr,{__CANCEL__:!0});const tn=en;function rn(e,t,r){const n=r.config.validateStatus;r.status&&n&&!n(r.status)?t(new wr("Request failed with status code "+r.status,[wr.ERR_BAD_REQUEST,wr.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):e(r)}const nn=function(e,t){e=e||10;const r=new Array(e),n=new Array(e);let s,a=0,o=0;return t=void 0!==t?t:1e3,function(i){const l=Date.now(),c=n[o];s||(s=l),r[a]=i,n[a]=l;let d=o,u=0;for(;d!==a;)u+=r[d++],d%=e;if(a=(a+1)%e,a===o&&(o=(o+1)%e),l-s<t)return;const h=c&&l-c;return h?Math.round(1e3*u/h):void 0}};const sn=function(e,t){let r,n,s=0,a=1e3/t;const o=function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();s=a,r=null,n&&(clearTimeout(n),n=null),e.apply(null,t)};return[function(){const e=Date.now(),t=e-s;for(var i=arguments.length,l=new Array(i),c=0;c<i;c++)l[c]=arguments[c];t>=a?o(l,e):(r=l,n||(n=setTimeout((()=>{n=null,o(r)}),a-t)))},()=>r&&o(r)]},an=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,n=0;const s=nn(50,250);return sn((r=>{const a=r.loaded,o=r.lengthComputable?r.total:void 0,i=a-n,l=s(i);n=a;e({loaded:a,total:o,progress:o?a/o:void 0,bytes:i,rate:l||void 0,estimated:l&&o&&a<=o?(o-a)/l:void 0,event:r,lengthComputable:null!=o,[t?"download":"upload"]:!0})}),r)},on=(e,t)=>{const r=null!=e;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},ln=e=>function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return xr.asap((()=>e(...r)))},cn=Br.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,Br.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(Br.origin),Br.navigator&&/(msie|trident)/i.test(Br.navigator.userAgent)):()=>!0,dn=Br.hasStandardBrowserEnv?{write(e,t,r,n,s,a){const o=[e+"="+encodeURIComponent(t)];xr.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),xr.isString(n)&&o.push("path="+n),xr.isString(s)&&o.push("domain="+s),!0===a&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function un(e,t,r){let n=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(n||0==r)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const hn=e=>e instanceof Zr?{...e}:e;function mn(e,t){t=t||{};const r={};function n(e,t,r,n){return xr.isPlainObject(e)&&xr.isPlainObject(t)?xr.merge.call({caseless:n},e,t):xr.isPlainObject(t)?xr.merge({},t):xr.isArray(t)?t.slice():t}function s(e,t,r,s){return xr.isUndefined(t)?xr.isUndefined(e)?void 0:n(void 0,e,0,s):n(e,t,0,s)}function a(e,t){if(!xr.isUndefined(t))return n(void 0,t)}function o(e,t){return xr.isUndefined(t)?xr.isUndefined(e)?void 0:n(void 0,e):n(void 0,t)}function i(r,s,a){return a in t?n(r,s):a in e?n(void 0,r):void 0}const l={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:i,headers:(e,t,r)=>s(hn(e),hn(t),0,!0)};return xr.forEach(Object.keys(Object.assign({},e,t)),(function(n){const a=l[n]||s,o=a(e[n],t[n],n);xr.isUndefined(o)&&a!==i||(r[n]=o)})),r}const fn=e=>{const t=mn({},e);let r,{data:n,withXSRFToken:s,xsrfHeaderName:a,xsrfCookieName:o,headers:i,auth:l}=t;if(t.headers=i=Zr.from(i),t.url=zr(un(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&i.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),xr.isFormData(n))if(Br.hasStandardBrowserEnv||Br.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if(!1!==(r=i.getContentType())){const[e,...t]=r?r.split(";").map((e=>e.trim())).filter(Boolean):[];i.setContentType([e||"multipart/form-data",...t].join("; "))}if(Br.hasStandardBrowserEnv&&(s&&xr.isFunction(s)&&(s=s(t)),s||!1!==s&&cn(t.url))){const e=a&&o&&dn.read(o);e&&i.set(a,e)}return t},pn="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,r){const n=fn(e);let s=n.data;const a=Zr.from(n.headers).normalize();let o,i,l,c,d,{responseType:u,onUploadProgress:h,onDownloadProgress:m}=n;function f(){c&&c(),d&&d(),n.cancelToken&&n.cancelToken.unsubscribe(o),n.signal&&n.signal.removeEventListener("abort",o)}let p=new XMLHttpRequest;function g(){if(!p)return;const n=Zr.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders());rn((function(e){t(e),f()}),(function(e){r(e),f()}),{data:u&&"text"!==u&&"json"!==u?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:n,config:e,request:p}),p=null}p.open(n.method.toUpperCase(),n.url,!0),p.timeout=n.timeout,"onloadend"in p?p.onloadend=g:p.onreadystatechange=function(){p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))&&setTimeout(g)},p.onabort=function(){p&&(r(new wr("Request aborted",wr.ECONNABORTED,e,p)),p=null)},p.onerror=function(){r(new wr("Network Error",wr.ERR_NETWORK,e,p)),p=null},p.ontimeout=function(){let t=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const s=n.transitional||Ir;n.timeoutErrorMessage&&(t=n.timeoutErrorMessage),r(new wr(t,s.clarifyTimeoutError?wr.ETIMEDOUT:wr.ECONNABORTED,e,p)),p=null},void 0===s&&a.setContentType(null),"setRequestHeader"in p&&xr.forEach(a.toJSON(),(function(e,t){p.setRequestHeader(t,e)})),xr.isUndefined(n.withCredentials)||(p.withCredentials=!!n.withCredentials),u&&"json"!==u&&(p.responseType=n.responseType),m&&([l,d]=an(m,!0),p.addEventListener("progress",l)),h&&p.upload&&([i,c]=an(h),p.upload.addEventListener("progress",i),p.upload.addEventListener("loadend",c)),(n.cancelToken||n.signal)&&(o=t=>{p&&(r(!t||t.type?new tn(null,e,p):t),p.abort(),p=null)},n.cancelToken&&n.cancelToken.subscribe(o),n.signal&&(n.signal.aborted?o():n.signal.addEventListener("abort",o)));const x=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(n.url);x&&-1===Br.protocols.indexOf(x)?r(new wr("Unsupported protocol "+x+":",wr.ERR_BAD_REQUEST,e)):p.send(s||null)}))},gn=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let r,n=new AbortController;const s=function(e){if(!r){r=!0,o();const t=e instanceof Error?e:this.reason;n.abort(t instanceof wr?t:new tn(t instanceof Error?t.message:t))}};let a=t&&setTimeout((()=>{a=null,s(new wr(`timeout ${t} of ms exceeded`,wr.ETIMEDOUT))}),t);const o=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(s):e.removeEventListener("abort",s)})),e=null)};e.forEach((e=>e.addEventListener("abort",s)));const{signal:i}=n;return i.unsubscribe=()=>xr.asap(o),i}},xn=function*(e,t){let r=e.byteLength;if(!t||r<t)return void(yield e);let n,s=0;for(;s<r;)n=s+t,yield e.slice(s,n),s=n},bn=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:r}=await t.read();if(e)break;yield r}}finally{await t.cancel()}},yn=(e,t,r,n)=>{const s=async function*(e,t){for await(const r of bn(e))yield*xn(r,t)}(e,t);let a,o=0,i=e=>{a||(a=!0,n&&n(e))};return new ReadableStream({async pull(e){try{const{done:t,value:n}=await s.next();if(t)return i(),void e.close();let a=n.byteLength;if(r){let e=o+=a;r(e)}e.enqueue(new Uint8Array(n))}catch(t){throw i(t),t}},cancel:e=>(i(e),s.return())},{highWaterMark:2})},vn="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,wn=vn&&"function"===typeof ReadableStream,jn=vn&&("function"===typeof TextEncoder?(Nn=new TextEncoder,e=>Nn.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var Nn;const kn=function(e){try{for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return!!e(...r)}catch(Ie){return!1}},Sn=wn&&kn((()=>{let e=!1;const t=new Request(Br.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),Cn=wn&&kn((()=>xr.isReadableStream(new Response("").body))),_n={stream:Cn&&(e=>e.body)};var En;vn&&(En=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!_n[e]&&(_n[e]=xr.isFunction(En[e])?t=>t[e]():(t,r)=>{throw new wr(`Response type '${e}' is not supported`,wr.ERR_NOT_SUPPORT,r)})})));const An=async(e,t)=>{const r=xr.toFiniteNumber(e.getContentLength());return null==r?(async e=>{if(null==e)return 0;if(xr.isBlob(e))return e.size;if(xr.isSpecCompliantForm(e)){const t=new Request(Br.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return xr.isArrayBufferView(e)||xr.isArrayBuffer(e)?e.byteLength:(xr.isURLSearchParams(e)&&(e+=""),xr.isString(e)?(await jn(e)).byteLength:void 0)})(t):r},On=vn&&(async e=>{let{url:t,method:r,data:n,signal:s,cancelToken:a,timeout:o,onDownloadProgress:i,onUploadProgress:l,responseType:c,headers:d,withCredentials:u="same-origin",fetchOptions:h}=fn(e);c=c?(c+"").toLowerCase():"text";let m,f=gn([s,a&&a.toAbortSignal()],o);const p=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let g;try{if(l&&Sn&&"get"!==r&&"head"!==r&&0!==(g=await An(d,n))){let e,r=new Request(t,{method:"POST",body:n,duplex:"half"});if(xr.isFormData(n)&&(e=r.headers.get("content-type"))&&d.setContentType(e),r.body){const[e,t]=on(g,an(ln(l)));n=yn(r.body,65536,e,t)}}xr.isString(u)||(u=u?"include":"omit");const s="credentials"in Request.prototype;m=new Request(t,{...h,signal:f,method:r.toUpperCase(),headers:d.normalize().toJSON(),body:n,duplex:"half",credentials:s?u:void 0});let a=await fetch(m);const o=Cn&&("stream"===c||"response"===c);if(Cn&&(i||o&&p)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=a[t]}));const t=xr.toFiniteNumber(a.headers.get("content-length")),[r,n]=i&&on(t,an(ln(i),!0))||[];a=new Response(yn(a.body,65536,r,(()=>{n&&n(),p&&p()})),e)}c=c||"text";let x=await _n[xr.findKey(_n,c)||"text"](a,e);return!o&&p&&p(),await new Promise(((t,r)=>{rn(t,r,{data:x,headers:Zr.from(a.headers),status:a.status,statusText:a.statusText,config:e,request:m})}))}catch(x){if(p&&p(),x&&"TypeError"===x.name&&/Load failed|fetch/i.test(x.message))throw Object.assign(new wr("Network Error",wr.ERR_NETWORK,e,m),{cause:x.cause||x});throw wr.from(x,x&&x.code,e,m)}}),Tn={http:null,xhr:pn,fetch:On};xr.forEach(Tn,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(Ie){}Object.defineProperty(e,"adapterName",{value:t})}}));const zn=e=>`- ${e}`,Pn=e=>xr.isFunction(e)||null===e||!1===e,In=e=>{e=xr.isArray(e)?e:[e];const{length:t}=e;let r,n;const s={};for(let a=0;a<t;a++){let t;if(r=e[a],n=r,!Pn(r)&&(n=Tn[(t=String(r)).toLowerCase()],void 0===n))throw new wr(`Unknown adapter '${t}'`);if(n)break;s[t||"#"+a]=n}if(!n){const e=Object.entries(s).map((e=>{let[t,r]=e;return`adapter ${t} `+(!1===r?"is not supported by the environment":"is not available in the build")}));let r=t?e.length>1?"since :\n"+e.map(zn).join("\n"):" "+zn(e[0]):"as no adapter specified";throw new wr("There is no suitable adapter to dispatch the request "+r,"ERR_NOT_SUPPORT")}return n};function Ln(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new tn(null,e)}function Mn(e){Ln(e),e.headers=Zr.from(e.headers),e.data=Jr.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return In(e.adapter||Hr.adapter)(e).then((function(t){return Ln(e),t.data=Jr.call(e,e.transformResponse,t),t.headers=Zr.from(t.headers),t}),(function(t){return Xr(t)||(Ln(e),t&&t.response&&(t.response.data=Jr.call(e,e.transformResponse,t.response),t.response.headers=Zr.from(t.response.headers))),Promise.reject(t)}))}const qn="1.9.0",Rn={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{Rn[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}}));const Dn={};Rn.transitional=function(e,t,r){function n(e,t){return"[Axios v1.9.0] Transitional option '"+e+"'"+t+(r?". "+r:"")}return(r,s,a)=>{if(!1===e)throw new wr(n(s," has been removed"+(t?" in "+t:"")),wr.ERR_DEPRECATED);return t&&!Dn[s]&&(Dn[s]=!0,console.warn(n(s," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,s,a)}},Rn.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};const Fn={assertOptions:function(e,t,r){if("object"!==typeof e)throw new wr("options must be an object",wr.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let s=n.length;for(;s-- >0;){const a=n[s],o=t[a];if(o){const t=e[a],r=void 0===t||o(t,a,e);if(!0!==r)throw new wr("option "+a+" must be "+r,wr.ERR_BAD_OPTION_VALUE)}else if(!0!==r)throw new wr("Unknown option "+a,wr.ERR_BAD_OPTION)}},validators:Rn},Bn=Fn.validators;class $n{constructor(e){this.defaults=e||{},this.interceptors={request:new Pr,response:new Pr}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{r.stack?t&&!String(r.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(r.stack+="\n"+t):r.stack=t}catch(Ie){}}throw r}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=mn(this.defaults,t);const{transitional:r,paramsSerializer:n,headers:s}=t;void 0!==r&&Fn.assertOptions(r,{silentJSONParsing:Bn.transitional(Bn.boolean),forcedJSONParsing:Bn.transitional(Bn.boolean),clarifyTimeoutError:Bn.transitional(Bn.boolean)},!1),null!=n&&(xr.isFunction(n)?t.paramsSerializer={serialize:n}:Fn.assertOptions(n,{encode:Bn.function,serialize:Bn.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Fn.assertOptions(t,{baseUrl:Bn.spelling("baseURL"),withXsrfToken:Bn.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=s&&xr.merge(s.common,s[t.method]);s&&xr.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete s[e]})),t.headers=Zr.concat(a,s);const o=[];let i=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(i=i&&e.synchronous,o.unshift(e.fulfilled,e.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let d,u=0;if(!i){const e=[Mn.bind(this),void 0];for(e.unshift.apply(e,o),e.push.apply(e,l),d=e.length,c=Promise.resolve(t);u<d;)c=c.then(e[u++],e[u++]);return c}d=o.length;let h=t;for(u=0;u<d;){const e=o[u++],t=o[u++];try{h=e(h)}catch(m){t.call(this,m);break}}try{c=Mn.call(this,h)}catch(m){return Promise.reject(m)}for(u=0,d=l.length;u<d;)c=c.then(l[u++],l[u++]);return c}getUri(e){return zr(un((e=mn(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}xr.forEach(["delete","get","head","options"],(function(e){$n.prototype[e]=function(t,r){return this.request(mn(r||{},{method:e,url:t,data:(r||{}).data}))}})),xr.forEach(["post","put","patch"],(function(e){function t(t){return function(r,n,s){return this.request(mn(s||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}$n.prototype[e]=t(),$n.prototype[e+"Form"]=t(!0)}));const Un=$n;class Hn{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const r=this;this.promise.then((e=>{if(!r._listeners)return;let t=r._listeners.length;for(;t-- >0;)r._listeners[t](e);r._listeners=null})),this.promise.then=e=>{let t;const n=new Promise((e=>{r.subscribe(e),t=e})).then(e);return n.cancel=function(){r.unsubscribe(t)},n},e((function(e,n,s){r.reason||(r.reason=new tn(e,n,s),t(r.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;const t=new Hn((function(t){e=t}));return{token:t,cancel:e}}}const Wn=Hn;const Qn={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Qn).forEach((e=>{let[t,r]=e;Qn[r]=t}));const Vn=Qn;const Gn=function e(t){const r=new Un(t),n=zt(Un.prototype.request,r);return xr.extend(n,Un.prototype,r,{allOwnKeys:!0}),xr.extend(n,r,null,{allOwnKeys:!0}),n.create=function(r){return e(mn(t,r))},n}(Hr);Gn.Axios=Un,Gn.CanceledError=tn,Gn.CancelToken=Wn,Gn.isCancel=Xr,Gn.VERSION=qn,Gn.toFormData=Cr,Gn.AxiosError=wr,Gn.Cancel=Gn.CanceledError,Gn.all=function(e){return Promise.all(e)},Gn.spread=function(e){return function(t){return e.apply(null,t)}},Gn.isAxiosError=function(e){return xr.isObject(e)&&!0===e.isAxiosError},Gn.mergeConfig=mn,Gn.AxiosHeaders=Zr,Gn.formToJSON=e=>$r(xr.isHTMLForm(e)?new FormData(e):e),Gn.getAdapter=In,Gn.HttpStatusCode=Vn,Gn.default=Gn;const Kn=Gn;const Yn=new class{constructor(){this.isDevelopment=!1,this.logLevel=this.isDevelopment?"debug":"error"}setLogLevel(e){this.logLevel=e}shouldLog(e){const t={debug:0,info:1,warn:2,error:3};return t[e]>=t[this.logLevel]}formatMessage(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=(new Date).toISOString(),s=Object.keys(r).length>0?` | Context: ${JSON.stringify(r)}`:"";return`[${n}] ${e.toUpperCase()}: ${t}${s}`}debug(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.shouldLog("debug")&&this.isDevelopment&&console.debug(this.formatMessage("debug",e,t))}info(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.shouldLog("info")&&console.info(this.formatMessage("info",e,t))}warn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.shouldLog("warn")&&console.warn(this.formatMessage("warn",e,t))}error(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.shouldLog("error")&&(console.error(this.formatMessage("error",e,t)),this.isDevelopment||this.sendToLoggingService("error",e,t))}sendToLoggingService(e,t,r){}logApiRequest(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.debug(`API Request: ${e} ${t}`,{data:r})}logApiResponse(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this[r>=400?"error":"debug"](`API Response: ${e} ${t} - ${r}`,{data:n})}logGameEvent(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.info(`Game Event: ${e}`,{gameId:t,...r})}logUserAction(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.info(`User Action: ${e}`,{userId:t,...r})}},Zn=Yn,Jn=Kn.create({headers:{"Content-Type":"application/json"},timeout:1e4});Jn.interceptors.request.use((e=>{var t;const r=localStorage.getItem("token"),n=JSON.parse(localStorage.getItem("user")||"null");return r?e.headers.Authorization=`Bearer ${r}`:(Zn.warn("No token found in localStorage"),null!==n&&void 0!==n&&n.token&&(e.headers.Authorization=`Bearer ${n.token}`)),Zn.logApiRequest(null===(t=e.method)||void 0===t?void 0:t.toUpperCase(),e.url,e.data),e}),(e=>(Zn.error("Request interceptor error",{error:e.message}),Promise.reject(e)))),Jn.interceptors.response.use((e=>{var t;return Zn.logApiResponse(null===(t=e.config.method)||void 0===t?void 0:t.toUpperCase(),e.config.url,e.status,e.data),e}),(e=>{var t,r;if(e.response)Zn.error("API Error Response",{status:e.response.status,statusText:e.response.statusText,data:e.response.data,headers:e.response.headers,url:null===(t=e.config)||void 0===t?void 0:t.url,method:null===(r=e.config)||void 0===r?void 0:r.method}),401===e.response.status&&(Zn.error("Unauthorized request - clearing token and user data"),localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login");else if(e.request){var n,s;Zn.error("API Request Error",{request:e.request,url:null===(n=e.config)||void 0===n?void 0:n.url,method:null===(s=e.config)||void 0===s?void 0:s.method})}else{var a,o;Zn.error("API Error",{message:e.message,url:null===(a=e.config)||void 0===a?void 0:a.url,method:null===(o=e.config)||void 0===o?void 0:o.method})}return Promise.reject(e)}));const Xn=Jn,es={login:async(e,t)=>{try{const r={username:e,password:t},n=await Xn.post("/auth/signin",r);if(n.data&&"object"===typeof n.data&&n.data.message&&(n.data.message.includes("verify")||n.data.message.includes("Verify")))throw new Error(n.data.message);return n.data.token&&(localStorage.setItem("token",n.data.token),localStorage.setItem("user",JSON.stringify(n.data))),{success:!0,data:n.data}}catch(a){var r,n,s;const e=(null===(r=a.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.message)||("string"===typeof(null===(s=a.response)||void 0===s?void 0:s.data)?a.response.data:null)||a.message;if(e&&(e.includes("verify")||e.includes("Verify")||e.includes("enabled")||e.includes("activated")))throw new Error("Please verify your email before logging in. Check your inbox for a verification link.");throw new Error(e||"Login failed. Please check credentials or verify your email.")}},register:async e=>{try{const t={...e,role:[e.role]},r=await Xn.post("/auth/signup",t);if(r.data&&r.data.message&&r.data.message.startsWith("Error:"))throw new Error(r.data.message);return r.data}catch(r){var t;let e="Registration failed. Please try again.";if(null!==(t=r.response)&&void 0!==t&&t.data){const t=r.response.data;t.message?e=t.message:Array.isArray(t.errors)&&t.errors.length>0?e=t.errors.map((e=>`${e.field}: ${e.defaultMessage}`)).join(", "):"object"===typeof t?e=JSON.stringify(t):"string"===typeof t&&(e=t)}else r.message&&(e=r.message);throw new Error(e)}},verifyEmail:async e=>{try{return(await Xn.get(`/auth/verify?token=${e}`)).data}catch(s){var t,r,n;throw new Error((null===(t=s.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||"string"===typeof(null===(n=s.response)||void 0===n?void 0:n.data)&&s.response.data||"Email verification failed. The link may be invalid or expired.")}},logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user")},getCurrentUser:()=>{const e=localStorage.getItem("user");return e?JSON.parse(e):null},refreshUser:async()=>{try{const t=(await Xn.get("/users/profile")).data,r=es.getCurrentUser();if(r&&r.token){var e;const n={...t,token:r.token,roles:null===(e=t.roles)||void 0===e?void 0:e.map((e=>"string"===typeof e?e:e.name)),profileImage:t.profileImage||null,profileImageName:t.profileImageName||null};return localStorage.setItem("user",JSON.stringify(n)),n}return t}catch(t){return Zn.error("Failed to refresh user",{error:t.message}),es.getCurrentUser()}},isAuthenticated:()=>null!==localStorage.getItem("token"),isAdmin:()=>{const e=es.getCurrentUser();return e&&e.roles&&e.roles.includes("ROLE_ADMIN")},isTeacher:()=>{const e=es.getCurrentUser();return e&&e.roles&&e.roles.includes("ROLE_TEACHER")},isStudent:()=>{const e=es.getCurrentUser();return e&&e.roles&&e.roles.includes("ROLE_STUDENT")},forgotPassword:async e=>{try{return{success:!0,message:(await Xn.post("/auth/forgot-password",{email:e})).data.message||"Password reset email sent successfully"}}catch(s){var t,r,n;throw new Error((null===(t=s.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||"string"===typeof(null===(n=s.response)||void 0===n?void 0:n.data)&&s.response.data||"Failed to process password reset request")}},resetPassword:async(e,t,r)=>{try{if(t!==r)throw new Error("Passwords do not match");if(t.length<6)throw new Error("Password must be at least 6 characters long");return{success:!0,message:(await Xn.post("/auth/reset-password",{token:e,newPassword:t,confirmPassword:r})).data.message||"Password reset successful"}}catch(o){var n,s,a;throw new Error((null===(n=o.response)||void 0===n||null===(s=n.data)||void 0===s?void 0:s.message)||"string"===typeof(null===(a=o.response)||void 0===a?void 0:a.data)&&o.response.data||"Failed to reset password")}},changePassword:async(e,t,r)=>{try{if(t!==r)throw new Error("Passwords do not match");if(t.length<6)throw new Error("Password must be at least 6 characters long");return{success:!0,message:(await Xn.post("/users/change-password",{currentPassword:e,newPassword:t,confirmPassword:r})).data.message||"Password changed successfully"}}catch(o){var n,s,a;throw new Error((null===(n=o.response)||void 0===n||null===(s=n.data)||void 0===s?void 0:s.message)||"string"===typeof(null===(a=o.response)||void 0===a?void 0:a.data)&&o.response.data||"Failed to change password")}}},ts=es,rs={getUserIdentifier:()=>{const e=ts.getCurrentUser();return e?(console.log("\ud83d\udd0d ProgressService: Getting user identifier:",{user:e,username:e.username,email:e.email,roles:e.roles,token:localStorage.getItem("token"),isAuthenticated:ts.isAuthenticated(),isStudent:ts.isStudent()}),ts.isStudent()?e.username||e.email:(console.error("\u274c User does not have STUDENT role:",e.roles),null)):(console.warn("\u26a0\ufe0f No authenticated user found for progress storage"),Zn.warn("No authenticated user found for progress storage"),null)},getProgressKey:e=>`multiplicationProgress_${e}`,saveProgress:async e=>{try{const l=rs.getUserIdentifier();if(!l)return console.error("\u274c Cannot save progress: No authenticated user"),Zn.error("Cannot save progress: No authenticated user"),!1;console.log("\ud83d\udd04 Attempting to save progress to backend:",{userIdentifier:l,progressData:e,timestamp:(new Date).toISOString(),user:ts.getCurrentUser(),token:localStorage.getItem("token")});try{Zn.info("Saving progress to backend for user:",l),console.log("\ud83d\udd04 Sending progress to backend:",e);const t=await Xn.post("/api/learning-progress/save",e);if(console.log("\u2705 Backend save response:",t.data),t.data)return Zn.info("Progress saved successfully to backend"),rs.saveProgressToLocalStorage(e),!0;throw console.warn("\u26a0\ufe0f Backend returned empty response"),new Error("Backend returned empty response")}catch(i){var t,r,n,s,a,o;if(console.error("\u274c Backend save failed:",{error:i.message,status:null===(t=i.response)||void 0===t?void 0:t.status,statusText:null===(r=i.response)||void 0===r?void 0:r.statusText,data:null===(n=i.response)||void 0===n?void 0:n.data,url:null===(s=i.config)||void 0===s?void 0:s.url,headers:null===(a=i.config)||void 0===a?void 0:a.headers,requestData:e}),Zn.warn("Backend save failed, falling back to localStorage:",i.message),401===(null===(o=i.response)||void 0===o?void 0:o.status))return console.error("\ud83d\udeab Authentication failed - not saving to localStorage"),!1}console.log("\ud83d\udd04 Falling back to localStorage save");const c=rs.saveProgressToLocalStorage(e);return console.log("\ud83d\udcf1 localStorage save result:",c),c}catch(l){return console.error("\ud83d\udca5 Failed to save progress:",l),Zn.error("Failed to save progress",{error:l.message}),!1}},startLesson:async e=>{try{const t=await Xn.post("/progress/start-lesson",{lessonId:e});return console.log("\u2705 Lesson started:",t.data),t.data}catch(t){throw console.error("\u274c Failed to start lesson:",t),t}},saveQuizState:async(e,t)=>{try{const n=rs.getUserIdentifier();if(!n)return console.error("\u274c Cannot save quiz state: No authenticated user"),!1;const s={userIdentifier:n,lessonId:e,quizState:t,timestamp:(new Date).toISOString()};console.log("\ud83d\udd04 Saving quiz state:",s);try{const r=t.questionsAnswered[t.questionsAnswered.length-1];if(r){const n={lessonId:e,questionIndex:r.questionIndex,userAnswer:r.userAnswer,correctAnswer:r.correctAnswer,isCorrect:r.isCorrect,questionType:r.questionType,stepTitle:r.stepTitle};if((await Xn.post("/progress/save-answer",n)).data)return rs.saveQuizStateToLocalStorage(e,t),!0}}catch(r){console.warn("\u26a0\ufe0f Backend quiz state save failed, using localStorage:",r.message)}return rs.saveQuizStateToLocalStorage(e,t)}catch(n){return console.error("\ud83d\udca5 Failed to save quiz state:",n),!1}},loadQuizState:async e=>{try{if(!rs.getUserIdentifier())return null;try{const t=await Xn.get(`/progress/lesson/${e}`);if(t.data)return{currentQuestion:t.data.currentQuestion,questionsAnswered:t.data.answeredQuestions||[],totalQuestions:t.data.totalQuestions,isCompleted:t.data.isCompleted}}catch(t){console.warn("\u26a0\ufe0f Backend quiz state load failed, trying localStorage:",t.message)}return rs.loadQuizStateFromLocalStorage(e)}catch(r){return console.error("\ud83d\udca5 Failed to load quiz state:",r),null}},clearQuizState:async e=>{try{if(!rs.getUserIdentifier())return!1;try{await Xn.post("/progress/complete",{lessonId:e})}catch(t){console.warn("\u26a0\ufe0f Backend quiz state clear failed:",t.message)}return rs.clearQuizStateFromLocalStorage(e)}catch(r){return console.error("\ud83d\udca5 Failed to clear quiz state:",r),!1}},loadProgress:async()=>{try{const i=rs.getUserIdentifier();if(!i)return Zn.warn("Cannot load progress: No authenticated user"),null;console.log("\ud83d\udd04 Attempting to load progress from backend:",{userIdentifier:i,timestamp:(new Date).toISOString()});try{Zn.info("Loading progress from backend for user:",i),console.log("\ud83d\udd04 Loading progress from backend...");const e=await Xn.get("/progress/current");return console.log("\u2705 Backend load response:",e.data),e.data?(Zn.info("Progress loaded successfully from backend"),{completed:e.data.lessonProgressList.map((e=>e.isCompleted)),active:e.data.nextLessonId-1||0,quizScores:e.data.lessonProgressList.map((e=>e.correctAnswers)),quizAttempts:e.data.lessonProgressList.map((e=>e.totalAttempts)),quizHistory:{},quizStates:e.data.lessonProgressList.reduce(((e,t)=>(t.isCompleted||(e[t.lessonId]={currentQuestion:t.currentQuestion,questionsAnswered:t.answeredQuestions||[],totalQuestions:t.totalQuestions,isCompleted:t.isCompleted}),e)),{})}):(console.warn("\u26a0\ufe0f Backend returned empty response for load"),null)}catch(o){var e,t,r,n,s,a;if(console.error("\u274c Backend load failed:",{error:o.message,status:null===(e=o.response)||void 0===e?void 0:e.status,statusText:null===(t=o.response)||void 0===t?void 0:t.statusText,data:null===(r=o.response)||void 0===r?void 0:r.data,url:null===(n=o.config)||void 0===n?void 0:n.url,headers:null===(s=o.config)||void 0===s?void 0:s.headers}),Zn.warn("Backend load failed, falling back to localStorage:",o.message),401===(null===(a=o.response)||void 0===a?void 0:a.status))return console.error("\ud83d\udeab Authentication failed - not loading from localStorage"),null}console.log("\ud83d\udd04 Falling back to localStorage load");const l=rs.loadProgressFromLocalStorage();return console.log("\ud83d\udcf1 localStorage load result:",l),l}catch(i){return console.error("\ud83d\udca5 Failed to load progress:",i),Zn.error("Failed to load progress",{error:i.message}),null}},completeLesson:async(e,t)=>{try{Zn.info("Completing lesson via backend:",e,t);const r=await Xn.post("/api/learning-progress/complete-lesson",null,{params:{propertyIndex:e,lessonIndex:t}});return r.data?(Zn.info("Lesson completed successfully via backend"),r.data):null}catch(r){return Zn.error("Error completing lesson via backend:",r),null}},completeProperty:async(e,t)=>{try{Zn.info("Completing property via backend:",e,t);const r=await Xn.post("/api/learning-progress/complete-property",null,{params:{propertyIndex:e,score:t}});return r.data?(Zn.info("Property completed successfully via backend"),r.data):null}catch(r){return Zn.error("Error completing property via backend:",r),null}},getLeaderboard:async()=>{try{Zn.info("Getting leaderboard from backend");return(await Xn.get("/api/learning-progress/leaderboard")).data||[]}catch(e){return Zn.error("Error getting leaderboard from backend:",e),[]}},getTopPerformers:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;try{Zn.info("Getting top performers from backend");return(await Xn.get("/api/learning-progress/top-performers",{params:{minProperties:e}})).data||[]}catch(t){return Zn.error("Error getting top performers from backend:",t),[]}},getProgressStatistics:async()=>{try{Zn.info("Getting progress statistics from backend");return(await Xn.get("/api/learning-progress/statistics")).data||{}}catch(e){return Zn.error("Error getting progress statistics from backend:",e),{}}},clearProgress:()=>{try{const e=rs.getUserIdentifier();if(!e)return Zn.warn("Cannot clear progress: No authenticated user"),!1;const t=rs.getProgressKey(e);return localStorage.removeItem(t),Zn.info("Progress cleared successfully",{userIdentifier:e,progressKey:t}),!0}catch(e){return Zn.error("Failed to clear progress",{error:e.message}),!1}},clearAllProgress:()=>{try{const e=Object.keys(localStorage).filter((e=>e.startsWith("multiplicationProgress_")));return e.forEach((e=>{localStorage.removeItem(e)})),Zn.info("All progress cleared",{clearedKeys:e}),!0}catch(e){return Zn.error("Failed to clear all progress",{error:e.message}),!1}},saveProgressToLocalStorage:e=>{try{const t=rs.getUserIdentifier();if(!t)return Zn.error("Cannot save progress to localStorage: No user ID found."),!1;const r=rs.getProgressKey(t),n={...e,lastUpdated:(new Date).toISOString(),userIdentifier:t};return localStorage.setItem(r,JSON.stringify(n)),Zn.info("Progress saved to localStorage as backup",{userIdentifier:t,progressKey:r}),!0}catch(t){return Zn.error("Error saving progress to localStorage:",t),!1}},saveQuizStateToLocalStorage:(e,t)=>{try{const r=rs.getUserIdentifier();if(!r)return Zn.error("Cannot save quiz state to localStorage: No user ID found."),!1;const n=`quizState_${r}_${e}`,s={...t,lastUpdated:(new Date).toISOString(),userIdentifier:r,lessonId:e};return localStorage.setItem(n,JSON.stringify(s)),Zn.info("Quiz state saved to localStorage",{userIdentifier:r,lessonId:e,quizKey:n}),!0}catch(r){return Zn.error("Error saving quiz state to localStorage:",r),!1}},loadQuizStateFromLocalStorage:e=>{try{const t=rs.getUserIdentifier();if(!t)return Zn.warn("Cannot load quiz state from localStorage: No authenticated user"),null;const r=`quizState_${t}_${e}`,n=localStorage.getItem(r);if(!n)return Zn.info("No saved quiz state found in localStorage for lesson",{userIdentifier:t,lessonId:e}),null;const s=JSON.parse(n);return s.userIdentifier!==t||s.lessonId!==e?(Zn.warn("Quiz state mismatch, clearing quiz state",{expectedUser:t,foundUser:s.userIdentifier,expectedLesson:e,foundLesson:s.lessonId}),rs.clearQuizStateFromLocalStorage(e),null):(Zn.info("Quiz state loaded from localStorage",{userIdentifier:t,lessonId:e,quizKey:r}),s)}catch(t){return Zn.error("Failed to load quiz state from localStorage",{error:t.message}),null}},clearQuizStateFromLocalStorage:e=>{try{const t=rs.getUserIdentifier();if(!t)return Zn.warn("Cannot clear quiz state from localStorage: No authenticated user"),!1;const r=`quizState_${t}_${e}`;return localStorage.removeItem(r),Zn.info("Quiz state cleared from localStorage",{userIdentifier:t,lessonId:e,quizKey:r}),!0}catch(t){return Zn.error("Failed to clear quiz state from localStorage",{error:t.message}),!1}},loadProgressFromLocalStorage:()=>{try{const e=rs.getUserIdentifier();if(!e)return Zn.warn("Cannot load progress from localStorage: No authenticated user"),null;const t=rs.getProgressKey(e),r=localStorage.getItem(t);if(!r)return Zn.info("No saved progress found in localStorage for user",{userIdentifier:e}),null;const n=JSON.parse(r);return n.userIdentifier!==e?(Zn.warn("Progress user mismatch, clearing progress",{expected:e,found:n.userIdentifier}),rs.clearProgress(),null):(Zn.info("Progress loaded from localStorage fallback",{userIdentifier:e,progressKey:t}),n)}catch(e){return Zn.error("Failed to load progress from localStorage",{error:e.message}),null}},forceSaveToBackend:async e=>{try{const t=rs.getUserIdentifier();if(!t)return console.error("\u274c Cannot force save: No authenticated user"),!1;console.log("\ud83d\udd04 Force saving progress to backend:",{userIdentifier:t,progressData:e,timestamp:(new Date).toISOString()});const r=await Xn.post("/api/learning-progress/save",e);return r.data?(console.log("\u2705 Force save successful:",r.data),!0):(console.error("\u274c Force save failed: Empty response"),!1)}catch(t){return console.error("\u274c Force save failed:",t),!1}},getProgressSummary:async()=>{try{const e=await rs.loadProgress();if(!e)return{completedProperties:[],completedLessons:{},totalLessonsCompleted:0,totalPropertiesCompleted:0,lastUpdated:null};const t=e.completedLessons||{},r=e.completedProperties||[];return{completedProperties:r,completedLessons:t,totalLessonsCompleted:Object.keys(t).length,totalPropertiesCompleted:r.length,lastUpdated:e.lastUpdated}}catch(e){return Zn.error("Failed to get progress summary",{error:e.message}),{completedProperties:[],completedLessons:{},totalLessonsCompleted:0,totalPropertiesCompleted:0,lastUpdated:null}}},exportProgress:()=>{try{const e=rs.getUserIdentifier();if(!e)throw new Error("No authenticated user");const t=rs.loadProgress();if(!t)throw new Error("No progress data found");return{userIdentifier:e,progress:t,exportedAt:(new Date).toISOString(),version:"1.0"}}catch(e){throw Zn.error("Failed to export progress",{error:e.message}),e}},importProgress:e=>{try{const t=rs.getUserIdentifier();if(!t)throw new Error("No authenticated user");if(!e||!e.progress)throw new Error("Invalid import data");if(e.userIdentifier!==t)throw new Error("Import data does not match current user");if(!rs.saveProgress(e.progress))throw new Error("Failed to save imported progress");return Zn.info("Progress imported successfully",{userIdentifier:t}),!0}catch(t){throw Zn.error("Failed to import progress",{error:t.message}),t}}},ns=rs;const ss=new class{async loadProgress(){try{return(await Xn.get("/api/multiplication-learning/progress")).data}catch(a){var e,t,r,n,s;throw Zn.error("Error loading multiplication learning progress",{status:null===a||void 0===a||null===(e=a.response)||void 0===e?void 0:e.status,statusText:null===a||void 0===a||null===(t=a.response)||void 0===t?void 0:t.statusText,data:null===a||void 0===a||null===(r=a.response)||void 0===r?void 0:r.data,url:null===a||void 0===a||null===(n=a.config)||void 0===n?void 0:n.url,method:null===a||void 0===a||null===(s=a.config)||void 0===s?void 0:s.method}),a}}async saveProgress(e){try{return(await Xn.post("/api/multiplication-learning/progress",e)).data}catch(o){var t,r,n,s,a;throw Zn.error("Error saving multiplication learning progress",{status:null===o||void 0===o||null===(t=o.response)||void 0===t?void 0:t.status,statusText:null===o||void 0===o||null===(r=o.response)||void 0===r?void 0:r.statusText,data:null===o||void 0===o||null===(n=o.response)||void 0===n?void 0:n.data,url:null===o||void 0===o||null===(s=o.config)||void 0===s?void 0:s.url,method:null===o||void 0===o||null===(a=o.config)||void 0===a?void 0:a.method,payload:e}),o}}async completeProperty(e,t){try{return(await Xn.post("/api/multiplication-learning/complete-property",{propertyIndex:e,...t})).data}catch(i){var r,n,s,a,o;throw Zn.error("Error completing property",{status:null===i||void 0===i||null===(r=i.response)||void 0===r?void 0:r.status,statusText:null===i||void 0===i||null===(n=i.response)||void 0===n?void 0:n.statusText,data:null===i||void 0===i||null===(s=i.response)||void 0===s?void 0:s.data,url:null===i||void 0===i||null===(a=i.config)||void 0===a?void 0:a.url,method:null===i||void 0===i||null===(o=i.config)||void 0===o?void 0:o.method,payload:{propertyIndex:e,...t}}),i}}async saveQuizAttempt(e,t,r){try{return(await Xn.post("/api/multiplication-learning/quiz-attempt",{propertyIndex:e,stepIndex:t,...r})).data}catch(l){var n,s,a,o,i;throw Zn.error("Error saving quiz attempt",{status:null===l||void 0===l||null===(n=l.response)||void 0===n?void 0:n.status,statusText:null===l||void 0===l||null===(s=l.response)||void 0===s?void 0:s.statusText,data:null===l||void 0===l||null===(a=l.response)||void 0===a?void 0:a.data,url:null===l||void 0===l||null===(o=l.config)||void 0===o?void 0:o.url,method:null===l||void 0===l||null===(i=l.config)||void 0===i?void 0:i.method,payload:{propertyIndex:e,stepIndex:t,...r}}),l}}async getQuizAttempts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{const r={};null!==e&&(r.propertyIndex=e),null!==t&&(r.stepIndex=t);return(await Xn.get("/api/multiplication-learning/quiz-attempts",{params:r})).data}catch(i){var r,n,s,a,o;throw Zn.error("Error getting quiz attempts",{status:null===i||void 0===i||null===(r=i.response)||void 0===r?void 0:r.status,statusText:null===i||void 0===i||null===(n=i.response)||void 0===n?void 0:n.statusText,data:null===i||void 0===i||null===(s=i.response)||void 0===s?void 0:s.data,url:null===i||void 0===i||null===(a=i.config)||void 0===a?void 0:a.url,method:null===i||void 0===i||null===(o=i.config)||void 0===o?void 0:o.method,params:{propertyIndex:e,stepIndex:t}}),i}}async getPropertyCompletions(){try{return(await Xn.get("/api/multiplication-learning/property-completions")).data}catch(a){var e,t,r,n,s;throw Zn.error("Error getting property completions",{status:null===a||void 0===a||null===(e=a.response)||void 0===e?void 0:e.status,statusText:null===a||void 0===a||null===(t=a.response)||void 0===t?void 0:t.statusText,data:null===a||void 0===a||null===(r=a.response)||void 0===r?void 0:r.data,url:null===a||void 0===a||null===(n=a.config)||void 0===n?void 0:n.url,method:null===a||void 0===a||null===(s=a.config)||void 0===s?void 0:s.method}),a}}};var as=r(579);const os=(0,n.createContext)(),is=()=>(0,n.useContext)(os),ls=e=>{let{children:t}=e;const[r,s]=(0,n.useState)(null),[a,o]=(0,n.useState)(localStorage.getItem("token")),[i,l]=(0,n.useState)(!0),[c,d]=(0,n.useState)(null);(0,n.useEffect)((()=>{const e=ts.getCurrentUser(),t=localStorage.getItem("token");e&&(s(e),o(t)),l(!1)}),[]);const u={currentUser:r,token:a,login:async(e,t)=>{try{const r=await ts.login(e,t);return s(r.data),o(r.data.token),{success:!0,user:r.data}}catch(r){return{success:!1,error:r.message||"Invalid credentials"}}},register:async e=>{try{return await ts.register(e)}catch(t){throw t}},logout:()=>{ns.clearProgress(),ts.logout(),s(null),o(null),Zn.info("User logged out and progress cleared from memory")},refreshCurrentUser:async()=>{try{const e=await ts.refreshUser();return s(e),null!==e&&void 0!==e&&e.token&&o(e.token),e}catch(e){return Zn.error("Failed to refresh user data",{error:e.message}),null}},isAdmin:()=>ts.isAdmin(),isTeacher:()=>ts.isTeacher(),isStudent:()=>ts.isStudent(),multiplicationProgress:c,loadMultiplicationProgress:async()=>{try{if(!a)return null;const e=await ss.loadProgress();return d(e),e}catch(e){return Zn.error("Failed to load multiplication progress",{error:e.message}),null}},saveMultiplicationProgress:async e=>{try{if(!a)return null;const t=await ss.saveProgress(e);return d(t),t}catch(t){throw Zn.error("Failed to save multiplication progress",{error:t.message}),t}},completeMultiplicationProperty:async(e,t)=>{try{if(!a)return null;const r=await ss.completeProperty(e,t);return d(r),r}catch(r){throw Zn.error("Failed to complete multiplication property",{error:r.message}),r}},saveMultiplicationQuizAttempt:async(e,t,r)=>{try{return a?await ss.saveQuizAttempt(e,t,r):null}catch(n){throw Zn.error("Failed to save multiplication quiz attempt",{error:n.message}),n}}};return(0,as.jsx)(os.Provider,{value:u,children:!i&&t})},cs=(0,n.createContext)(),ds=()=>{const e=(0,n.useContext)(cs);if(!e)throw new Error("useTheme must be used within a ThemeProvider");return e},us=e=>{let{children:t}=e;const[r,s]=(0,n.useState)((()=>{const e=localStorage.getItem("theme");return e?"dark"===e:"undefined"!==typeof window&&window.matchMedia("(prefers-color-scheme: dark)").matches})),[a,o]=(0,n.useState)(!1);(0,n.useEffect)((()=>{const e=document.documentElement.classList.contains("dark"),t=localStorage.getItem("theme");r!==e&&(r?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")),t!==(r?"dark":"light")&&localStorage.setItem("theme",r?"dark":"light"),setTimeout((()=>{const e=document.documentElement.classList.contains("dark");e!==r&&s(e)}),100),o(!0),document.body.classList.add("theme-ready")}),[]),(0,n.useEffect)((()=>{a&&(r?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light")))}),[r,a]),(0,n.useEffect)((()=>{const e=window.matchMedia("(prefers-color-scheme: dark)"),t=e=>{localStorage.getItem("theme")||s(e.matches)};return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}),[]);const i={darkMode:r,setDarkMode:s,toggleTheme:()=>{s((e=>{const t=!e;return t?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light")),t}))},isInitialized:a,getCurrentTheme:()=>document.documentElement.classList.contains("dark")};return(0,as.jsx)(cs.Provider,{value:i,children:t})};function hs(e){var t,r,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=hs(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function ms(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=hs(e))&&(n&&(n+=" "),n+=t);return n}const fs=e=>"boolean"===typeof e?`${e}`:0===e?"0":e,ps=ms,gs=(e,t)=>r=>{var n;if(null==(null===t||void 0===t?void 0:t.variants))return ps(e,null===r||void 0===r?void 0:r.class,null===r||void 0===r?void 0:r.className);const{variants:s,defaultVariants:a}=t,o=Object.keys(s).map((e=>{const t=null===r||void 0===r?void 0:r[e],n=null===a||void 0===a?void 0:a[e];if(null===t)return null;const o=fs(t)||fs(n);return s[e][o]})),i=r&&Object.entries(r).reduce(((e,t)=>{let[r,n]=t;return void 0===n||(e[r]=n),e}),{}),l=null===t||void 0===t||null===(n=t.compoundVariants)||void 0===n?void 0:n.reduce(((e,t)=>{let{class:r,className:n,...s}=t;return Object.entries(s).every((e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...a,...i}[t]):{...a,...i}[t]===r}))?[...e,r,n]:e}),[]);return ps(e,o,l,null===r||void 0===r?void 0:r.class,null===r||void 0===r?void 0:r.className)},xs=gs("inline-flex items-center justify-center text-md font-medium transition-colors duration-200",{variants:{variant:{default:"text-white bg-gradient-to-b from-[#18C8FF] via-[#4B8CFF] to-[#6D6DFF] hover:opacity-70 dark:text-white dark:bg-gradient-to-b dark:from-[#18C8FF] dark:via-[#4B8CFF] dark:to-[#6D6DFF] dark:hover:opacity-70",destructive:"bg-red-500 text-white hover:bg-red-600/90 dark:bg-red-600 dark:text-white dark:hover:bg-red-700/90",outlineWhite:"border border-primary px-4 py-2 dark:border-white dark:text-white dark:bg-transparent dark:hover:bg-white dark:hover:text-primary bg-transparent hover:bg-primary hover:text-white ",primaryWhite:"text-primary bg-primary text-white hover:border-primary hover:text-primary hover:bg-transparent dark:text-primary dark:bg-white dark:hover:text-white  dark:hover:bg-transparent border border-white dark:border-white",cancel:"bg-[#BCBCBC] text-white hover:bg-[#BCBCBC]/70 dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600/70",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-gray-800 dark:hover:text-white",link:"underline underline-offset-4 text-primary dark:text-white dark:hover:text-white/70",join:"bg-purple-600 text-white hover:bg-purple-700/90 dark:bg-purple-800 dark:text-white dark:hover:bg-purple-900/90",noStyle:"text-black dark:text-white"},size:{default:"h-10 py-2 px-4",sm:"py-3 px-6",lg:"py-5 px-8",icon:"h-10 w-10",join:"h-12 px-5"},rounded:{none:"rounded-none",sm:"rounded-sm",md:"rounded-md",lg:"rounded-lg",xl:"rounded-xl","2xl":"rounded-2xl",full:"rounded-full"}},defaultVariants:{variant:"default",size:"default",rounded:"md"}}),bs=(0,n.forwardRef)(((e,t)=>{let{className:r,variant:n,size:s,icon:a,children:o,to:i,type:l="button",rounded:c="md",...d}=e;const u=xs({variant:n,size:s,rounded:c,className:r});return i?(0,as.jsxs)(Te,{to:i,className:u,ref:t,...d,children:[a&&(0,as.jsx)("span",{className:"mr-2",children:a}),o]}):(0,as.jsxs)("button",{type:l,className:u,ref:t,...d,children:[a&&(0,as.jsx)("span",{className:"mr-2",children:a}),o]})}));bs.displayName="Button";var ys={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},vs=n.createContext&&n.createContext(ys),ws=["attr","size","title"];function js(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Ns(){return Ns=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ns.apply(this,arguments)}function ks(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ss(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ks(Object(r),!0).forEach((function(t){Cs(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ks(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Cs(e,t,r){return t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _s(e){return e&&e.map(((e,t)=>n.createElement(e.tag,Ss({key:t},e.attr),_s(e.child))))}function Es(e){return t=>n.createElement(As,Ns({attr:Ss({},e.attr)},t),_s(e.child))}function As(e){var t=t=>{var r,{attr:s,size:a,title:o}=e,i=js(e,ws),l=a||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),n.createElement("svg",Ns({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,s,i,{className:r,style:Ss(Ss({color:e.color||t.color},t.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),o&&n.createElement("title",null,o),e.children)};return void 0!==vs?n.createElement(vs.Consumer,null,(e=>t(e))):t(ys)}function Os(e){return Es({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M16 9C16 11.2091 14.2091 13 12 13C9.79086 13 8 11.2091 8 9C8 6.79086 9.79086 5 12 5C14.2091 5 16 6.79086 16 9ZM14 9C14 10.1046 13.1046 11 12 11C10.8954 11 10 10.1046 10 9C10 7.89543 10.8954 7 12 7C13.1046 7 14 7.89543 14 9Z",fill:"currentColor"},child:[]},{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1ZM3 12C3 14.0902 3.71255 16.014 4.90798 17.5417C6.55245 15.3889 9.14627 14 12.0645 14C14.9448 14 17.5092 15.3531 19.1565 17.4583C20.313 15.9443 21 14.0524 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12ZM12 21C9.84977 21 7.87565 20.2459 6.32767 18.9878C7.59352 17.1812 9.69106 16 12.0645 16C14.4084 16 16.4833 17.1521 17.7538 18.9209C16.1939 20.2191 14.1881 21 12 21Z",fill:"currentColor"},child:[]}]})(e)}function Ts(e){return Es({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M16.604 11.048a5.67 5.67 0 0 0 .751-3.44c-.179-1.784-1.175-3.361-2.803-4.44l-1.105 1.666c1.119.742 1.8 1.799 1.918 2.974a3.693 3.693 0 0 1-1.072 2.986l-1.192 1.192 1.618.475C18.951 13.701 19 17.957 19 18h2c0-1.789-.956-5.285-4.396-6.952z"},child:[]},{tag:"path",attr:{d:"M9.5 12c2.206 0 4-1.794 4-4s-1.794-4-4-4-4 1.794-4 4 1.794 4 4 4zm0-6c1.103 0 2 .897 2 2s-.897 2-2 2-2-.897-2-2 .897-2 2-2zm1.5 7H8c-3.309 0-6 2.691-6 6v1h2v-1c0-2.206 1.794-4 4-4h3c2.206 0 4 1.794 4 4v1h2v-1c0-3.309-2.691-6-6-6z"},child:[]}]})(e)}function zs(e){return Es({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C15.2713 2 18.1757 3.57078 20.0002 5.99923L17.2909 5.99931C15.8807 4.75499 14.0285 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C14.029 20 15.8816 19.2446 17.2919 17.9998L20.0009 17.9998C18.1765 20.4288 15.2717 22 12 22ZM19 16V13H11V11H19V8L24 12L19 16Z"},child:[]}]})(e)}function Ps(e){return Es({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"},child:[]},{tag:"path",attr:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"},child:[]}]})(e)}const Is={getUserProfile:async()=>{try{const e=await Xn.get("/users/profile");return console.log("User profile API response:",{status:e.status,hasData:!!e.data,hasProfileImage:e.data&&!!e.data.profileImage}),e.data}catch(e){throw e.response?e.response.data:new Error("Failed to fetch profile")}},updateUserProfile:async e=>{try{const t={firstName:e.firstName,lastName:e.lastName,email:e.email,username:e.username};Object.keys(t).forEach((e=>void 0===t[e]&&delete t[e]));return(await Xn.put("/users/profile",t)).data}catch(d){var t,r,n,s,a,o,i,l,c;if(null!==(t=d.response)&&void 0!==t&&null!==(r=t.data)&&void 0!==r&&null!==(n=r.message)&&void 0!==n&&n.includes("Username is already taken"))throw new Error("This username is already taken. Please choose another one.");if(null!==(s=d.response)&&void 0!==s&&null!==(a=s.data)&&void 0!==a&&null!==(o=a.message)&&void 0!==o&&o.includes("Email is already in use"))throw new Error("This email is already in use by another account.");throw new Error((null===(i=d.response)||void 0===i||null===(l=i.data)||void 0===l?void 0:l.message)||"string"===typeof(null===(c=d.response)||void 0===c?void 0:c.data)&&d.response.data||"Failed to update profile")}},verifyEmailUpdate:async e=>{try{return(await Xn.get(`/users/verify-email?token=${e}`)).data}catch(s){var t,r,n;throw new Error((null===(t=s.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||"string"===typeof(null===(n=s.response)||void 0===n?void 0:n.data)&&s.response.data||"Email verification failed. The link may be invalid or expired.")}},deleteAccount:async()=>{try{return(await Xn.delete("/users/profile")).data}catch(n){var e,t,r;throw new Error((null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"string"===typeof(null===(r=n.response)||void 0===r?void 0:r.data)&&n.response.data||"Failed to delete account")}},deleteUser:async e=>{try{return(await Xn.delete(`/admin/users/${e}`)).data}catch(s){var t,r,n;throw new Error((null===(t=s.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||"string"===typeof(null===(n=s.response)||void 0===n?void 0:n.data)&&s.response.data||"Failed to delete user")}},getAllUsers:async()=>{try{return(await Xn.get("/admin/users")).data}catch(n){var e,t,r;throw new Error((null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"string"===typeof(null===(r=n.response)||void 0===r?void 0:r.data)&&n.response.data||"Failed to fetch users")}},updateUser:async(e,t)=>{try{return(await Xn.put(`/admin/users/${e}`,t)).data}catch(a){var r,n,s;throw new Error((null===(r=a.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.message)||"string"===typeof(null===(s=a.response)||void 0===s?void 0:s.data)&&a.response.data||"Failed to update user")}},resetUserPassword:async(e,t)=>{try{return(await Xn.put(`/admin/users/${e}/reset-password`,{password:t})).data}catch(a){var r,n,s;throw new Error((null===(r=a.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.message)||"string"===typeof(null===(s=a.response)||void 0===s?void 0:s.data)&&a.response.data||"Failed to reset password")}},changePassword:async(e,t,r)=>{try{return(await Xn.post("/users/change-password",{currentPassword:e,newPassword:t,confirmPassword:r})).data}catch(o){var n,s,a;throw new Error((null===(n=o.response)||void 0===n||null===(s=n.data)||void 0===s?void 0:s.message)||"string"===typeof(null===(a=o.response)||void 0===a?void 0:a.data)&&o.response.data||"Failed to change password")}},uploadProfilePicture:async e=>{try{const t=new FormData;t.append("file",e);const r=await Xn.post("/users/profile/image",t,{headers:{"Content-Type":"multipart/form-data"}});await Xn.get("/users/profile");return r.data}catch(s){var t,r,n;throw console.error("Profile image upload error:",s),new Error((null===(t=s.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||"string"===typeof(null===(n=s.response)||void 0===n?void 0:n.data)&&s.response.data||"Failed to upload profile picture")}},getProfileImage:async()=>{try{const e=(new Date).getTime(),t=await Xn.get(`/users/profile/image?t=${e}`,{responseType:"arraybuffer"}),r=btoa(new Uint8Array(t.data).reduce(((e,t)=>e+String.fromCharCode(t)),""));return`data:${t.headers["content-type"]||"image/jpeg"};base64,${r}`}catch(e){return console.error("Error fetching profile image:",e),null}},resendVerificationEmail:async()=>{try{return(await Xn.post("/users/resend-verification")).data}catch(n){var e,t,r;throw new Error((null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"string"===typeof(null===(r=n.response)||void 0===r?void 0:r.data)&&n.response.data||"Failed to resend verification email")}},resendEmailChangeVerification:async()=>{try{return(await Xn.post("/users/resend-email-change-verification")).data}catch(r){var e,t;throw(null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Failed to resend email change verification"}},createUserByAdmin:async e=>{try{return(await Xn.post("/admin/users",e)).data}catch(s){var t,r,n;throw new Error((null===(t=s.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||"string"===typeof(null===(n=s.response)||void 0===n?void 0:n.data)&&s.response.data||"Failed to create user")}},updateUserByAdmin:async(e,t)=>{try{return(await Xn.put(`/admin/users/${e}`,t)).data}catch(a){var r,n,s;throw new Error((null===(r=a.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.message)||"string"===typeof(null===(s=a.response)||void 0===s?void 0:s.data)&&a.response.data||"Failed to update user")}},deleteUserByAdmin:async e=>{try{return(await Xn.delete(`/admin/users/${e}`)).data}catch(s){var t,r,n;throw new Error((null===(t=s.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||"string"===typeof(null===(n=s.response)||void 0===n?void 0:n.data)&&s.response.data||"Failed to delete user")}}},Ls=Is;function Ms(e){return Es({tag:"svg",attr:{viewBox:"0 0 32 32"},child:[{tag:"path",attr:{d:"M 16 4 L 3 7 L 3 9 L 16 6 L 29 9 L 29 7 Z M 10 10 C 6.773438 10 3.625 11.3125 3.625 11.3125 L 3 11.59375 L 3 27 L 14.28125 27 C 14.628906 27.597656 15.261719 28 16 28 C 16.738281 28 17.371094 27.597656 17.71875 27 L 29 27 L 29 11.59375 L 28.375 11.3125 C 28.375 11.3125 25.226563 10 22 10 C 19.082031 10 16.519531 10.980469 16 11.1875 C 15.480469 10.980469 12.917969 10 10 10 Z M 10 12 C 11.933594 12 14 12.625 15 12.96875 L 15 24.09375 C 13.886719 23.726563 12.058594 23.21875 10 23.21875 C 7.898438 23.21875 6.1875 23.703125 5 24.09375 L 5 12.96875 C 5.769531 12.691406 7.800781 12 10 12 Z M 22 12 C 24.199219 12 26.230469 12.691406 27 12.96875 L 27 24.09375 C 25.8125 23.703125 24.101563 23.21875 22 23.21875 C 19.941406 23.21875 18.113281 23.726563 17 24.09375 L 17 12.96875 C 18 12.625 20.066406 12 22 12 Z"},child:[]}]})(e)}const qs={createClassroom:async e=>{try{return(await Xn.post("/classrooms",e,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(o){var t,r,n,s,a;throw console.error("Create classroom error:",o),console.error("Error details:",{status:null===(t=o.response)||void 0===t?void 0:t.status,data:null===(r=o.response)||void 0===r?void 0:r.data,message:o.message}),new Error((null===(n=o.response)||void 0===n||null===(s=n.data)||void 0===s?void 0:s.message)||"string"===typeof(null===(a=o.response)||void 0===a?void 0:a.data)&&o.response.data||"Failed to create classroom")}},updateClassroom:async(e,t)=>{try{return(await Xn.put(`/classrooms/${e}`,t,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(i){var r,n,s,a,o;throw console.error("Update classroom error:",i),console.error("Error details:",{status:null===(r=i.response)||void 0===r?void 0:r.status,data:null===(n=i.response)||void 0===n?void 0:n.data,message:i.message}),new Error((null===(s=i.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)||"string"===typeof(null===(o=i.response)||void 0===o?void 0:o.data)&&i.response.data||"Failed to update classroom")}},joinClassroom:async e=>{try{return(await Xn.post("/classrooms/join",{classCode:e})).data}catch(o){var t,r,n,s,a;throw console.error("Join classroom error:",o),console.error("Error details:",{status:null===(t=o.response)||void 0===t?void 0:t.status,data:null===(r=o.response)||void 0===r?void 0:r.data,message:o.message}),new Error((null===(n=o.response)||void 0===n||null===(s=n.data)||void 0===s?void 0:s.message)||"string"===typeof(null===(a=o.response)||void 0===a?void 0:a.data)&&o.response.data||"Failed to join classroom")}},getClassroomById:async e=>{try{return(await Xn.get(`/classrooms/${e}`)).data}catch(s){var t,r,n;throw new Error((null===(t=s.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||"string"===typeof(null===(n=s.response)||void 0===n?void 0:n.data)&&s.response.data||"Failed to fetch classroom")}},getClassroomDetails:async e=>{try{return(await Xn.get(`/classrooms/${e}`)).data}catch(t){throw console.error(`Error fetching classroom details for ${e}:`,t),t}},getClassroomByCode:async e=>{try{return(await Xn.get(`/classrooms/code/${e}`)).data}catch(o){var t,r,n,s,a;throw console.error("Get classroom by code error:",o),console.error("Error details:",{status:null===(t=o.response)||void 0===t?void 0:t.status,data:null===(r=o.response)||void 0===r?void 0:r.data,message:o.message}),new Error((null===(n=o.response)||void 0===n||null===(s=n.data)||void 0===s?void 0:s.message)||"string"===typeof(null===(a=o.response)||void 0===a?void 0:a.data)&&o.response.data||"Failed to fetch classroom")}},getTeacherClassrooms:async()=>{try{localStorage.getItem("token");return(await Xn.get("/classrooms/teacher")).data}catch(n){var e,t,r;throw new Error((null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"string"===typeof(null===(r=n.response)||void 0===r?void 0:r.data)&&n.response.data||"Failed to fetch teacher classrooms")}},getStudentClassrooms:async()=>{try{localStorage.getItem("token");return(await Xn.get("/classrooms/student")).data}catch(n){var e,t,r;throw new Error((null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"string"===typeof(null===(r=n.response)||void 0===r?void 0:r.data)&&n.response.data||"Failed to fetch student classrooms")}},getStudentsInClassroom:async e=>{try{return(await Xn.get(`/classrooms/${e}/students`)).data}catch(s){var t,r,n;throw new Error((null===(t=s.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||"string"===typeof(null===(n=s.response)||void 0===n?void 0:n.data)&&s.response.data||"Failed to fetch classroom students")}},getStudentCountInClassroom:async e=>{try{return(await Xn.get(`/classrooms/${e}/students/count`)).data.count}catch(s){var t,r,n;throw new Error((null===(t=s.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||"string"===typeof(null===(n=s.response)||void 0===n?void 0:n.data)&&s.response.data||"Failed to fetch student count")}},addStudentToClassroom:async(e,t)=>{try{return(await Xn.post(`/classrooms/${e}/students/${t}`)).data}catch(a){var r,n,s;throw new Error((null===(r=a.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.message)||"string"===typeof(null===(s=a.response)||void 0===s?void 0:s.data)&&a.response.data||"Failed to add student to classroom")}},searchStudents:async(e,t)=>{try{return(await Xn.get("/classrooms/students/search",{params:{searchTerm:e,classroomId:t}})).data}catch(a){var r,n,s;throw new Error((null===(r=a.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.message)||"string"===typeof(null===(s=a.response)||void 0===s?void 0:s.data)&&a.response.data||"Failed to search for students")}},leaveClassroom:async e=>{try{return await Xn.post(`/classrooms/${e}/leave`),!0}catch(s){var t,r,n;throw new Error((null===(t=s.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||"string"===typeof(null===(n=s.response)||void 0===n?void 0:n.data)&&s.response.data||"Failed to leave classroom")}},removeStudentFromClassroom:async(e,t)=>{try{return await Xn.delete(`/classrooms/${e}/students/${t}`),!0}catch(a){var r,n,s;throw new Error((null===(r=a.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.message)||"string"===typeof(null===(s=a.response)||void 0===s?void 0:s.data)&&a.response.data||"Failed to remove student from classroom")}},deleteClassroom:async e=>{try{return await Xn.delete(`/classrooms/${e}`),!0}catch(s){var t,r,n;throw new Error((null===(t=s.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||"string"===typeof(null===(n=s.response)||void 0===n?void 0:n.data)&&s.response.data||"Failed to delete classroom")}},getAllClassrooms:async()=>{try{return(await Xn.get("/admin/classrooms")).data}catch(n){var e,t,r;throw new Error((null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"string"===typeof(null===(r=n.response)||void 0===r?void 0:r.data)&&n.response.data||"Failed to fetch all classrooms")}},createClassroomAsAdmin:async e=>{try{return(await Xn.post("/admin/classrooms",e,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(s){var t,r,n;throw new Error((null===(t=s.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||"string"===typeof(null===(n=s.response)||void 0===n?void 0:n.data)&&s.response.data||"Failed to create classroom")}},updateClassroomAsAdmin:async(e,t)=>{try{return(await Xn.put(`/admin/classrooms/${e}`,t)).data}catch(a){var r,n,s;throw new Error((null===(r=a.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.message)||"string"===typeof(null===(s=a.response)||void 0===s?void 0:s.data)&&a.response.data||"Failed to update classroom")}},addStudentToClassroomAsAdmin:async(e,t)=>{try{return(await Xn.post(`/admin/classrooms/${e}/students/${t}`)).data}catch(a){var r,n,s;throw new Error((null===(r=a.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.message)||"string"===typeof(null===(s=a.response)||void 0===s?void 0:s.data)&&a.response.data||"Failed to add student to classroom")}},deleteClassroomById:async e=>{try{return await Xn.delete(`/admin/classrooms/${e}`),!0}catch(s){var t,r,n;throw new Error((null===(t=s.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||"string"===typeof(null===(n=s.response)||void 0===n?void 0:n.data)&&s.response.data||"Failed to delete classroom")}}};function Rs(e){return Es({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4"},child:[]},{tag:"path",attr:{d:"M2 6h4"},child:[]},{tag:"path",attr:{d:"M2 10h4"},child:[]},{tag:"path",attr:{d:"M2 14h4"},child:[]},{tag:"path",attr:{d:"M2 18h4"},child:[]},{tag:"path",attr:{d:"M21.378 5.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z"},child:[]}]})(e)}function Ds(e){return Es({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M1.5 1a.5.5 0 0 0-.5.5v4a.5.5 0 0 1-1 0v-4A1.5 1.5 0 0 1 1.5 0h4a.5.5 0 0 1 0 1zM10 .5a.5.5 0 0 1 .5-.5h4A1.5 1.5 0 0 1 16 1.5v4a.5.5 0 0 1-1 0v-4a.5.5 0 0 0-.5-.5h-4a.5.5 0 0 1-.5-.5M.5 10a.5.5 0 0 1 .5.5v4a.5.5 0 0 0 .5.5h4a.5.5 0 0 1 0 1h-4A1.5 1.5 0 0 1 0 14.5v-4a.5.5 0 0 1 .5-.5m15 0a.5.5 0 0 1 .5.5v4a1.5 1.5 0 0 1-1.5 1.5h-4a.5.5 0 0 1 0-1h4a.5.5 0 0 0 .5-.5v-4a.5.5 0 0 1 .5-.5"},child:[]}]})(e)}function Fs(e){return Es({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M12.5 16a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7m1.679-4.493-1.335 2.226a.75.75 0 0 1-1.174.144l-.774-.773a.5.5 0 0 1 .708-.708l.547.548 1.17-1.951a.5.5 0 1 1 .858.514M11 5a3 3 0 1 1-6 0 3 3 0 0 1 6 0"},child:[]},{tag:"path",attr:{d:"M2 13c0 1 1 1 1 1h5.256A4.5 4.5 0 0 1 8 12.5a4.5 4.5 0 0 1 1.544-3.393Q8.844 9.002 8 9c-5 0-6 3-6 4"},child:[]}]})(e)}function Bs(e){return Es({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M21 11H6.83l3.58-3.59L9 6l-6 6 6 6 1.41-1.41L6.83 13H21z"},child:[]}]})(e)}function $s(e){return Es({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04a.996.996 0 0 0 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"},child:[]}]})(e)}function Us(e){return Es({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19 5v2h-4V5h4M9 5v6H5V5h4m10 8v6h-4v-6h4M9 17v2H5v-2h4M21 3h-8v6h8V3zM11 3H3v10h8V3zm10 8h-8v10h8V11zm-10 4H3v6h8v-6z"},child:[]}]})(e)}function Hs(e){return Es({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H5.17l-.59.59-.58.58V4h16v12zm-9-4h2v2h-2zm0-6h2v4h-2z"},child:[]}]})(e)}function Ws(e){return Es({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M13 4v2.67l-1 1-1-1V4h2m7 7v2h-2.67l-1-1 1-1H20M6.67 11l1 1-1 1H4v-2h2.67M12 16.33l1 1V20h-2v-2.67l1-1M15 2H9v5.5l3 3 3-3V2zm7 7h-5.5l-3 3 3 3H22V9zM7.5 9H2v6h5.5l3-3-3-3zm4.5 4.5-3 3V22h6v-5.5l-3-3z"},child:[]}]})(e)}function Qs(e){return Es({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H8V4h12v12zm-6.49-5.84c.41-.73 1.18-1.16 1.63-1.8.48-.68.21-1.94-1.14-1.94-.88 0-1.32.67-1.5 1.23l-1.37-.57C11.51 5.96 12.52 5 13.99 5c1.23 0 2.08.56 2.51 1.26.37.6.58 1.73.01 2.57-.63.93-1.23 1.21-1.56 1.81-.13.24-.18.4-.18 1.18h-1.52c.01-.41-.06-1.08.26-1.66zm-.56 3.79c0-.59.47-1.04 1.05-1.04.59 0 1.04.45 1.04 1.04 0 .58-.44 1.05-1.04 1.05-.58 0-1.05-.47-1.05-1.05z"},child:[]}]})(e)}function Vs(e){return Es({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M12.971 352h32.394C67.172 454.735 181.944 512 288 512c106.229 0 220.853-57.38 242.635-160h32.394c10.691 0 16.045-12.926 8.485-20.485l-67.029-67.029c-4.686-4.686-12.284-4.686-16.971 0l-67.029 67.029c-7.56 7.56-2.206 20.485 8.485 20.485h35.146c-20.29 54.317-84.963 86.588-144.117 94.015V256h52c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12h-52v-5.47c37.281-13.178 63.995-48.725 64-90.518C384.005 43.772 341.605.738 289.37.01 235.723-.739 192 42.525 192 96c0 41.798 26.716 77.35 64 90.53V192h-52c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h52v190.015c-58.936-7.399-123.82-39.679-144.117-94.015h35.146c10.691 0 16.045-12.926 8.485-20.485l-67.029-67.029c-4.686-4.686-12.284-4.686-16.971 0L4.485 331.515C-3.074 339.074 2.28 352 12.971 352zM288 64c17.645 0 32 14.355 32 32s-14.355 32-32 32-32-14.355-32-32 14.355-32 32-32z"},child:[]}]})(e)}function Gs(e){return Es({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"},child:[]}]})(e)}function Ks(e){return Es({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"},child:[]}]})(e)}function Ys(e){return Es({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M576 240c0-23.63-12.95-44.04-32-55.12V32.01C544 23.26 537.02 0 512 0c-7.12 0-14.19 2.38-19.98 7.02l-85.03 68.03C364.28 109.19 310.66 128 256 128H64c-35.35 0-64 28.65-64 64v96c0 35.35 28.65 64 64 64h33.7c-1.39 10.48-2.18 21.14-2.18 32 0 39.77 9.26 77.35 25.56 110.94 5.19 10.69 16.52 17.06 28.4 17.06h74.28c26.05 0 41.69-29.84 25.9-50.56-16.4-21.52-26.15-48.36-26.15-77.44 0-11.11 1.62-21.79 4.41-32H256c54.66 0 108.28 18.81 150.98 52.95l85.03 68.03a32.023 32.023 0 0 0 19.98 7.02c24.92 0 32-22.78 32-32V295.13C563.05 284.04 576 263.63 576 240zm-96 141.42l-33.05-26.44C392.95 311.78 325.12 288 256 288v-96c69.12 0 136.95-23.78 190.95-66.98L480 98.58v282.84z"},child:[]}]})(e)}function Zs(e){return Es({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M208 352c-2.39 0-4.78.35-7.06 1.09C187.98 357.3 174.35 360 160 360c-14.35 0-27.98-2.7-40.95-6.91-2.28-.74-4.66-1.09-7.05-1.09C49.94 352-.33 402.48 0 464.62.14 490.88 21.73 512 48 512h224c26.27 0 47.86-21.12 48-47.38.33-62.14-49.94-112.62-112-112.62zm-48-32c53.02 0 96-42.98 96-96s-42.98-96-96-96-96 42.98-96 96 42.98 96 96 96zM592 0H208c-26.47 0-48 22.25-48 49.59V96c23.42 0 45.1 6.78 64 17.8V64h352v288h-64v-64H384v64h-76.24c19.1 16.69 33.12 38.73 39.69 64H592c26.47 0 48-22.25 48-49.59V49.59C640 22.25 618.47 0 592 0z"},child:[]}]})(e)}function Js(e){return Es({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16zM464 96H345.94c-21.38 0-32.09 25.85-16.97 40.97l32.4 32.4L288 242.75l-73.37-73.37c-12.5-12.5-32.76-12.5-45.25 0l-68.69 68.69c-6.25 6.25-6.25 16.38 0 22.63l22.62 22.62c6.25 6.25 16.38 6.25 22.63 0L192 237.25l73.37 73.37c12.5 12.5 32.76 12.5 45.25 0l96-96 32.4 32.4c15.12 15.12 40.97 4.41 40.97-16.97V112c.01-8.84-7.15-16-15.99-16z"},child:[]}]})(e)}function Xs(e){return Es({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},child:[]}]})(e)}function ea(e){return Es({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(e)}function ta(e){return Es({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"},child:[]}]})(e)}function ra(e){return Es({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"},child:[]}]})(e)}function na(e){return Es({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M278.9 511.5l-61-17.7c-6.4-1.8-10-8.5-8.2-14.9L346.2 8.7c1.8-6.4 8.5-10 14.9-8.2l61 17.7c6.4 1.8 10 8.5 8.2 14.9L293.8 503.3c-1.9 6.4-8.5 10.1-14.9 8.2zm-114-112.2l43.5-46.4c4.6-4.9 4.3-12.7-.8-17.2L117 256l90.6-79.7c5.1-4.5 5.5-12.3.8-17.2l-43.5-46.4c-4.5-4.8-12.1-5.1-17-.5L3.8 247.2c-5.1 4.7-5.1 12.8 0 17.5l144.1 135.1c4.9 4.6 12.5 4.4 17-.5zm327.2.6l144.1-135.1c5.1-4.7 5.1-12.8 0-17.5L492.1 112.1c-4.8-4.5-12.4-4.3-17 .5L431.6 159c-4.6 4.9-4.3 12.7.8 17.2L523 256l-90.6 79.7c-5.1 4.5-5.5 12.3-.8 17.2l43.5 46.4c4.5 4.9 12.1 5.1 17 .6z"},child:[]}]})(e)}function sa(e){return Es({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"},child:[]}]})(e)}function aa(e){return Es({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M0 405.3V448c0 35.3 86 64 192 64s192-28.7 192-64v-42.7C342.7 434.4 267.2 448 192 448S41.3 434.4 0 405.3zM320 128c106 0 192-28.7 192-64S426 0 320 0 128 28.7 128 64s86 64 192 64zM0 300.4V352c0 35.3 86 64 192 64s192-28.7 192-64v-51.6c-41.3 34-116.9 51.6-192 51.6S41.3 334.4 0 300.4zm416 11c57.3-11.1 96-31.7 96-55.4v-42.7c-23.2 16.4-57.3 27.6-96 34.5v63.6zM192 160C86 160 0 195.8 0 240s86 80 192 80 192-35.8 192-80-86-80-192-80zm219.3 56.3c60-10.8 100.7-32 100.7-56.3v-42.7c-35.5 25.1-96.5 38.6-160.7 41.8 29.5 14.3 51.2 33.5 60 57.2z"},child:[]}]})(e)}function oa(e){return Es({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M416 192c0-88.4-93.1-160-208-160S0 103.6 0 192c0 34.3 14.1 65.9 38 92-13.4 30.2-35.5 54.2-35.8 54.5-2.2 2.3-2.8 5.7-1.5 8.7S4.8 352 8 352c36.6 0 66.9-12.3 88.7-25 32.2 15.7 70.3 25 111.3 25 114.9 0 208-71.6 208-160zm122 220c23.9-26 38-57.7 38-92 0-66.9-53.5-124.2-129.3-148.1.9 6.6 1.3 13.3 1.3 20.1 0 105.9-107.7 192-240 192-10.8 0-21.3-.8-31.7-1.9C207.8 439.6 281.8 480 368 480c41 0 79.1-9.2 111.3-25 21.8 12.7 52.1 25 88.7 25 3.2 0 6.1-1.9 7.3-4.8 1.3-2.9.7-6.3-1.5-8.7-.3-.3-22.4-24.2-35.8-54.5z"},child:[]}]})(e)}function ia(e){return Es({tag:"svg",attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M225.38 233.37c-12.5 12.5-12.5 32.76 0 45.25 12.49 12.5 32.76 12.5 45.25 0 12.5-12.5 12.5-32.76 0-45.25-12.5-12.49-32.76-12.49-45.25 0zM248 8C111.03 8 0 119.03 0 256s111.03 248 248 248 248-111.03 248-248S384.97 8 248 8zm126.14 148.05L308.17 300.4a31.938 31.938 0 0 1-15.77 15.77l-144.34 65.97c-16.65 7.61-33.81-9.55-26.2-26.2l65.98-144.35a31.938 31.938 0 0 1 15.77-15.77l144.34-65.97c16.65-7.6 33.8 9.55 26.19 26.2z"},child:[]}]})(e)}function la(e){return Es({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M528 448H112c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h416c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm64-320c-26.5 0-48 21.5-48 48 0 7.1 1.6 13.7 4.4 19.8L476 239.2c-15.4 9.2-35.3 4-44.2-11.6L350.3 85C361 76.2 368 63 368 48c0-26.5-21.5-48-48-48s-48 21.5-48 48c0 15 7 28.2 17.7 37l-81.5 142.6c-8.9 15.6-28.9 20.8-44.2 11.6l-72.3-43.4c2.7-6 4.4-12.7 4.4-19.8 0-26.5-21.5-48-48-48S0 149.5 0 176s21.5 48 48 48c2.6 0 5.2-.4 7.7-.8L128 416h384l72.3-192.8c2.5.4 5.1.8 7.7.8 26.5 0 48-21.5 48-48s-21.5-48-48-48z"},child:[]}]})(e)}function ca(e){return Es({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"},child:[]}]})(e)}function da(e){return Es({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(e)}function ua(e){return Es({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(e)}function ha(e){return Es({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M512 0C460.22 3.56 96.44 38.2 71.01 287.61c-3.09 26.66-4.84 53.44-5.99 80.24l178.87-178.69c6.25-6.25 16.4-6.25 22.65 0s6.25 16.38 0 22.63L7.04 471.03c-9.38 9.37-9.38 24.57 0 33.94 9.38 9.37 24.59 9.37 33.98 0l57.13-57.07c42.09-.14 84.15-2.53 125.96-7.36 53.48-5.44 97.02-26.47 132.58-56.54H255.74l146.79-48.88c11.25-14.89 21.37-30.71 30.45-47.12h-81.14l106.54-53.21C500.29 132.86 510.19 26.26 512 0z"},child:[]}]})(e)}function ma(e){return Es({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm-96 144c0 4.42-3.58 8-8 8h-8c-8.84 0-16 7.16-16 16v32c0 8.84 7.16 16 16 16h8c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8h-8c-26.51 0-48-21.49-48-48v-32c0-26.51 21.49-48 48-48h8c4.42 0 8 3.58 8 8v16zm44.27 104H160c-4.42 0-8-3.58-8-8v-16c0-4.42 3.58-8 8-8h12.27c5.95 0 10.41-3.5 10.41-6.62 0-1.3-.75-2.66-2.12-3.84l-21.89-18.77c-8.47-7.22-13.33-17.48-13.33-28.14 0-21.3 19.02-38.62 42.41-38.62H200c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8h-12.27c-5.95 0-10.41 3.5-10.41 6.62 0 1.3.75 2.66 2.12 3.84l21.89 18.77c8.47 7.22 13.33 17.48 13.33 28.14.01 21.29-19 38.62-42.39 38.62zM256 264v20.8c0 20.27 5.7 40.17 16 56.88 10.3-16.7 16-36.61 16-56.88V264c0-4.42 3.58-8 8-8h16c4.42 0 8 3.58 8 8v20.8c0 35.48-12.88 68.89-36.28 94.09-3.02 3.25-7.27 5.11-11.72 5.11s-8.7-1.86-11.72-5.11c-23.4-25.2-36.28-58.61-36.28-94.09V264c0-4.42 3.58-8 8-8h16c4.42 0 8 3.58 8 8zm121-159L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128v-6.1c0-6.3-2.5-12.4-7-16.9z"},child:[]}]})(e)}function fa(e){return Es({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm60.1 106.5L224 336l60.1 93.5c5.1 8-.6 18.5-10.1 18.5h-34.9c-4.4 0-8.5-2.4-10.6-6.3C208.9 405.5 192 373 192 373c-6.4 14.8-10 20-36.6 68.8-2.1 3.9-6.1 6.3-10.5 6.3H110c-9.5 0-15.2-10.5-10.1-18.5l60.3-93.5-60.3-93.5c-5.2-8 .6-18.5 10.1-18.5h34.8c4.4 0 8.5 2.4 10.6 6.3 26.1 48.8 20 33.6 36.6 68.5 0 0 6.1-11.7 36.6-68.5 2.1-3.9 6.2-6.3 10.6-6.3H274c9.5-.1 15.2 10.4 10.1 18.4zM384 121.9v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"},child:[]}]})(e)}function pa(e){return Es({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"},child:[]}]})(e)}function ga(e){return Es({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"},child:[]}]})(e)}function xa(e){return Es({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"},child:[]}]})(e)}function ba(e){return Es({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M288 0c-69.59 0-126 56.41-126 126 0 56.26 82.35 158.8 113.9 196.02 6.39 7.54 17.82 7.54 24.2 0C331.65 284.8 414 182.26 414 126 414 56.41 357.59 0 288 0zm0 168c-23.2 0-42-18.8-42-42s18.8-42 42-42 42 18.8 42 42-18.8 42-42 42zM20.12 215.95A32.006 32.006 0 0 0 0 245.66v250.32c0 11.32 11.43 19.06 21.94 14.86L160 448V214.92c-8.84-15.98-16.07-31.54-21.25-46.42L20.12 215.95zM288 359.67c-14.07 0-27.38-6.18-36.51-16.96-19.66-23.2-40.57-49.62-59.49-76.72v182l192 64V266c-18.92 27.09-39.82 53.52-59.49 76.72-9.13 10.77-22.44 16.95-36.51 16.95zm266.06-198.51L416 224v288l139.88-55.95A31.996 31.996 0 0 0 576 426.34V176.02c0-11.32-11.43-19.06-21.94-14.86z"},child:[]}]})(e)}function ya(e){return Es({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M0 117.66v346.32c0 11.32 11.43 19.06 21.94 14.86L160 416V32L20.12 87.95A32.006 32.006 0 0 0 0 117.66zM192 416l192 64V96L192 32v384zM554.06 33.16L416 96v384l139.88-55.95A31.996 31.996 0 0 0 576 394.34V48.02c0-11.32-11.43-19.06-21.94-14.86z"},child:[]}]})(e)}function va(e){return Es({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M223.75 130.75L154.62 15.54A31.997 31.997 0 0 0 127.18 0H16.03C3.08 0-4.5 14.57 2.92 25.18l111.27 158.96c29.72-27.77 67.52-46.83 109.56-53.39zM495.97 0H384.82c-11.24 0-21.66 5.9-27.44 15.54l-69.13 115.21c42.04 6.56 79.84 25.62 109.56 53.38L509.08 25.18C516.5 14.57 508.92 0 495.97 0zM256 160c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm92.52 157.26l-37.93 36.96 8.97 52.22c1.6 9.36-8.26 16.51-16.65 12.09L256 393.88l-46.9 24.65c-8.4 4.45-18.25-2.74-16.65-12.09l8.97-52.22-37.93-36.96c-6.82-6.64-3.05-18.23 6.35-19.59l52.43-7.64 23.43-47.52c2.11-4.28 6.19-6.39 10.28-6.39 4.11 0 8.22 2.14 10.33 6.39l23.43 47.52 52.43 7.64c9.4 1.36 13.17 12.95 6.35 19.59z"},child:[]}]})(e)}function wa(e){return Es({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"},child:[]}]})(e)}function ja(e){return Es({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M144 479H48c-26.5 0-48-21.5-48-48V79c0-26.5 21.5-48 48-48h96c26.5 0 48 21.5 48 48v352c0 26.5-21.5 48-48 48zm304-48V79c0-26.5-21.5-48-48-48h-96c-26.5 0-48 21.5-48 48v352c0 26.5 21.5 48 48 48h96c26.5 0 48-21.5 48-48z"},child:[]}]})(e)}function Na(e){return Es({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"},child:[]}]})(e)}function ka(e){return Es({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(e)}function Sa(e){return Es({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122 17.864-22.658 30.113-35.797 57.303-35.797 20.429 0 45.698 13.148 45.698 32.958 0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667 0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46 0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z"},child:[]}]})(e)}function Ca(e){return Es({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M500.33 0h-47.41a12 12 0 0 0-12 12.57l4 82.76A247.42 247.42 0 0 0 256 8C119.34 8 7.9 119.53 8 256.19 8.1 393.07 119.1 504 256 504a247.1 247.1 0 0 0 166.18-63.91 12 12 0 0 0 .48-17.43l-34-34a12 12 0 0 0-16.38-.55A176 176 0 1 1 402.1 157.8l-101.53-4.87a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12h200.33a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12z"},child:[]}]})(e)}function _a(e){return Es({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"},child:[]}]})(e)}function Ea(e){return Es({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M48 0C21.53 0 0 21.53 0 48v64c0 8.84 7.16 16 16 16h80V48C96 21.53 74.47 0 48 0zm208 412.57V352h288V96c0-52.94-43.06-96-96-96H111.59C121.74 13.41 128 29.92 128 48v368c0 38.87 34.65 69.65 74.75 63.12C234.22 474 256 444.46 256 412.57zM288 384v32c0 52.93-43.06 96-96 96h336c61.86 0 112-50.14 112-112 0-8.84-7.16-16-16-16H288z"},child:[]}]})(e)}function Aa(e){return Es({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M496.616 372.639l70.012-70.012c16.899-16.9 9.942-45.771-12.836-53.092L512 236.102V96c0-17.673-14.327-32-32-32h-64V24c0-13.255-10.745-24-24-24H248c-13.255 0-24 10.745-24 24v40h-64c-17.673 0-32 14.327-32 32v140.102l-41.792 13.433c-22.753 7.313-29.754 36.173-12.836 53.092l70.012 70.012C125.828 416.287 85.587 448 24 448c-13.255 0-24 10.745-24 24v16c0 13.255 10.745 24 24 24 61.023 0 107.499-20.61 143.258-59.396C181.677 487.432 216.021 512 256 512h128c39.979 0 74.323-24.568 88.742-59.396C508.495 491.384 554.968 512 616 512c13.255 0 24-10.745 24-24v-16c0-13.255-10.745-24-24-24-60.817 0-101.542-31.001-119.384-75.361zM192 128h256v87.531l-118.208-37.995a31.995 31.995 0 0 0-19.584 0L192 215.531V128z"},child:[]}]})(e)}function Oa(e){return Es({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M439.15 453.06L297.17 384l141.99-69.06c7.9-3.95 11.11-13.56 7.15-21.46L432 264.85c-3.95-7.9-13.56-11.11-21.47-7.16L224 348.41 37.47 257.69c-7.9-3.95-17.51-.75-21.47 7.16L1.69 293.48c-3.95 7.9-.75 17.51 7.15 21.46L150.83 384 8.85 453.06c-7.9 3.95-11.11 13.56-7.15 21.47l14.31 28.63c3.95 7.9 13.56 11.11 21.47 7.15L224 419.59l186.53 90.72c7.9 3.95 17.51.75 21.47-7.15l14.31-28.63c3.95-7.91.74-17.52-7.16-21.47zM150 237.28l-5.48 25.87c-2.67 12.62 5.42 24.85 16.45 24.85h126.08c11.03 0 19.12-12.23 16.45-24.85l-5.5-25.87c41.78-22.41 70-62.75 70-109.28C368 57.31 303.53 0 224 0S80 57.31 80 128c0 46.53 28.22 86.87 70 109.28zM280 112c17.65 0 32 14.35 32 32s-14.35 32-32 32-32-14.35-32-32 14.35-32 32-32zm-112 0c17.65 0 32 14.35 32 32s-14.35 32-32 32-32-14.35-32-32 14.35-32 32-32z"},child:[]}]})(e)}function Ta(e){return Es({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"},child:[]}]})(e)}function za(e){return Es({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"},child:[]}]})(e)}function Pa(e){return Es({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"},child:[]}]})(e)}function Ia(e){return Es({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M464 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V80c0-26.51-21.49-48-48-48zM224 416H64v-96h160v96zm0-160H64v-96h160v96zm224 160H288v-96h160v96zm0-160H288v-96h160v96z"},child:[]}]})(e)}function La(e){return Es({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(e)}function Ma(e){return Es({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(e)}function qa(e){return Es({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M552 64H448V24c0-13.3-10.7-24-24-24H152c-13.3 0-24 10.7-24 24v40H24C10.7 64 0 74.7 0 88v56c0 35.7 22.5 72.4 61.9 100.7 31.5 22.7 69.8 37.1 110 41.7C203.3 338.5 240 360 240 360v72h-48c-35.3 0-64 20.7-64 56v12c0 6.6 5.4 12 12 12h296c6.6 0 12-5.4 12-12v-12c0-35.3-28.7-56-64-56h-48v-72s36.7-21.5 68.1-73.6c40.3-4.6 78.6-19 110-41.7 39.3-28.3 61.9-65 61.9-100.7V88c0-13.3-10.7-24-24-24zM99.3 192.8C74.9 175.2 64 155.6 64 144v-16h64.2c1 32.6 5.8 61.2 12.8 86.2-15.1-5.2-29.2-12.4-41.7-21.4zM512 144c0 16.1-17.7 36.1-35.3 48.8-12.5 9-26.7 16.2-41.8 21.4 7-25 11.8-53.6 12.8-86.2H512v16z"},child:[]}]})(e)}function Ra(e){return Es({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(e)}function Da(e){return Es({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(e)}function Fa(e){return Es({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M215.03 71.05L126.06 160H24c-13.26 0-24 10.74-24 24v144c0 13.25 10.74 24 24 24h102.06l88.97 88.95c15.03 15.03 40.97 4.47 40.97-16.97V88.02c0-21.46-25.96-31.98-40.97-16.97zM461.64 256l45.64-45.64c6.3-6.3 6.3-16.52 0-22.82l-22.82-22.82c-6.3-6.3-16.52-6.3-22.82 0L416 210.36l-45.64-45.64c-6.3-6.3-16.52-6.3-22.82 0l-22.82 22.82c-6.3 6.3-6.3 16.52 0 22.82L370.36 256l-45.63 45.63c-6.3 6.3-6.3 16.52 0 22.82l22.82 22.82c6.3 6.3 16.52 6.3 22.82 0L416 301.64l45.64 45.64c6.3 6.3 16.52 6.3 22.82 0l22.82-22.82c6.3-6.3 6.3-16.52 0-22.82L461.64 256z"},child:[]}]})(e)}function Ba(e){return Es({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M215.03 71.05L126.06 160H24c-13.26 0-24 10.74-24 24v144c0 13.25 10.74 24 24 24h102.06l88.97 88.95c15.03 15.03 40.97 4.47 40.97-16.97V88.02c0-21.46-25.96-31.98-40.97-16.97zm233.32-51.08c-11.17-7.33-26.18-4.24-33.51 6.95-7.34 11.17-4.22 26.18 6.95 33.51 66.27 43.49 105.82 116.6 105.82 195.58 0 78.98-39.55 152.09-105.82 195.58-11.17 7.32-14.29 22.34-6.95 33.5 7.04 10.71 21.93 14.56 33.51 6.95C528.27 439.58 576 351.33 576 256S528.27 72.43 448.35 19.97zM480 256c0-63.53-32.06-121.94-85.77-156.24-11.19-7.14-26.03-3.82-33.12 7.46s-3.78 26.21 7.41 33.36C408.27 165.97 432 209.11 432 256s-23.73 90.03-63.48 115.42c-11.19 7.14-14.5 22.07-7.41 33.36 6.51 10.36 21.12 15.14 33.12 7.46C447.94 377.94 480 319.54 480 256zm-141.77-76.87c-11.58-6.33-26.19-2.16-32.61 9.45-6.39 11.61-2.16 26.2 9.45 32.61C327.98 228.28 336 241.63 336 256c0 14.38-8.02 27.72-20.92 34.81-11.61 6.41-15.84 21-9.45 32.61 6.43 11.66 21.05 15.8 32.61 9.45 28.23-15.55 45.77-45 45.77-76.88s-17.54-61.32-45.78-76.86z"},child:[]}]})(e)}function $a(e){return Es({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M562.1 383.9c-21.5-2.4-42.1-10.5-57.9-22.9-14.1-11.1-34.2-11.3-48.2 0-37.9 30.4-107.2 30.4-145.7-1.5-13.5-11.2-33-9.1-46.7 1.8-38 30.1-106.9 30-145.2-1.7-13.5-11.2-33.3-8.9-47.1 2-15.5 12.2-36 20.1-57.7 22.4-7.9.8-13.6 7.8-13.6 15.7v32.2c0 9.1 7.6 16.8 16.7 16 28.8-2.5 56.1-11.4 79.4-25.9 56.5 34.6 137 34.1 192 0 56.5 34.6 137 34.1 192 0 23.3 14.2 50.9 23.3 79.1 25.8 9.1.8 16.7-6.9 16.7-16v-31.6c.1-8-5.7-15.4-13.8-16.3zm0-144c-21.5-2.4-42.1-10.5-57.9-22.9-14.1-11.1-34.2-11.3-48.2 0-37.9 30.4-107.2 30.4-145.7-1.5-13.5-11.2-33-9.1-46.7 1.8-38 30.1-106.9 30-145.2-1.7-13.5-11.2-33.3-8.9-47.1 2-15.5 12.2-36 20.1-57.7 22.4-7.9.8-13.6 7.8-13.6 15.7v32.2c0 9.1 7.6 16.8 16.7 16 28.8-2.5 56.1-11.4 79.4-25.9 56.5 34.6 137 34.1 192 0 56.5 34.6 137 34.1 192 0 23.3 14.2 50.9 23.3 79.1 25.8 9.1.8 16.7-6.9 16.7-16v-31.6c.1-8-5.7-15.4-13.8-16.3zm0-144C540.6 93.4 520 85.4 504.2 73 490.1 61.9 470 61.7 456 73c-37.9 30.4-107.2 30.4-145.7-1.5-13.5-11.2-33-9.1-46.7 1.8-38 30.1-106.9 30-145.2-1.7-13.5-11.2-33.3-8.9-47.1 2-15.5 12.2-36 20.1-57.7 22.4-7.9.8-13.6 7.8-13.6 15.7v32.2c0 9.1 7.6 16.8 16.7 16 28.8-2.5 56.1-11.4 79.4-25.9 56.5 34.6 137 34.1 192 0 56.5 34.6 137 34.1 192 0 23.3 14.2 50.9 23.3 79.1 25.8 9.1.8 16.7-6.9 16.7-16v-31.6c.1-8-5.7-15.4-13.8-16.3z"},child:[]}]})(e)}function Ua(e){return Es({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5 0-200-89.5-200-200S145.5 56 256 56s200 89.5 200 200-89.5 200-200 200z"},child:[]}]})(e)}function Ha(e){return Es({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M634 471L36 3.51A16 16 0 0 0 13.51 6l-10 12.49A16 16 0 0 0 6 41l598 467.49a16 16 0 0 0 22.49-2.49l10-12.49A16 16 0 0 0 634 471zM296.79 146.47l134.79 105.38C429.36 191.91 380.48 144 320 144a112.26 112.26 0 0 0-23.21 2.47zm46.42 219.07L208.42 260.16C210.65 320.09 259.53 368 320 368a113 113 0 0 0 23.21-2.46zM320 112c98.65 0 189.09 55 237.93 144a285.53 285.53 0 0 1-44 60.2l37.74 29.5a333.7 333.7 0 0 0 52.9-75.11 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64c-36.7 0-71.71 7-104.63 18.81l46.41 36.29c18.94-4.3 38.34-7.1 58.22-7.1zm0 288c-98.65 0-189.08-55-237.93-144a285.47 285.47 0 0 1 44.05-60.19l-37.74-29.5a333.6 333.6 0 0 0-52.89 75.1 32.35 32.35 0 0 0 0 29.19C89.72 376.41 197.08 448 320 448c36.7 0 71.71-7.05 104.63-18.81l-46.41-36.28C359.28 397.2 339.89 400 320 400z"},child:[]}]})(e)}function Wa(e){return Es({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M288 144a110.94 110.94 0 0 0-31.24 5 55.4 55.4 0 0 1 7.24 27 56 56 0 0 1-56 56 55.4 55.4 0 0 1-27-7.24A111.71 111.71 0 1 0 288 144zm284.52 97.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400c-98.65 0-189.09-55-237.93-144C98.91 167 189.34 112 288 112s189.09 55 237.93 144C477.1 345 386.66 400 288 400z"},child:[]}]})(e)}function Qa(e){return Es({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"},child:[]}]})(e)}function Va(e){return Es({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h6a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"},child:[]}]})(e)}function Ga(e){return Es({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"},child:[]}]})(e)}function Ka(e){return Es({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"},child:[]}]})(e)}function Ya(e){return Es({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M8 9a3 3 0 100-6 3 3 0 000 6zM8 11a6 6 0 016 6H2a6 6 0 016-6zM16 7a1 1 0 10-2 0v1h-1a1 1 0 100 2h1v1a1 1 0 102 0v-1h1a1 1 0 100-2h-1V7z"},child:[]}]})(e)}const Za=(0,n.createContext)(),Ja=e=>{let{children:t}=e;const[r,s]=(0,n.useState)(!0);return(0,as.jsx)(Za.Provider,{value:{sidebarOpen:r,setSidebarOpen:s},children:t})},Xa=()=>(0,n.useContext)(Za);function eo(e){return Es({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",strokeWidth:"2",d:"M11,15 C14,15 19,19 19,19 L19,3 C19,3 14,7 11,7 C11,7 11,15 11,15 Z M5,15 L8,23 L12,23 L9,15 M19,14 C20.657,14 22,12.657 22,11 C22,9.343 20.657,8 19,8 M11,19 C11.9999997,18.9999994 14,18 14,16 M2,11 C2,7.88888889 3.7912,7 6,7 L11,7 L11,15 L6,15 C3.7912,15 2,14.1111111 2,11 Z"},child:[]}]})(e)}const to="text-3xl",ro=()=>{const e=Z(),t=X(),[r,s]=(0,n.useState)(""),[a,o]=(0,n.useState)(!1),[i,l]=(0,n.useState)([]),[c,d]=(0,n.useState)(!1),{currentUser:u,logout:h,isAdmin:m,isTeacher:f,isStudent:p}=is(),{sidebarOpen:g,setSidebarOpen:x}=Xa(),{darkMode:b,setDarkMode:y,isInitialized:v}=ds();(0,n.useEffect)((()=>{const e=()=>{const e=window.innerWidth<768;d(e)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]);const w=async()=>{try{const e=await Ls.getProfileImage();return!!e&&(s(e),!0)}catch(e){return!1}};(0,n.useEffect)((()=>{if(u){if(u.profileImage){const e=((e,t)=>{if(!e)return"";let r="image/jpeg";return t&&(t.endsWith(".png")?r="image/png":t.endsWith(".gif")?r="image/gif":t.endsWith(".webp")&&(r="image/webp")),`data:${r};base64,${e}`})(u.profileImage,u.profileImageName);s(e)}else w();(async()=>{try{let e;f()?e=await qs.getTeacherClassrooms():p()&&(e=await qs.getStudentClassrooms()),l(e||[])}catch(e){l([])}})()}}),[u,f,p]);const j=()=>{o(!0)},N=()=>{o(!1),w()},k=t=>{if(e.pathname===t||e.pathname.startsWith(`${t}/`))return!0;const r=P.find((e=>e.path===t));return!(!r||!r.subLinks)&&r.subLinks.some((t=>e.pathname===t.path||e.pathname.startsWith(`${t.path}/`)))},S=()=>{h(),t("/login")},C=()=>{x(!g)},_=()=>{c&&x(!1)};if(!u)return(0,as.jsxs)(as.Fragment,{children:[c&&(0,as.jsx)("nav",{className:"fixed top-0 left-0 right-0 z-30 border-b md:hidden shadow-lg transition-colors duration-300 "+(b?"bg-[#0b1022] border-yellow-700/40":"bg-[#f5ecd2] border-yellow-300"),children:(0,as.jsxs)("div",{className:"flex items-center justify-between px-4 py-3",children:[(0,as.jsx)(Te,{to:"/",className:"flex items-center",children:(0,as.jsx)("img",{src:"/images/new-logo.png",alt:"MathQuest Logo",className:"h-10 w-10 object-contain"})}),(0,as.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,as.jsx)(bs,{asChild:!0,variant:"outlineWhite",size:"sm",className:"!rounded-md text-xs px-3 py-1",children:(0,as.jsx)(Te,{to:"/login",children:"Login"})}),(0,as.jsx)(bs,{asChild:!0,variant:"default",size:"sm",className:"!rounded-md text-xs px-3 py-1",children:(0,as.jsx)(Te,{to:"/register",children:"Sign Up"})})]})]})}),(0,as.jsx)("nav",{className:"py-5 absolute w-full z-10 md:block hidden transition-colors duration-300 "+(b?"bg-[#0b1022]/90 backdrop-blur-sm":"bg-[#f5ecd2]/90 backdrop-blur-sm"),children:(0,as.jsx)("div",{className:"max-w-[1280px] container mx-auto px-4",children:(0,as.jsxs)("div",{className:"flex justify-between items-center h-28 ",children:[(0,as.jsx)("div",{className:"flex space-x-4",children:(0,as.jsx)(Te,{to:"/",className:"flex items-center px-3 py-2 rounded-md transition-colors",children:(0,as.jsx)("img",{src:"images/new-logo.png",alt:"MathQuest Logo",className:"h-[70px] w-[70px] md:h-[135px] md:w-[135px] py-2"})})}),(0,as.jsxs)("div",{className:"flex space-x-4",children:[(0,as.jsx)(bs,{asChild:!0,variant:"outlineWhite",className:" !rounded-md ",size:"sm",children:(0,as.jsx)(Te,{to:"/login",children:"Login"})}),(0,as.jsx)(bs,{asChild:!0,variant:"default",size:"sm",children:(0,as.jsx)(Te,{to:"/register",children:"Sign Up"})})]})]})})})]});const E=[{path:"/student/profile",icon:(0,as.jsx)(Os,{className:"mr-3 text-xl"}),name:"Profile"},{path:"/student/classrooms",icon:(0,as.jsx)(Ts,{className:"mr-3 text-xl"}),name:"Classrooms",subLinks:i.map((e=>({icon:(0,as.jsx)(Rs,{className:"mr-3 text-xl"}),path:`/student/classrooms/${e.id}`,name:e.name})))},{path:"/student/learning-multiplication",icon:(0,as.jsx)(Ws,{className:"mr-3 text-xl"}),name:"Learning Multiplication"}],A=[{path:"/teacher/profile",icon:(0,as.jsx)(Os,{className:"mr-3 text-xl"}),name:"Profile"},{path:"/teacher/classrooms",icon:(0,as.jsx)(Ts,{className:"mr-3 text-xl"}),name:"Classrooms",subLinks:i.map((e=>({icon:(0,as.jsx)(Rs,{className:"mr-3 text-xl"}),path:`/teacher/classrooms/${e.id}`,name:e.name})))}],O=[{path:"/admin/profile",icon:(0,as.jsx)(Os,{className:"mr-3 text-xl"}),name:"Profile"},{path:"/admin/users",icon:(0,as.jsx)(Ts,{className:"mr-3 text-xl"}),name:"User Management",subLinks:[{path:"/admin/users/teachers",icon:(0,as.jsx)(Fs,{className:"mr-3 text-xl"}),name:"Teachers"},{path:"/admin/users/students",icon:(0,as.jsx)(Fs,{className:"mr-3 text-xl"}),name:"Students"}]},{path:"/admin/classrooms",icon:(0,as.jsx)(Ms,{className:"mr-3 text-xl"}),name:"Classrooms"},{path:"/admin/feedback",icon:(0,as.jsx)(Hs,{className:"mr-3 text-xl"}),name:"Feedback Management"},{path:"/admin/announcements",icon:(0,as.jsx)(eo,{className:"mr-3 text-xl"}),name:"System Announcements"}],T={path:m()?"/admin/dashboard":f()?"/teacher/dashboard":"/student/dashboard",icon:(0,as.jsx)(Us,{className:"mr-3 text-xl"}),name:"Dashboard"},z=e=>{const t=e.findIndex((e=>"Profile"===e.name));return-1!==t?[...e.slice(0,t),T,...e.slice(t)]:[T,...e]};let P=[];m()?P=z(O):f()?P=z(A):p()&&(P=z(E));const I=()=>{return(0,as.jsxs)(as.Fragment,{children:[c&&g&&(0,as.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden",onClick:()=>x(!1)}),(0,as.jsxs)("aside",{className:`fixed top-0 left-0 h-full z-50 transition-all duration-300 ease-in-out ${c?"w-80 transform "+(g?"translate-x-0":"-translate-x-full"):""+(g?"w-80":"w-28 px-2")} flex flex-col justify-between shadow-lg ${b?"bg-[#0b1022] text-yellow-200":"bg-[#f5ecd2] text-yellow-800"}`,children:[(0,as.jsxs)("div",{children:[(0,as.jsxs)("div",{className:`flex items-center gap-3 mb-5 ${g?"px-6":"px-0"} pt-6 pb-2 ${g?"":"justify-center"}`,children:[g&&(0,as.jsx)("div",{className:"w-16 h-16 rounded-full flex items-center justify-center "+(b?"bg-yellow-500":"bg-yellow-600"),children:(0,as.jsx)("img",{src:"/images/new-logo.png",alt:"MathQuest Logo",className:"w-16 h-16 object-contain"})}),g&&(0,as.jsx)("span",{className:"font-semibold text-lg tracking-wide "+(b?"text-yellow-200":"text-yellow-800"),children:"MathQuest"}),(0,as.jsx)("button",{className:`flex items-center justify-center ${g?"ml-auto":""} focus:outline-none h-12 w-12 rounded-lg transition-colors duration-150 ${g?"":"mx-auto"} ${b?"text-yellow-200 hover:text-yellow-100":"text-yellow-800 hover:text-yellow-700"}`,style:{minWidth:"48px",minHeight:"48px"},onClick:C,"aria-label":"Toggle Sidebar",children:(0,as.jsx)(Va,{className:to})})]}),(0,as.jsxs)("nav",{className:"flex flex-col gap-1 px-2",children:[P.map((t=>(0,as.jsxs)("div",{children:[(0,as.jsxs)(Te,{to:t.path,onClick:_,className:`flex items-center ${g?"px-6 py-3":"justify-center py-3"} rounded-lg text-sm font-medium transition-colors duration-150 group relative ${k(t.path)?b?"bg-yellow-500 text-[#0b1022]":"bg-yellow-600 text-white":b?"text-yellow-200 hover:bg-[#0f1428]":"text-yellow-800 hover:bg-[#fbf4de]"}`,style:{minHeight:"48px",minWidth:g?void 0:"48px"},children:[(0,as.jsx)("span",{className:`inline-block ${to} ${g?"mr-3":""} flex items-center justify-center w-8 h-8`,children:t.icon}),g&&(0,as.jsx)("span",{children:t.name}),("Home"===t.name||"Dashboard"===t.name||"LeaderBoard"===t.name||"Activity"===t.name)&&(0,as.jsx)("span",{className:"absolute right-4 w-2 h-2 bg-red-500 rounded-full "+(k(t.path)?"top-1/2 -translate-y-1/2":"")})]}),t.subLinks&&g&&(0,as.jsx)("div",{className:"ml-8 mt-1",children:t.subLinks.map((t=>(0,as.jsxs)(Te,{to:t.path,onClick:_,className:"block px-6 py-2 text-sm font-medium rounded-lg transition-colors duration-150 "+(e.pathname===t.path||e.pathname.startsWith(t.path+"/")?b?"text-yellow-200":"text-yellow-800":b?"text-yellow-300 hover:bg-[#0f1428]":"text-yellow-700 hover:bg-[#fbf4de]"),style:{minHeight:"40px"},children:[(0,as.jsx)("span",{className:`inline-block ${to} mr-3 align-middle`,children:t.icon}),t.name]},t.path+t.name)))})]},t.path+t.name))),(p()||f())&&(0,as.jsxs)(Te,{to:p()?"/student/join-classroom":"/teacher/add-classroom",onClick:_,className:`flex items-center ${g?"px-4 py-3":"mr-4 justify-center py-3"} rounded-lg text-sm font-medium transition-colors duration-150 group relative ${p()&&k("/student/join-classroom")||f()&&k("/teacher/add-classroom")?b?"bg-yellow-500 text-[#0b1022]":"bg-yellow-600 text-white":b?"text-yellow-200 hover:bg-[#0f1428]":"text-yellow-800 hover:bg-[#fbf4de]"}`,style:{minHeight:"48px",minWidth:g?void 0:"48px"},children:[(0,as.jsx)("span",{className:`inline-block text-2xl ${g?"mr-3":""} flex items-center justify-center w-8 h-8`,children:(0,as.jsx)(Ps,{})}),g&&(p()?"Join Classroom":"Create Classroom")]}),!m()&&(0,as.jsxs)(Te,{to:f()?"/teacher/help":"/student/help",onClick:_,className:`flex items-center ${g?"px-4 py-3":"mr-4 justify-center py-3"} rounded-lg text-sm font-medium transition-colors duration-150 group relative ${k(f()?"/teacher/help":"/student/help")?b?"bg-yellow-500 text-[#0b1022]":"bg-yellow-600 text-white":b?"text-yellow-200 hover:bg-[#0f1428]":"text-yellow-800 hover:bg-[#fbf4de]"}`,style:{minHeight:"48px",minWidth:g?void 0:"48px"},children:[(0,as.jsx)("span",{className:`inline-block text-2xl ${g?"mr-3":""} flex items-center justify-center w-8 h-8`,children:(0,as.jsx)(Sa,{})}),g&&(0,as.jsx)("span",{children:"Help"})]})]})]}),(0,as.jsxs)("div",{className:"px-3 pb-6 pt-2 "+(g?"":"px-0"),children:[v&&(0,as.jsxs)("div",{className:`flex items-center justify-center mb-4 rounded-lg p-1 ${g?"":"justify-center"} ${b?"bg-[#0f1428]":"bg-[#fbf4de]"}`,children:[(0,as.jsxs)("button",{className:"flex-1 py-2 rounded-lg text-sm font-medium transition-colors duration-150 flex items-center justify-center "+(b?"bg-yellow-500 text-[#0b1022]":"text-yellow-700"),onClick:()=>y(!0),children:[(0,as.jsx)(wa,{className:"mr-2"}),g&&"Dark"]}),(0,as.jsxs)("button",{className:"flex-1 py-2 rounded-lg text-sm font-medium transition-colors duration-150 flex items-center justify-center "+(b?"text-yellow-700":"bg-yellow-500 text-[#0b1022]"),onClick:()=>y(!1),children:[(0,as.jsx)(Pa,{className:"mr-2"}),g&&"Light"]})]}),(0,as.jsxs)("div",{className:`flex items-center ${g?"gap-3 rounded-xl p-3":"justify-center"} relative ${b?"bg-[#0f1428]":"bg-[#fbf4de]"}`,children:[(0,as.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-lg font-semibold overflow-hidden "+(b?"bg-yellow-500 text-[#0b1022]":"bg-yellow-600 text-white"),children:r?(0,as.jsx)("img",{src:r,alt:"Profile",className:"w-full h-full object-cover rounded-full",onLoad:j,onError:N}):(0,as.jsx)("span",{children:(t=u.firstName,n=u.lastName,`${(null===t||void 0===t?void 0:t.charAt(0))||""}${(null===n||void 0===n?void 0:n.charAt(0))||""}`.toUpperCase())})}),g&&(0,as.jsxs)("div",{className:"flex flex-col flex-1",children:[(0,as.jsx)("span",{className:"font-semibold text-sm "+(b?"text-yellow-200":"text-yellow-800"),children:`${u.firstName||""} ${u.lastName||""}`.trim()||u.username}),(0,as.jsx)("span",{className:"text-xs "+(b?"text-yellow-300":"text-yellow-700"),children:m()?"Admin":f()?"Teacher":"Student"})]}),(0,as.jsx)("button",{className:"ml-2 transition-colors duration-150 "+(b?"text-yellow-200 hover:text-red-400":"text-yellow-800 hover:text-red-600"),onClick:S,title:"Logout",children:(0,as.jsx)(zs,{className:"text-2xl"})})]})]})]})]});var t,n};return(0,as.jsxs)(as.Fragment,{children:[c&&(0,as.jsx)("nav",{className:"fixed top-0 left-0 right-0 z-30 border-b md:hidden shadow-lg transition-colors duration-300 "+(b?"bg-[#0b1022] border-yellow-700/40":"bg-[#f5ecd2] border-yellow-300"),children:(0,as.jsxs)("div",{className:"flex items-center justify-between px-4 py-3",children:[(0,as.jsx)(Te,{to:"/",className:"flex items-center",children:(0,as.jsx)("img",{src:"/images/new-logo.png",alt:"MathQuest Logo",className:"h-10 w-10 object-contain"})}),(0,as.jsx)("button",{className:"p-3 rounded-lg transition-colors shadow-md "+(b?"text-yellow-200 hover:text-yellow-100":"text-yellow-800 hover:text-yellow-700"),onClick:()=>x(!0),"aria-label":"Open Menu",children:(0,as.jsx)(Va,{className:"text-xl"})})]})}),(0,as.jsx)(I,{})]})},no=(0,n.memo)(ro),so={getSettings:async()=>{try{return(await Xn.get("/api/admin/settings")).data}catch(e){throw console.error("Failed to fetch settings:",e),e}},getActiveAnnouncements:async e=>{try{const t=await Xn.get(`/api/admin/settings/announcements/active?userRole=${e}`);return t.data.map((e=>{const t={...e};if(e.startDate){const r=new Date(e.startDate);t.startDate=r.toISOString()}if(e.endDate){const r=new Date(e.endDate);t.endDate=r.toISOString()}return t}))}catch(t){throw console.error("Failed to fetch active announcements:",t),t}},getAllAnnouncements:async()=>{try{const e=await Xn.get("/api/admin/settings/announcements");return e.data.map((e=>{const t={...e};if(e.startDate){const r=new Date(e.startDate);t.startDate=r.toISOString()}if(e.endDate){const r=new Date(e.endDate);t.endDate=r.toISOString()}return t}))}catch(e){throw console.error("Failed to fetch all announcements:",e),e}},updateSettings:async e=>{try{return(await Xn.put("/api/admin/settings",e)).data}catch(t){throw console.error("Failed to update settings:",t),t}},updateLogo:async e=>{try{const t=new FormData;t.append("file",e);return(await Xn.post("/api/admin/settings/logo",t,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(n){var t,r;throw new Error((null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||"Failed to update system logo")}},getLogo:async()=>{try{const e=await Xn.get("/api/admin/settings/logo",{responseType:"arraybuffer"}),t=new Blob([e.data],{type:"image/jpeg"});return URL.createObjectURL(t)}catch(e){return console.error("Failed to fetch system logo:",e),null}},addAnnouncement:async e=>{try{const t={message:e.message,startDate:e.startDate?new Date(e.startDate).toISOString():null,endDate:e.endDate?new Date(e.endDate).toISOString():null,visibility:e.visibility,isActive:e.isActive};return(await Xn.post("/api/admin/settings/announcements",t)).data}catch(t){throw console.error("Failed to add announcement:",t),t}},updateAnnouncement:async(e,t)=>{try{const r={message:t.message,startDate:t.startDate?new Date(t.startDate).toISOString():null,endDate:t.endDate?new Date(t.endDate).toISOString():null,visibility:t.visibility,isActive:t.isActive};return(await Xn.put(`/api/admin/settings/announcements/${e}`,r)).data}catch(r){throw console.error("Failed to update announcement:",r),r}},deleteAnnouncement:async e=>{try{return(await Xn.delete(`/api/admin/settings/announcements/${e}`)).data}catch(t){throw console.error("Failed to delete announcement:",t),t}}};function ao(e){return Es({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M405 136.798L375.202 107 256 226.202 136.798 107 107 136.798 226.202 256 107 375.202 136.798 405 256 285.798 375.202 405 405 375.202 285.798 256z"},child:[]}]})(e)}function oo(e){return Es({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"48",d:"M328 112 184 256l144 144"},child:[]}]})(e)}function io(e){return Es({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"48",d:"m184 112 144 144-144 144"},child:[]}]})(e)}function lo(e){return Es({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"m289.94 256 95-95A24 24 0 0 0 351 127l-95 95-95-95a24 24 0 0 0-34 34l95 95-95 95a24 24 0 1 0 34 34l95-95 95 95a24 24 0 0 0 34-34z"},child:[]}]})(e)}const co=e=>{let{onVisibilityChange:t,onClose:r}=e;const{currentUser:s,isAdmin:a,isTeacher:o,isStudent:i}=is(),[l,c]=(0,n.useState)([]),[d,u]=(0,n.useState)(0),[h,m]=(0,n.useState)(!0);(0,n.useEffect)((()=>{if(a&&a())return m(!1),void(t&&t(!1,0));c([]),s?f():(m(!1),t&&t(!1,0))}),[s,a]);const f=async()=>{if(!a||!a())try{let e="STUDENTS";o&&"function"===typeof o&&o()?e="TEACHERS":i&&"function"===typeof i&&i()&&(e="STUDENTS");const r=await so.getActiveAnnouncements(e);r&&r.length>0?(c(r),t&&t(!0,r.length)):t&&t(!1,0),m(!1)}catch(e){console.error("Failed to load announcements:",e),m(!1),t&&t(!1,0)}};if(h||!s||0===l.length||a&&a())return null;const p=l[d];return(0,as.jsxs)("div",{className:"bg-blue-600 text-white dark:bg-blue-800 rounded-lg shadow-md overflow-hidden",children:[(0,as.jsxs)("div",{className:"flex items-center justify-between p-3",children:[(0,as.jsxs)("div",{className:"flex items-center flex-grow",children:[(0,as.jsx)(Ys,{className:"text-white mr-3 flex-shrink-0 text-lg"}),(0,as.jsxs)("div",{className:"flex items-center flex-grow",children:[l.length>1&&(0,as.jsx)("button",{onClick:()=>{u((e=>(e-1+l.length)%l.length))},className:"mr-2 p-1 hover:bg-blue-700 dark:hover:bg-blue-900 rounded-full","aria-label":"Previous announcement",children:(0,as.jsx)(oo,{})}),(0,as.jsx)("div",{className:"text-sm md:text-base font-medium flex-grow",dangerouslySetInnerHTML:{__html:p.message}}),l.length>1&&(0,as.jsx)("button",{onClick:()=>{u((e=>(e+1)%l.length))},className:"ml-2 p-1 hover:bg-blue-700 dark:hover:bg-blue-900 rounded-full","aria-label":"Next announcement",children:(0,as.jsx)(io,{})})]})]}),r&&(0,as.jsx)("button",{onClick:r,className:"p-1 hover:bg-blue-700 dark:hover:bg-blue-900 rounded-full","aria-label":"Close announcements",title:"Hide announcements",children:(0,as.jsx)(ao,{className:"text-lg"})})]}),l.length>1&&(0,as.jsx)("div",{className:"flex justify-center pb-1 space-x-1",children:l.map(((e,t)=>(0,as.jsx)("span",{className:"h-1 w-2 rounded-full "+(t===d?"bg-white":"bg-white/50")},t)))})]})},uo=()=>{const{currentUser:e,isAdmin:t}=is(),{sidebarOpen:r}=Xa(),[s,a]=(0,n.useState)(!1),[o,i]=(0,n.useState)((()=>document.documentElement.classList.contains("dark"))),[l,c]=(0,n.useState)(!1),[d,u]=(0,n.useState)(!0),[h,m]=(0,n.useState)(0);(0,n.useEffect)((()=>{const e=new MutationObserver((()=>{i(document.documentElement.classList.contains("dark"))}));return e.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>e.disconnect()}),[]),(0,n.useEffect)((()=>{const e=()=>{a(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]);let f="w-full",p="";e&&!s&&(r?(f="w-[calc(100%-20rem)]",p="ml-80"):(f="w-[calc(100%-7rem)]",p="ml-28"));(0,n.useEffect)((()=>{!e||t&&t()||(c(!0),m(1))}),[e,t]);return(0,as.jsxs)(as.Fragment,{children:[e&&l&&!d&&!t()&&(0,as.jsx)("div",{className:`fixed   ${e?"top-3 right-16":"top-2 right-2"} z-50`,children:(0,as.jsxs)("button",{onClick:()=>u(!0),className:"bg-blue-600 dark:bg-blue-800 text-white p-3 rounded-full shadow-lg hover:bg-blue-700 dark:hover:bg-blue-900 transition-all","aria-label":"Show announcements",title:"Show announcements",children:[(0,as.jsx)(Ys,{className:"text-white text-md md:text-xl"}),h>0&&(0,as.jsx)("span",{className:"absolute -bottom-1 -right-1 bg-red-500 text-white text-xs rounded-full w-4 h-4 md:w-5 md:h-5 flex items-center justify-center",children:h})]})}),e&&l&&d&&!t()&&(0,as.jsx)("div",{className:`fixed top-0 ${p} ${f} z-40 transition-all duration-300`,children:(0,as.jsx)("div",{className:"px-4 pt-2",children:(0,as.jsx)(co,{onVisibilityChange:(e,t)=>{c(e),void 0!==t&&m(t)},onClose:()=>u(!1)})})}),(0,as.jsx)("main",{className:`${p} ${f} min-h-screen transition-all duration-300 ${s?"pt-36":d&&l?"pt-24":"pt-16"}`,style:o?{backgroundImage:"url('/images/background-img.png')",backgroundSize:"cover",backgroundPosition:"center",backgroundAttachment:"fixed",backgroundRepeat:"no-repeat"}:{backgroundColor:"#f3f4f6"},children:(0,as.jsx)("div",{className:"min-h-screen p-4 sm:p-6 lg:p-8",children:(0,as.jsx)(xe,{})})})]})};class ho extends n.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){Zn.error("Error Boundary caught an error",{error:e.message,stack:e.stack,componentStack:t.componentStack}),this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?(0,as.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:(0,as.jsxs)("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 shadow-lg rounded-lg p-6",children:[(0,as.jsx)("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 dark:bg-red-900 rounded-full mb-4",children:(0,as.jsx)("svg",{className:"w-6 h-6 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,as.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 19.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,as.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white text-center mb-2",children:"Something went wrong"}),(0,as.jsx)("p",{className:"text-gray-600 dark:text-gray-300 text-center mb-4",children:"We're sorry, but something unexpected happened. Please try refreshing the page."}),(0,as.jsxs)("div",{className:"flex space-x-3",children:[(0,as.jsx)("button",{onClick:()=>window.location.reload(),className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition-colors",children:"Refresh Page"}),(0,as.jsx)("button",{onClick:()=>this.setState({hasError:!1,error:null,errorInfo:null}),className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white font-medium py-2 px-4 rounded-md transition-colors",children:"Try Again"})]}),!1]})}):this.props.children}}const mo=ho,fo=gs("",{variants:{variant:{default:"text-black",primary:"text-primary",secondary:"text-secondary",accent:"text-accent"},fontSize:{sm:"text-xs md:text-sm ",base:"text-sm md:text-base",lg:"text-base md:text-lg",xl:"text-lg md:text-xl","2xl":"text-xl md:text-2xl","3xl":"text-2xl md:text-3xl","4xl":"text-3xl md:text-4xl","5xl":"text-4xl md:text-5xl","6xl":"text-5xl md:text-6xl","7xl":"text-6xl md:text-7xl"},weight:{thin:"font-thin",normal:"font-normal",medium:"font-medium",semibold:"font-semibold",bold:"font-bold",extrabold:"font-extrabold"}},defaultVariants:{variant:"default",fontSize:"base",weight:"normal"}}),po=e=>{let{type:t="h2",variant:r,fontSize:n,weight:s,className:a="",children:o,...i}=e;const l=t,c=`${fo({variant:r,fontSize:n,weight:s})} ${a}`.trim();return(0,as.jsx)(l,{className:c,...i,children:o})},go=e=>{const t=vo(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:e=>{const r=e.split("-");return""===r[0]&&1!==r.length&&r.shift(),xo(r,t)||yo(e)},getConflictingClassGroupIds:(e,t)=>{const s=r[e]||[];return t&&n[e]?[...s,...n[e]]:s}}},xo=(e,t)=>{if(0===e.length)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),s=n?xo(e.slice(1),n):void 0;if(s)return s;if(0===t.validators.length)return;const a=e.join("-");return t.validators.find((e=>{let{validator:t}=e;return t(a)}))?.classGroupId},bo=/^\[(.+)\]$/,yo=e=>{if(bo.test(e)){const t=bo.exec(e)[1],r=t?.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},vo=e=>{const{theme:t,classGroups:r}=e,n={nextPart:new Map,validators:[]};for(const s in r)wo(r[s],n,s,t);return n},wo=(e,t,r,n)=>{e.forEach((e=>{if("string"!==typeof e){if("function"===typeof e)return No(e)?void wo(e(n),t,r,n):void t.validators.push({validator:e,classGroupId:r});Object.entries(e).forEach((e=>{let[s,a]=e;wo(a,jo(t,s),r,n)}))}else{(""===e?t:jo(t,e)).classGroupId=r}}))},jo=(e,t)=>{let r=e;return t.split("-").forEach((e=>{r.nextPart.has(e)||r.nextPart.set(e,{nextPart:new Map,validators:[]}),r=r.nextPart.get(e)})),r},No=e=>e.isThemeGetter,ko=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const s=(s,a)=>{r.set(s,a),t++,t>e&&(t=0,n=r,r=new Map)};return{get(e){let t=r.get(e);return void 0!==t?t:void 0!==(t=n.get(e))?(s(e,t),t):void 0},set(e,t){r.has(e)?r.set(e,t):s(e,t)}}},So=e=>{const{prefix:t,experimentalParseClassName:r}=e;let n=e=>{const t=[];let r,n=0,s=0,a=0;for(let l=0;l<e.length;l++){let o=e[l];if(0===n&&0===s){if(":"===o){t.push(e.slice(a,l)),a=l+1;continue}if("/"===o){r=l;continue}}"["===o?n++:"]"===o?n--:"("===o?s++:")"===o&&s--}const o=0===t.length?e:e.substring(a),i=Co(o);return{modifiers:t,hasImportantModifier:i!==o,baseClassName:i,maybePostfixModifierPosition:r&&r>a?r-a:void 0}};if(t){const e=t+":",r=n;n=t=>t.startsWith(e)?r(t.substring(e.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:t,maybePostfixModifierPosition:void 0}}if(r){const e=n;n=t=>r({className:t,parseClassName:e})}return n},Co=e=>e.endsWith("!")?e.substring(0,e.length-1):e.startsWith("!")?e.substring(1):e,_o=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map((e=>[e,!0])));return e=>{if(e.length<=1)return e;const r=[];let n=[];return e.forEach((e=>{"["===e[0]||t[e]?(r.push(...n.sort(),e),n=[]):n.push(e)})),r.push(...n.sort()),r}},Eo=/\s+/;function Ao(){let e,t,r=0,n="";for(;r<arguments.length;)(e=arguments[r++])&&(t=Oo(e))&&(n&&(n+=" "),n+=t);return n}const Oo=e=>{if("string"===typeof e)return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=Oo(e[n]))&&(r&&(r+=" "),r+=t);return r};function To(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];let s,a,o,i=function(t){const n=r.reduce(((e,t)=>t(e)),e());return s=(e=>({cache:ko(e.cacheSize),parseClassName:So(e),sortModifiers:_o(e),...go(e)}))(n),a=s.cache.get,o=s.cache.set,i=l,l(t)};function l(e){const t=a(e);if(t)return t;const r=((e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s,sortModifiers:a}=t,o=[],i=e.trim().split(Eo);let l="";for(let c=i.length-1;c>=0;c-=1){const e=i[c],{isExternal:t,modifiers:d,hasImportantModifier:u,baseClassName:h,maybePostfixModifierPosition:m}=r(e);if(t){l=e+(l.length>0?" "+l:l);continue}let f=!!m,p=n(f?h.substring(0,m):h);if(!p){if(!f){l=e+(l.length>0?" "+l:l);continue}if(p=n(h),!p){l=e+(l.length>0?" "+l:l);continue}f=!1}const g=a(d).join(":"),x=u?g+"!":g,b=x+p;if(o.includes(b))continue;o.push(b);const y=s(p,f);for(let r=0;r<y.length;++r){const e=y[r];o.push(x+e)}l=e+(l.length>0?" "+l:l)}return l})(e,s);return o(e,r),r}return function(){return i(Ao.apply(null,arguments))}}const zo=e=>{const t=t=>t[e]||[];return t.isThemeGetter=!0,t},Po=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Io=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Lo=/^\d+\/\d+$/,Mo=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,qo=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Ro=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Do=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Fo=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Bo=e=>Lo.test(e),$o=e=>!!e&&!Number.isNaN(Number(e)),Uo=e=>!!e&&Number.isInteger(Number(e)),Ho=e=>e.endsWith("%")&&$o(e.slice(0,-1)),Wo=e=>Mo.test(e),Qo=()=>!0,Vo=e=>qo.test(e)&&!Ro.test(e),Go=()=>!1,Ko=e=>Do.test(e),Yo=e=>Fo.test(e),Zo=e=>!Xo(e)&&!ai(e),Jo=e=>hi(e,gi,Go),Xo=e=>Po.test(e),ei=e=>hi(e,xi,Vo),ti=e=>hi(e,bi,$o),ri=e=>hi(e,fi,Go),ni=e=>hi(e,pi,Yo),si=e=>hi(e,vi,Ko),ai=e=>Io.test(e),oi=e=>mi(e,xi),ii=e=>mi(e,yi),li=e=>mi(e,fi),ci=e=>mi(e,gi),di=e=>mi(e,pi),ui=e=>mi(e,vi,!0),hi=(e,t,r)=>{const n=Po.exec(e);return!!n&&(n[1]?t(n[1]):r(n[2]))},mi=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=Io.exec(e);return!!n&&(n[1]?t(n[1]):r)},fi=e=>"position"===e||"percentage"===e,pi=e=>"image"===e||"url"===e,gi=e=>"length"===e||"size"===e||"bg-size"===e,xi=e=>"length"===e,bi=e=>"number"===e,yi=e=>"family-name"===e,vi=e=>"shadow"===e,wi=(Symbol.toStringTag,()=>{const e=zo("color"),t=zo("font"),r=zo("text"),n=zo("font-weight"),s=zo("tracking"),a=zo("leading"),o=zo("breakpoint"),i=zo("container"),l=zo("spacing"),c=zo("radius"),d=zo("shadow"),u=zo("inset-shadow"),h=zo("text-shadow"),m=zo("drop-shadow"),f=zo("blur"),p=zo("perspective"),g=zo("aspect"),x=zo("ease"),b=zo("animate"),y=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom",ai,Xo],v=()=>[ai,Xo,l],w=()=>[Bo,"full","auto",...v()],j=()=>[Uo,"none","subgrid",ai,Xo],N=()=>["auto",{span:["full",Uo,ai,Xo]},Uo,ai,Xo],k=()=>[Uo,"auto",ai,Xo],S=()=>["auto","min","max","fr",ai,Xo],C=()=>["auto",...v()],_=()=>[Bo,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...v()],E=()=>[e,ai,Xo],A=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom",li,ri,{position:[ai,Xo]}],O=()=>["auto","cover","contain",ci,Jo,{size:[ai,Xo]}],T=()=>[Ho,oi,ei],z=()=>["","none","full",c,ai,Xo],P=()=>["",$o,oi,ei],I=()=>[$o,Ho,li,ri],L=()=>["","none",f,ai,Xo],M=()=>["none",$o,ai,Xo],q=()=>["none",$o,ai,Xo],R=()=>[$o,ai,Xo],D=()=>[Bo,"full",...v()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Wo],breakpoint:[Wo],color:[Qo],container:[Wo],"drop-shadow":[Wo],ease:["in","out","in-out"],font:[Zo],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Wo],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Wo],shadow:[Wo],spacing:["px",$o],text:[Wo],"text-shadow":[Wo],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Bo,Xo,ai,g]}],container:["container"],columns:[{columns:[$o,Xo,ai,i]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:y()}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:w()}],"inset-x":[{"inset-x":w()}],"inset-y":[{"inset-y":w()}],start:[{start:w()}],end:[{end:w()}],top:[{top:w()}],right:[{right:w()}],bottom:[{bottom:w()}],left:[{left:w()}],visibility:["visible","invisible","collapse"],z:[{z:[Uo,"auto",ai,Xo]}],basis:[{basis:[Bo,"full","auto",i,...v()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[$o,Bo,"auto","initial","none",Xo]}],grow:[{grow:["",$o,ai,Xo]}],shrink:[{shrink:["",$o,ai,Xo]}],order:[{order:[Uo,"first","last","none",ai,Xo]}],"grid-cols":[{"grid-cols":j()}],"col-start-end":[{col:N()}],"col-start":[{"col-start":k()}],"col-end":[{"col-end":k()}],"grid-rows":[{"grid-rows":j()}],"row-start-end":[{row:N()}],"row-start":[{"row-start":k()}],"row-end":[{"row-end":k()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":S()}],"auto-rows":[{"auto-rows":S()}],gap:[{gap:v()}],"gap-x":[{"gap-x":v()}],"gap-y":[{"gap-y":v()}],"justify-content":[{justify:["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe","normal"]}],"justify-items":[{"justify-items":["start","end","center","stretch","center-safe","end-safe","normal"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch","center-safe","end-safe"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"align-items":[{items:["start","end","center","stretch","center-safe","end-safe",{baseline:["","last"]}]}],"align-self":[{self:["auto","start","end","center","stretch","center-safe","end-safe",{baseline:["","last"]}]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"place-items":[{"place-items":["start","end","center","stretch","center-safe","end-safe","baseline"]}],"place-self":[{"place-self":["auto","start","end","center","stretch","center-safe","end-safe"]}],p:[{p:v()}],px:[{px:v()}],py:[{py:v()}],ps:[{ps:v()}],pe:[{pe:v()}],pt:[{pt:v()}],pr:[{pr:v()}],pb:[{pb:v()}],pl:[{pl:v()}],m:[{m:C()}],mx:[{mx:C()}],my:[{my:C()}],ms:[{ms:C()}],me:[{me:C()}],mt:[{mt:C()}],mr:[{mr:C()}],mb:[{mb:C()}],ml:[{ml:C()}],"space-x":[{"space-x":v()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":v()}],"space-y-reverse":["space-y-reverse"],size:[{size:_()}],w:[{w:[i,"screen",..._()]}],"min-w":[{"min-w":[i,"screen","none",..._()]}],"max-w":[{"max-w":[i,"screen","none","prose",{screen:[o]},..._()]}],h:[{h:["screen",..._()]}],"min-h":[{"min-h":["screen","none",..._()]}],"max-h":[{"max-h":["screen",..._()]}],"font-size":[{text:["base",r,oi,ei]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,ai,ti]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Ho,Xo]}],"font-family":[{font:[ii,Xo,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,ai,Xo]}],"line-clamp":[{"line-clamp":[$o,"none",ai,ti]}],leading:[{leading:[a,...v()]}],"list-image":[{"list-image":["none",ai,Xo]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ai,Xo]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:E()}],"text-color":[{text:E()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","wavy"]}],"text-decoration-thickness":[{decoration:[$o,"from-font","auto",ai,ei]}],"text-decoration-color":[{decoration:E()}],"underline-offset":[{"underline-offset":[$o,"auto",ai,Xo]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:v()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ai,Xo]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ai,Xo]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:A()}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","space","round"]}]}],"bg-size":[{bg:O()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Uo,ai,Xo],radial:["",ai,Xo],conic:[Uo,ai,Xo]},di,ni]}],"bg-color":[{bg:E()}],"gradient-from-pos":[{from:T()}],"gradient-via-pos":[{via:T()}],"gradient-to-pos":[{to:T()}],"gradient-from":[{from:E()}],"gradient-via":[{via:E()}],"gradient-to":[{to:E()}],rounded:[{rounded:z()}],"rounded-s":[{"rounded-s":z()}],"rounded-e":[{"rounded-e":z()}],"rounded-t":[{"rounded-t":z()}],"rounded-r":[{"rounded-r":z()}],"rounded-b":[{"rounded-b":z()}],"rounded-l":[{"rounded-l":z()}],"rounded-ss":[{"rounded-ss":z()}],"rounded-se":[{"rounded-se":z()}],"rounded-ee":[{"rounded-ee":z()}],"rounded-es":[{"rounded-es":z()}],"rounded-tl":[{"rounded-tl":z()}],"rounded-tr":[{"rounded-tr":z()}],"rounded-br":[{"rounded-br":z()}],"rounded-bl":[{"rounded-bl":z()}],"border-w":[{border:P()}],"border-w-x":[{"border-x":P()}],"border-w-y":[{"border-y":P()}],"border-w-s":[{"border-s":P()}],"border-w-e":[{"border-e":P()}],"border-w-t":[{"border-t":P()}],"border-w-r":[{"border-r":P()}],"border-w-b":[{"border-b":P()}],"border-w-l":[{"border-l":P()}],"divide-x":[{"divide-x":P()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":P()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:["solid","dashed","dotted","double","hidden","none"]}],"divide-style":[{divide:["solid","dashed","dotted","double","hidden","none"]}],"border-color":[{border:E()}],"border-color-x":[{"border-x":E()}],"border-color-y":[{"border-y":E()}],"border-color-s":[{"border-s":E()}],"border-color-e":[{"border-e":E()}],"border-color-t":[{"border-t":E()}],"border-color-r":[{"border-r":E()}],"border-color-b":[{"border-b":E()}],"border-color-l":[{"border-l":E()}],"divide-color":[{divide:E()}],"outline-style":[{outline:["solid","dashed","dotted","double","none","hidden"]}],"outline-offset":[{"outline-offset":[$o,ai,Xo]}],"outline-w":[{outline:["",$o,oi,ei]}],"outline-color":[{outline:E()}],shadow:[{shadow:["","none",d,ui,si]}],"shadow-color":[{shadow:E()}],"inset-shadow":[{"inset-shadow":["none",u,ui,si]}],"inset-shadow-color":[{"inset-shadow":E()}],"ring-w":[{ring:P()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:E()}],"ring-offset-w":[{"ring-offset":[$o,ei]}],"ring-offset-color":[{"ring-offset":E()}],"inset-ring-w":[{"inset-ring":P()}],"inset-ring-color":[{"inset-ring":E()}],"text-shadow":[{"text-shadow":["none",h,ui,si]}],"text-shadow-color":[{"text-shadow":E()}],opacity:[{opacity:[$o,ai,Xo]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[$o]}],"mask-image-linear-from-pos":[{"mask-linear-from":I()}],"mask-image-linear-to-pos":[{"mask-linear-to":I()}],"mask-image-linear-from-color":[{"mask-linear-from":E()}],"mask-image-linear-to-color":[{"mask-linear-to":E()}],"mask-image-t-from-pos":[{"mask-t-from":I()}],"mask-image-t-to-pos":[{"mask-t-to":I()}],"mask-image-t-from-color":[{"mask-t-from":E()}],"mask-image-t-to-color":[{"mask-t-to":E()}],"mask-image-r-from-pos":[{"mask-r-from":I()}],"mask-image-r-to-pos":[{"mask-r-to":I()}],"mask-image-r-from-color":[{"mask-r-from":E()}],"mask-image-r-to-color":[{"mask-r-to":E()}],"mask-image-b-from-pos":[{"mask-b-from":I()}],"mask-image-b-to-pos":[{"mask-b-to":I()}],"mask-image-b-from-color":[{"mask-b-from":E()}],"mask-image-b-to-color":[{"mask-b-to":E()}],"mask-image-l-from-pos":[{"mask-l-from":I()}],"mask-image-l-to-pos":[{"mask-l-to":I()}],"mask-image-l-from-color":[{"mask-l-from":E()}],"mask-image-l-to-color":[{"mask-l-to":E()}],"mask-image-x-from-pos":[{"mask-x-from":I()}],"mask-image-x-to-pos":[{"mask-x-to":I()}],"mask-image-x-from-color":[{"mask-x-from":E()}],"mask-image-x-to-color":[{"mask-x-to":E()}],"mask-image-y-from-pos":[{"mask-y-from":I()}],"mask-image-y-to-pos":[{"mask-y-to":I()}],"mask-image-y-from-color":[{"mask-y-from":E()}],"mask-image-y-to-color":[{"mask-y-to":E()}],"mask-image-radial":[{"mask-radial":[ai,Xo]}],"mask-image-radial-from-pos":[{"mask-radial-from":I()}],"mask-image-radial-to-pos":[{"mask-radial-to":I()}],"mask-image-radial-from-color":[{"mask-radial-from":E()}],"mask-image-radial-to-color":[{"mask-radial-to":E()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"]}],"mask-image-conic-pos":[{"mask-conic":[$o]}],"mask-image-conic-from-pos":[{"mask-conic-from":I()}],"mask-image-conic-to-pos":[{"mask-conic-to":I()}],"mask-image-conic-from-color":[{"mask-conic-from":E()}],"mask-image-conic-to-color":[{"mask-conic-to":E()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:A()}],"mask-repeat":[{mask:["no-repeat",{repeat:["","x","y","space","round"]}]}],"mask-size":[{mask:O()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ai,Xo]}],filter:[{filter:["","none",ai,Xo]}],blur:[{blur:L()}],brightness:[{brightness:[$o,ai,Xo]}],contrast:[{contrast:[$o,ai,Xo]}],"drop-shadow":[{"drop-shadow":["","none",m,ui,si]}],"drop-shadow-color":[{"drop-shadow":E()}],grayscale:[{grayscale:["",$o,ai,Xo]}],"hue-rotate":[{"hue-rotate":[$o,ai,Xo]}],invert:[{invert:["",$o,ai,Xo]}],saturate:[{saturate:[$o,ai,Xo]}],sepia:[{sepia:["",$o,ai,Xo]}],"backdrop-filter":[{"backdrop-filter":["","none",ai,Xo]}],"backdrop-blur":[{"backdrop-blur":L()}],"backdrop-brightness":[{"backdrop-brightness":[$o,ai,Xo]}],"backdrop-contrast":[{"backdrop-contrast":[$o,ai,Xo]}],"backdrop-grayscale":[{"backdrop-grayscale":["",$o,ai,Xo]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[$o,ai,Xo]}],"backdrop-invert":[{"backdrop-invert":["",$o,ai,Xo]}],"backdrop-opacity":[{"backdrop-opacity":[$o,ai,Xo]}],"backdrop-saturate":[{"backdrop-saturate":[$o,ai,Xo]}],"backdrop-sepia":[{"backdrop-sepia":["",$o,ai,Xo]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":v()}],"border-spacing-x":[{"border-spacing-x":v()}],"border-spacing-y":[{"border-spacing-y":v()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ai,Xo]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[$o,"initial",ai,Xo]}],ease:[{ease:["linear","initial",x,ai,Xo]}],delay:[{delay:[$o,ai,Xo]}],animate:[{animate:["none",b,ai,Xo]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[p,ai,Xo]}],"perspective-origin":[{"perspective-origin":y()}],rotate:[{rotate:M()}],"rotate-x":[{"rotate-x":M()}],"rotate-y":[{"rotate-y":M()}],"rotate-z":[{"rotate-z":M()}],scale:[{scale:q()}],"scale-x":[{"scale-x":q()}],"scale-y":[{"scale-y":q()}],"scale-z":[{"scale-z":q()}],"scale-3d":["scale-3d"],skew:[{skew:R()}],"skew-x":[{"skew-x":R()}],"skew-y":[{"skew-y":R()}],transform:[{transform:[ai,Xo,"","none","gpu","cpu"]}],"transform-origin":[{origin:y()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:D()}],"translate-x":[{"translate-x":D()}],"translate-y":[{"translate-y":D()}],"translate-z":[{"translate-z":D()}],"translate-none":["translate-none"],accent:[{accent:E()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:E()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ai,Xo]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":v()}],"scroll-mx":[{"scroll-mx":v()}],"scroll-my":[{"scroll-my":v()}],"scroll-ms":[{"scroll-ms":v()}],"scroll-me":[{"scroll-me":v()}],"scroll-mt":[{"scroll-mt":v()}],"scroll-mr":[{"scroll-mr":v()}],"scroll-mb":[{"scroll-mb":v()}],"scroll-ml":[{"scroll-ml":v()}],"scroll-p":[{"scroll-p":v()}],"scroll-px":[{"scroll-px":v()}],"scroll-py":[{"scroll-py":v()}],"scroll-ps":[{"scroll-ps":v()}],"scroll-pe":[{"scroll-pe":v()}],"scroll-pt":[{"scroll-pt":v()}],"scroll-pr":[{"scroll-pr":v()}],"scroll-pb":[{"scroll-pb":v()}],"scroll-pl":[{"scroll-pl":v()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ai,Xo]}],fill:[{fill:["none",...E()]}],"stroke-w":[{stroke:[$o,oi,ei,ti]}],stroke:[{stroke:["none",...E()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}}),ji=To(wi);function Ni(){return ji(ms(...arguments))}const ki={default:"flex h-10 w-full rounded-none bg-transparent border-dark border px-3 py-2 text-sm focus:outline-none focus:border-primary",error:"flex h-10 w-full rounded-none bg-transparent border-red-500 border px-3 py-2 text-sm focus:outline-none focus:border-red-500",success:"flex h-10 w-full rounded-none bg-transparent border-green-500 border px-3 py-2 text-sm focus:outline-none focus:border-green-500",disabled:"flex h-10 w-full rounded-none bg-gray-100 text-gray-400 border border-gray-300 px-3 py-2 text-sm cursor-not-allowed",gray:"px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary sm:text-sm",form:"rounded-md w-full bg-gray-200 dark:bg-white py-4 px-4"},Si=n.forwardRef(((e,t)=>{let{className:r,type:n,variant:s="default",...a}=e;return(0,as.jsx)("input",{type:n,className:Ni(ki[s],r),ref:t,...a})}));function Ci(e,t){if("function"===typeof e)return e(t);null!==e&&void 0!==e&&(e.current=t)}function _i(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.useCallback(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return e=>{let r=!1;const n=t.map((t=>{const n=Ci(t,e);return r||"function"!=typeof n||(r=!0),n}));if(r)return()=>{for(let e=0;e<n.length;e++){const r=n[e];"function"==typeof r?r():Ci(t[e],null)}}}}(...t),t)}function Ei(e){const t=Ai(e),r=n.forwardRef(((e,r)=>{const{children:s,...a}=e,o=n.Children.toArray(s),i=o.find(Ti);if(i){const e=i.props.children,s=o.map((t=>t===i?n.Children.count(e)>1?n.Children.only(null):n.isValidElement(e)?e.props.children:null:t));return(0,as.jsx)(t,{...a,ref:r,children:n.isValidElement(e)?n.cloneElement(e,void 0,s):null})}return(0,as.jsx)(t,{...a,ref:r,children:s})}));return r.displayName=`${e}.Slot`,r}Si.displayName="Input";function Ai(e){const t=n.forwardRef(((e,t)=>{const{children:r,...s}=e,a=_i(n.isValidElement(r)?function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;if(r)return e.ref;if(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r)return e.props.ref;return e.props.ref||e.ref}(r):void 0,t);if(n.isValidElement(r)){const e=function(e,t){const r={...t};for(const n in t){const s=e[n],a=t[n];/^on[A-Z]/.test(n)?s&&a?r[n]=function(){const e=a(...arguments);return s(...arguments),e}:s&&(r[n]=s):"style"===n?r[n]={...s,...a}:"className"===n&&(r[n]=[s,a].filter(Boolean).join(" "))}return{...e,...r}}(s,r.props);return r.type!==n.Fragment&&(e.ref=a),n.cloneElement(r,e)}return n.Children.count(r)>1?n.Children.only(null):null}));return t.displayName=`${e}.SlotClone`,t}var Oi=Symbol("radix.slottable");function Ti(e){return n.isValidElement(e)&&"function"===typeof e.type&&"__radixId"in e.type&&e.type.__radixId===Oi}var zi=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce(((e,t)=>{const r=Ei(`Primitive.${t}`),s=n.forwardRef(((e,n)=>{const{asChild:s,...a}=e,o=s?r:t;return"undefined"!==typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,as.jsx)(o,{...a,ref:n})}));return s.displayName=`Primitive.${t}`,{...e,[t]:s}}),{});var Pi=n.forwardRef(((e,t)=>(0,as.jsx)(zi.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}})));Pi.displayName="Label";var Ii=Pi;const Li=gs("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",{variants:{variant:{default:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",white:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 text-gray-700 dark:!text-white"}}}),Mi=n.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,as.jsx)(Ii,{ref:t,className:Ni(Li(),r),...n})}));Mi.displayName=Ii.displayName;const qi=e=>{let{columns:t,data:r,itemsPerPage:s=10}=e;const[a,o]=(0,n.useState)(1),i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:80;if(null===e||void 0===e)return"";const r=String(e);return r.length<=t?r:r.slice(0,t)+"..."},l=Math.ceil(r.length/s),c=a*s,d=c-s,u=r.slice(d,c),h=e=>{e>=1&&e<=l&&o(e)};return(0,as.jsxs)("div",{className:"w-full",children:[(0,as.jsx)("div",{className:"overflow-x-auto ",children:(0,as.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,as.jsx)("thead",{className:"bg-gray-50",children:(0,as.jsx)("tr",{children:t.map(((e,t)=>(0,as.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:e.header},t)))})}),(0,as.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:u.map(((e,r)=>(0,as.jsx)("tr",{className:r%2===0?"bg-white":"bg-gray-50",children:t.map(((t,r)=>(0,as.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.render?t.render(e):t.accessor?"function"===typeof t.accessor?t.accessor(e):i(e[t.accessor]):null},r)))},r)))})]})}),(0,as.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-t border-gray-200 pt-5",children:[(0,as.jsx)("div",{className:"text-sm dark:text-gray-300 text-gray-700",children:(0,as.jsxs)("span",{children:[d+1,"-",Math.min(c,r.length)," of ",r.length," items"]})}),l>1&&(0,as.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,as.jsx)("button",{onClick:()=>h(a-1),disabled:1===a,className:"w-8 h-8 flex items-center justify-center rounded-none "+(1===a?"text-gray-300 cursor-not-allowed":"dark:text-gray-300 text-gray-700 hover:text-gray-200"),children:"<"}),Array.from({length:Math.min(l,7)},((e,t)=>t+1)).map((e=>(0,as.jsx)("button",{onClick:()=>h(e),className:"w-8 h-8 flex items-center justify-center rounded-none "+(e===a?"bg-blue-600 text-white ":"bg-transparent dark:text-gray-300 text-gray-700 hover:bg-gray-200 hover:text-gray-700"),children:e},e))),l>7&&(0,as.jsxs)(as.Fragment,{children:[(0,as.jsx)("span",{className:"px-2",children:"..."}),(0,as.jsx)("button",{onClick:()=>h(l),className:"w-8 h-8 flex items-center justify-center rounded-none bg-transparent dark:text-gray-300 text-gray-700 hover:bg-gray-200 hover:text-gray-700",children:l})]}),(0,as.jsx)("button",{onClick:()=>h(a+1),disabled:a===l,className:"w-8 h-8 flex items-center justify-center rounded-none "+(a===l?"text-gray-300 cursor-not-allowed":"dark:text-gray-300 text-gray-700 hover:bg-gray-200"),children:">"})]})]})]})};function Ri(e,t){let{checkForDefaultPrevented:r=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(n){if(e?.(n),!1===r||!n.defaultPrevented)return t?.(n)}}function Di(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=[];const s=()=>{const t=r.map((e=>n.createContext(e)));return function(r){const s=r?.[e]||t;return n.useMemo((()=>({[`__scope${e}`]:{...r,[e]:s}})),[r,s])}};return s.scopeName=e,[function(t,s){const a=n.createContext(s),o=r.length;r=[...r,s];const i=t=>{const{scope:r,children:s,...i}=t,l=r?.[e]?.[o]||a,c=n.useMemo((()=>i),Object.values(i));return(0,as.jsx)(l.Provider,{value:c,children:s})};return i.displayName=t+"Provider",[i,function(r,i){const l=i?.[e]?.[o]||a,c=n.useContext(l);if(c)return c;if(void 0!==s)return s;throw new Error(`\`${r}\` must be used within \`${t}\``)}]},Fi(s,...t)]}function Fi(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const s=t[0];if(1===t.length)return s;const a=()=>{const e=t.map((e=>({useScope:e(),scopeName:e.scopeName})));return function(t){const r=e.reduce(((e,r)=>{let{useScope:n,scopeName:s}=r;return{...e,...n(t)[`__scope${s}`]}}),{});return n.useMemo((()=>({[`__scope${s.scopeName}`]:r})),[r])}};return a.scopeName=s.scopeName,a}var Bi=new WeakMap;Map;function $i(e,t){if("at"in Array.prototype)return Array.prototype.at.call(e,t);const r=function(e,t){const r=e.length,n=Ui(t),s=n>=0?n:r+n;return s<0||s>=r?-1:s}(e,t);return-1===r?void 0:e[r]}function Ui(e){return e!==e||0===e?0:Math.trunc(e)}var Hi=globalThis?.document?n.useLayoutEffect:()=>{},Wi=s[" useId ".trim().toString()]||(()=>{}),Qi=0;function Vi(e){const[t,r]=n.useState(Wi());return Hi((()=>{e||r((e=>e??String(Qi++)))}),[e]),e||(t?`radix-${t}`:"")}function Gi(e){const t=n.useRef(e);return n.useEffect((()=>{t.current=e})),n.useMemo((()=>function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t.current?.(...r)}),[])}var Ki=s[" useInsertionEffect ".trim().toString()]||Hi;function Yi(e){let{prop:t,defaultProp:r,onChange:s=()=>{},caller:a}=e;const[o,i,l]=function(e){let{defaultProp:t,onChange:r}=e;const[s,a]=n.useState(t),o=n.useRef(s),i=n.useRef(r);return Ki((()=>{i.current=r}),[r]),n.useEffect((()=>{o.current!==s&&(i.current?.(s),o.current=s)}),[s,o]),[s,a,i]}({defaultProp:r,onChange:s}),c=void 0!==t,d=c?t:o;{const e=n.useRef(void 0!==t);n.useEffect((()=>{const t=e.current;if(t!==c){const e=t?"controlled":"uncontrolled",r=c?"controlled":"uncontrolled";console.warn(`${a} is changing from ${e} to ${r}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`)}e.current=c}),[c,a])}const u=n.useCallback((e=>{if(c){const r=function(e){return"function"===typeof e}(e)?e(t):e;r!==t&&l.current?.(r)}else i(e)}),[c,t,i,l]);return[d,u]}Symbol("RADIX:SYNC_STATE");var Zi=n.createContext(void 0);function Ji(e){const t=n.useContext(Zi);return e||t||"ltr"}var Xi="rovingFocusGroup.onEntryFocus",el={bubbles:!1,cancelable:!0},tl="RovingFocusGroup",[rl,nl,sl]=function(e){const t=e+"CollectionProvider",[r,s]=Di(t),[a,o]=r(t,{collectionRef:{current:null},itemMap:new Map}),i=e=>{const{scope:t,children:r}=e,s=n.useRef(null),o=n.useRef(new Map).current;return(0,as.jsx)(a,{scope:t,itemMap:o,collectionRef:s,children:r})};i.displayName=t;const l=e+"CollectionSlot",c=Ei(l),d=n.forwardRef(((e,t)=>{const{scope:r,children:n}=e,s=_i(t,o(l,r).collectionRef);return(0,as.jsx)(c,{ref:s,children:n})}));d.displayName=l;const u=e+"CollectionItemSlot",h="data-radix-collection-item",m=Ei(u),f=n.forwardRef(((e,t)=>{const{scope:r,children:s,...a}=e,i=n.useRef(null),l=_i(t,i),c=o(u,r);return n.useEffect((()=>(c.itemMap.set(i,{ref:i,...a}),()=>{c.itemMap.delete(i)}))),(0,as.jsx)(m,{[h]:"",ref:l,children:s})}));return f.displayName=u,[{Provider:i,Slot:d,ItemSlot:f},function(t){const r=o(e+"CollectionConsumer",t),s=n.useCallback((()=>{const e=r.collectionRef.current;if(!e)return[];const t=Array.from(e.querySelectorAll(`[${h}]`)),n=Array.from(r.itemMap.values()).sort(((e,r)=>t.indexOf(e.ref.current)-t.indexOf(r.ref.current)));return n}),[r.collectionRef,r.itemMap]);return s},s]}(tl),[al,ol]=Di(tl,[sl]),[il,ll]=al(tl),cl=n.forwardRef(((e,t)=>(0,as.jsx)(rl.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,as.jsx)(rl.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,as.jsx)(dl,{...e,ref:t})})})));cl.displayName=tl;var dl=n.forwardRef(((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:s,loop:a=!1,dir:o,currentTabStopId:i,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:u=!1,...h}=e,m=n.useRef(null),f=_i(t,m),p=Ji(o),[g,x]=Yi({prop:i,defaultProp:l??null,onChange:c,caller:tl}),[b,y]=n.useState(!1),v=Gi(d),w=nl(r),j=n.useRef(!1),[N,k]=n.useState(0);return n.useEffect((()=>{const e=m.current;if(e)return e.addEventListener(Xi,v),()=>e.removeEventListener(Xi,v)}),[v]),(0,as.jsx)(il,{scope:r,orientation:s,dir:p,loop:a,currentTabStopId:g,onItemFocus:n.useCallback((e=>x(e)),[x]),onItemShiftTab:n.useCallback((()=>y(!0)),[]),onFocusableItemAdd:n.useCallback((()=>k((e=>e+1))),[]),onFocusableItemRemove:n.useCallback((()=>k((e=>e-1))),[]),children:(0,as.jsx)(zi.div,{tabIndex:b||0===N?-1:0,"data-orientation":s,...h,ref:f,style:{outline:"none",...e.style},onMouseDown:Ri(e.onMouseDown,(()=>{j.current=!0})),onFocus:Ri(e.onFocus,(e=>{const t=!j.current;if(e.target===e.currentTarget&&t&&!b){const t=new CustomEvent(Xi,el);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){const e=w().filter((e=>e.focusable));fl([e.find((e=>e.active)),e.find((e=>e.id===g)),...e].filter(Boolean).map((e=>e.ref.current)),u)}}j.current=!1})),onBlur:Ri(e.onBlur,(()=>y(!1)))})})})),ul="RovingFocusGroupItem",hl=n.forwardRef(((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:s=!0,active:a=!1,tabStopId:o,children:i,...l}=e,c=Vi(),d=o||c,u=ll(ul,r),h=u.currentTabStopId===d,m=nl(r),{onFocusableItemAdd:f,onFocusableItemRemove:p,currentTabStopId:g}=u;return n.useEffect((()=>{if(s)return f(),()=>p()}),[s,f,p]),(0,as.jsx)(rl.ItemSlot,{scope:r,id:d,focusable:s,active:a,children:(0,as.jsx)(zi.span,{tabIndex:h?0:-1,"data-orientation":u.orientation,...l,ref:t,onMouseDown:Ri(e.onMouseDown,(e=>{s?u.onItemFocus(d):e.preventDefault()})),onFocus:Ri(e.onFocus,(()=>u.onItemFocus(d))),onKeyDown:Ri(e.onKeyDown,(e=>{if("Tab"===e.key&&e.shiftKey)return void u.onItemShiftTab();if(e.target!==e.currentTarget)return;const t=function(e,t,r){const n=function(e,t){return"rtl"!==t?e:"ArrowLeft"===e?"ArrowRight":"ArrowRight"===e?"ArrowLeft":e}(e.key,r);return"vertical"===t&&["ArrowLeft","ArrowRight"].includes(n)||"horizontal"===t&&["ArrowUp","ArrowDown"].includes(n)?void 0:ml[n]}(e,u.orientation,u.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let s=m().filter((e=>e.focusable)).map((e=>e.ref.current));if("last"===t)s.reverse();else if("prev"===t||"next"===t){"prev"===t&&s.reverse();const a=s.indexOf(e.currentTarget);s=u.loop?(n=a+1,(r=s).map(((e,t)=>r[(n+t)%r.length]))):s.slice(a+1)}setTimeout((()=>fl(s)))}var r,n})),children:"function"===typeof i?i({isCurrentTabStop:h,hasTabStop:null!=g}):i})})}));hl.displayName=ul;var ml={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function fl(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=document.activeElement;for(const n of e){if(n===r)return;if(n.focus({preventScroll:t}),document.activeElement!==r)return}}var pl=cl,gl=hl;var xl=e=>{const{present:t,children:r}=e,s=function(e){const[t,r]=n.useState(),s=n.useRef(null),a=n.useRef(e),o=n.useRef("none"),i=e?"mounted":"unmounted",[l,c]=function(e,t){return n.useReducer(((e,r)=>t[e][r]??e),e)}(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return n.useEffect((()=>{const e=bl(s.current);o.current="mounted"===l?e:"none"}),[l]),Hi((()=>{const t=s.current,r=a.current;if(r!==e){const n=o.current,s=bl(t);if(e)c("MOUNT");else if("none"===s||"none"===t?.display)c("UNMOUNT");else{c(r&&n!==s?"ANIMATION_OUT":"UNMOUNT")}a.current=e}}),[e,c]),Hi((()=>{if(t){let e;const r=t.ownerDocument.defaultView??window,n=n=>{const o=bl(s.current).includes(n.animationName);if(n.target===t&&o&&(c("ANIMATION_END"),!a.current)){const n=t.style.animationFillMode;t.style.animationFillMode="forwards",e=r.setTimeout((()=>{"forwards"===t.style.animationFillMode&&(t.style.animationFillMode=n)}))}},i=e=>{e.target===t&&(o.current=bl(s.current))};return t.addEventListener("animationstart",i),t.addEventListener("animationcancel",n),t.addEventListener("animationend",n),()=>{r.clearTimeout(e),t.removeEventListener("animationstart",i),t.removeEventListener("animationcancel",n),t.removeEventListener("animationend",n)}}c("ANIMATION_END")}),[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:n.useCallback((e=>{s.current=e?getComputedStyle(e):null,r(e)}),[])}}(t),a="function"===typeof r?r({present:s.isPresent}):n.Children.only(r),o=_i(s.ref,function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;if(r)return e.ref;if(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r)return e.props.ref;return e.props.ref||e.ref}(a));return"function"===typeof r||s.isPresent?n.cloneElement(a,{ref:o}):null};function bl(e){return e?.animationName||"none"}xl.displayName="Presence";var yl="Tabs",[vl,wl]=Di(yl,[ol]),jl=ol(),[Nl,kl]=vl(yl),Sl=n.forwardRef(((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:s,defaultValue:a,orientation:o="horizontal",dir:i,activationMode:l="automatic",...c}=e,d=Ji(i),[u,h]=Yi({prop:n,onChange:s,defaultProp:a??"",caller:yl});return(0,as.jsx)(Nl,{scope:r,baseId:Vi(),value:u,onValueChange:h,orientation:o,dir:d,activationMode:l,children:(0,as.jsx)(zi.div,{dir:d,"data-orientation":o,...c,ref:t})})}));Sl.displayName=yl;var Cl="TabsList",_l=n.forwardRef(((e,t)=>{const{__scopeTabs:r,loop:n=!0,...s}=e,a=kl(Cl,r),o=jl(r);return(0,as.jsx)(pl,{asChild:!0,...o,orientation:a.orientation,dir:a.dir,loop:n,children:(0,as.jsx)(zi.div,{role:"tablist","aria-orientation":a.orientation,...s,ref:t})})}));_l.displayName=Cl;var El="TabsTrigger",Al=n.forwardRef(((e,t)=>{const{__scopeTabs:r,value:n,disabled:s=!1,...a}=e,o=kl(El,r),i=jl(r),l=zl(o.baseId,n),c=Pl(o.baseId,n),d=n===o.value;return(0,as.jsx)(gl,{asChild:!0,...i,focusable:!s,active:d,children:(0,as.jsx)(zi.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":c,"data-state":d?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:l,...a,ref:t,onMouseDown:Ri(e.onMouseDown,(e=>{s||0!==e.button||!1!==e.ctrlKey?e.preventDefault():o.onValueChange(n)})),onKeyDown:Ri(e.onKeyDown,(e=>{[" ","Enter"].includes(e.key)&&o.onValueChange(n)})),onFocus:Ri(e.onFocus,(()=>{const e="manual"!==o.activationMode;d||s||!e||o.onValueChange(n)}))})})}));Al.displayName=El;var Ol="TabsContent",Tl=n.forwardRef(((e,t)=>{const{__scopeTabs:r,value:s,forceMount:a,children:o,...i}=e,l=kl(Ol,r),c=zl(l.baseId,s),d=Pl(l.baseId,s),u=s===l.value,h=n.useRef(u);return n.useEffect((()=>{const e=requestAnimationFrame((()=>h.current=!1));return()=>cancelAnimationFrame(e)}),[]),(0,as.jsx)(xl,{present:a||u,children:r=>{let{present:n}=r;return(0,as.jsx)(zi.div,{"data-state":u?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!n,id:d,tabIndex:0,...i,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:n&&o})}})}));function zl(e,t){return`${e}-trigger-${t}`}function Pl(e,t){return`${e}-content-${t}`}Tl.displayName=Ol;var Il=_l,Ll=Al,Ml=Tl;const ql=Sl,Rl=n.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,as.jsx)(Il,{ref:t,className:Ni("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",r),...n})}));Rl.displayName=Il.displayName;const Dl=n.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,as.jsx)(Ll,{ref:t,className:Ni("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",r),...n})}));Dl.displayName=Ll.displayName;const Fl=n.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,as.jsx)(Ml,{ref:t,className:Ni("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),...n})}));Fl.displayName=Ml.displayName;const Bl={default:"flex min-h-[80px] w-full rounded-none bg-transparent border-dark border px-3 py-2 text-sm focus:outline-none focus:border-primary",error:"flex min-h-[80px] w-full rounded-none bg-transparent border-red-500 border px-3 py-2 text-sm focus:outline-none focus:border-red-500",gray:"px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary sm:text-sm"},$l=n.forwardRef(((e,t)=>{let{className:r,variant:n="default",...s}=e;return(0,as.jsx)("textarea",{className:Ni(Bl[n],r),ref:t,...s})}));$l.displayName="Textarea";var Ul=r(9461);function Hl(){return()=>{}}var Wl="Avatar",[Ql,Vl]=Di(Wl),[Gl,Kl]=Ql(Wl),Yl=n.forwardRef(((e,t)=>{const{__scopeAvatar:r,...s}=e,[a,o]=n.useState("idle");return(0,as.jsx)(Gl,{scope:r,imageLoadingStatus:a,onImageLoadingStatusChange:o,children:(0,as.jsx)(zi.span,{...s,ref:t})})}));Yl.displayName=Wl;var Zl="AvatarImage",Jl=n.forwardRef(((e,t)=>{const{__scopeAvatar:r,src:s,onLoadingStatusChange:a=()=>{},...o}=e,i=Kl(Zl,r),l=function(e,t){let{referrerPolicy:r,crossOrigin:s}=t;const a=(0,Ul.useSyncExternalStore)(Hl,(()=>!0),(()=>!1)),o=n.useRef(null),i=a?(o.current||(o.current=new window.Image),o.current):null,[l,c]=n.useState((()=>tc(i,e)));return Hi((()=>{c(tc(i,e))}),[i,e]),Hi((()=>{const e=e=>()=>{c(e)};if(!i)return;const t=e("loaded"),n=e("error");return i.addEventListener("load",t),i.addEventListener("error",n),r&&(i.referrerPolicy=r),"string"===typeof s&&(i.crossOrigin=s),()=>{i.removeEventListener("load",t),i.removeEventListener("error",n)}}),[i,s,r]),l}(s,o),c=Gi((e=>{a(e),i.onImageLoadingStatusChange(e)}));return Hi((()=>{"idle"!==l&&c(l)}),[l,c]),"loaded"===l?(0,as.jsx)(zi.img,{...o,ref:t,src:s}):null}));Jl.displayName=Zl;var Xl="AvatarFallback",ec=n.forwardRef(((e,t)=>{const{__scopeAvatar:r,delayMs:s,...a}=e,o=Kl(Xl,r),[i,l]=n.useState(void 0===s);return n.useEffect((()=>{if(void 0!==s){const e=window.setTimeout((()=>l(!0)),s);return()=>window.clearTimeout(e)}}),[s]),i&&"loaded"!==o.imageLoadingStatus?(0,as.jsx)(zi.span,{...a,ref:t}):null}));function tc(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}ec.displayName=Xl;var rc=Yl,nc=Jl,sc=ec;const ac=n.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,as.jsx)(rc,{ref:t,className:Ni("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",r),...n})}));ac.displayName=rc.displayName;const oc=n.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,as.jsx)(nc,{ref:t,className:Ni("aspect-square h-full w-full",r),...n})}));oc.displayName=nc.displayName;const ic=n.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,as.jsx)(sc,{ref:t,className:Ni("flex h-full w-full items-center justify-center rounded-md bg-muted",r),...n})}));ic.displayName=sc.displayName;const lc=e=>{let{isOpen:t,onClose:r,title:s,children:a,footer:o,maxWidth:i="max-w-2xl"}=e;if((0,n.useEffect)((()=>{const e=e=>{"Escape"===e.key&&r()};return t&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow="unset"}}),[t,r]),!t)return null;return(0,as.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-primary/75 backdrop-blur-sm",onClick:e=>{e.target===e.currentTarget&&r()},children:(0,as.jsxs)("div",{className:`bg-gray-50 dark:bg-gray-800 rounded-xl shadow-xl w-full ${i} mx-4 flex flex-col max-h-[95vh] animate-fadeIn`,role:"dialog","aria-modal":"true",children:[(0,as.jsxs)("div",{className:"flex items-center justify-between px-6 py-3 border-b border-gray-200 dark:border-gray-700",children:[(0,as.jsx)("h3",{className:"text-base font-semibold text-gray-900 dark:text-white truncate",children:s}),(0,as.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 p-2 rounded focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Close modal",children:(0,as.jsx)(lo,{className:"w-5 h-5"})})]}),(0,as.jsx)("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:a}),o&&(0,as.jsx)("div",{className:"flex items-center justify-end gap-2 px-6 py-3 border-t border-gray-200 dark:border-gray-700 bg-gray-100 dark:bg-gray-700 rounded-b-xl",children:o})]})})},cc=()=>{const e=X(),{currentUser:t}=is(),r=(0,as.jsxs)("div",{className:"w-full flex flex-col items-center justify-center max-w-5xl mx-4 2xl:mx-auto  rounded-2xl shadow-xl py-12 2xl:py-28 px-8 border border-white/10 dark:border-gray-700 backdrop-blur-md bg-gray-100 dark:bg-transparent",children:[(0,as.jsx)(Si,{className:"mb-6 w-48 sm:w-64 md:w-72 2xl:w-80 max-w-full mx-auto bg-transparent border-gray-400 dark:border-gray-500 text-center text-sm text-gray-700 dark:text-gray-200 placeholder-gray-400 dark:placeholder-gray-400 rounded-full focus:ring-2 focus:ring-blue-500 focus:border-blue-500 px-4 py-2",type:"text",value:"MathQuest",readOnly:!0,"aria-label":"Brand name"}),(0,as.jsxs)(po,{type:"h1",fontSize:"6xl",weight:"bold",className:"mb-2 text-center text-gray-900 dark:text-white leading-tight",children:["Modern gamified Math",(0,as.jsx)("br",{}),"for the ",(0,as.jsx)("span",{className:"text-blue-500 dark:text-gray-500",children:"modern world"})]}),(0,as.jsx)("p",{className:"mt-4 mb-8 text-lg text-gray-600 dark:text-gray-300 text-center max-w-xl",children:"Improving Grade 4 Students' Multiplication Mastery with Interactive Learning"}),(0,as.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 justify-center",children:[(0,as.jsx)(bs,{variant:"primaryWhite",size:"sm",rounded:"full",onClick:()=>e("/register"),children:"Register Now!"}),(0,as.jsx)(bs,{variant:"outlineWhite",size:"sm",onClick:()=>e("/login"),rounded:"full",children:"Learn more..."})]})]});return(0,as.jsx)("div",{className:"md:py-28 flex items-center justify-center",children:r})},dc=()=>(0,as.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-blue-100 to-purple-100 py-12 px-4",children:(0,as.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,as.jsx)("h1",{className:"text-4xl font-bold text-blue-800 mb-8 text-center",children:"About MathQuest - Math Properties Adventure \ud83c\udf93"}),(0,as.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8 mb-8",children:[(0,as.jsx)("h2",{className:"text-2xl font-bold text-purple-700 mb-4",children:"What We Teach"}),(0,as.jsx)("p",{className:"text-gray-700 mb-6",children:"Math Properties Adventure is designed to help students master essential multiplication properties through interactive quizzes and engaging content. Our game focuses on making math learning fun and accessible for everyone."}),(0,as.jsx)("h2",{className:"text-2xl font-bold text-purple-700 mb-4",children:"Multiplication Properties Covered"}),(0,as.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-700 mb-6",children:[(0,as.jsx)("li",{children:"Commutative Property (a \xd7 b = b \xd7 a)"}),(0,as.jsx)("li",{children:"Associative Property ((a \xd7 b) \xd7 c = a \xd7 (b \xd7 c))"}),(0,as.jsx)("li",{children:"Distributive Property (a \xd7 (b + c) = a \xd7 b + a \xd7 c)"}),(0,as.jsx)("li",{children:"Identity Property (a \xd7 1 = a)"}),(0,as.jsx)("li",{children:"Zero Property (a \xd7 0 = 0)"})]}),(0,as.jsx)("h2",{className:"text-2xl font-bold text-purple-700 mb-4",children:"Educational Goals"}),(0,as.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[(0,as.jsx)("li",{children:"Build a strong foundation in multiplication properties"}),(0,as.jsx)("li",{children:"Develop problem-solving skills"}),(0,as.jsx)("li",{children:"Enhance mathematical thinking"}),(0,as.jsx)("li",{children:"Make learning math enjoyable and engaging"}),(0,as.jsx)("li",{children:"Track progress through interactive quizzes"})]})]}),(0,as.jsx)("div",{className:"text-center",children:(0,as.jsx)("p",{className:"text-gray-600 italic",children:'"Mathematics is not about numbers, equations, computations, or algorithms: it is about understanding." - William Paul Thurston'})})]})}),uc=()=>{const[e,t]=(0,n.useState)(""),[r,s]=(0,n.useState)(""),[a,o]=(0,n.useState)(!1),[i,l]=(0,n.useState)(""),[c,d]=(0,n.useState)(""),[u,h]=(0,n.useState)(!1),m=X(),f=Z(),{login:p}=is();(0,n.useEffect)((()=>{var e;null!==(e=f.state)&&void 0!==e&&e.message&&(d(f.state.message),m(f.pathname,{replace:!0,state:{}}))}),[f,m]);return(0,as.jsx)("div",{className:"md:py-28 flex items-center justify-center",children:(0,as.jsxs)("div",{className:"w-full max-w-5xl mx-4 2xl:mx-auto flex flex-col md:flex-row items-center justify-center rounded-2xl shadow-xl py-12 2xl:py-28 px-8 border border-white/10 dark:border-gray-700 backdrop-blur-md bg-gray-100 dark:bg-transparent",children:[(0,as.jsxs)("div",{className:"w-full lg:w-1/2 flex flex-col items-center justify-center",children:[(0,as.jsx)(Te,{to:"/",children:(0,as.jsx)("img",{src:"/images/new-logo.png",alt:"MathQuest Logo",className:"w-40 h-40 md:w-72 md:h-72 object-contain mb-2 drop-shadow-xl",draggable:"false"})}),(0,as.jsx)(po,{type:"h1",fontSize:"5xl",weight:"thin",className:" text-primary/80 dark:text-white/80 mb-2 text-center drop-shadow-lg",children:"Welcome to MathQuest!"})]}),(0,as.jsx)("div",{className:"w-full lg:w-1/2 flex flex-col justify-center mt-5 lg:mt-0",children:(0,as.jsxs)("form",{className:"w-full md:max-w-xs mx-auto",onSubmit:async t=>{if(t.preventDefault(),l(""),d(""),h(!0),!e.trim()||!r)return l("Username/Email and password are required"),void h(!1);try{const t=await p(e,r);t.success?(d("Login successful"),m("/")):l(t.error||"Failed to login. Please check credentials.")}catch(n){console.error("Login error:",n),l(n.message||"An error occurred during login")}finally{h(!1)}},children:[i&&(0,as.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert",children:(0,as.jsx)("span",{className:"block sm:inline",children:i})}),c&&(0,as.jsx)("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-4",role:"alert",children:(0,as.jsx)("span",{className:"block sm:inline",children:c})}),(0,as.jsx)("div",{className:"mb-4",children:(0,as.jsx)(Si,{id:"identifier",name:"identifier",type:"text",required:!0,variant:"form",placeholder:"Email or Username",value:e,onChange:e=>t(e.target.value),autoComplete:"username"})}),(0,as.jsxs)("div",{className:"mb-4 relative",children:[(0,as.jsx)(Si,{id:"password",name:"password",type:a?"text":"password",required:!0,variant:"form",placeholder:"Password",value:r,onChange:e=>s(e.target.value),autoComplete:"current-password"}),(0,as.jsx)("button",{type:"button",className:"absolute inset-y-0 right-8 flex items-center text-gray-500 z-10 bg-transparent",onClick:()=>o(!a),tabIndex:-1,"aria-label":"Toggle password visibility",style:{background:"none",border:"none",padding:0},children:a?(0,as.jsx)(Ha,{}):(0,as.jsx)(Wa,{})})]}),(0,as.jsx)("div",{className:"flex justify-end mb-6",children:(0,as.jsx)(Te,{to:"/forgot-password",className:"text-xs text-blue-600 dark:text-blue-400 hover:underline",children:"Forgot Password?"})}),(0,as.jsx)("div",{className:"flex justify-end mb-6",children:(0,as.jsx)(bs,{type:"submit",disabled:u,variant:"default",size:"sm",rounded:"full",className:"w-full transition-all duration-200",children:u?"Signing in...":"Log In"})})]})})]})})},hc=()=>{const[e,t]=(0,n.useState)({username:"",email:"",password:"",confirmPassword:"",firstName:"",lastName:"",role:"STUDENT"}),[r,s]=(0,n.useState)({}),[a,o]=(0,n.useState)(!1),[i,l]=(0,n.useState)(""),[c,d]=(0,n.useState)(""),[u,h]=(0,n.useState)(!1),[m,f]=(0,n.useState)(!1),{register:p}=(X(),is()),[g,x]=(0,n.useState)((()=>document.documentElement.classList.contains("dark")));(0,n.useEffect)((()=>{const e=new MutationObserver((()=>{x(document.documentElement.classList.contains("dark"))}));return e.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>e.disconnect()}),[]);const b=e=>{const{name:n,value:a}=e.target;t((e=>({...e,[n]:a}))),l(""),d(""),r[n]&&s((e=>({...e,[n]:""})))};return(0,as.jsx)("div",{className:"md:py-28 flex items-center justify-center",children:(0,as.jsxs)("div",{className:"w-full max-w-5xl mx-4 2xl:mx-auto flex flex-col md:flex-row items-center justify-center rounded-2xl shadow-xl py-12 2xl:py-28 px-8 border border-white/10 dark:border-gray-700 backdrop-blur-md bg-gray-100 dark:bg-transparent",children:[(0,as.jsxs)("div",{className:"w-full lg:w-1/2 flex flex-col items-center justify-center",children:[c&&(0,as.jsxs)("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative",role:"alert",children:[(0,as.jsx)("strong",{className:"font-bold",children:"Success!"}),(0,as.jsxs)("span",{className:"block sm:inline",children:[" ",c]})]}),(0,as.jsx)(Te,{to:"/",children:(0,as.jsx)("img",{src:"/images/new-logo.png",alt:"MathQuest Logo",className:"w-40 h-40 md:w-72 md:h-72 object-contain mb-2 drop-shadow-xl",draggable:"false"})}),(0,as.jsx)(po,{type:"h1",fontSize:"5xl",weight:"thin",className:" text-primary/80 dark:text-white/80 mb-2 text-center drop-shadow-lg",children:"Create Account"})]}),(0,as.jsx)("div",{className:"w-full lg:w-1/2 flex flex-col justify-center mt-5 lg:mt-0",children:(0,as.jsxs)("div",{className:"w-full md:max-w-xs mx-auto",children:[(0,as.jsxs)("form",{className:"space-y-6",onSubmit:async r=>{if(r.preventDefault(),l(""),d(""),(()=>{const t={};e.username.trim()?/^[a-zA-Z0-9_]+$/.test(e.username)||(t.username="Username can only contain letters, numbers, and underscores"):t.username="Username is required",e.firstName.trim()||(t.firstName="First name is required"),e.lastName.trim()||(t.lastName="Last name is required"),e.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email.trim())||(t.email="Please enter a valid email address format"):t.email="Email is required";return e.password?e.password.length<6&&(t.password="Password must be at least 6 characters"):t.password="Password is required",e.password!==e.confirmPassword&&(t.confirmPassword="Passwords do not match"),s(t),0===Object.keys(t).length})()){o(!0);try{const r={username:e.username,email:e.email,password:e.password,firstName:e.firstName,lastName:e.lastName,role:e.role},n=await p(r);n&&n.message?n.message.startsWith("Error:")?l(n.message):(d(n.message),t({username:"",email:"",password:"",confirmPassword:"",firstName:"",lastName:"",role:"STUDENT"}),s({})):l("Failed to create account. Please check the details.")}catch(n){console.error("Registration error:",n),l(n.message||"An error occurred during registration")}finally{o(!1)}}},children:[i&&(0,as.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:(0,as.jsx)("span",{className:"block sm:inline",children:i})}),(0,as.jsxs)("div",{className:"",children:[(0,as.jsxs)("div",{className:"grid grid-cols-1 gap-y-4 gap-x-3 sm:grid-cols-2 mb-3",children:[(0,as.jsxs)("div",{children:[(0,as.jsx)("label",{htmlFor:"firstName",className:"sr-only",children:"First Name"}),(0,as.jsx)(Si,{id:"firstName",name:"firstName",type:"text",required:!0,variant:"form",placeholder:"First Name",value:e.firstName,onChange:b}),r.firstName&&(0,as.jsx)("p",{className:"text-red-500 text-xs mt-1",children:r.firstName})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)("label",{htmlFor:"lastName",className:"sr-only",children:"Last Name"}),(0,as.jsx)(Si,{id:"lastName",name:"lastName",type:"text",required:!0,variant:"form",placeholder:"Last Name",value:e.lastName,onChange:b}),r.lastName&&(0,as.jsx)("p",{className:"text-red-500 text-xs mt-1",children:r.lastName})]})]}),(0,as.jsxs)("div",{className:"mb-3",children:[(0,as.jsx)("label",{htmlFor:"username",className:"sr-only",children:"Username"}),(0,as.jsx)(Si,{id:"username",name:"username",type:"text",required:!0,variant:"form",placeholder:"Username",value:e.username,onChange:b}),r.username&&(0,as.jsx)("p",{className:"text-red-500 text-xs mt-1",children:r.username})]}),(0,as.jsxs)("div",{className:"mb-3",children:[(0,as.jsx)("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),(0,as.jsx)(Si,{id:"email",name:"email",type:"email",required:!0,variant:"form",placeholder:"Email address",value:e.email,onChange:b}),r.email&&(0,as.jsx)("p",{className:"text-red-500 text-xs mt-1",children:r.email})]}),(0,as.jsxs)("div",{className:"mb-3",children:[(0,as.jsx)("label",{htmlFor:"password",className:"sr-only",children:"Password"}),(0,as.jsxs)("div",{className:"relative",children:[(0,as.jsx)(Si,{id:"password",name:"password",type:u?"text":"password",required:!0,variant:"form",placeholder:"Password",value:e.password,onChange:b}),(0,as.jsx)("button",{type:"button",onClick:()=>{h((e=>!e))},className:"absolute inset-y-0 right-8 flex items-center text-gray-500 z-10 bg-transparent","aria-label":"Toggle password visibility",style:{background:"none",border:"none",padding:0},children:u?(0,as.jsx)(Ha,{}):(0,as.jsx)(Wa,{})})]}),r.password&&(0,as.jsx)("p",{className:"text-red-500 text-xs mt-1",children:r.password})]}),(0,as.jsxs)("div",{className:"mb-3",children:[(0,as.jsx)("label",{htmlFor:"confirmPassword",className:"sr-only",children:"Confirm Password"}),(0,as.jsxs)("div",{className:"relative",children:[(0,as.jsx)(Si,{id:"confirmPassword",name:"confirmPassword",type:m?"text":"password",required:!0,variant:"form",placeholder:"Confirm Password",value:e.confirmPassword,onChange:b}),(0,as.jsx)("button",{type:"button",onClick:()=>{f((e=>!e))},className:"absolute inset-y-0 right-8 flex items-center text-gray-500 z-10 bg-transparent","aria-label":"Toggle confirm password visibility",style:{background:"none",border:"none",padding:0},children:m?(0,as.jsx)(Ha,{}):(0,as.jsx)(Wa,{})})]}),r.confirmPassword&&(0,as.jsx)("p",{className:"text-red-500 text-xs mt-1",children:r.confirmPassword})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)("label",{htmlFor:"role",className:"sr-only",children:"Role"}),(0,as.jsxs)("select",{id:"role",name:"role",required:!0,className:"appearance-none rounded-md relative block w-full py-4 px-4 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm bg-gray-200 dark:bg-white/80",value:e.role,onChange:b,style:g?{backgroundColor:"white"}:{},children:[(0,as.jsx)("option",{value:"STUDENT",children:"Student"}),(0,as.jsx)("option",{value:"TEACHER",children:"Teacher"})]})]})]}),(0,as.jsx)("div",{children:(0,as.jsx)(bs,{type:"submit",variant:"default",size:"sm",rounded:"full",className:"w-full",children:a?"Creating account...":"Create account"})})]}),(0,as.jsxs)("div",{className:"flex justify-center mt-6",children:[(0,as.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Already have an account?"}),(0,as.jsx)(Te,{to:"/login",className:"ml-2 -mt-[0.5px] text-blue-600 dark:text-blue-400 hover:underline",children:"Sign In"})]})]})})]})})},mc=()=>{const[e,t]=(0,n.useState)(""),[r,s]=(0,n.useState)(""),[a,o]=(0,n.useState)(""),[i,l]=(0,n.useState)(!1),c=X();return(0,as.jsx)("div",{className:"md:py-28 flex items-center justify-center",children:(0,as.jsx)("div",{className:"w-full max-w-xl mx-4 flex flex-col items-center justify-center rounded-2xl shadow-xl py-12 px-8 border border-white/10 dark:border-gray-700 backdrop-blur-md bg-gray-100 dark:bg-transparent",children:(0,as.jsxs)("div",{className:"w-full max-w-md mx-auto",children:[(0,as.jsxs)("div",{className:"text-center",children:[(0,as.jsx)(po,{type:"h1",fontSize:"3xl",weight:"bold",className:"mb-6 text-gray-900 dark:text-white",children:"Forgot Password"}),(0,as.jsx)("p",{className:"text-gray-600 dark:text-gray-300 mb-8",children:"Enter your email address and we'll send you instructions to reset your password."})]}),(0,as.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:async t=>{if(t.preventDefault(),s(""),o(""),l(!0),!e.trim())return s("Email is required"),void l(!1);try{const t=await ts.forgotPassword(e);o(t.message),setTimeout((()=>{c("/login",{state:{message:"Please check your email for password reset instructions."}})}),3e3)}catch(r){s(r.message)}finally{l(!1)}},children:[r&&(0,as.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:(0,as.jsx)("span",{className:"block sm:inline",children:r})}),a&&(0,as.jsx)("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative",role:"alert",children:(0,as.jsx)("span",{className:"block sm:inline",children:a})}),(0,as.jsxs)("div",{children:[(0,as.jsx)("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),(0,as.jsx)(Si,{id:"email",name:"email",type:"email",required:!0,variant:"form",placeholder:"Email address",value:e,onChange:e=>t(e.target.value)})]}),(0,as.jsx)("div",{children:(0,as.jsx)(bs,{type:"submit",disabled:i,variant:"default",size:"sm",className:"w-full",rounded:"full",children:i?"Sending...":"Send Reset Instructions"})}),(0,as.jsx)("div",{className:"text-center",children:(0,as.jsx)(bs,{variant:"link",size:"sm",onClick:()=>c("/login"),className:"text-primary flex items-center justify-center group",children:(0,as.jsxs)("span",{className:"flex items-center gap-1 group-hover:underline",children:[(0,as.jsx)(Bs,{}),"Back to Login"]})})})]})]})})})},fc=()=>{const[e,t]=(0,n.useState)(""),[r,s]=(0,n.useState)(""),[a,o]=(0,n.useState)(!1),[i,l]=(0,n.useState)(!1),[c,d]=(0,n.useState)(""),[u,h]=(0,n.useState)(""),[m,f]=(0,n.useState)(!1),p=X(),g=Z(),{darkMode:x}=ds(),b=new URLSearchParams(g.search).get("token");return b?(0,as.jsx)("div",{className:"min-h-screen md:py-20 py-10 flex items-center justify-center px-4 sm:px-6",style:{backgroundImage:x?"linear-gradient(180deg, rgba(2,6,23,1) 0%, rgba(3,7,18,1) 100%)":"url('/images/game-images/map.png')",backgroundSize:"cover",backgroundRepeat:"repeat"},children:(0,as.jsx)("div",{className:"w-full max-w-md sm:max-w-lg lg:max-w-xl mx-auto flex flex-col items-center justify-center rounded-2xl shadow-2xl py-8 sm:py-10 px-5 sm:px-8 border border-white/10 dark:border-yellow-600/40 backdrop-blur-sm",style:{background:x?"rgba(10, 13, 26, 0.85)":"#f5ecd2",boxShadow:x?"0 10px 25px rgba(255, 215, 0, 0.08)":"0 10px 25px rgba(0,0,0,0.1)"},children:(0,as.jsxs)("div",{className:"w-full",children:[(0,as.jsxs)("div",{className:"flex items-center justify-center gap-2 sm:gap-3",children:[(0,as.jsx)(ia,{className:(x?"text-yellow-400":"text-yellow-700")+" text-lg sm:text-xl"}),(0,as.jsx)(po,{type:"h1",fontSize:"3xl",weight:"bold",className:(x?"text-yellow-300":"text-gray-900")+" text-2xl sm:text-3xl",children:"Reset Password"}),(0,as.jsx)(Oa,{className:(x?"text-yellow-400":"text-yellow-700")+" text-lg sm:text-xl"})]}),(0,as.jsx)("p",{className:"text-center mt-2 "+(x?"text-gray-300":"text-gray-700")+" text-sm sm:text-base",children:"Enter a new secret code to unlock your treasure chest."}),(0,as.jsxs)("form",{className:"mt-8 space-y-5 sm:space-y-6",onSubmit:async t=>{if(t.preventDefault(),d(""),h(""),f(!0),!b)return d("Invalid or missing reset token"),void f(!1);if(e.length<6)return d("Password must be at least 6 characters long"),void f(!1);if(e!==r)return d("Passwords do not match"),void f(!1);try{const t=await ts.resetPassword(b,e,r);h(t.message),setTimeout((()=>{p("/login",{state:{message:"Password has been reset successfully. Please login with your new password."}})}),3e3)}catch(n){d(n.message)}finally{f(!1)}},children:[c&&(0,as.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:(0,as.jsx)("span",{className:"block sm:inline",children:c})}),u&&(0,as.jsx)("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative",role:"alert",children:(0,as.jsx)("span",{className:"block sm:inline",children:u})}),(0,as.jsxs)("div",{className:"space-y-4",children:[(0,as.jsxs)("div",{children:[(0,as.jsx)("label",{htmlFor:"newPassword",className:"sr-only",children:"New Password"}),(0,as.jsxs)("div",{className:"relative",children:[(0,as.jsx)(Si,{id:"newPassword",name:"newPassword",type:a?"text":"password",required:!0,variant:"form",placeholder:"New Password",value:e,onChange:e=>t(e.target.value),className:(x?"!bg-[#0f1428] !text-gray-100":"!bg-[#fbf4de] !text-gray-900")+" text-sm sm:text-base"}),(0,as.jsx)("button",{type:"button",onClick:()=>{o((e=>!e))},className:"absolute inset-y-0 right-4 sm:right-8 flex items-center text-gray-500 z-10 bg-transparent","aria-label":"Toggle new password visibility",style:{background:"none",border:"none",padding:0},children:a?(0,as.jsx)(Ha,{}):(0,as.jsx)(Wa,{})})]})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)("label",{htmlFor:"confirmPassword",className:"sr-only",children:"Confirm Password"}),(0,as.jsxs)("div",{className:"relative",children:[(0,as.jsx)(Si,{id:"confirmPassword",name:"confirmPassword",type:i?"text":"password",required:!0,variant:"form",placeholder:"Confirm Password",value:r,onChange:e=>s(e.target.value),className:(x?"!bg-[#0f1428] !text-gray-100":"!bg-[#fbf4de] !text-gray-900")+" text-sm sm:text-base"}),(0,as.jsx)("button",{type:"button",onClick:()=>{l((e=>!e))},className:"absolute inset-y-0 right-4 sm:right-8 flex items-center text-gray-500 z-10 bg-transparent","aria-label":"Toggle confirm password visibility",style:{background:"none",border:"none",padding:0},children:i?(0,as.jsx)(Ha,{}):(0,as.jsx)(Wa,{})})]})]})]}),(0,as.jsx)("div",{className:"flex items-center gap-2",children:(0,as.jsx)(bs,{type:"submit",disabled:m,variant:"default",size:"sm",rounded:"full",className:"w-full",children:m?"Hoisting Sails...":"Reset Password"})}),(0,as.jsx)("div",{className:"text-center",children:(0,as.jsx)(bs,{variant:"link",size:"sm",onClick:()=>p("/login"),className:"flex items-center justify-center group "+(x?"text-yellow-300":"text-primary")+" text-sm sm:text-base",children:(0,as.jsxs)("span",{className:"flex items-center gap-1 group-hover:underline",children:[(0,as.jsx)(Bs,{}),"Back to Login"]})})})]})]})})}):(0,as.jsx)("div",{className:"min-h-screen md:py-20 py-10 flex items-center justify-center px-4 sm:px-6",style:{backgroundImage:x?"linear-gradient(180deg, rgba(2,6,23,1) 0%, rgba(3,7,18,1) 100%)":"linear-gradient(135deg, #fef3c7 0%, #fde68a 50%, #f59e0b 100%)",backgroundSize:"cover",backgroundRepeat:"no-repeat"},children:(0,as.jsx)("div",{className:"w-full max-w-md sm:max-w-lg lg:max-w-xl mx-auto flex flex-col items-center justify-center rounded-2xl shadow-2xl py-8 sm:py-10 px-5 sm:px-8 border border-white/10 dark:border-yellow-600/40 backdrop-blur-sm",style:{background:x?"rgba(10, 13, 26, 0.85)":"#f5ecd2",boxShadow:x?"0 10px 25px rgba(255, 215, 0, 0.08)":"0 10px 25px rgba(0,0,0,0.1)"},children:(0,as.jsxs)("div",{className:"w-full",children:[(0,as.jsxs)("div",{className:"flex items-center justify-center gap-2 sm:gap-3 mb-2",children:[(0,as.jsx)(ia,{className:(x?"text-yellow-400":"text-yellow-700")+" text-lg sm:text-xl"}),(0,as.jsx)(po,{type:"h1",fontSize:"3xl",weight:"bold",className:(x?"text-yellow-300":"text-gray-900")+" text-2xl sm:text-3xl",children:"Invalid Reset Link"}),(0,as.jsx)(Oa,{className:(x?"text-yellow-400":"text-yellow-700")+" text-lg sm:text-xl"})]}),(0,as.jsx)("p",{className:"text-center mb-6 "+(x?"text-gray-300":"text-gray-700")+" text-sm sm:text-base",children:"The password reset link is invalid or has expired. Please request a new password reset."}),(0,as.jsx)("div",{className:"flex items-center justify-center",children:(0,as.jsx)(bs,{variant:"default",size:"sm",onClick:()=>p("/forgot-password"),className:"!rounded-full w-full sm:w-auto",children:"Request New Reset Link"})}),(0,as.jsxs)("div",{className:"flex items-center justify-center gap-2 mt-6 opacity-80",children:[(0,as.jsx)(Vs,{className:(x?"text-gray-400":"text-gray-500")+" text-base sm:text-lg"}),(0,as.jsx)("span",{className:(x?"text-gray-400":"text-gray-600")+" text-xs sm:text-sm",children:"Set sail again from the login page"})]})]})})})},pc=()=>{const e=X(),{user:t,isAdmin:r}=is(),[s,a]=(0,n.useState)("system"),[o,i]=(0,n.useState)({maintenanceMode:!1,registrationEnabled:!0,maxLoginAttempts:5,sessionTimeout:30,emailNotifications:!0,passwordPolicy:{minLength:8,requireNumbers:!0,requireSpecialChars:!0,requireUppercase:!0},contentSettings:{maxFileSize:5,allowedFileTypes:["pdf","doc","docx","jpg","png"],autoSaveInterval:5},notificationSettings:{emailOnLogin:!0,emailOnPasswordChange:!0,emailOnRoleChange:!0,emailOnSystemUpdate:!0}}),[l,c]=(0,n.useState)([{id:1,name:"Admin",permissions:["all"]},{id:2,name:"Teacher",permissions:["view_reports","manage_content"]},{id:3,name:"Student",permissions:["view_content","submit_answers"]}]),[d,u]=(0,n.useState)({name:"",permissions:[]});(0,n.useEffect)((()=>{r()||e("/admin")}),[r,e]);return(0,as.jsx)("div",{className:"bg-[#E7EFFC] min-h-screen px-4 sm:px-6 lg:px-8 py-8 lg:py-16",children:(0,as.jsx)("div",{className:"max-w-5xl mx-auto",children:(0,as.jsx)(po,{type:"h1",fontSize:"3xl",weight:"bold",className:"mb-6 text-center",children:"Not yet available"})})})},gc=()=>{var e,t;const r=X(),[s,a]=(0,n.useState)(""),[o,i]=(0,n.useState)(!1),[l,c]=(0,n.useState)(""),[d,u]=(0,n.useState)(null);return(0,as.jsx)("div",{className:"md:min-h-screen flex items-center justify-center px-4 sm:px-6 lg:px-8 mt-20 md:-mt-32",children:(0,as.jsx)("div",{className:"w-full max-w-md mx-auto",children:d?(0,as.jsxs)("div",{className:"bg-white p-6 sm:p-8 rounded-lg shadow-xl text-dark text-center",children:[(0,as.jsx)(po,{type:"h2",fontSize:"3xl",weight:"semibold",className:"mb-3 sm:mb-4",children:"Successfully Joined!"}),(0,as.jsxs)("div",{className:"mb-4 sm:mb-6",children:[(0,as.jsxs)("p",{className:"text-base sm:text-lg",children:["You've joined: ",(0,as.jsx)("span",{className:"font-bold",children:d.name})]}),d.description&&(0,as.jsx)("p",{className:"text-sm text-gray-800 mt-1",children:d.description}),(0,as.jsxs)("p",{className:"text-sm text-gray-800 mt-1",children:["Teacher: ",null===(e=d.teacher)||void 0===e?void 0:e.firstName," ",null===(t=d.teacher)||void 0===t?void 0:t.lastName]})]}),(0,as.jsx)(bs,{onClick:()=>{r("/student/classrooms")},variant:"secondary",size:"lg",className:"w-full",children:"Go to My Classrooms"})]}):(0,as.jsxs)("div",{className:"text-center",children:[(0,as.jsx)(po,{type:"h1",fontSize:"5xl",weight:"bold",className:"mb-4 text-primary dark:text-white",children:"Join Classroom"}),(0,as.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),s.trim()){i(!0),c("");try{const e=await qs.joinClassroom(s.trim());u(e),a("")}catch(t){console.error("Join classroom error in component:",t),c(t.message||"Failed to join classroom. Please check the code and try again.")}finally{i(!1)}}else c("Please enter a class code")},className:"space-y-5 sm:space-y-6",children:[(0,as.jsx)("div",{children:(0,as.jsx)(Si,{id:"classCode",name:"classCode",type:"text",required:!0,placeholder:"Enter class code",variant:"form",className:"!bg-gray-300",value:s,onChange:e=>a(e.target.value),disabled:o})}),l&&!o&&(0,as.jsx)("p",{className:"dark:text-gray-200 text-gray-700 text-sm text-center -mt-2 mb-2",children:l}),(0,as.jsx)("div",{children:(0,as.jsx)(bs,{type:"submit",disabled:o,variant:"default",size:"lg",className:"w-full",children:o?"Joining...":"Join"})})]})]})})})},xc=()=>{const e=X(),{isTeacher:t}=is(),[r,s]=(0,n.useState)(!1),[a,o]=(0,n.useState)(""),[i,l]=(0,n.useState)(""),[c,d]=(0,n.useState)(null),[u,h]=(0,n.useState)({shortCode:"",name:"",description:"",image:null}),m=e=>{const{name:t,value:r}=e.target;h((e=>({...e,[t]:r})))};return(0,as.jsxs)("div",{className:"relative px-4 sm:px-6 lg:px-8 pt-16 md:pt-0 lg:py-8 transition-colors duration-300",children:[(0,as.jsxs)("div",{className:"pointer-events-none absolute inset-0 -z-10",children:[(0,as.jsx)("div",{className:"absolute inset-0 opacity-70 dark:opacity-0",style:{backgroundImage:"url('/images/game-images/map.png')",backgroundRepeat:"repeat",backgroundSize:"600px 600px"}}),(0,as.jsx)("div",{className:"absolute inset-0 opacity-0 dark:opacity-70",style:{backgroundImage:"linear-gradient(180deg, rgba(1,10,20,0.9), rgba(1,10,20,0.95)), url('/images/game-images/underwater.png')",backgroundRepeat:"repeat",backgroundSize:"700px 700px"}}),(0,as.jsx)("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_center,transparent_60%,rgba(0,0,0,0.25))]"})]}),(0,as.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,as.jsxs)("div",{className:"flex items-center gap-3 mb-4 text-amber-900 dark:text-yellow-200",children:[(0,as.jsx)(Aa,{className:"text-blue-700 dark:text-yellow-400"}),(0,as.jsx)("span",{className:"text-sm font-semibold tracking-wide",children:"Set Sail on a New Classroom Adventure"})]}),(0,as.jsx)(po,{type:"h1",fontSize:"5xl",weight:"bold",className:"mb-6 text-amber-900 dark:text-yellow-50",children:"Create a New Classroom"}),(0,as.jsxs)("div",{className:"rounded-2xl overflow-hidden border border-amber-200 dark:border-yellow-500/30 shadow-lg bg-amber-50/80 dark:bg-slate-900/60",children:[(0,as.jsx)("div",{className:"h-[2px] w-full bg-[repeating-linear-gradient(90deg,rgba(180,83,9,0.35)_0px,rgba(180,83,9,0.35)_10px,transparent_10px,transparent_20px)] dark:bg-[repeating-linear-gradient(90deg,rgba(234,179,8,0.5)_0px,rgba(234,179,8,0.5)_10px,transparent_10px,transparent_20px)]"}),(0,as.jsxs)("div",{className:"p-6 sm:p-8",children:[a&&(0,as.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert",children:[(0,as.jsx)("span",{className:"block sm:inline",children:a}),(0,as.jsxs)("button",{className:"absolute top-0 bottom-0 right-0 px-4 py-3",onClick:()=>o(""),children:[(0,as.jsx)("span",{className:"sr-only",children:"Close"}),(0,as.jsx)("span",{className:"text-red-500",children:"\xd7"})]})]}),c?(0,as.jsxs)("div",{className:"bg-green-50 border border-green-400 rounded-md p-6 mb-6",children:[(0,as.jsx)(po,{type:"h2",fontSize:"lg",weight:"medium",className:"text-green-800 mb-2",children:"Classroom Created Successfully!"}),(0,as.jsxs)("div",{className:"mb-4",children:[(0,as.jsxs)("p",{className:"text-green-700",children:["Name: ",c.name]}),(0,as.jsxs)("p",{className:"text-green-700",children:["Join Code: ",(0,as.jsx)("span",{className:"font-bold",children:c.classCode})]}),(0,as.jsxs)("p",{className:"text-green-700",children:["Short Code: ",(0,as.jsx)("span",{className:"font-bold",children:c.shortCode})]}),(0,as.jsx)("p",{className:"text-sm text-green-600 mt-2",children:"Share the Class Code with your students so they can join your classroom."})]}),(0,as.jsx)("button",{onClick:()=>{e("/teacher/classrooms")},className:"w-full flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 rounded-full",children:"Go to My Classrooms"})]}):(0,as.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),s(!0),o(""),l(""),d(null);try{const e=new FormData;e.append("name",u.name),e.append("description",u.description),e.append("shortCode",u.shortCode),u.image&&e.append("image",u.image);const t=await qs.createClassroom(e);d(t),l(`Classroom "${t.name}" created successfully!`),h({shortCode:"",name:"",description:"",image:null})}catch(t){console.error("Create classroom error in component:",t),o(t.message||"Failed to create classroom")}finally{s(!1)}},className:"space-y-4",children:[(0,as.jsxs)("div",{children:[(0,as.jsxs)(Mi,{htmlFor:"shortCode",className:"block text-sm font-medium text-amber-900 dark:text-yellow-200 mb-1",children:["Classroom Code ",(0,as.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,as.jsxs)("div",{className:"relative",children:[(0,as.jsx)("span",{className:"absolute inset-y-0 left-0 pl-3 flex items-center text-amber-700 dark:text-yellow-300",children:(0,as.jsx)(ia,{})}),(0,as.jsx)(Si,{id:"shortCode",name:"shortCode",type:"text",required:!0,placeholder:"e.g. MATH-101",variant:"gray",className:"mt-1 block w-full rounded-none pl-10",value:u.shortCode,onChange:m,title:"A short code to identify your classroom (e.g., MATH-101)"})]})]}),(0,as.jsxs)("div",{children:[(0,as.jsxs)(Mi,{htmlFor:"name",className:"block text-sm font-medium text-amber-900 dark:text-yellow-200 mb-1",children:["Classroom Name ",(0,as.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,as.jsxs)("div",{className:"relative",children:[(0,as.jsx)("span",{className:"absolute inset-y-0 left-0 pl-3 flex items-center text-amber-700 dark:text-yellow-300",children:(0,as.jsx)(Ea,{})}),(0,as.jsx)(Si,{id:"name",name:"name",type:"text",required:!0,variant:"gray",placeholder:"e.g. Mathematics for Beginners",className:"mt-1 block w-full rounded-none pl-10",value:u.name,onChange:m,title:"The display name of your classroom"})]})]}),(0,as.jsxs)("div",{children:[(0,as.jsxs)(Mi,{htmlFor:"description",className:"block text-sm font-medium text-amber-900 dark:text-yellow-200 mb-1",children:["Description ",(0,as.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,as.jsxs)("div",{className:"relative",children:[(0,as.jsx)("span",{className:"absolute top-3 left-3 text-amber-700 dark:text-yellow-300",children:(0,as.jsx)(Aa,{})}),(0,as.jsx)($l,{id:"description",name:"description",rows:"3",placeholder:"Brief description of the classroom (mission, topics, schedule)",variant:"gray",className:"mt-1 block w-full rounded-none pl-10",value:u.description,required:!0,onChange:m,title:"A short summary to guide your crew"})]})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)(Mi,{htmlFor:"image",className:"block text-sm font-medium text-amber-900 dark:text-yellow-200 mb-1",children:"Classroom Image (Optional)"}),(0,as.jsx)(Si,{id:"image",name:"image",type:"file",accept:"image/*",variant:"gray",className:"mt-1 block w-full text-sm text-gray-700 dark:text-yellow-100 file:mr-4 file:py-5 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-amber-100 file:text-amber-800 dark:file:bg-yellow-200 dark:file:text-amber-900 hover:file:bg-amber-200 dark:hover:file:bg-yellow-300 !border-none rounded-none",onChange:e=>{const t=e.target.files[0];if(t){if(t.size>5242880)return void o("Image size should be less than 5MB");h((e=>({...e,image:t})))}},title:"Optional banner for your classroom"}),(0,as.jsx)("p",{className:"mt-1 text-sm text-amber-800 dark:text-yellow-200",children:"Maximum file size: 5MB"})]}),(0,as.jsx)("div",{className:"pt-4",children:(0,as.jsx)(bs,{type:"submit",disabled:r,variant:"default",size:"sm",className:"w-full bg-gradient-to-r from-yellow-400 via-amber-400 to-yellow-500 text-amber-900 hover:from-yellow-500 hover:via-amber-500 hover:to-yellow-600 transition-colors shadow-md border-amber-300 dark:border-yellow-400",rounded:"full",title:"Create classroom",children:(0,as.jsxs)("span",{className:"inline-flex items-center gap-2",children:[(0,as.jsx)(aa,{}),r?"Creating...":"Create Classroom"]})})})]}),!c&&(0,as.jsx)("div",{className:"mt-6 max-w-[200px] md:max-w-none ",children:(0,as.jsxs)("p",{className:"text-sm text-amber-800 dark:text-yellow-100",children:["Already have classrooms? ",(0,as.jsx)("a",{href:"/classrooms",className:"text-blue-700 dark:text-yellow-300 underline-offset-2 underline hover:text-blue-900 dark:hover:text-yellow-200",children:"View your classrooms"})]})})]}),(0,as.jsx)("div",{className:"h-[2px] w-full bg-[repeating-linear-gradient(90deg,rgba(180,83,9,0.35)_0px,rgba(180,83,9,0.35)_10px,transparent_10px,transparent_20px)] dark:bg-[repeating-linear-gradient(90deg,rgba(234,179,8,0.5)_0px,rgba(234,179,8,0.5)_10px,transparent_10px,transparent_20px)]"})]})]})]})},bc="/lessons",yc={getLessonsByClassroomId:async e=>{try{const t=await Xn.get(`${bc}/classroom/${e}`);return console.log("Lessons fetched:",t.data),t.data}catch(t){throw console.error("Error fetching lessons:",t),t}},getLessonById:async e=>{try{const t=await Xn.get(`${bc}/${e}`);return console.log("Lesson fetched:",t.data),t.data}catch(t){throw console.error("Error fetching lesson:",t),t}},createLesson:async e=>{try{console.log("Creating lesson with data:",e);const t=new FormData;t.append("title",e.title),t.append("description",e.description||""),t.append("classroomId",e.classroomId),e.orderIndex&&t.append("orderIndex",e.orderIndex),e.image&&t.append("image",e.image);const r=await Xn.post(bc,t,{headers:{"Content-Type":"multipart/form-data"}});return console.log("Lesson created:",r.data),r.data}catch(t){throw console.error("Error creating lesson:",t),t}},updateLesson:async(e,t)=>{try{let r;console.log("Updating lesson with data:",t),t instanceof FormData?(r=t,console.log("Using provided FormData object")):(r=new FormData,r.append("title",t.title),r.append("description",t.description||""),t.classroomId&&r.append("classroomId",t.classroomId),t.orderIndex&&r.append("orderIndex",t.orderIndex),t.image&&t.image instanceof File&&r.append("image",t.image));const n=await Xn.put(`${bc}/${e}`,r,{headers:{"Content-Type":"multipart/form-data"}});return console.log("Lesson updated:",n.data),n.data}catch(r){throw console.error("Error updating lesson:",r),r}},deleteLesson:async e=>{try{return await Xn.delete(`${bc}/${e}`),console.log("Lesson deleted successfully"),!0}catch(t){throw console.error("Error deleting lesson:",t),t}},getLessonsWithDates:async e=>{try{const t=await Xn.get(`${bc}/classroom/${e}`);return console.log("Lessons with dates fetched:",t.data),t.data}catch(t){throw console.error("Error fetching lessons with dates:",t),t}},addActivity:async e=>{try{return(await Xn.post("/api/activities",e)).data}catch(t){throw console.error("Error adding activity:",t),t}},markLessonContentAsRead:async(e,t)=>{try{return(await Xn.post(`${bc}/${e}/mark-read`,{studentId:t})).data}catch(r){throw console.error("Error marking lesson content as read:",r),r}},markLessonQuizAsCompleted:async(e,t,r)=>{try{return(await Xn.post(`${bc}/${e}/mark-quiz-completed`,{studentId:t,score:r})).data}catch(n){throw console.error("Error marking lesson quiz as completed:",n),n}},getLessonCompletionStats:async e=>{try{return(await Xn.get(`${bc}/${e}/completion-stats`)).data}catch(t){throw console.error("Error getting lesson completion stats:",t),t}},getLessonCompletionStatus:async(e,t)=>{try{return(await Xn.get(`${bc}/${e}/completion-status/${t}`)).data}catch(r){throw console.error("Error getting lesson completion status:",r),r}},getStudentsWhoReadLesson:async e=>{try{console.log(`[lessonService] Fetching students who read lesson ${e}`);const t=await Xn.get(`${bc}/${e}/students-read`);return console.log("[lessonService] Received students who read:",t.data),t.data}catch(t){throw console.error(`[lessonService] Error fetching students who read lesson ${e}:`,t),t}}},vc=()=>{const e=localStorage.getItem("token");if(console.log("[LeaderboardService] Getting auth header with token:",e?"Token exists":"No token"),!e)throw new Error("No authentication token found");return{headers:{Authorization:`Bearer ${e}`}}},wc=async e=>{try{console.log("[LeaderboardService] Fetching classroom leaderboard for classroom:",e);const t=await Kn.get(`/quizzes/classroom/${e}/leaderboard`,vc());return console.log("[LeaderboardService] Classroom leaderboard response:",t.data),t.data}catch(r){var t;if(console.error("[LeaderboardService] Error fetching classroom leaderboard:",r),401===(null===(t=r.response)||void 0===t?void 0:t.status))throw new Error("User not authenticated");throw r}},jc=async e=>{try{console.log("[LeaderboardService] Fetching quiz leaderboard for quiz:",e);const t=await Kn.get(`/quizzes/${e}/leaderboard`,vc());return console.log("[LeaderboardService] Quiz leaderboard response:",t.data),t.data}catch(r){var t;if(console.error("[LeaderboardService] Error fetching quiz leaderboard:",r),401===(null===(t=r.response)||void 0===t?void 0:t.status))throw new Error("User not authenticated");throw r}},Nc=async e=>{try{console.log("[LeaderboardService] Fetching quizzes for classroom:",e);const t=await Kn.get(`/quizzes/classroom/${e}`,vc());return console.log("[LeaderboardService] Classroom quizzes response:",t.data),t.data}catch(r){var t;if(console.error("[LeaderboardService] Error fetching classroom quizzes:",r),401===(null===(t=r.response)||void 0===t?void 0:t.status))throw new Error("User not authenticated");throw r}},kc=async e=>{try{console.log("[LeaderboardService] Fetching student quiz attempts for student:",e);const t=await Kn.get(`/quizzes/attempts/student/${e}`,vc());return console.log("[LeaderboardService] Student quiz attempts response:",t.data),t.data}catch(r){var t;if(console.error("[LeaderboardService] Error fetching student quiz attempts:",r),401===(null===(t=r.response)||void 0===t?void 0:t.status))throw new Error("User not authenticated");throw r}},Sc=async e=>{console.log("[API] Fetching student performance for classroom:",e);const t=(()=>{try{const e=JSON.parse(localStorage.getItem("user"));if(console.log("[LeaderboardService] Current user data:",e),null!==e&&void 0!==e&&e.id)return e.id;const t=localStorage.getItem("userId");if(t)return t;throw new Error("Could not find user ID")}catch(e){throw console.error("[LeaderboardService] Error getting user ID:",e),new Error("Could not get user ID")}})(),r=vc();try{console.log("[API] Fetching performance data for user:",t);const n=await Kn.get(`/quizzes/performance/student/${t}/classroom/${e}`,r);console.log("[API] Performance data:",n.data),console.log("[API] Fetching available quizzes...");const s=await Kn.get(`/quizzes/classroom/${e}/available`,r);console.log("[API] Available quizzes:",s.data),console.log("[API] Fetching student attempts...");const a=await Kn.get(`/quizzes/attempts/student/${t}`,r);console.log("[API] Student attempts:",a.data);const o=n.data,i=s.data,l=a.data.filter((t=>t.classroomId===Number(e)));console.log("[Processing] Filtered classroom attempts:",l);const c=[...new Set(l.map((e=>e.quizId)))],d=i.filter((e=>!c.includes(e.id))),u=new Map;l.forEach((e=>{const t=u.get(e.quizId);(!t||e.score>t.score)&&u.set(e.quizId,e)}));const h=Array.from(u.values()).filter((e=>e.passed)).map((e=>e.quizId)),m={averageScore:o.averageQuizScore||0,totalQuizzes:o.totalQuizzesTaken||0,totalAvailableQuizzes:i.length||0,notTakenQuizzes:d.length||0,passedQuizzes:h.length||0,failedQuizzes:c.length-h.length||0,currentRank:o.rank||"-",bestScore:o.highestScore||0,recentQuizzes:o.recentQuizzes||[],improvement:o.improvement||0,streak:o.streak||0};return console.log("[Processing] Final performance result:",m),m}catch(s){var n;if(console.error("[Error] Error in getStudentPerformance:",s),401===(null===(n=s.response)||void 0===n?void 0:n.status))throw new Error("User not authenticated");throw s}},Cc="/quizzes",_c={createQuiz:async(e,t)=>{console.log("quizService.createQuiz - Request:",{url:`${Cc}/activities/${e}`,data:t});const r=await Xn.post(`${Cc}/activities/${e}`,t);return console.log("quizService.createQuiz - Response:",r.data),r.data},getQuiz:async e=>{console.log("quizService.getQuiz - Request:",{url:`${Cc}/${e}`});const t=await Xn.get(`${Cc}/${e}`);return console.log("quizService.getQuiz - Response:",t.data),t.data},getQuizByActivity:async e=>{console.log("quizService.getQuizByActivity - Request:",{url:`${Cc}/activities/${e}`});try{const t=await Xn.get(`${Cc}/activities/${e}`);return console.log("quizService.getQuizByActivity - Response:",t.data),t.data}catch(t){throw console.error("quizService.getQuizByActivity - Error:",t),t}},updateQuiz:async(e,t)=>{console.log("quizService.updateQuiz - Request:",{url:`${Cc}/${e}`,data:t});const r=await Xn.put(`${Cc}/${e}`,t);return console.log("quizService.updateQuiz - Response:",r.data),r.data},deleteQuiz:async e=>{console.log("quizService.deleteQuiz - Request:",{url:`${Cc}/${e}`}),await Xn.delete(`${Cc}/${e}`)},getQuizzesByClassroom:async e=>{console.log("quizService.getQuizzesByClassroom - Request:",{url:`${Cc}/classroom/${e}`});const t=await Xn.get(`${Cc}/classroom/${e}`);return console.log("quizService.getQuizzesByClassroom - Response:",t.data),t.data},getAvailableQuizzes:async e=>{console.log("quizService.getAvailableQuizzes - Request:",{url:`${Cc}/classroom/${e}/available`});try{const t=await Xn.get(`${Cc}/classroom/${e}/available`);return console.log("quizService.getAvailableQuizzes - Response:",t.data),t.data}catch(t){throw console.error("Error fetching available quizzes:",t),t}},startQuizAttempt:async(e,t)=>{console.log("[quizService] Starting quiz attempt with details:",{quizId:e,studentId:t,url:`${Cc}/${e}/attempts/start`,method:"POST"});try{console.log("[quizService] Making API request to start quiz attempt...");const r=await Xn.post(`${Cc}/${e}/attempts/start`,null,{params:{studentId:t}});return console.log("[quizService] Quiz attempt started successfully:",r.data),r.data}catch(c){var r,n,s,a,o,i,l;throw console.error("[quizService] Failed to start quiz attempt:",{error:c.message,status:null===(r=c.response)||void 0===r?void 0:r.status,statusText:null===(n=c.response)||void 0===n?void 0:n.statusText,data:null===(s=c.response)||void 0===s?void 0:s.data,config:{url:null===(a=c.config)||void 0===a?void 0:a.url,method:null===(o=c.config)||void 0===o?void 0:o.method,params:null===(i=c.config)||void 0===i?void 0:i.params,headers:null===(l=c.config)||void 0===l?void 0:l.headers}}),c}},completeQuizAttempt:async(e,t,r)=>{console.log("quizService.completeQuizAttempt - Request:",{url:`${Cc}/attempts/${e}/complete`,data:{score:t,answers:r}});try{const n=await Xn.post(`${Cc}/attempts/${e}/complete`,{score:t,answers:r});return console.log("quizService.completeQuizAttempt - Response:",n.data),n.data}catch(n){throw console.error("quizService.completeQuizAttempt - Error:",n),n}},getQuizAttempt:async e=>{console.log("quizService.getQuizAttempt - Request:",{url:`${Cc}/attempts/${e}`});const t=await Xn.get(`${Cc}/attempts/${e}`);return console.log("quizService.getQuizAttempt - Response:",t.data),t.data},getQuizAttemptsByStudent:async e=>{console.log("quizService.getQuizAttemptsByStudent - Request:",{url:`${Cc}/attempts/student/${e}`});try{const t=await Xn.get(`${Cc}/attempts/student/${e}`);return console.log("quizService.getQuizAttemptsByStudent - Response:",t.data),t.data}catch(t){return console.error("Error fetching student quiz attempts:",t),[]}},getQuizAttemptsByQuiz:async e=>{console.log("quizService.getQuizAttemptsByQuiz - Request:",{url:`${Cc}/${e}/attempts`});const t=await Xn.get(`${Cc}/${e}/attempts`);return console.log("quizService.getQuizAttemptsByQuiz - Response:",t.data),t.data},getTopQuizAttempts:async e=>{console.log("quizService.getTopQuizAttempts - Request:",{url:`${Cc}/${e}/attempts/top`});const t=await Xn.get(`${Cc}/${e}/attempts/top`);return console.log("quizService.getTopQuizAttempts - Response:",t.data),t.data},getQuizByActivityId:async e=>{try{console.log(`[quizService] Fetching quiz for activity ${e}`);const t=await Xn.get(`${Cc}/activities/${e}`);return console.log("[quizService] Quiz fetched successfully:",t.data),t.data}catch(t){throw console.error("[quizService] Error fetching quiz by activity ID:",t),t}},createQuizAttempt:async(e,t)=>{try{console.log("[quizService] Creating quiz attempt with details:",{quizId:e,studentId:t,url:`${Cc}/${e}/attempts/start`,method:"POST",params:{studentId:t}});const r=await Xn.post(`${Cc}/${e}/attempts/start`,null,{params:{studentId:t}});return console.log("[quizService] Quiz attempt created successfully:",{status:r.status,data:r.data,headers:r.headers}),r.data}catch(c){var r,n,s,a,o,i,l;throw console.error("[quizService] Error creating quiz attempt:",{message:c.message,status:null===(r=c.response)||void 0===r?void 0:r.status,statusText:null===(n=c.response)||void 0===n?void 0:n.statusText,data:null===(s=c.response)||void 0===s?void 0:s.data,config:{url:null===(a=c.config)||void 0===a?void 0:a.url,method:null===(o=c.config)||void 0===o?void 0:o.method,params:null===(i=c.config)||void 0===i?void 0:i.params,headers:null===(l=c.config)||void 0===l?void 0:l.headers}}),c}}},Ec=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,((e,t,r)=>r?r.toUpperCase():t.toLowerCase())))(e);return t.charAt(0).toUpperCase()+t.slice(1)},Ac=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(((e,t,r)=>Boolean(e)&&""!==e.trim()&&r.indexOf(e)===t)).join(" ").trim()},Oc=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var Tc={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const zc=(0,n.forwardRef)(((e,t)=>{let{color:r="currentColor",size:s=24,strokeWidth:a=2,absoluteStrokeWidth:o,className:i="",children:l,iconNode:c,...d}=e;return(0,n.createElement)("svg",{ref:t,...Tc,width:s,height:s,stroke:r,strokeWidth:o?24*Number(a)/Number(s):a,className:Ac("lucide",i),...!l&&!Oc(d)&&{"aria-hidden":"true"},...d},[...c.map((e=>{let[t,r]=e;return(0,n.createElement)(t,r)})),...Array.isArray(l)?l:[l]])})),Pc=(e,t)=>{const r=(0,n.forwardRef)(((r,s)=>{let{className:a,...o}=r;return(0,n.createElement)(zc,{ref:s,iconNode:t,className:Ac(`lucide-${i=Ec(e),i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,a),...o});var i}));return r.displayName=Ec(e),r},Ic=Pc("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]),Lc=Pc("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),Mc=Pc("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),qc=e=>{let{lessons:t,currentLessonId:r,onSelectLesson:s,isStudent:a,unlockedLessons:o=new Set}=e;const{user:i}=is(),{darkMode:l}=ds(),[c,d]=(0,n.useState)({}),[u,h]=(0,n.useState)({});(0,n.useEffect)((()=>{(async()=>{if(!a||null===i||void 0===i||!i.id)return;const e={};for(const n of t)try{const t=await yc.getLessonCompletionStatus(n.id,i.id);console.log(`[LessonSidebar] Fetched completion status for lesson ${n.id}:`,t),e[n.id]=t}catch(r){console.error(`Error fetching completion status for lesson ${n.id}:`,r)}d(e)})()}),[t,null===i||void 0===i?void 0:i.id,a]);const m=e=>{if(!a){const t=u[e];return t?(0,as.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600 flex-shrink-0",children:[(0,as.jsxs)("div",{className:"flex items-center gap-1",title:`${Math.round(t.readPercentage)}% of students read the content`,children:[(0,as.jsx)(Ic,{className:"w-4 h-4"}),(0,as.jsxs)("span",{children:[Math.round(t.readPercentage),"%"]})]}),(0,as.jsxs)("div",{className:"flex items-center gap-1",title:`${Math.round(t.quizCompletionPercentage)}% of students completed the quiz`,children:[(0,as.jsx)(Lc,{className:"w-4 h-4"}),(0,as.jsxs)("span",{children:[Math.round(t.quizCompletionPercentage),"%"]})]})]}):null}{const t=c[e];if(!t)return null;if(t.quizCompleted)return(0,as.jsxs)("div",{className:"flex items-center gap-1 text-green-600 flex-shrink-0",title:"Lesson completed",children:[(0,as.jsx)(Ic,{className:"w-4 h-4"}),(0,as.jsx)(Lc,{className:"w-4 h-4"})]});if(t.contentRead)return(0,as.jsx)("div",{className:"flex items-center gap-1 text-blue-600 flex-shrink-0",title:"Content read, quiz pending",children:(0,as.jsx)(Ic,{className:"w-4 h-4"})})}return null};return(0,as.jsxs)("div",{className:"flex flex-col h-full",children:[(0,as.jsx)("h3",{className:"text-lg font-semibold mb-4 "+(l?"text-gray-100":"text-gray-900"),children:"Lessons"}),(0,as.jsx)("div",{className:"space-y-2 overflow-y-auto",children:t.map(((e,n)=>{const i=(e=>{var r;if(!a)return!0;if(0===e)return!0;const n=t[e-1];if(!n)return!0;const s=c[n.id];return(null===(r=n.activities)||void 0===r?void 0:r.some((e=>"QUIZ"===e.type)))?(null===s||void 0===s?void 0:s.contentRead)&&(null===s||void 0===s?void 0:s.quizCompleted):null===s||void 0===s?void 0:s.contentRead})(n)||o.has(e.id),d=(e=>{var t;const r=c[e.id],n=null===(t=e.activities)||void 0===t?void 0:t.some((e=>"QUIZ"===e.type));return!!r&&(n?r.contentRead&&r.quizCompleted:r.contentRead)})(e),u=e.id===r;(e=>{if(!e)return[];const t=e.filter((e=>"QUIZ"===e.type)).sort(((e,t)=>e.id-t.id));e.filter((e=>"QUIZ"!==e.type))})(e.activities);return(0,as.jsxs)("button",{onClick:()=>i&&s(e.id),className:"w-full text-left p-3 rounded-lg transition-colors flex items-center justify-between\n                "+(u?l?"bg-blue-600 text-white":"bg-blue-100 text-gray-800":i?l?"hover:bg-gray-700 text-gray-200":"hover:bg-gray-100 text-gray-900":"opacity-50 cursor-not-allowed"),disabled:!i,children:[(0,as.jsxs)("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[!i&&(0,as.jsx)(Mc,{className:"w-4 h-4 flex-shrink-0"}),i&&(0,as.jsx)(Ic,{className:"w-4 h-4 flex-shrink-0"}),d&&(0,as.jsx)(Lc,{className:"w-4 h-4 text-green-500 flex-shrink-0"}),(0,as.jsx)("span",{className:"break-words text-sm leading-tight",children:e.title})]}),m(e.id)]},e.id)}))})]})},Rc="/content-blocks",Dc={getContentBlocksByLessonId:async e=>{try{return(await Xn.get(`${Rc}/lesson/${e}`)).data}catch(t){throw console.error("Error fetching content blocks:",t),t}},getContentBlockById:async e=>{try{return(await Xn.get(`${Rc}/${e}`)).data}catch(t){throw console.error("Error fetching content block:",t),t}},createContentBlock:async e=>{try{const t=new FormData;e.title&&t.append("title",e.title),e.subtitle&&t.append("subtitle",e.subtitle),t.append("content",e.content||""),t.append("lessonId",e.lessonId),e.structuredContent&&t.append("structuredContent",e.structuredContent),void 0!==e.orderIndex&&t.append("orderIndex",e.orderIndex),e.images&&t.append("images",e.images),e.attachments&&t.append("attachments",e.attachments);return(await Xn.post(Rc,t,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(t){throw console.error("Error creating content block:",t),t}},updateContentBlock:async(e,t)=>{try{const r=new FormData;t.title&&r.append("title",t.title),t.subtitle&&r.append("subtitle",t.subtitle),r.append("content",t.content||""),r.append("lessonId",t.lessonId),t.structuredContent&&r.append("structuredContent",t.structuredContent),void 0!==t.orderIndex&&r.append("orderIndex",t.orderIndex),t.images&&r.append("images",t.images),t.attachments&&r.append("attachments",t.attachments);return(await Xn.put(`${Rc}/${e}`,r,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(r){throw console.error("Error updating content block:",r),r}},deleteContentBlock:async e=>{try{return await Xn.delete(`${Rc}/${e}`),!0}catch(t){throw console.error("Error deleting content block:",t),t}},getContentBlocksWithDates:async e=>{try{return(await Xn.get(`${Rc}/lesson/${e}/with-dates`)).data}catch(t){throw console.error("Error fetching content blocks with dates:",t),t}}},Fc={createActivity:async e=>{const t=new FormData;t.append("title",e.title),t.append("description",e.description||""),t.append("type",e.type),t.append("classroomId",e.classroomId),t.append("content",e.content||JSON.stringify({}));return(await Xn.post("/activities",t,{headers:{"Content-Type":"multipart/form-data"}})).data},getActivityById:async e=>(await Xn.get(`/activities/${e}`)).data,getActivitiesByClassroom:async e=>(await Xn.get(`/activities/classroom/${e}`)).data,updateActivity:async(e,t)=>{try{return(await Xn.put(`/activities/${e}`,t,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(r){throw console.error("Error updating activity:",r),r}},deleteActivity:async e=>{await Xn.delete(`/activities/${e}`)}};var Bc=r(2823),$c=r.n(Bc);const Uc=e=>{let{isOpen:t,onClose:r,activityId:s,classroomId:a,onQuizCreated:o,quizId:i,isEdit:l=!1,lessonId:c=null}=e;const{token:d}=is(),[u,h]=(0,n.useState)({title:"",description:"",overallScore:100,passingScore:60,availableFrom:(new Date).toISOString().slice(0,16),availableTo:new Date((new Date).setDate((new Date).getDate()+7)).toISOString().slice(0,16),repeatable:!1,timeLimitMinutes:30,maxAttempts:2,quizType:"PRACTICE_QUIZ",questions:[{question:"",questionType:"MULTIPLE_CHOICE",options:["","","",""],correctAnswers:[],points:10}]}),[m,f]=(0,n.useState)(!1),p=(0,n.useRef)(null),[g,x]=(0,n.useState)(!1);function b(e){if(!e)return"";const t=new Date(e),r=t.getTimezoneOffset();return new Date(t.getTime()-6e4*r).toISOString().slice(0,16)}const y=e=>e?16===e.length?e+":00":e:null;(0,n.useEffect)((()=>{const e=u.questions.reduce(((e,t)=>e+(parseInt(t.points)||0)),0);h((t=>({...t,overallScore:e})))}),[u.questions]),(0,n.useEffect)((()=>{l&&i&&t?(async()=>{try{const e=await _c.getQuiz(i);let t=e.quizContent;"string"===typeof t&&(t=JSON.parse(t)),t=(t||[]).map((e=>({question:e.questionText||e.question||"",questionType:e.questionType||"MULTIPLE_CHOICE",options:e.options||["","","",""],correctAnswers:Array.isArray(e.correctAnswers)?e.correctAnswers:"IDENTIFICATION"===e.questionType?[e.correctAnswer||""]:"undefined"!==typeof e.correctAnswer&&null!==e.correctAnswer?[e.options&&-1!==e.options.indexOf(e.correctAnswer)?e.options.indexOf(e.correctAnswer):0]:[],points:"number"===typeof e.points?e.points:10})));h({title:e.quizName||"",description:e.description||"",overallScore:e.overallScore||100,passingScore:e.passingScore||60,availableFrom:b(e.availableFrom),availableTo:b(e.availableTo),repeatable:e.repeatable||!1,timeLimitMinutes:e.timeLimitMinutes||30,maxAttempts:e.maxAttempts||2,quizType:e.quizType||"PRACTICE_QUIZ",questions:t})}catch(e){st.error("Failed to load quiz for editing")}})():!l&&c&&h((e=>({...e,quizType:"PRACTICE_QUIZ"})))}),[l,i,t,c]);const v=[{value:"MULTIPLE_CHOICE",label:"Multiple Choice"},{value:"IDENTIFICATION",label:"Identification"},{value:"CHECKBOX",label:"Checkboxes"}],w=(e,t,r)=>{const n=[...u.questions],s=n[e];if("options"===t)s.options=r;else if("questionType"===t)s[t]=r,"IDENTIFICATION"===r?(s.options=[""],s.correctAnswers=[""]):(s.options=["","","",""],s.correctAnswers=[]);else if("correctAnswers"===t)if("CHECKBOX"===s.questionType){const e=parseInt(r,10),t=new Set(s.correctAnswers);t.has(e)?t.delete(e):t.add(e),s.correctAnswers=Array.from(t).sort()}else"IDENTIFICATION"===s.questionType?s.correctAnswers=[r]:s.correctAnswers=[parseInt(r,10)];else s[t]=r;h({...u,questions:n})};if(!t)return null;const j=e=>{const{name:t,type:r,checked:n,value:s}=e.target;h("repeatable"!==t?"quizType"!==t?e=>({...e,[t]:"checkbox"===r?n:s}):e=>({...e,quizType:s}):e=>({...e,repeatable:n,maxAttempts:n?2:null}))},N=async e=>{if(e.preventDefault(),!a)return void st.error("No classroom selected. Please select one first.");if(!u.questions.some((e=>{if("MULTIPLE_CHOICE"===e.questionType||"CHECKBOX"===e.questionType){return e.options.some((e=>!e||""===e.trim()))?(st.error("Please fill out all options for multiple choice and checkbox questions."),!0):0===e.correctAnswers.length}return"IDENTIFICATION"!==e.questionType||(!e.correctAnswers[0]||""===e.correctAnswers[0].trim())}))){if(u.repeatable){const e=parseInt(u.maxAttempts,10);if(e<2||e>5)return void st.error("Maximum attempts must be between 2 and 5 when multiple attempts are allowed")}if(new Date(u.availableTo)<=new Date(u.availableFrom))st.error("Available To must be after Available From.");else if(!m&&!g){f(!0),x(!0),p.current&&(p.current.disabled=!0);try{const e={quizName:u.title,description:u.description,overallScore:parseInt(u.overallScore,10),passingScore:parseInt(u.passingScore,10),availableFrom:y(u.availableFrom),availableTo:u.availableTo?y(u.availableTo):null,repeatable:u.repeatable,timeLimitMinutes:u.timeLimitMinutes,maxAttempts:u.repeatable?parseInt(u.maxAttempts,10):null,totalItems:u.questions.length,quizContent:JSON.stringify(u.questions.map((e=>{let t;return t="IDENTIFICATION"===e.questionType?e.correctAnswers[0]:"CHECKBOX"===e.questionType?e.correctAnswers.map((t=>e.options[t])):e.correctAnswers.length>0?e.options[e.correctAnswers[0]]:null,{questionText:e.question,questionType:e.questionType,options:"IDENTIFICATION"!==e.questionType?e.options:null,correctAnswer:t,points:parseInt(e.points)||10}}))),quizType:u.quizType,lessonId:c||null};if(l&&i)await _c.updateQuiz(i,e),st.success("Quiz updated successfully!"),o&&o(),r();else{const t=(new Date).toISOString(),n={title:`Quiz: ${u.title}`,description:u.description||"Quiz activity",type:"QUIZ",classroomId:a,content:JSON.stringify({quizName:u.title,description:u.description,type:"QUIZ",timestamp:t})},s=await Fc.createActivity(n);if(!s||!s.id)throw new Error("Failed to create activity for quiz");const i=await _c.createQuiz(s.id,e);st.success("Quiz created successfully!"),o(i),r()}}catch(s){var t,n;console.error("Error creating quiz activity:",s);const e=(null===(t=s.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||s.message||"Failed to create quiz";st.error(e)}finally{f(!1),x(!1),p.current&&(p.current.disabled=!1)}}}},k=(0,as.jsxs)(as.Fragment,{children:[(0,as.jsx)(bs,{variant:"cancel",size:"sm",rounded:"full",onClick:r,disabled:m||g,children:"Cancel"}),(0,as.jsx)(bs,{type:"submit",variant:"default",size:"sm",onClick:N,rounded:"full",disabled:m||g,children:m?"Saving...":"Save Quiz"})]});return(0,as.jsx)(lc,{isOpen:t,onClose:r,title:l?"Edit Quiz":"Create New Quiz",footer:k,children:(0,as.jsxs)("form",{onSubmit:N,className:"space-y-6",children:[(0,as.jsxs)("div",{className:"space-y-4",children:[(0,as.jsxs)("div",{children:[(0,as.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Quiz Title *"}),(0,as.jsx)("input",{type:"text",name:"title",value:u.title,onChange:j,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 transition-colors",required:!0,placeholder:"Enter quiz title"})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),(0,as.jsx)("textarea",{name:"description",value:u.description,onChange:j,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 transition-colors resize-none",rows:"3",placeholder:"Enter quiz description"})]}),(0,as.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,as.jsxs)("div",{children:[(0,as.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Overall Score"}),(0,as.jsx)("input",{type:"number",name:"overallScore",value:u.overallScore,onChange:j,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 transition-colors",required:!0,min:"0"})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Passing Score"}),(0,as.jsx)("input",{type:"number",name:"passingScore",value:u.passingScore,onChange:j,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 transition-colors",required:!0,min:"0"})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Available From"}),(0,as.jsx)("input",{type:"datetime-local",name:"availableFrom",value:u.availableFrom,onChange:j,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 transition-colors",required:!0})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Available To"}),(0,as.jsx)("input",{type:"datetime-local",name:"availableTo",value:u.availableTo,onChange:j,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 transition-colors"})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Time Limit (minutes)"}),(0,as.jsx)("input",{type:"number",name:"timeLimitMinutes",value:u.timeLimitMinutes,onChange:j,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 transition-colors",required:!0,min:"1"})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Quiz Type"}),(0,as.jsx)("select",{name:"quizType",value:u.quizType,onChange:j,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 transition-colors",required:!0,children:[{value:"PRACTICE_QUIZ",label:"Practice Quiz"},{value:"MAJOR_EXAMS",label:"Major Exams"},{value:"POP_QUIZ",label:"Pop Quiz"},{value:"DIAGNOSTIC_QUIZ",label:"Diagnostic Quiz"},{value:"ACTIVITY",label:"Activity"}].map((e=>(0,as.jsx)("option",{value:e.value,children:e.label},e.value)))})]}),(0,as.jsxs)("div",{children:[(0,as.jsxs)("div",{className:"flex items-center mb-2",children:[(0,as.jsx)("input",{type:"checkbox",name:"repeatable",checked:u.repeatable,onChange:j,className:"h-4 w-4 text-blue-600 border-gray-300 dark:border-gray-600 rounded mr-2",id:"allow-multiple-attempts"}),(0,as.jsx)("label",{htmlFor:"allow-multiple-attempts",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Allow Multiple Attempts"})]}),u.repeatable&&(0,as.jsxs)("div",{children:[(0,as.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Max Attempts (per student)"}),(0,as.jsx)("input",{type:"number",name:"maxAttempts",value:u.maxAttempts,min:"2",max:"5",onChange:j,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 transition-colors",required:u.repeatable}),(0,as.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Must be between 2 and 5 attempts"})]})]})]})]}),(0,as.jsx)("div",{className:"space-y-6",children:u.questions.map(((e,t)=>(0,as.jsxs)("div",{className:"p-4 border border-gray-300 dark:border-gray-600 rounded-md bg-gray-50 dark:bg-gray-800",children:[(0,as.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,as.jsxs)("label",{className:"block text-sm font-semibold text-gray-800 dark:text-gray-300",children:["Question ",t+1]}),(0,as.jsxs)("div",{className:"flex items-center gap-2",children:[(0,as.jsxs)("div",{className:"flex items-center",children:[(0,as.jsx)("label",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 mr-2",children:"Points:"}),(0,as.jsx)("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:e.points||10,onChange:e=>{const r=e.target.value;if(/^\d*$/.test(r)){const e=""===r?1:parseInt(r);w(t,"points",e)}},onBlur:e=>{const r=parseInt(e.target.value)||1;w(t,"points",r)},className:"w-16 p-1 border border-gray-300 dark:border-gray-600 rounded text-center text-sm bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300",required:!0})]}),u.questions.length>1&&(0,as.jsx)("button",{type:"button",onClick:()=>{const e=u.questions.filter(((e,r)=>r!==t));h((t=>({...t,questions:e})))},className:"p-1 text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 transition-colors",title:"Remove question",children:(0,as.jsx)(La,{size:14})})]})]}),(0,as.jsxs)("div",{className:"space-y-4",children:[(0,as.jsxs)("div",{children:[(0,as.jsx)("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Question Type"}),(0,as.jsx)("select",{value:e.questionType,onChange:e=>w(t,"questionType",e.target.value),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 text-sm",children:v.map((e=>(0,as.jsx)("option",{value:e.value,children:e.label},e.value)))})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Question Text"}),(0,as.jsx)("input",{type:"text",value:e.question,onChange:e=>w(t,"question",e.target.value),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded text-sm bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300",required:!0,placeholder:"Enter the question"})]}),"MULTIPLE_CHOICE"===e.questionType&&(0,as.jsxs)(as.Fragment,{children:[(0,as.jsx)("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Options (select correct answer)"}),e.options.map(((r,n)=>(0,as.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,as.jsx)("input",{type:"radio",name:`correct-${t}`,checked:e.correctAnswers.includes(n),onChange:()=>w(t,"correctAnswers",n),className:"h-4 w-4 text-blue-600 border-gray-300 dark:border-gray-600"}),(0,as.jsx)("input",{type:"text",value:r,onChange:r=>{const s=[...e.options];s[n]=r.target.value,w(t,"options",s)},className:"flex-1 p-2 border border-gray-300 dark:border-gray-600 rounded text-sm bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300",placeholder:`Option ${n+1}`,required:!0})]},n)))]}),"CHECKBOX"===e.questionType&&(0,as.jsxs)(as.Fragment,{children:[(0,as.jsx)("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Options (select all correct answers)"}),e.options.map(((r,n)=>(0,as.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,as.jsx)("input",{type:"checkbox",checked:e.correctAnswers.includes(n),onChange:()=>w(t,"correctAnswers",n),className:"h-4 w-4 text-blue-600 border-gray-300 dark:border-gray-600 rounded"}),(0,as.jsx)("input",{type:"text",value:r,onChange:r=>{const s=[...e.options];s[n]=r.target.value,w(t,"options",s)},className:"flex-1 p-2 border border-gray-300 dark:border-gray-600 rounded text-sm bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300",placeholder:`Option ${n+1}`,required:!0})]},n)))]}),"IDENTIFICATION"===e.questionType&&(0,as.jsxs)("div",{children:[(0,as.jsx)("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Correct Answer"}),(0,as.jsx)("input",{type:"text",value:Array.isArray(e.correctAnswers)&&e.correctAnswers[0]||"",onChange:e=>w(t,"correctAnswers",e.target.value),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded text-sm bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300",placeholder:"Enter the exact correct answer",required:!0})]})]})]},t)))}),(0,as.jsx)(bs,{type:"button",onClick:()=>{h({...u,questions:[...u.questions,{question:"",questionType:"MULTIPLE_CHOICE",options:["","","",""],correctAnswers:[],points:10}]})},variant:"outlineWhite",size:"sm",children:"Add Question"})]})})},Hc={toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],["link","image"],["blockquote","code-block"],["clean"]]},Wc=["header","bold","italic","underline","strike","list","bullet","link","image","blockquote","code-block"],Qc=e=>{let{isOpen:t,onClose:r,classroomId:s,onLessonAdded:a}=e;const{darkMode:o}=ds(),[i,l]=(0,n.useState)({title:"",description:"",classroomId:s,image:null}),[c,d]=(0,n.useState)({title:"",subtitle:"",content:"",structuredContent:"",orderIndex:0}),[u,h]=(0,n.useState)({title:"",description:"",overallScore:0,passingScore:60,timeLimitMinutes:30,repeatable:!1,maxAttempts:1,quizType:"PRACTICE_QUIZ",availableFrom:(new Date).toISOString().slice(0,19),availableTo:new Date((new Date).setDate((new Date).getDate()+7)).toISOString().slice(0,19),questions:[{question:"",questionType:"MULTIPLE_CHOICE",options:["","","",""],correctAnswers:[],points:10}]}),[m,f]=(0,n.useState)(null),[p,g]=(0,n.useState)(!1),[x,b]=(0,n.useState)(null),[y,v]=(0,n.useState)(0),[w,j]=(0,n.useState)(!1),N=[{value:"MULTIPLE_CHOICE",label:"Multiple Choice"},{value:"IDENTIFICATION",label:"Identification"},{value:"CHECKBOX",label:"Checkboxes"}],k=e=>e?16===e.length?e+":00":e:null,S=e=>{v(e)},C=(e,t,r)=>{const n=[...u.questions],s=n[e];if("options"===t)s.options=r;else if("questionType"===t)s[t]=r,"IDENTIFICATION"===r?(s.options=[""],s.correctAnswers=[""]):(s.options=["","","",""],s.correctAnswers=[]);else if("correctAnswers"===t)if("CHECKBOX"===s.questionType){const e=parseInt(r,10);Array.isArray(s.correctAnswers)||(s.correctAnswers=[]);const t=s.correctAnswers.indexOf(e);-1===t?s.correctAnswers.push(e):s.correctAnswers.splice(t,1)}else"IDENTIFICATION"===s.questionType?s.correctAnswers=[r]:s.correctAnswers=[parseInt(r,10)];else s[t]=r;h((e=>({...e,questions:n})))},_=async e=>{e.preventDefault(),g(!0),b(null);try{if(w){const e=u.questions.filter(((e,t)=>"CHECKBOX"===e.questionType?0===e.correctAnswers.length:"IDENTIFICATION"===e.questionType?!e.correctAnswers[0]||""===e.correctAnswers[0].trim():0===e.correctAnswers.length));if(e.length>0)return b("Please provide correct answers for all questions before submitting"),void g(!1)}const e=await yc.createLesson(i);if(""!==c.structuredContent.trim()&&await Dc.createContentBlock({...c,lessonId:e.id}),w){const t=(new Date).toISOString(),r={title:`Quiz: ${u.title}`,description:u.description||"Quiz activity",type:"QUIZ",classroomId:s,content:JSON.stringify({quizName:u.title,description:u.description,type:"QUIZ",timestamp:t})},n=await Fc.createActivity(r);if(!n||!n.id)throw new Error("Failed to create activity for quiz");const a={quizName:u.title,description:u.description,overallScore:parseInt(u.overallScore,10),passingScore:parseInt(u.passingScore,10),availableFrom:k(u.availableFrom),availableTo:u.availableTo?k(u.availableTo):null,repeatable:u.repeatable,timeLimitMinutes:u.timeLimitMinutes,maxAttempts:u.repeatable?parseInt(u.maxAttempts,10):null,totalItems:u.questions.length,lessonId:e.id,quizType:u.quizType,quizContent:JSON.stringify(u.questions.map((e=>({questionText:e.question,questionType:e.questionType,options:"IDENTIFICATION"!==e.questionType?e.options:null,correctAnswer:"IDENTIFICATION"===e.questionType?e.correctAnswers[0]:"CHECKBOX"===e.questionType?e.correctAnswers.map((t=>e.options[t])):e.correctAnswers.length>0?e.options[e.correctAnswers[0]]:null,points:parseInt(e.points)||10}))))};await _c.createQuiz(n.id,a)}l({title:"",description:"",classroomId:s,image:null}),d({title:"",subtitle:"",content:"",structuredContent:"",orderIndex:0}),h({title:"",description:"",overallScore:0,passingScore:60,timeLimitMinutes:30,repeatable:!1,maxAttempts:1,quizType:"PRACTICE_QUIZ",availableFrom:(new Date).toISOString().slice(0,19),availableTo:new Date((new Date).setDate((new Date).getDate()+7)).toISOString().slice(0,19),questions:[{question:"",questionType:"MULTIPLE_CHOICE",options:["","","",""],correctAnswers:[],points:10}]}),f(null),j(!1),a&&a(e),r()}catch(t){console.error("Error creating lesson:",t),b(t.message||"Failed to create lesson. Please try again.")}finally{g(!1)}};if((0,n.useEffect)((()=>{if(!w)return;const e=u.questions.reduce(((e,t)=>e+(parseInt(t.points)||0)),0);e!==u.overallScore&&h((t=>({...t,overallScore:e})))}),[u.questions,w]),!t)return null;const E=(0,as.jsxs)(as.Fragment,{children:[(0,as.jsx)(bs,{variant:"cancel",size:"sm",rounded:"full",onClick:r,disabled:p,children:"Cancel"}),(0,as.jsxs)(bs,{type:"submit",variant:"default",size:"sm",onClick:_,rounded:"full",disabled:p,className:"transition-all duration-300 hover:scale-105 "+(o?"bg-yellow-500 hover:bg-yellow-400 text-[#0b1022]":"bg-yellow-600 hover:bg-yellow-500 text-white"),children:[(0,as.jsx)(Ea,{className:"mr-2"}),p?"Creating Scroll...":"Create Scroll"]})]});return(0,as.jsxs)(lc,{isOpen:t,onClose:r,title:"Create New Scroll",footer:E,children:[(0,as.jsx)("div",{className:"border-b flex-shrink-0 "+(o?"border-yellow-700/40":"border-yellow-300"),children:(0,as.jsx)("div",{className:"flex justify-center",children:(0,as.jsxs)("div",{className:"flex space-x-1 rounded-lg p-1 "+(o?"bg-[#0f1428]":"bg-[#fbf4de]"),children:[(0,as.jsxs)("button",{onClick:()=>S(0),className:"px-4 py-2 text-sm font-medium rounded-md transition-colors duration-200 flex items-center gap-2 "+(0===y?o?"bg-yellow-500 text-[#0b1022] shadow-sm":"bg-yellow-600 text-white shadow-sm":o?"text-yellow-300 hover:text-yellow-200":"text-yellow-700 hover:text-yellow-800"),children:[(0,as.jsx)(Ea,{className:"text-sm"}),"Scroll Content"]}),(0,as.jsxs)("button",{onClick:()=>S(1),className:"px-4 py-2 text-sm font-medium rounded-md transition-colors duration-200 flex items-center gap-2 "+(1===y?o?"bg-yellow-500 text-[#0b1022] shadow-sm":"bg-yellow-600 text-white shadow-sm":o?"text-yellow-300 hover:text-yellow-200":"text-yellow-700 hover:text-yellow-800"),children:[(0,as.jsx)(aa,{className:"text-sm"}),"Add Quest"]})]})})}),(0,as.jsx)("form",{onSubmit:_,className:"flex flex-col h-full overflow-hidden mt-5",children:(0,as.jsxs)("div",{className:"overflow-y-auto flex-grow",children:[x&&(0,as.jsx)("div",{className:"mb-4 p-3 rounded-md border-2 "+(o?"bg-red-900/30 text-red-300 border-red-700/40":"bg-red-100 text-red-700 border-red-300"),children:(0,as.jsxs)("div",{className:"flex items-center gap-2",children:[(0,as.jsx)(Vs,{className:"text-sm"}),(0,as.jsx)("span",{children:x})]})}),0===y&&(0,as.jsxs)(as.Fragment,{children:[(0,as.jsxs)("div",{className:"mb-4",children:[(0,as.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,as.jsx)(Ea,{className:o?"text-yellow-400":"text-yellow-600"}),(0,as.jsx)("h6",{className:"text-lg font-semibold "+(o?"text-yellow-200":"text-yellow-800"),children:"Scroll Details"})]}),(0,as.jsxs)("div",{className:"mb-4",children:[(0,as.jsx)("label",{className:"block text-sm font-medium mb-2 "+(o?"text-yellow-200":"text-yellow-800"),children:"Scroll Title *"}),(0,as.jsx)("input",{type:"text",name:"title",value:i.title,onChange:e=>{const{name:t,value:r}=e.target;l((e=>({...e,[t]:r})))},required:!0,className:"w-full p-3 border-2 rounded-md transition-colors "+(o?"border-yellow-700/40 bg-[#0b1022]/50 text-yellow-200 focus:ring-yellow-500 focus:border-yellow-500":"border-yellow-300 bg-[#f5ecd2]/50 text-yellow-800 focus:ring-yellow-500 focus:border-yellow-500"),placeholder:"Enter scroll title"})]})]}),(0,as.jsxs)("div",{className:"mb-4",children:[(0,as.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,as.jsx)(ya,{className:o?"text-yellow-400":"text-yellow-600"}),(0,as.jsx)("h6",{className:"text-lg font-semibold "+(o?"text-yellow-200":"text-yellow-800"),children:"Scroll Content"})]}),(0,as.jsx)("div",{className:"mb-4",children:(0,as.jsx)("div",{className:"border-2 rounded-md "+(o?"border-yellow-700/40":"border-yellow-300"),children:(0,as.jsx)($c(),{theme:"snow",value:c.structuredContent,onChange:e=>{d((t=>({...t,structuredContent:e})))},modules:Hc,formats:Wc,style:{height:"250px",marginBottom:"40px"},className:o?"dark:!text-yellow-200":"!text-yellow-800"})})})]})]}),1===y&&(0,as.jsxs)("div",{className:"space-y-4",children:[(0,as.jsxs)("div",{className:"flex items-center mb-4",children:[(0,as.jsx)("input",{type:"checkbox",id:"has-quiz",checked:w,onChange:e=>j(e.target.checked),className:"h-4 w-4 rounded mr-2 "+(o?"text-yellow-500 border-yellow-700/40":"text-yellow-600 border-yellow-300")}),(0,as.jsxs)("label",{htmlFor:"has-quiz",className:"text-sm font-medium flex items-center gap-2 "+(o?"text-yellow-200":"text-yellow-800"),children:[(0,as.jsx)(aa,{className:"text-sm"}),"Add Treasure Quest to this Scroll"]})]}),w&&(0,as.jsxs)("div",{className:"space-y-6 mt-5",children:[(0,as.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,as.jsxs)("div",{children:[(0,as.jsx)("label",{className:"block text-sm font-medium mb-2 "+(o?"text-yellow-200":"text-yellow-800"),children:"Quest Title *"}),(0,as.jsx)("input",{type:"text",value:u.title,onChange:e=>h((t=>({...t,title:e.target.value}))),className:"w-full p-2 border-2 rounded transition-colors "+(o?"border-yellow-700/40 bg-[#0b1022]/50 text-yellow-200":"border-yellow-300 bg-[#f5ecd2]/50 text-yellow-800"),required:!0,placeholder:"Enter quest title"})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)("label",{className:"block text-sm font-medium mb-2 "+(o?"text-yellow-200":"text-yellow-800"),children:"Quest Type"}),(0,as.jsxs)("select",{value:u.quizType,onChange:e=>h((t=>({...t,quizType:e.target.value}))),className:"w-full p-2 border-2 rounded text-sm transition-colors "+(o?"border-yellow-700/40 bg-[#0b1022]/50 text-yellow-200":"border-yellow-300 bg-[#f5ecd2]/50 text-yellow-800"),required:!0,children:[(0,as.jsx)("option",{value:"PRACTICE_QUIZ",children:"Practice Quiz"}),(0,as.jsx)("option",{value:"MAJOR_EXAMS",children:"Major Exams"}),(0,as.jsx)("option",{value:"POP_QUIZ",children:"Pop Quiz"}),(0,as.jsx)("option",{value:"DIAGNOSTIC_QUIZ",children:"Diagnostic Quiz"}),(0,as.jsx)("option",{value:"ACTIVITY",children:"Activity"})]})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)("label",{className:"block text-sm font-medium mb-2 "+(o?"text-yellow-200":"text-yellow-800"),children:"Total Treasure Value"}),(0,as.jsx)("input",{type:"number",value:u.overallScore,className:"w-full p-2 border-2 rounded "+(o?"border-yellow-700/40 bg-[#0f1428]/50 text-yellow-200":"border-yellow-300 bg-[#fbf4de]/50 text-yellow-800"),readOnly:!0,disabled:!0})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)("label",{className:"block text-sm font-medium mb-2 "+(o?"text-yellow-200":"text-yellow-800"),children:"Passing Score"}),(0,as.jsx)("input",{type:"number",value:u.passingScore,onChange:e=>h((t=>({...t,passingScore:e.target.value}))),className:"w-full p-2 border-2 rounded transition-colors "+(o?"border-yellow-700/40 bg-[#0b1022]/50 text-yellow-200":"border-yellow-300 bg-[#f5ecd2]/50 text-yellow-800"),required:!0,min:"0"})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)("label",{className:"block text-sm font-medium mb-2 "+(o?"text-yellow-200":"text-yellow-800"),children:"Quest Time Limit (minutes)"}),(0,as.jsx)("input",{type:"number",value:u.timeLimitMinutes,onChange:e=>h((t=>({...t,timeLimitMinutes:e.target.value}))),className:"w-full p-2 border-2 rounded transition-colors "+(o?"border-yellow-700/40 bg-[#0b1022]/50 text-yellow-200":"border-yellow-300 bg-[#f5ecd2]/50 text-yellow-800"),required:!0,min:"1"})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)("label",{className:"block text-sm font-medium mb-2 "+(o?"text-yellow-200":"text-yellow-800"),children:"Quest Available From"}),(0,as.jsx)("input",{type:"datetime-local",value:u.availableFrom.slice(0,16),onChange:e=>h((t=>({...t,availableFrom:e.target.value+":00"}))),className:"w-full p-2 border-2 rounded transition-colors "+(o?"border-yellow-700/40 bg-[#0b1022]/50 text-yellow-200":"border-yellow-300 bg-[#f5ecd2]/50 text-yellow-800"),required:!0})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)("label",{className:"block text-sm font-medium mb-2 "+(o?"text-yellow-200":"text-yellow-800"),children:"Quest Available To"}),(0,as.jsx)("input",{type:"datetime-local",value:u.availableTo.slice(0,16),onChange:e=>h((t=>({...t,availableTo:e.target.value+":00"}))),className:"w-full p-2 border-2 rounded transition-colors "+(o?"border-yellow-700/40 bg-[#0b1022]/50 text-yellow-200":"border-yellow-300 bg-[#f5ecd2]/50 text-yellow-800"),required:!0})]}),(0,as.jsxs)("div",{children:[(0,as.jsxs)("div",{className:"flex items-center mb-2",children:[(0,as.jsx)("input",{type:"checkbox",checked:u.repeatable,onChange:e=>h((t=>({...t,repeatable:e.target.checked,maxAttempts:e.target.checked?2:1}))),className:"h-4 w-4 rounded mr-2 "+(o?"text-yellow-500 border-yellow-700/40":"text-yellow-600 border-yellow-300"),id:"allow-multiple-attempts"}),(0,as.jsx)("label",{htmlFor:"allow-multiple-attempts",className:"text-sm font-medium "+(o?"text-yellow-200":"text-yellow-800"),children:"Allow Multiple Quest Attempts"})]}),u.repeatable&&(0,as.jsxs)("div",{children:[(0,as.jsx)("label",{className:"block text-sm font-medium mb-2 "+(o?"text-yellow-200":"text-yellow-800"),children:"Max Attempts (per crew member)"}),(0,as.jsx)("input",{type:"number",value:u.maxAttempts,min:"2",max:"5",onChange:e=>h((t=>({...t,maxAttempts:e.target.value}))),className:"w-full p-2 border-2 rounded transition-colors "+(o?"border-yellow-700/40 bg-[#0b1022]/50 text-yellow-200":"border-yellow-300 bg-[#f5ecd2]/50 text-yellow-800"),required:u.repeatable}),(0,as.jsx)("p",{className:"text-xs mt-1 "+(o?"text-yellow-300":"text-yellow-700"),children:"Must be between 2 and 5 attempts"})]}),!u.repeatable&&(0,as.jsx)("p",{className:"text-xs mt-1 "+(o?"text-yellow-300":"text-yellow-700"),children:"Single attempt only"})]})]}),(0,as.jsx)("div",{className:"space-y-6",children:u.questions.map(((e,t)=>(0,as.jsxs)("div",{className:"p-4 border-2 rounded transition-all duration-300 hover:scale-[1.01] "+(o?"border-yellow-700/40 bg-[#0b1022]/50":"border-yellow-300 bg-[#f5ecd2]/50"),children:[(0,as.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,as.jsxs)("label",{className:"block text-sm font-semibold flex items-center gap-2 "+(o?"text-yellow-200":"text-yellow-800"),children:[(0,as.jsx)(ia,{className:"text-sm"}),"Quest Challenge ",t+1]}),(0,as.jsxs)("div",{className:"flex items-center gap-2",children:[(0,as.jsxs)("div",{className:"flex items-center",children:[(0,as.jsx)("label",{className:"text-xs font-medium mr-2 "+(o?"text-yellow-300":"text-yellow-700"),children:"Treasure Value:"}),(0,as.jsx)("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:e.points||10,onChange:e=>{const r=e.target.value;if(/^\d*$/.test(r)){const e=""===r?1:parseInt(r);C(t,"points",e)}},onBlur:e=>{const r=parseInt(e.target.value)||1;C(t,"points",r)},className:"w-16 p-1 border-2 rounded text-center text-sm transition-colors "+(o?"border-yellow-700/40 bg-[#0b1022]/50 text-yellow-200":"border-yellow-300 bg-[#f5ecd2]/50 text-yellow-800"),required:!0})]}),u.questions.length>1&&(0,as.jsx)("button",{type:"button",onClick:()=>{const e=u.questions.filter(((e,r)=>r!==t));h((t=>({...t,questions:e})))},className:"p-1 transition-colors "+(o?"text-red-400 hover:text-red-300":"text-red-600 hover:text-red-700"),title:"Remove challenge",children:(0,as.jsx)(La,{size:14})})]})]}),(0,as.jsxs)("div",{className:"space-y-4",children:[(0,as.jsxs)("div",{children:[(0,as.jsx)("label",{className:"block text-xs font-medium mb-1 "+(o?"text-yellow-300":"text-yellow-700"),children:"Challenge Type"}),(0,as.jsx)("select",{value:e.questionType,onChange:e=>C(t,"questionType",e.target.value),className:"w-full p-2 border-2 rounded text-sm transition-colors "+(o?"border-yellow-700/40 bg-[#0b1022]/50 text-yellow-200":"border-yellow-300 bg-[#f5ecd2]/50 text-yellow-800"),children:N.map((e=>(0,as.jsx)("option",{value:e.value,children:e.label},e.value)))})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)("label",{className:"block text-xs font-medium mb-1 "+(o?"text-yellow-300":"text-yellow-700"),children:"Challenge Text"}),(0,as.jsx)("input",{type:"text",value:e.question,onChange:e=>C(t,"question",e.target.value),className:"w-full p-2 border-2 rounded text-sm transition-colors "+(o?"border-yellow-700/40 bg-[#0b1022]/50 text-yellow-200":"border-yellow-300 bg-[#f5ecd2]/50 text-yellow-800"),required:!0,placeholder:"Enter the challenge"})]}),"MULTIPLE_CHOICE"===e.questionType&&(0,as.jsxs)(as.Fragment,{children:[(0,as.jsx)("label",{className:"block text-xs font-medium mb-1 "+(o?"text-yellow-300":"text-yellow-700"),children:"Treasure Options (select correct answer)"}),e.options.map(((r,n)=>(0,as.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,as.jsx)("input",{type:"radio",name:`correct-${t}`,checked:e.correctAnswers.includes(n),onChange:()=>C(t,"correctAnswers",n),className:"h-4 w-4 "+(o?"text-yellow-500 border-yellow-700/40":"text-yellow-600 border-yellow-300"),required:0===e.correctAnswers.length}),(0,as.jsx)("input",{type:"text",value:r,onChange:r=>{const s=[...e.options];s[n]=r.target.value,C(t,"options",s)},className:"flex-1 p-2 border-2 rounded text-sm transition-colors "+(o?"border-yellow-700/40 bg-[#0b1022]/50 text-yellow-200":"border-yellow-300 bg-[#f5ecd2]/50 text-yellow-800"),placeholder:`Treasure Option ${n+1}`,required:!0})]},n))),0===e.correctAnswers.length&&(0,as.jsx)("p",{className:"text-xs mt-1 "+(o?"text-red-400":"text-red-600"),children:"Please select a correct answer"})]}),"CHECKBOX"===e.questionType&&(0,as.jsxs)(as.Fragment,{children:[(0,as.jsx)("label",{className:"block text-xs font-medium mb-1 "+(o?"text-yellow-300":"text-yellow-700"),children:"Treasure Options (select all correct answers)"}),e.options.map(((r,n)=>(0,as.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,as.jsx)("input",{type:"checkbox",checked:e.correctAnswers.includes(n),onChange:()=>C(t,"correctAnswers",n),className:"h-4 w-4 rounded "+(o?"text-yellow-500 border-yellow-700/40":"text-yellow-600 border-yellow-300"),required:0===e.correctAnswers.length}),(0,as.jsx)("input",{type:"text",value:r,onChange:r=>{const s=[...e.options];s[n]=r.target.value,C(t,"options",s)},className:"flex-1 p-2 border-2 rounded text-sm transition-colors "+(o?"border-yellow-700/40 bg-[#0b1022]/50 text-yellow-200":"border-yellow-300 bg-[#f5ecd2]/50 text-yellow-800"),placeholder:`Treasure Option ${n+1}`,required:!0})]},n))),0===e.correctAnswers.length&&(0,as.jsx)("p",{className:"text-xs mt-1 "+(o?"text-red-400":"text-red-600"),children:"Please select at least one correct answer"})]}),"IDENTIFICATION"===e.questionType&&(0,as.jsxs)("div",{children:[(0,as.jsx)("label",{className:"block text-xs font-medium mb-1 "+(o?"text-yellow-300":"text-yellow-700"),children:"Correct Treasure Answer"}),(0,as.jsx)("input",{type:"text",value:Array.isArray(e.correctAnswers)&&e.correctAnswers[0]||"",onChange:e=>C(t,"correctAnswers",e.target.value),className:"w-full p-2 border-2 rounded text-sm transition-colors "+(o?"border-yellow-700/40 bg-[#0b1022]/50 text-yellow-200":"border-yellow-300 bg-[#f5ecd2]/50 text-yellow-800"),placeholder:"Enter the exact correct answer",required:!0}),(!e.correctAnswers[0]||""===e.correctAnswers[0].trim())&&(0,as.jsx)("p",{className:"text-xs mt-1 "+(o?"text-red-400":"text-red-600"),children:"Please provide a correct answer"})]})]})]},t)))}),(0,as.jsxs)(bs,{type:"button",onClick:()=>{h((e=>({...e,questions:[...e.questions,{question:"",questionType:"MULTIPLE_CHOICE",options:["","","",""],correctAnswers:[],points:10}]})))},variant:"outlineWhite",size:"sm",className:"transition-all duration-300 hover:scale-105 "+(o?"border-yellow-500 text-yellow-400 hover:bg-yellow-500 hover:text-[#0b1022]":"border-yellow-600 text-yellow-700 hover:bg-yellow-600 hover:text-white"),children:[(0,as.jsx)(ia,{className:"mr-2"}),"Add Challenge"]})]})]})]})})]})},Vc={toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],["link","image"],["blockquote","code-block"],["clean"]]},Gc=["header","bold","italic","underline","strike","list","bullet","link","image","blockquote","code-block"],Kc=e=>{var t,r,s;let{isOpen:a,onClose:o,lesson:i,classroomId:l,onLessonUpdated:c}=e;const[d,u]=(0,n.useState)({title:"",description:"",classroomId:l,image:null}),[h,m]=(0,n.useState)({id:null,title:"",content:"",structuredContent:"",orderIndex:0}),[f,p]=(0,n.useState)({title:"",description:"",overallScore:0,passingScore:60,timeLimitMinutes:30,repeatable:!1,maxAttempts:1,quizType:"PRACTICE_QUIZ",availableFrom:"",availableTo:"",questions:[{question:"",questionType:"MULTIPLE_CHOICE",options:["","","",""],correctAnswers:[],points:10}]}),[g,x]=(0,n.useState)(null),[b,y]=(0,n.useState)(!1),[v,w]=(0,n.useState)(null),[j,N]=(0,n.useState)(null),[k,S]=(0,n.useState)(!1),[C,_]=(0,n.useState)(!1),[E,A]=(0,n.useState)(0),[O,T]=(0,n.useState)(!1),z=[{value:"MULTIPLE_CHOICE",label:"Multiple Choice"},{value:"IDENTIFICATION",label:"Identification"},{value:"CHECKBOX",label:"Checkboxes"}];(0,n.useEffect)((()=>{if(i){var e;w(null),N(null);const t=null===(e=i.activities)||void 0===e?void 0:e.find((e=>"QUIZ"===e.type));if(u({title:i.title||"",description:i.description||"",classroomId:l,image:null}),i.contentBlocks&&i.contentBlocks.length>0){const e=i.contentBlocks[0];m({id:e.id,title:e.title||"",content:e.content||"",structuredContent:e.structuredContent||"",orderIndex:e.orderIndex||0})}else m({id:null,title:"",content:"",structuredContent:"",orderIndex:0});if(i.activities&&i.activities.length>0)if(t){T(!0);try{JSON.parse(t.content||"{}");const e=async()=>{try{const e=await _c.getQuizByActivityId(t.id);if(e){const r=JSON.parse(e.quizContent||"[]"),n={title:t.title.replace("Quiz: ","")||"",description:t.description||"",overallScore:e.overallScore||100,passingScore:e.passingScore||60,timeLimitMinutes:e.timeLimitMinutes||30,repeatable:e.repeatable||!1,maxAttempts:e.maxAttempts||2,quizType:e.quizType||"PRACTICE_QUIZ",availableFrom:e.availableFrom||(new Date).toISOString().slice(0,16),availableTo:e.availableTo||new Date((new Date).setDate((new Date).getDate()+7)).toISOString().slice(0,16),questions:r.map((e=>{let t=[];return t="IDENTIFICATION"===e.questionType?[e.correctAnswer||""]:"CHECKBOX"===e.questionType?Array.isArray(e.correctAnswer)?e.correctAnswer.map((t=>e.options.indexOf(t))):[]:[e.options.indexOf(e.correctAnswer)],{question:e.questionText||"",questionType:e.questionType||"MULTIPLE_CHOICE",options:e.options||["","","",""],correctAnswers:t,points:e.points||10}}))||[{question:"",questionType:"MULTIPLE_CHOICE",options:["","","",""],correctAnswers:[],points:10}]};p(n)}}catch(v){w("Failed to fetch quiz details. Please try again.")}};e()}catch(v){w("Failed to parse quiz content. Please try again.")}}else T(!1),p({title:"",description:"",overallScore:100,passingScore:60,timeLimitMinutes:30,repeatable:!1,maxAttempts:1,quizType:"PRACTICE_QUIZ",availableFrom:(new Date).toISOString().slice(0,16),availableTo:new Date((new Date).setDate((new Date).getDate()+7)).toISOString().slice(0,16),questions:[{question:"",questionType:"MULTIPLE_CHOICE",options:["","","",""],correctAnswers:[],points:10}]})}}),[i,l]),(0,n.useEffect)((()=>{a&&(w(null),N(null))}),[a]),(0,n.useEffect)((()=>{const e=f.questions.reduce(((e,t)=>e+(parseInt(t.points)||0)),0);p((t=>({...t,overallScore:e})))}),[f.questions]);const P=e=>{A(e)},I=(e,t,r)=>{const n=[...f.questions],s=n[e];if("options"===t)s.options=r;else if("questionType"===t)s[t]=r,"IDENTIFICATION"===r?(s.options=[""],s.correctAnswers=[""]):(s.options=["","","",""],s.correctAnswers=[]);else if("correctAnswers"===t)if("CHECKBOX"===s.questionType){const e=parseInt(r,10);Array.isArray(s.correctAnswers)||(s.correctAnswers=[]);const t=s.correctAnswers.indexOf(e);-1===t?s.correctAnswers.push(e):s.correctAnswers.splice(t,1)}else"IDENTIFICATION"===s.questionType?s.correctAnswers=[r]:s.correctAnswers=[parseInt(r,10)];else s[t]=r;p((e=>({...e,questions:n})))},L=async e=>{e.preventDefault(),y(!0),w(null),N(null);try{const e=f.questions.filter(((e,t)=>"CHECKBOX"===e.questionType?0===e.correctAnswers.length:"IDENTIFICATION"===e.questionType?!e.correctAnswers[0]||""===e.correctAnswers[0].trim():0===e.correctAnswers.length));if(e.length>0)return w("Please provide correct answers for all questions before submitting"),void y(!1);const r=new FormData;r.append("title",d.title||""),d.description&&r.append("description",d.description),l&&"undefined"!==l&&"null"!==l&&r.append("classroomId",l),d.image&&r.append("image",d.image);await yc.updateLesson(i.id,r);if(""!==h.structuredContent.trim()&&(h.id?await Dc.updateContentBlock(h.id,{structuredContent:h.structuredContent,lessonId:i.id}):await Dc.createContentBlock({structuredContent:h.structuredContent,lessonId:i.id,orderIndex:0})),O){var t;const e=(new Date).toISOString(),r={title:`Quiz: ${f.title}`,description:f.description||"Quiz activity",type:"QUIZ",classroomId:l,content:JSON.stringify({quizName:f.title,description:f.description,type:"QUIZ",timestamp:e})},n=new FormData;n.append("title",r.title),n.append("description",r.description),n.append("type",r.type),n.append("classroomId",r.classroomId),n.append("content",r.content);const s={quizName:f.title,description:f.description,overallScore:f.overallScore,passingScore:f.passingScore,timeLimitMinutes:f.timeLimitMinutes,repeatable:f.repeatable,maxAttempts:f.repeatable?f.maxAttempts:null,quizType:f.quizType,totalItems:f.questions.length,lessonId:i.id,quizContent:JSON.stringify(f.questions.map((e=>({questionText:e.question,questionType:e.questionType,options:"IDENTIFICATION"!==e.questionType?e.options:null,correctAnswer:"IDENTIFICATION"===e.questionType?e.correctAnswers[0]:"CHECKBOX"===e.questionType?e.correctAnswers.map((t=>e.options[t])):e.correctAnswers.length>0?e.options[e.correctAnswers[0]]:null,points:parseInt(e.points)||10})))),availableFrom:f.availableFrom?new Date(f.availableFrom).toISOString().slice(0,19):null,availableTo:f.availableTo?new Date(f.availableTo).toISOString().slice(0,19):null};let a;const o=null===(t=i.activities)||void 0===t?void 0:t.find((e=>"QUIZ"===e.type));try{if(o){a=await Fc.updateActivity(o.id,n);const e=await _c.getQuizByActivityId(o.id);e&&e.id?await _c.updateQuiz(e.id,s):await _c.createQuiz(o.id,s)}else{if(a=await Fc.createActivity(r),!a||!a.id)throw new Error("Failed to create activity for quiz");await _c.createQuiz(a.id,s)}}catch(v){throw new Error(`Failed to handle quiz activity: ${v.message}`)}}if(st.success("Lesson updated successfully!"),c){const e=await yc.getLessonById(i.id);c(e)}o()}catch(r){const e=r.message||"Failed to update lesson. Please try again.";w(e),st.error(e)}finally{y(!1)}};if(!a)return null;const M=(0,as.jsxs)(as.Fragment,{children:[(0,as.jsx)(bs,{variant:"cancel",size:"sm",rounded:"full",onClick:()=>{S(!0)},disabled:b||C,children:"Delete Lesson"}),(0,as.jsx)(bs,{type:"submit",variant:"default",size:"sm",onClick:L,rounded:"full",disabled:b||C,children:b?"Updating...":"Update Lesson"})]});return(0,as.jsxs)(as.Fragment,{children:[(0,as.jsxs)(lc,{isOpen:a,onClose:o,title:"Edit Lesson",footer:M,children:[(0,as.jsx)("div",{className:"border-b border-gray-300 dark:border-gray-600 flex-shrink-0",children:(0,as.jsx)("div",{className:"flex justify-center",children:(0,as.jsxs)("div",{className:"flex space-x-1 bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[(0,as.jsx)("button",{onClick:()=>P(0),className:"px-4 py-2 text-sm font-medium rounded-md transition-colors duration-200 "+(0===E?"bg-white dark:bg-gray-600 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"),children:"Lesson Content"}),(0,as.jsx)("button",{onClick:()=>P(1),className:"px-4 py-2 text-sm font-medium rounded-md transition-colors duration-200 "+(1===E?"bg-white dark:bg-gray-600 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"),children:null!==i&&void 0!==i&&null!==(t=i.activities)&&void 0!==t&&t.find((e=>"QUIZ"===e.type))?"Edit Quiz":"Add Quiz"})]})})}),(0,as.jsx)("form",{onSubmit:L,className:"flex flex-col h-full overflow-hidden mt-5",children:(0,as.jsxs)("div",{className:"overflow-y-auto flex-grow",children:[v&&(0,as.jsx)("div",{className:"mb-4 p-3 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded-md",children:v}),j&&(0,as.jsx)("div",{className:"mb-4 p-3 bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 rounded-md",children:j}),0===E&&(0,as.jsxs)(as.Fragment,{children:[(0,as.jsxs)("div",{className:"mb-4",children:[(0,as.jsx)("h6",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Lesson Details"}),(0,as.jsxs)("div",{className:"mb-4",children:[(0,as.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Lesson Title *"}),(0,as.jsx)("input",{type:"text",name:"title",value:d.title,onChange:e=>{const{name:t,value:r}=e.target;u((e=>({...e,[t]:r})))},required:!0,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 transition-colors",placeholder:"Enter lesson title"})]})]}),(0,as.jsxs)("div",{className:"mb-4",children:[(0,as.jsx)("h6",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Lesson Content"}),(0,as.jsx)("div",{className:"mb-4",children:(0,as.jsx)("div",{className:"border border-gray-300 dark:border-gray-600 rounded-md",children:(0,as.jsx)($c(),{theme:"snow",value:h.structuredContent,onChange:e=>{m((t=>({...t,structuredContent:e})))},modules:Vc,formats:Gc,style:{height:"250px",marginBottom:"40px"},className:"dark:!text-gray-300"})})})]})]}),1===E&&(0,as.jsxs)("div",{className:"space-y-4",children:[!(null!==i&&void 0!==i&&null!==(r=i.activities)&&void 0!==r&&r.find((e=>"QUIZ"===e.type)))&&(0,as.jsxs)("div",{className:"flex items-center mb-4",children:[(0,as.jsx)("input",{type:"checkbox",id:"has-quiz",checked:O,onChange:e=>T(e.target.checked),className:"h-4 w-4 text-blue-600 border-gray-300 dark:border-gray-600 rounded mr-2"}),(0,as.jsx)("label",{htmlFor:"has-quiz",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Add Quiz to this Lesson"})]}),(O||(null===i||void 0===i||null===(s=i.activities)||void 0===s?void 0:s.find((e=>"QUIZ"===e.type))))&&(0,as.jsxs)("div",{className:"space-y-6 mt-5",children:[(0,as.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,as.jsxs)("div",{children:[(0,as.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Quiz Title *"}),(0,as.jsx)("input",{type:"text",value:f.title,onChange:e=>p((t=>({...t,title:e.target.value}))),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300",required:O,placeholder:"Enter quiz title"})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Quiz Type"}),(0,as.jsxs)("select",{value:f.quizType,onChange:e=>p((t=>({...t,quizType:e.target.value}))),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 text-sm",required:O,children:[(0,as.jsx)("option",{value:"PRACTICE_QUIZ",children:"Practice Quiz"}),(0,as.jsx)("option",{value:"MAJOR_EXAMS",children:"Major Exams"}),(0,as.jsx)("option",{value:"POP_QUIZ",children:"Pop Quiz"}),(0,as.jsx)("option",{value:"DIAGNOSTIC_QUIZ",children:"Diagnostic Quiz"}),(0,as.jsx)("option",{value:"ACTIVITY",children:"Activity"})]})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Overall Score"}),(0,as.jsx)("input",{type:"number",value:f.overallScore,className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300",readOnly:!0,disabled:!0})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Passing Score"}),(0,as.jsx)("input",{type:"number",value:f.passingScore,onChange:e=>p((t=>({...t,passingScore:e.target.value}))),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300",required:!0,min:"0"})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Time Limit (minutes)"}),(0,as.jsx)("input",{type:"number",value:f.timeLimitMinutes,onChange:e=>p((t=>({...t,timeLimitMinutes:e.target.value}))),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300",required:!0,min:"1"})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Available From"}),(0,as.jsx)("input",{type:"datetime-local",value:f.availableFrom,onChange:e=>p((t=>({...t,availableFrom:e.target.value}))),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300",required:!0})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Available To"}),(0,as.jsx)("input",{type:"datetime-local",value:f.availableTo,onChange:e=>p((t=>({...t,availableTo:e.target.value}))),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300",required:!0})]}),(0,as.jsxs)("div",{children:[(0,as.jsxs)("div",{className:"flex items-center mb-2",children:[(0,as.jsx)("input",{type:"checkbox",checked:f.repeatable,onChange:e=>p((t=>({...t,repeatable:e.target.checked,maxAttempts:e.target.checked?2:1}))),className:"h-4 w-4 text-blue-600 border-gray-300 dark:border-gray-600 rounded mr-2",id:"allow-multiple-attempts"}),(0,as.jsx)("label",{htmlFor:"allow-multiple-attempts",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Allow Multiple Attempts"})]}),f.repeatable&&(0,as.jsxs)("div",{children:[(0,as.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Max Attempts (per student)"}),(0,as.jsx)("input",{type:"number",value:f.maxAttempts,min:"2",max:"5",onChange:e=>p((t=>({...t,maxAttempts:e.target.value}))),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300",required:f.repeatable}),(0,as.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Must be between 2 and 5 attempts"})]}),!f.repeatable&&(0,as.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Single attempt only"})]})]}),(0,as.jsx)("div",{className:"space-y-6",children:f.questions.map(((e,t)=>(0,as.jsxs)("div",{className:"p-4 border border-gray-300 dark:border-gray-600 rounded bg-gray-50 dark:bg-gray-800",children:[(0,as.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,as.jsxs)("label",{className:"block text-sm font-semibold text-gray-800 dark:text-gray-300",children:["Question ",t+1]}),(0,as.jsxs)("div",{className:"flex items-center gap-2",children:[(0,as.jsxs)("div",{className:"flex items-center",children:[(0,as.jsx)("label",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 mr-2",children:"Points:"}),(0,as.jsx)("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:e.points||10,onChange:e=>{const r=e.target.value;if(/^\d*$/.test(r)){const e=""===r?1:parseInt(r);I(t,"points",e)}},onBlur:e=>{const r=parseInt(e.target.value)||1;I(t,"points",r)},className:"w-16 p-1 border border-gray-300 dark:border-gray-600 rounded text-center text-sm bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300",required:!0})]}),f.questions.length>1&&(0,as.jsx)("button",{type:"button",onClick:()=>(e=>{if(f.questions.length>1){const t=f.questions.filter(((t,r)=>r!==e));p((e=>({...e,questions:t})))}})(t),className:"p-1 text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 transition-colors",title:"Remove question",children:(0,as.jsx)(La,{size:14})})]})]}),(0,as.jsxs)("div",{className:"space-y-4",children:[(0,as.jsxs)("div",{children:[(0,as.jsx)("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Question Type"}),(0,as.jsx)("select",{value:e.questionType,onChange:e=>I(t,"questionType",e.target.value),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 text-sm",children:z.map((e=>(0,as.jsx)("option",{value:e.value,children:e.label},e.value)))})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Question Text"}),(0,as.jsx)("input",{type:"text",value:e.question,onChange:e=>I(t,"question",e.target.value),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded text-sm bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300",required:!0,placeholder:"Enter the question"})]}),"MULTIPLE_CHOICE"===e.questionType&&(0,as.jsxs)(as.Fragment,{children:[(0,as.jsx)("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Options (select correct answer)"}),e.options.map(((r,n)=>(0,as.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,as.jsx)("input",{type:"radio",name:`correct-${t}`,checked:e.correctAnswers.includes(n),onChange:()=>I(t,"correctAnswers",n),className:"h-4 w-4 text-blue-600 border-gray-300 dark:border-gray-600",required:0===e.correctAnswers.length}),(0,as.jsx)("input",{type:"text",value:r,onChange:r=>{const s=[...e.options];s[n]=r.target.value,I(t,"options",s)},className:"flex-1 p-2 border border-gray-300 dark:border-gray-600 rounded text-sm bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300",placeholder:`Option ${n+1}`,required:!0})]},n))),0===e.correctAnswers.length&&(0,as.jsx)("p",{className:"text-xs text-red-500 dark:text-red-400 mt-1",children:"Please select a correct answer"})]}),"CHECKBOX"===e.questionType&&(0,as.jsxs)(as.Fragment,{children:[(0,as.jsx)("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Options (select all correct answers)"}),e.options.map(((r,n)=>(0,as.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,as.jsx)("input",{type:"checkbox",checked:e.correctAnswers.includes(n),onChange:()=>I(t,"correctAnswers",n),className:"h-4 w-4 text-blue-600 border-gray-300 dark:border-gray-600 rounded",required:0===e.correctAnswers.length}),(0,as.jsx)("input",{type:"text",value:r,onChange:r=>{const s=[...e.options];s[n]=r.target.value,I(t,"options",s)},className:"flex-1 p-2 border border-gray-300 dark:border-gray-600 rounded text-sm bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300",placeholder:`Option ${n+1}`,required:!0})]},n))),0===e.correctAnswers.length&&(0,as.jsx)("p",{className:"text-xs text-red-500 dark:text-red-400 mt-1",children:"Please select at least one correct answer"})]}),"IDENTIFICATION"===e.questionType&&(0,as.jsxs)("div",{children:[(0,as.jsx)("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Correct Answer"}),(0,as.jsx)("input",{type:"text",value:Array.isArray(e.correctAnswers)&&e.correctAnswers[0]||"",onChange:e=>I(t,"correctAnswers",e.target.value),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded text-sm bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300",placeholder:"Enter the exact correct answer",required:!0}),(!e.correctAnswers[0]||""===e.correctAnswers[0].trim())&&(0,as.jsx)("p",{className:"text-xs text-red-500 dark:text-red-400 mt-1",children:"Please provide a correct answer"})]})]})]},t)))}),(0,as.jsx)(bs,{type:"button",onClick:()=>{p((e=>({...e,questions:[...e.questions,{question:"",questionType:"MULTIPLE_CHOICE",options:["","","",""],correctAnswers:[],points:10}]})))},variant:"outlineWhite",size:"sm",children:"Add Question"})]})]})]})})]}),k&&(0,as.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,as.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4",children:[(0,as.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Delete Lesson"}),(0,as.jsx)("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Are you sure you want to delete this lesson? This action cannot be undone and all lesson data including content blocks will be permanently removed."}),(0,as.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,as.jsx)(bs,{onClick:()=>{S(!1)},disabled:C,variant:"cancel",size:"sm",children:"Cancel"}),(0,as.jsx)(bs,{onClick:async()=>{_(!0);try{await yc.deleteLesson(i.id),st.success("Lesson deleted successfully!"),c&&c(null),o()}catch(e){const t=e.message||"Failed to delete lesson. Please try again.";w(t),st.error(t)}finally{_(!1),S(!1)}},disabled:C,variant:"default",size:"sm",children:C?"Deleting...":"Delete"})]})]})})]})},Yc=e=>{let{isOpen:t,onClose:r,classroom:s,onClassroomUpdated:a}=e;const[o,i]=(0,n.useState)(!1),[l,c]=(0,n.useState)(""),[d,u]=(0,n.useState)(""),[h,m]=(0,n.useState)({shortCode:"",name:"",description:"",image:null});(0,n.useEffect)((()=>{s&&m({shortCode:s.shortCode||"",name:s.name||"",description:s.description||"",image:null})}),[s]);const f=e=>{const{name:t,value:r}=e.target;m((e=>({...e,[t]:r})))};return t?(0,as.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,as.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl",children:[(0,as.jsxs)("div",{className:"flex justify-between items-center border-b px-6 py-4",children:[(0,as.jsx)(po,{type:"h3",fontSize:"xl",weight:"bold",className:"text-gray-900",children:"Edit Classroom"}),(0,as.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 focus:outline-none",children:(0,as.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,as.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,as.jsxs)("div",{className:"p-6",children:[l&&(0,as.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert",children:[(0,as.jsx)("span",{className:"block sm:inline",children:l}),(0,as.jsxs)("button",{className:"absolute top-0 bottom-0 right-0 px-4 py-3",onClick:()=>c(""),children:[(0,as.jsx)("span",{className:"sr-only",children:"Close"}),(0,as.jsx)("span",{className:"text-red-500",children:"\xd7"})]})]}),d&&(0,as.jsx)("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-4",role:"alert",children:(0,as.jsx)("span",{className:"block sm:inline",children:d})}),(0,as.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),i(!0),c(""),u("");try{const e=new FormData;e.append("name",h.name),e.append("description",h.description),e.append("shortCode",h.shortCode),h.image&&e.append("image",h.image);const t=await qs.updateClassroom(s.id,e);u(`Classroom "${t.name}" updated successfully!`),a&&a(t),setTimeout((()=>{r()}),1500)}catch(t){console.error("Update classroom error:",t),c(t.message||"Failed to update classroom")}finally{i(!1)}},className:"space-y-4",children:[(0,as.jsxs)("div",{children:[(0,as.jsx)(Mi,{htmlFor:"shortCode",className:"block text-sm font-medium text-gray-700 mb-1",children:"Classroom Code*"}),(0,as.jsx)(Si,{id:"shortCode",name:"shortCode",type:"text",required:!0,placeholder:"e.g. Math 101",variant:"gray",className:"mt-1 block w-full",value:h.shortCode,onChange:f})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)(Mi,{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Classroom Name*"}),(0,as.jsx)(Si,{id:"name",name:"name",type:"text",required:!0,variant:"gray",placeholder:"e.g. Mathematics for Beginners",className:"mt-1 block w-full",value:h.name,onChange:f})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)(Mi,{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,as.jsx)($l,{id:"description",name:"description",rows:"3",placeholder:"Brief description of the classroom",variant:"gray",className:"mt-1 block w-full",value:h.description,onChange:f})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)(Mi,{htmlFor:"image",className:"block text-sm font-medium text-gray-700 mb-1",children:"New Classroom Image (Optional)"}),(0,as.jsx)(Si,{id:"image",name:"image",type:"file",accept:"image/*",variant:"gray",className:"mt-1 block w-full text-sm text-gray-500\r file:mr-4 file:py-5 file:px-4\r file:rounded-md file:border-0\r file:text-sm file:font-semibold\r file:bg-blue-50 file:text-blue-700\r hover:file:bg-blue-100 !border-none",onChange:e=>{const t=e.target.files[0];if(t){if(t.size>5242880)return void c("Image size should be less than 5MB");m((e=>({...e,image:t})))}}}),(0,as.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Maximum file size: 5MB"})]}),(0,as.jsx)("div",{className:"pt-4",children:(0,as.jsx)(bs,{type:"submit",disabled:o,variant:"default",size:"sm",className:"w-full",children:o?"Updating...":"Update Classroom"})})]})]})]})}):null},Zc="/games",Jc={getGameById:async e=>{try{const t=await Xn.get(`${Zc}/${e}`);return console.log("Game fetched:",t.data),t.data}catch(t){throw console.error("Error fetching game:",t),t}},getGameByActivityId:async e=>{try{const t=await Xn.get(`${Zc}/activity/${e}`);return console.log("Game fetched by activity ID:",t.data),t.data}catch(t){throw console.error("Error fetching game by activity ID:",t),t}},getGamesByClassroomId:async e=>{try{const t=await Xn.get(`/activities/classroom/${e}`),r=t.data.filter((e=>"GAME"===e.type));if(0===r.length)return[];const n=r.map((e=>Xn.get(`${Zc}/activity/${e.id}`).then((e=>e.data)).catch((t=>(console.error(`Error fetching game for activity ${e.id}:`,t),null)))));return(await Promise.all(n)).filter((e=>null!==e))}catch(t){throw console.error("Error fetching games for classroom:",t),t}},getGamesByClassroomIdAndType:async(e,t)=>{try{const r=await Xn.get(`${Zc}/classroom/${e}/type/${t}`);return console.log(`${t} games fetched:`,r.data),r.data}catch(r){throw console.error(`Error fetching ${t} games:`,r),r}},createGame:async e=>{try{console.log("Creating game with original data:",e);const t={...e};t.lessonId&&!t.classroomId&&(console.log("Converting lessonId to classroomId for backward compatibility"),t.classroomId=t.lessonId,delete t.lessonId),t.level&&(console.log("Removing level field as it's not part of the backend model"),delete t.level),console.log("Sending game creation payload:",t);const r=await Xn.post(Zc,t);return console.log("Game created:",r.data),r.data}catch(t){throw console.error("Error creating game:",t),t}},updateGame:async(e,t)=>{try{console.log("Updating game with data:",t);const r=await Xn.put(`${Zc}/${e}`,{classroomId:t.classroomId,name:t.name,instructions:t.instructions,topic:t.topic,type:t.type,maxLevels:t.maxLevels,orderIndex:t.orderIndex,customContent:t.customContent});return console.log("Game updated:",r.data),r.data}catch(r){throw console.error("Error updating game:",r),r}},deleteGame:async e=>{try{return await Xn.delete(`${Zc}/${e}`),console.log("Game deleted successfully"),!0}catch(t){throw console.error("Error deleting game:",t),t}},submitGameScore:async e=>{try{console.log("Submitting score data:",e);const t=await Xn.post(`${Zc}/submit-score`,{gameId:e.gameId,score:e.score,level:e.level||1,timeSpent:e.timeSpent,levelAchieved:e.levelAchieved,playedAt:e.playedAt,studentId:e.studentId,studentName:e.studentName,studentUsername:e.studentUsername,gameType:e.gameType,gameName:e.gameName,isHighScore:e.isHighScore,isLevelUp:e.isLevelUp});return console.log("Game score submitted, server response:",t.data),t.data}catch(t){throw console.error("Error submitting game score:",t),t}},getStudentGameLevel:async(e,t)=>{try{const r=await Xn.get(`${Zc}/${e}/student/${t}/level`);return console.log("Student game level fetched:",r.data),r.data}catch(r){throw console.error("Error fetching student game level:",r),r}},isLevelUnlocked:async(e,t,r)=>{try{const n=await Xn.get(`${Zc}/${e}/student/${t}/level/${r}/unlocked`);return console.log("Level unlock status fetched:",n.data),n.data}catch(n){throw console.error("Error checking level unlock status:",n),n}},getGameLeaderboard:async e=>{try{const t=await Xn.get(`${Zc}/${e}/leaderboard`);return console.log("Game leaderboard fetched:",t.data),t.data}catch(t){throw console.error("Error fetching game leaderboard:",t),t}},getClassroomLeaderboard:async e=>{try{const t=await Xn.get(`${Zc}/classroom/${e}/leaderboard`);return console.log("Classroom leaderboard fetched:",t.data),t.data}catch(t){throw console.error("Error fetching classroom leaderboard:",t),t}},getGameAnalytics:async e=>{try{const t=await Xn.get(`${Zc}/${e}/analytics`);return console.log("Game analytics fetched:",t.data),t.data}catch(t){throw console.error("Error fetching game analytics:",t),t}}},Xc=e=>{let{isOpen:t,onClose:r,classroomId:s,activityId:a,onActivityCreated:o}=e;const{token:i}=is(),[l,c]=(0,n.useState)({name:"",instructions:"",topic:"",type:"FALLING_GAME"}),[d,u]=(0,n.useState)(!1);if(!t)return null;const h=e=>{const{name:t,value:r}=e.target;c((e=>({...e,[t]:r})))},m=async e=>{if(e.preventDefault(),s||a){u(!0);try{const e={name:l.name,instructions:l.instructions,topic:l.topic,type:l.type};a?e.activityId=a:e.classroomId=s;const t=await Jc.createGame(e);st.success("Game activity created successfully!"),o(t),r()}catch(i){var t,n;console.error("Error creating game activity:",i),st.error((null===(t=i.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Failed to create game activity")}finally{u(!1)}}else st.error("No classroom or activity selected. Please select one first.")},f=(0,as.jsxs)(as.Fragment,{children:[(0,as.jsx)(bs,{variant:"cancel",size:"sm",rounded:"full",onClick:r,disabled:d,children:"Cancel"}),(0,as.jsx)(bs,{type:"submit",variant:"default",size:"sm",onClick:m,rounded:"full",disabled:d,children:d?"Creating...":"Create Game"})]});return(0,as.jsx)(lc,{isOpen:t,onClose:r,title:"Add Game Activity",footer:f,children:(0,as.jsxs)("form",{onSubmit:m,className:"space-y-4",children:[(0,as.jsxs)("div",{children:[(0,as.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Game Name *"}),(0,as.jsx)("input",{type:"text",name:"name",value:l.name,onChange:h,required:!0,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 transition-colors",placeholder:"Enter game name"})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Instructions"}),(0,as.jsx)("textarea",{name:"instructions",value:l.instructions,onChange:h,rows:"3",className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 transition-colors resize-none",placeholder:"Enter game instructions"})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Topic *"}),(0,as.jsx)("input",{type:"text",name:"topic",value:l.topic,onChange:h,required:!0,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 transition-colors",placeholder:"Addition or Multiplication"})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Game Type"}),(0,as.jsxs)("select",{name:"type",value:l.type,onChange:h,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 transition-colors",children:[(0,as.jsx)("option",{value:"FALLING_GAME",children:"Falling Game Multiplication"}),(0,as.jsx)("option",{value:"MULTIPLE_CHOICE",children:"Multiple Choice Game Addition"})]})]})]})})},ed="/reports",td=async(e,t,r,n)=>{console.log("Generating quiz performance report:",{classroomId:e,teacherId:t,reportName:r,reportDescription:n});const s=await Xn.post(`${ed}/quiz-performance`,{classroomId:e,teacherId:t,reportName:r,reportDescription:n});return console.log("Quiz performance report response:",s.data),s.data},rd=async function(e,t,r,n){let s,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"EXCEL";if(console.log("%c=== STARTING REPORT GENERATION API CALL ===","background: purple; color: white"),!e||!t)throw new Error("Missing required parameters: classroomId and teacherId are required");try{if(s=JSON.parse(n),!s.students||!s.headers)throw new Error("Invalid report description: missing required data")}catch(o){throw console.error("Error parsing report description:",o),new Error("Invalid report description format")}console.log("Request parameters:",{classroomId:e,teacherId:t,reportName:r,reportDescription:s,fileType:a});try{const s=await Xn.post(`${ed}/class-record`,{classroomId:e,teacherId:t,reportName:r,reportDescription:n,fileType:a});console.log("%c=== REPORT GENERATION RESPONSE ===","background: green; color: white"),console.log("Response data:",s.data),console.log("Generated report ID:",s.data.id);const i=s.data;if("string"===typeof i.reportData)try{i.reportData=JSON.parse(i.reportData),"string"===typeof i.reportData.students&&(i.reportData.students=JSON.parse(i.reportData.students)),"string"===typeof i.reportData.quizzes&&(i.reportData.quizzes=JSON.parse(i.reportData.quizzes)),Array.isArray(i.reportData.students)&&i.reportData.students.forEach((e=>{"string"===typeof e.quizAttempts&&(e.quizAttempts=JSON.parse(e.quizAttempts))}))}catch(o){console.error("Error parsing report data:",o)}return i}catch(o){if(console.error("%c=== ERROR GENERATING REPORT ===","background: red; color: white"),console.error("Error details:",o),o.response){if(console.error("Server error response:",o.response.data),401===o.response.status)throw new Error("Session expired. Please log in again.");if(400===o.response.status)throw new Error(o.response.data.message||"Invalid request data");if(500===o.response.status)throw new Error("Server error while generating report. Please try again later.")}else if(o.request)throw new Error("No response received from server. Please check your connection.");throw o}},nd=async e=>{console.log("Fetching reports for classroom:",e);const t=await Xn.get(`${ed}/classroom/${e}`);console.log("Classroom reports response:",t.data);const r=t.data;return r.forEach((e=>{if("string"===typeof e.reportData)try{e.reportData=JSON.parse(e.reportData),"string"===typeof e.reportData.students&&(e.reportData.students=JSON.parse(e.reportData.students)),"string"===typeof e.reportData.quizzes&&(e.reportData.quizzes=JSON.parse(e.reportData.quizzes)),e.reportData.students.forEach((e=>{"string"===typeof e.quizAttempts&&(e.quizAttempts=JSON.parse(e.quizAttempts))}))}catch(t){console.error("Error parsing report data:",t)}})),r},sd=async e=>{console.log("Downloading report file:",e);const t=await Xn.get(`${ed}/${e}/download`,{responseType:"blob"});return console.log("Download response received"),t.data},ad=async e=>{console.log("Fetching analytics for classroom:",e);const t=await Xn.get(`${ed}/classroom/${e}/analytics`);return console.log("Analytics response:",t.data),t.data},od=async(e,t)=>{try{var r,n;console.log("[DOWNLOAD FILE] Starting download for report ID:",e),console.log("Original reportId passed to function:",e),console.log("Original fileName:",t);const s=Number(e);if(isNaN(s))throw console.error("Invalid report ID:",e),new Error(`Invalid report ID: ${e}`);const a=`${ed}/${s}/download`;console.log("[DOWNLOAD URL]",a),console.log("Call stack:",(new Error).stack);const o=await Xn.get(a,{responseType:"blob"});let i;console.log("[DOWNLOAD RESPONSE] Status:",o.status),console.log("Response details:",{status:o.status,statusText:o.statusText,dataType:null===(r=o.data)||void 0===r?void 0:r.type,dataSize:null===(n=o.data)||void 0===n?void 0:n.size,headers:o.headers}),i=t.endsWith(".xlsx")?"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":t.endsWith(".csv")?"text/csv":"application/octet-stream";const l=new Blob([o.data],{type:i});console.log("Created blob:",{size:l.size,type:l.type});const c=window.URL.createObjectURL(l),d=document.createElement("a");return d.href=c,d.setAttribute("download",t),document.body.appendChild(d),d.click(),document.body.removeChild(d),window.URL.revokeObjectURL(c),o.data}catch(s){throw console.error("Error downloading report file:",s),s}},id=async e=>{console.log("Fetching classroom quiz data:",e);const t=await Xn.get(`/quizzes/classroom/${e}/all-data`);return console.log("Classroom quiz data response:",t.data),t.data},ld=async e=>{console.log("Fetching quiz attempts for classroom:",e);const t=await Xn.get(`/quiz-attempts/classroom/${e}`);return console.log("Quiz attempts response:",t.data),t.data};function cd(e){return Es({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M3.75 15a.75.75 0 0 1 .75.75v3.5c0 .138.112.25.25.25h3.5a.75.75 0 0 1 0 1.5h-3.5A1.75 1.75 0 0 1 3 19.25v-3.5a.75.75 0 0 1 .75-.75Zm16.5 0a.75.75 0 0 1 .75.75v3.5A1.75 1.75 0 0 1 19.25 21h-3.5a.75.75 0 0 1 0-1.5h3.5a.25.25 0 0 0 .25-.25v-3.5a.75.75 0 0 1 .75-.75ZM4.75 4.5a.25.25 0 0 0-.25.25v3.5a.75.75 0 0 1-1.5 0v-3.5C3 3.784 3.784 3 4.75 3h3.5a.75.75 0 0 1 0 1.5ZM15 3.75a.75.75 0 0 1 .75-.75h3.5c.966 0 1.75.784 1.75 1.75v3.5a.75.75 0 0 1-1.5 0v-3.5a.25.25 0 0 0-.25-.25h-3.5a.75.75 0 0 1-.75-.75Z"},child:[]}]})(e)}function dd(e){return e+.5|0}const ud=(e,t,r)=>Math.max(Math.min(e,r),t);function hd(e){return ud(dd(2.55*e),0,255)}function md(e){return ud(dd(255*e),0,255)}function fd(e){return ud(dd(e/2.55)/100,0,1)}function pd(e){return ud(dd(100*e),0,100)}const gd={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},xd=[..."0123456789ABCDEF"],bd=e=>xd[15&e],yd=e=>xd[(240&e)>>4]+xd[15&e],vd=e=>(240&e)>>4===(15&e);function wd(e){var t=(e=>vd(e.r)&&vd(e.g)&&vd(e.b)&&vd(e.a))(e)?bd:yd;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}const jd=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Nd(e,t,r){const n=t*Math.min(r,1-r),s=function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return r-n*Math.max(Math.min(s-3,9-s,1),-1)};return[s(0),s(8),s(4)]}function kd(e,t,r){const n=function(n){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(n+e/60)%6;return r-r*t*Math.max(Math.min(s,4-s,1),0)};return[n(5),n(3),n(1)]}function Sd(e,t,r){const n=Nd(e,1,.5);let s;for(t+r>1&&(s=1/(t+r),t*=s,r*=s),s=0;s<3;s++)n[s]*=1-t-r,n[s]+=t;return n}function Cd(e){const t=e.r/255,r=e.g/255,n=e.b/255,s=Math.max(t,r,n),a=Math.min(t,r,n),o=(s+a)/2;let i,l,c;return s!==a&&(c=s-a,l=o>.5?c/(2-s-a):c/(s+a),i=function(e,t,r,n,s){return e===s?(t-r)/n+(t<r?6:0):t===s?(r-e)/n+2:(e-t)/n+4}(t,r,n,c,s),i=60*i+.5),[0|i,l||0,o]}function _d(e,t,r,n){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,r,n)).map(md)}function Ed(e,t,r){return _d(Nd,e,t,r)}function Ad(e){return(e%360+360)%360}function Od(e){const t=jd.exec(e);let r,n=255;if(!t)return;t[5]!==r&&(n=t[6]?hd(+t[5]):md(+t[5]));const s=Ad(+t[2]),a=+t[3]/100,o=+t[4]/100;return r="hwb"===t[1]?function(e,t,r){return _d(Sd,e,t,r)}(s,a,o):"hsv"===t[1]?function(e,t,r){return _d(kd,e,t,r)}(s,a,o):Ed(s,a,o),{r:r[0],g:r[1],b:r[2],a:n}}const Td={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},zd={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let Pd;function Id(e){Pd||(Pd=function(){const e={},t=Object.keys(zd),r=Object.keys(Td);let n,s,a,o,i;for(n=0;n<t.length;n++){for(o=i=t[n],s=0;s<r.length;s++)a=r[s],i=i.replace(a,Td[a]);a=parseInt(zd[o],16),e[i]=[a>>16&255,a>>8&255,255&a]}return e}(),Pd.transparent=[0,0,0,0]);const t=Pd[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}const Ld=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const Md=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,qd=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function Rd(e,t,r){if(e){let n=Cd(e);n[t]=Math.max(0,Math.min(n[t]+n[t]*r,0===t?360:1)),n=Ed(n),e.r=n[0],e.g=n[1],e.b=n[2]}}function Dd(e,t){return e?Object.assign(t||{},e):e}function Fd(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=md(e[3]))):(t=Dd(e,{r:0,g:0,b:0,a:1})).a=md(t.a),t}function Bd(e){return"r"===e.charAt(0)?function(e){const t=Ld.exec(e);let r,n,s,a=255;if(t){if(t[7]!==r){const e=+t[7];a=t[8]?hd(e):ud(255*e,0,255)}return r=+t[1],n=+t[3],s=+t[5],r=255&(t[2]?hd(r):ud(r,0,255)),n=255&(t[4]?hd(n):ud(n,0,255)),s=255&(t[6]?hd(s):ud(s,0,255)),{r:r,g:n,b:s,a:a}}}(e):Od(e)}class $d{constructor(e){if(e instanceof $d)return e;const t=typeof e;let r;"object"===t?r=Fd(e):"string"===t&&(r=function(e){var t,r=e.length;return"#"===e[0]&&(4===r||5===r?t={r:255&17*gd[e[1]],g:255&17*gd[e[2]],b:255&17*gd[e[3]],a:5===r?17*gd[e[4]]:255}:7!==r&&9!==r||(t={r:gd[e[1]]<<4|gd[e[2]],g:gd[e[3]]<<4|gd[e[4]],b:gd[e[5]]<<4|gd[e[6]],a:9===r?gd[e[7]]<<4|gd[e[8]]:255})),t}(e)||Id(e)||Bd(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=Dd(this._rgb);return e&&(e.a=fd(e.a)),e}set rgb(e){this._rgb=Fd(e)}rgbString(){return this._valid?(e=this._rgb)&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${fd(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`):void 0;var e}hexString(){return this._valid?wd(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=Cd(e),r=t[0],n=pd(t[1]),s=pd(t[2]);return e.a<255?`hsla(${r}, ${n}%, ${s}%, ${fd(e.a)})`:`hsl(${r}, ${n}%, ${s}%)`}(this._rgb):void 0}mix(e,t){if(e){const r=this.rgb,n=e.rgb;let s;const a=t===s?.5:t,o=2*a-1,i=r.a-n.a,l=((o*i===-1?o:(o+i)/(1+o*i))+1)/2;s=1-l,r.r=255&l*r.r+s*n.r+.5,r.g=255&l*r.g+s*n.g+.5,r.b=255&l*r.b+s*n.b+.5,r.a=a*r.a+(1-a)*n.a,this.rgb=r}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,r){const n=qd(fd(e.r)),s=qd(fd(e.g)),a=qd(fd(e.b));return{r:md(Md(n+r*(qd(fd(t.r))-n))),g:md(Md(s+r*(qd(fd(t.g))-s))),b:md(Md(a+r*(qd(fd(t.b))-a))),a:e.a+r*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new $d(this.rgb)}alpha(e){return this._rgb.a=md(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=dd(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Rd(this._rgb,2,e),this}darken(e){return Rd(this._rgb,2,-e),this}saturate(e){return Rd(this._rgb,1,e),this}desaturate(e){return Rd(this._rgb,1,-e),this}rotate(e){return function(e,t){var r=Cd(e);r[0]=Ad(r[0]+t),r=Ed(r),e.r=r[0],e.g=r[1],e.b=r[2]}(this._rgb,e),this}}function Ud(){}const Hd=(()=>{let e=0;return()=>e++})();function Wd(e){return null===e||void 0===e}function Qd(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function Vd(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function Gd(e){return("number"===typeof e||e instanceof Number)&&isFinite(+e)}function Kd(e,t){return Gd(e)?e:t}function Yd(e,t){return"undefined"===typeof e?t:e}const Zd=(e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function Jd(e,t,r){if(e&&"function"===typeof e.call)return e.apply(r,t)}function Xd(e,t,r,n){let s,a,o;if(Qd(e))if(a=e.length,n)for(s=a-1;s>=0;s--)t.call(r,e[s],s);else for(s=0;s<a;s++)t.call(r,e[s],s);else if(Vd(e))for(o=Object.keys(e),a=o.length,s=0;s<a;s++)t.call(r,e[o[s]],o[s])}function eu(e,t){let r,n,s,a;if(!e||!t||e.length!==t.length)return!1;for(r=0,n=e.length;r<n;++r)if(s=e[r],a=t[r],s.datasetIndex!==a.datasetIndex||s.index!==a.index)return!1;return!0}function tu(e){if(Qd(e))return e.map(tu);if(Vd(e)){const t=Object.create(null),r=Object.keys(e),n=r.length;let s=0;for(;s<n;++s)t[r[s]]=tu(e[r[s]]);return t}return e}function ru(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function nu(e,t,r,n){if(!ru(e))return;const s=t[e],a=r[e];Vd(s)&&Vd(a)?su(s,a,n):t[e]=tu(a)}function su(e,t,r){const n=Qd(t)?t:[t],s=n.length;if(!Vd(e))return e;const a=(r=r||{}).merger||nu;let o;for(let i=0;i<s;++i){if(o=n[i],!Vd(o))continue;const t=Object.keys(o);for(let n=0,s=t.length;n<s;++n)a(t[n],e,o,r)}return e}function au(e,t){return su(e,t,{merger:ou})}function ou(e,t,r){if(!ru(e))return;const n=t[e],s=r[e];Vd(n)&&Vd(s)?au(n,s):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=tu(s))}const iu={"":e=>e,x:e=>e.x,y:e=>e.y};function lu(e,t){const r=iu[t]||(iu[t]=function(e){const t=function(e){const t=e.split("."),r=[];let n="";for(const s of t)n+=s,n.endsWith("\\")?n=n.slice(0,-1)+".":(r.push(n),n="");return r}(e);return e=>{for(const r of t){if(""===r)break;e=e&&e[r]}return e}}(t));return r(e)}function cu(e){return e.charAt(0).toUpperCase()+e.slice(1)}const du=e=>"undefined"!==typeof e,uu=e=>"function"===typeof e,hu=(e,t)=>{if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0};const mu=Math.PI,fu=2*mu,pu=fu+mu,gu=Number.POSITIVE_INFINITY,xu=mu/180,bu=mu/2,yu=mu/4,vu=2*mu/3,wu=Math.log10,ju=Math.sign;function Nu(e,t,r){return Math.abs(e-t)<r}function ku(e){const t=Math.round(e);e=Nu(e,t,e/1e3)?t:e;const r=Math.pow(10,Math.floor(wu(e))),n=e/r;return(n<=1?1:n<=2?2:n<=5?5:10)*r}function Su(e){return!function(e){return"symbol"===typeof e||"object"===typeof e&&null!==e&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function Cu(e,t,r){let n,s,a;for(n=0,s=e.length;n<s;n++)a=e[n][r],isNaN(a)||(t.min=Math.min(t.min,a),t.max=Math.max(t.max,a))}function _u(e){return e*(mu/180)}function Eu(e){return e*(180/mu)}function Au(e){if(!Gd(e))return;let t=1,r=0;for(;Math.round(e*t)/t!==e;)t*=10,r++;return r}function Ou(e,t){const r=t.x-e.x,n=t.y-e.y,s=Math.sqrt(r*r+n*n);let a=Math.atan2(n,r);return a<-.5*mu&&(a+=fu),{angle:a,distance:s}}function Tu(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function zu(e,t){return(e-t+pu)%fu-mu}function Pu(e){return(e%fu+fu)%fu}function Iu(e,t,r,n){const s=Pu(e),a=Pu(t),o=Pu(r),i=Pu(a-s),l=Pu(o-s),c=Pu(s-a),d=Pu(s-o);return s===a||s===o||n&&a===o||i>l&&c<d}function Lu(e,t,r){return Math.max(t,Math.min(r,e))}function Mu(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return e>=Math.min(t,r)-n&&e<=Math.max(t,r)+n}function qu(e,t,r){r=r||(r=>e[r]<t);let n,s=e.length-1,a=0;for(;s-a>1;)n=a+s>>1,r(n)?a=n:s=n;return{lo:a,hi:s}}const Ru=(e,t,r,n)=>qu(e,r,n?n=>{const s=e[n][t];return s<r||s===r&&e[n+1][t]===r}:n=>e[n][t]<r),Du=(e,t,r)=>qu(e,r,(n=>e[n][t]>=r));const Fu=["push","pop","shift","splice","unshift"];function Bu(e,t){const r=e._chartjs;if(!r)return;const n=r.listeners,s=n.indexOf(t);-1!==s&&n.splice(s,1),n.length>0||(Fu.forEach((t=>{delete e[t]})),delete e._chartjs)}function $u(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const Uu="undefined"===typeof window?function(e){return e()}:window.requestAnimationFrame;function Hu(e,t){let r=[],n=!1;return function(){for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];r=a,n||(n=!0,Uu.call(window,(()=>{n=!1,e.apply(t,r)})))}}const Wu=e=>"start"===e?"left":"end"===e?"right":"center",Qu=(e,t,r)=>"start"===e?t:"end"===e?r:(t+r)/2;function Vu(e,t,r){const n=t.length;let s=0,a=n;if(e._sorted){const{iScale:o,vScale:i,_parsed:l}=e,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,d=o.axis,{min:u,max:h,minDefined:m,maxDefined:f}=o.getUserBounds();if(m){if(s=Math.min(Ru(l,d,u).lo,r?n:Ru(t,d,o.getPixelForValue(u)).lo),c){const e=l.slice(0,s+1).reverse().findIndex((e=>!Wd(e[i.axis])));s-=Math.max(0,e)}s=Lu(s,0,n-1)}if(f){let e=Math.max(Ru(l,o.axis,h,!0).hi+1,r?0:Ru(t,d,o.getPixelForValue(h),!0).hi+1);if(c){const t=l.slice(e-1).findIndex((e=>!Wd(e[i.axis])));e+=Math.max(0,t)}a=Lu(e,s,n)-s}else a=n-s}return{start:s,count:a}}function Gu(e){const{xScale:t,yScale:r,_scaleRanges:n}=e,s={xmin:t.min,xmax:t.max,ymin:r.min,ymax:r.max};if(!n)return e._scaleRanges=s,!0;const a=n.xmin!==t.min||n.xmax!==t.max||n.ymin!==r.min||n.ymax!==r.max;return Object.assign(n,s),a}const Ku=e=>0===e||1===e,Yu=(e,t,r)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*fu/r),Zu=(e,t,r)=>Math.pow(2,-10*e)*Math.sin((e-t)*fu/r)+1,Ju={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*bu),easeOutSine:e=>Math.sin(e*bu),easeInOutSine:e=>-.5*(Math.cos(mu*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>Ku(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>Ku(e)?e:Yu(e,.075,.3),easeOutElastic:e=>Ku(e)?e:Zu(e,.075,.3),easeInOutElastic(e){const t=.1125;return Ku(e)?e:e<.5?.5*Yu(2*e,t,.45):.5+.5*Zu(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-Ju.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,r=2.75;return e<1/r?t*e*e:e<2/r?t*(e-=1.5/r)*e+.75:e<2.5/r?t*(e-=2.25/r)*e+.9375:t*(e-=2.625/r)*e+.984375},easeInOutBounce:e=>e<.5?.5*Ju.easeInBounce(2*e):.5*Ju.easeOutBounce(2*e-1)+.5};function Xu(e){if(e&&"object"===typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function eh(e){return Xu(e)?e:new $d(e)}function th(e){return Xu(e)?e:new $d(e).saturate(.5).darken(.1).hexString()}const rh=["x","y","borderWidth","radius","tension"],nh=["color","borderColor","backgroundColor"];const sh=new Map;function ah(e,t,r){return function(e,t){t=t||{};const r=e+JSON.stringify(t);let n=sh.get(r);return n||(n=new Intl.NumberFormat(e,t),sh.set(r,n)),n}(t,r).format(e)}const oh={values:e=>Qd(e)?e:""+e,numeric(e,t,r){if(0===e)return"0";const n=this.chart.options.locale;let s,a=e;if(r.length>1){const t=Math.max(Math.abs(r[0].value),Math.abs(r[r.length-1].value));(t<1e-4||t>1e15)&&(s="scientific"),a=function(e,t){let r=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(r)>=1&&e!==Math.floor(e)&&(r=e-Math.floor(e));return r}(e,r)}const o=wu(Math.abs(a)),i=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:s,minimumFractionDigits:i,maximumFractionDigits:i};return Object.assign(l,this.options.ticks.format),ah(e,n,l)},logarithmic(e,t,r){if(0===e)return"0";const n=r[t].significand||e/Math.pow(10,Math.floor(wu(e)));return[1,2,3,5,10,15].includes(n)||t>.8*r.length?oh.numeric.call(this,e,t,r):""}};var ih={formatters:oh};const lh=Object.create(null),ch=Object.create(null);function dh(e,t){if(!t)return e;const r=t.split(".");for(let n=0,s=r.length;n<s;++n){const t=r[n];e=e[t]||(e[t]=Object.create(null))}return e}function uh(e,t,r){return"string"===typeof t?su(dh(e,t),r):su(dh(e,""),t)}class hh{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>th(t.backgroundColor),this.hoverBorderColor=(e,t)=>th(t.borderColor),this.hoverColor=(e,t)=>th(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return uh(this,e,t)}get(e){return dh(this,e)}describe(e,t){return uh(ch,e,t)}override(e,t){return uh(lh,e,t)}route(e,t,r,n){const s=dh(this,e),a=dh(this,r),o="_"+t;Object.defineProperties(s,{[o]:{value:s[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[o],t=a[n];return Vd(e)?Object.assign({},t,e):Yd(e,t)},set(e){this[o]=e}}})}apply(e){e.forEach((e=>e(this)))}}var mh=new hh({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:nh},numbers:{type:"number",properties:rh}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:ih.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function fh(e,t,r,n,s){let a=t[s];return a||(a=t[s]=e.measureText(s).width,r.push(s)),a>n&&(n=a),n}function ph(e,t,r){const n=e.currentDevicePixelRatio,s=0!==r?Math.max(r/2,.5):0;return Math.round((t-s)*n)/n+s}function gh(e,t){(t||e)&&((t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function xh(e,t,r,n){bh(e,t,r,n,null)}function bh(e,t,r,n,s){let a,o,i,l,c,d,u,h;const m=t.pointStyle,f=t.rotation,p=t.radius;let g=(f||0)*xu;if(m&&"object"===typeof m&&(a=m.toString(),"[object HTMLImageElement]"===a||"[object HTMLCanvasElement]"===a))return e.save(),e.translate(r,n),e.rotate(g),e.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),void e.restore();if(!(isNaN(p)||p<=0)){switch(e.beginPath(),m){default:s?e.ellipse(r,n,s/2,p,0,0,fu):e.arc(r,n,p,0,fu),e.closePath();break;case"triangle":d=s?s/2:p,e.moveTo(r+Math.sin(g)*d,n-Math.cos(g)*p),g+=vu,e.lineTo(r+Math.sin(g)*d,n-Math.cos(g)*p),g+=vu,e.lineTo(r+Math.sin(g)*d,n-Math.cos(g)*p),e.closePath();break;case"rectRounded":c=.516*p,l=p-c,o=Math.cos(g+yu)*l,u=Math.cos(g+yu)*(s?s/2-c:l),i=Math.sin(g+yu)*l,h=Math.sin(g+yu)*(s?s/2-c:l),e.arc(r-u,n-i,c,g-mu,g-bu),e.arc(r+h,n-o,c,g-bu,g),e.arc(r+u,n+i,c,g,g+bu),e.arc(r-h,n+o,c,g+bu,g+mu),e.closePath();break;case"rect":if(!f){l=Math.SQRT1_2*p,d=s?s/2:l,e.rect(r-d,n-l,2*d,2*l);break}g+=yu;case"rectRot":u=Math.cos(g)*(s?s/2:p),o=Math.cos(g)*p,i=Math.sin(g)*p,h=Math.sin(g)*(s?s/2:p),e.moveTo(r-u,n-i),e.lineTo(r+h,n-o),e.lineTo(r+u,n+i),e.lineTo(r-h,n+o),e.closePath();break;case"crossRot":g+=yu;case"cross":u=Math.cos(g)*(s?s/2:p),o=Math.cos(g)*p,i=Math.sin(g)*p,h=Math.sin(g)*(s?s/2:p),e.moveTo(r-u,n-i),e.lineTo(r+u,n+i),e.moveTo(r+h,n-o),e.lineTo(r-h,n+o);break;case"star":u=Math.cos(g)*(s?s/2:p),o=Math.cos(g)*p,i=Math.sin(g)*p,h=Math.sin(g)*(s?s/2:p),e.moveTo(r-u,n-i),e.lineTo(r+u,n+i),e.moveTo(r+h,n-o),e.lineTo(r-h,n+o),g+=yu,u=Math.cos(g)*(s?s/2:p),o=Math.cos(g)*p,i=Math.sin(g)*p,h=Math.sin(g)*(s?s/2:p),e.moveTo(r-u,n-i),e.lineTo(r+u,n+i),e.moveTo(r+h,n-o),e.lineTo(r-h,n+o);break;case"line":o=s?s/2:Math.cos(g)*p,i=Math.sin(g)*p,e.moveTo(r-o,n-i),e.lineTo(r+o,n+i);break;case"dash":e.moveTo(r,n),e.lineTo(r+Math.cos(g)*(s?s/2:p),n+Math.sin(g)*p);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function yh(e,t,r){return r=r||.5,!t||e&&e.x>t.left-r&&e.x<t.right+r&&e.y>t.top-r&&e.y<t.bottom+r}function vh(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function wh(e){e.restore()}function jh(e,t,r,n,s){if(!t)return e.lineTo(r.x,r.y);if("middle"===s){const n=(t.x+r.x)/2;e.lineTo(n,t.y),e.lineTo(n,r.y)}else"after"===s!==!!n?e.lineTo(t.x,r.y):e.lineTo(r.x,t.y);e.lineTo(r.x,r.y)}function Nh(e,t,r,n){if(!t)return e.lineTo(r.x,r.y);e.bezierCurveTo(n?t.cp1x:t.cp2x,n?t.cp1y:t.cp2y,n?r.cp2x:r.cp1x,n?r.cp2y:r.cp1y,r.x,r.y)}function kh(e,t,r,n,s){if(s.strikethrough||s.underline){const a=e.measureText(n),o=t-a.actualBoundingBoxLeft,i=t+a.actualBoundingBoxRight,l=r-a.actualBoundingBoxAscent,c=r+a.actualBoundingBoxDescent,d=s.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=s.decorationWidth||2,e.moveTo(o,d),e.lineTo(i,d),e.stroke()}}function Sh(e,t){const r=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=r}function Ch(e,t,r,n,s){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=Qd(t)?t:[t],i=a.strokeWidth>0&&""!==a.strokeColor;let l,c;for(e.save(),e.font=s.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),Wd(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,a),l=0;l<o.length;++l)c=o[l],a.backdrop&&Sh(e,a.backdrop),i&&(a.strokeColor&&(e.strokeStyle=a.strokeColor),Wd(a.strokeWidth)||(e.lineWidth=a.strokeWidth),e.strokeText(c,r,n,a.maxWidth)),e.fillText(c,r,n,a.maxWidth),kh(e,r,n,c,a),n+=Number(s.lineHeight);e.restore()}function _h(e,t){const{x:r,y:n,w:s,h:a,radius:o}=t;e.arc(r+o.topLeft,n+o.topLeft,o.topLeft,1.5*mu,mu,!0),e.lineTo(r,n+a-o.bottomLeft),e.arc(r+o.bottomLeft,n+a-o.bottomLeft,o.bottomLeft,mu,bu,!0),e.lineTo(r+s-o.bottomRight,n+a),e.arc(r+s-o.bottomRight,n+a-o.bottomRight,o.bottomRight,bu,0,!0),e.lineTo(r+s,n+o.topRight),e.arc(r+s-o.topRight,n+o.topRight,o.topRight,0,-bu,!0),e.lineTo(r+o.topLeft,n)}const Eh=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Ah=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Oh(e,t){const r=(""+e).match(Eh);if(!r||"normal"===r[1])return 1.2*t;switch(e=+r[2],r[3]){case"px":return e;case"%":e/=100}return t*e}function Th(e,t){const r={},n=Vd(t),s=n?Object.keys(t):t,a=Vd(e)?n?r=>Yd(e[r],e[t[r]]):t=>e[t]:()=>e;for(const o of s)r[o]=+a(o)||0;return r}function zh(e){return Th(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Ph(e){return Th(e,["topLeft","topRight","bottomLeft","bottomRight"])}function Ih(e){const t=zh(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Lh(e,t){e=e||{},t=t||mh.font;let r=Yd(e.size,t.size);"string"===typeof r&&(r=parseInt(r,10));let n=Yd(e.style,t.style);n&&!(""+n).match(Ah)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const s={family:Yd(e.family,t.family),lineHeight:Oh(Yd(e.lineHeight,t.lineHeight),r),size:r,style:n,weight:Yd(e.weight,t.weight),string:""};return s.string=function(e){return!e||Wd(e.size)||Wd(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(s),s}function Mh(e,t,r,n){let s,a,o,i=!0;for(s=0,a=e.length;s<a;++s)if(o=e[s],void 0!==o&&(void 0!==t&&"function"===typeof o&&(o=o(t),i=!1),void 0!==r&&Qd(o)&&(o=o[r%o.length],i=!1),void 0!==o))return n&&!i&&(n.cacheable=!1),o}function qh(e,t){return Object.assign(Object.create(e),t)}function Rh(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],r=arguments.length>3?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>e[0];const s=(arguments.length>2?arguments[2]:void 0)||e;"undefined"===typeof r&&(r=Kh("_fallback",e));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:s,_fallback:r,_getTarget:n,override:n=>Rh([n,...e],t,s,r)};return new Proxy(a,{deleteProperty:(t,r)=>(delete t[r],delete t._keys,delete e[0][r],!0),get:(r,n)=>Uh(r,n,(()=>function(e,t,r,n){let s;for(const a of t)if(s=Kh(Bh(a,e),r),"undefined"!==typeof s)return $h(e,s)?Vh(r,n,e,s):s}(n,t,e,r))),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>Yh(e).includes(t),ownKeys:e=>Yh(e),set(e,t,r){const s=e._storage||(e._storage=n());return e[t]=s[t]=r,delete e._keys,!0}})}function Dh(e,t,r,n){const s={_cacheable:!1,_proxy:e,_context:t,_subProxy:r,_stack:new Set,_descriptors:Fh(e,n),setContext:t=>Dh(e,t,r,n),override:s=>Dh(e.override(s),t,r,n)};return new Proxy(s,{deleteProperty:(t,r)=>(delete t[r],delete e[r],!0),get:(e,t,r)=>Uh(e,t,(()=>function(e,t,r){const{_proxy:n,_context:s,_subProxy:a,_descriptors:o}=e;let i=n[t];uu(i)&&o.isScriptable(t)&&(i=function(e,t,r,n){const{_proxy:s,_context:a,_subProxy:o,_stack:i}=r;if(i.has(e))throw new Error("Recursion detected: "+Array.from(i).join("->")+"->"+e);i.add(e);let l=t(a,o||n);i.delete(e),$h(e,l)&&(l=Vh(s._scopes,s,e,l));return l}(t,i,e,r));Qd(i)&&i.length&&(i=function(e,t,r,n){const{_proxy:s,_context:a,_subProxy:o,_descriptors:i}=r;if("undefined"!==typeof a.index&&n(e))return t[a.index%t.length];if(Vd(t[0])){const r=t,n=s._scopes.filter((e=>e!==r));t=[];for(const l of r){const r=Vh(n,s,e,l);t.push(Dh(r,a,o&&o[e],i))}}return t}(t,i,e,o.isIndexable));$h(t,i)&&(i=Dh(i,s,a&&a[t],o));return i}(e,t,r))),getOwnPropertyDescriptor:(t,r)=>t._descriptors.allKeys?Reflect.has(e,r)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,r),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,r)=>Reflect.has(e,r),ownKeys:()=>Reflect.ownKeys(e),set:(t,r,n)=>(e[r]=n,delete t[r],!0)})}function Fh(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0};const{_scriptable:r=t.scriptable,_indexable:n=t.indexable,_allKeys:s=t.allKeys}=e;return{allKeys:s,scriptable:r,indexable:n,isScriptable:uu(r)?r:()=>r,isIndexable:uu(n)?n:()=>n}}const Bh=(e,t)=>e?e+cu(t):t,$h=(e,t)=>Vd(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function Uh(e,t,r){if(Object.prototype.hasOwnProperty.call(e,t)||"constructor"===t)return e[t];const n=r();return e[t]=n,n}function Hh(e,t,r){return uu(e)?e(t,r):e}const Wh=(e,t)=>!0===e?t:"string"===typeof e?lu(t,e):void 0;function Qh(e,t,r,n,s){for(const a of t){const t=Wh(r,a);if(t){e.add(t);const a=Hh(t._fallback,r,s);if("undefined"!==typeof a&&a!==r&&a!==n)return a}else if(!1===t&&"undefined"!==typeof n&&r!==n)return null}return!1}function Vh(e,t,r,n){const s=t._rootScopes,a=Hh(t._fallback,r,n),o=[...e,...s],i=new Set;i.add(n);let l=Gh(i,o,r,a||r,n);return null!==l&&(("undefined"===typeof a||a===r||(l=Gh(i,o,a,l,n),null!==l))&&Rh(Array.from(i),[""],s,a,(()=>function(e,t,r){const n=e._getTarget();t in n||(n[t]={});const s=n[t];if(Qd(s)&&Vd(r))return r;return s||{}}(t,r,n))))}function Gh(e,t,r,n,s){for(;r;)r=Qh(e,t,r,n,s);return r}function Kh(e,t){for(const r of t){if(!r)continue;const t=r[e];if("undefined"!==typeof t)return t}}function Yh(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const r of e)for(const e of Object.keys(r).filter((e=>!e.startsWith("_"))))t.add(e);return Array.from(t)}(e._scopes)),t}const Zh=Number.EPSILON||1e-14,Jh=(e,t)=>t<e.length&&!e[t].skip&&e[t],Xh=e=>"x"===e?"y":"x";function em(e,t,r,n){const s=e.skip?t:e,a=t,o=r.skip?t:r,i=Tu(a,s),l=Tu(o,a);let c=i/(i+l),d=l/(i+l);c=isNaN(c)?0:c,d=isNaN(d)?0:d;const u=n*c,h=n*d;return{previous:{x:a.x-u*(o.x-s.x),y:a.y-u*(o.y-s.y)},next:{x:a.x+h*(o.x-s.x),y:a.y+h*(o.y-s.y)}}}function tm(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";const r=Xh(t),n=e.length,s=Array(n).fill(0),a=Array(n);let o,i,l,c=Jh(e,0);for(o=0;o<n;++o)if(i=l,l=c,c=Jh(e,o+1),l){if(c){const e=c[t]-l[t];s[o]=0!==e?(c[r]-l[r])/e:0}a[o]=i?c?ju(s[o-1])!==ju(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}!function(e,t,r){const n=e.length;let s,a,o,i,l,c=Jh(e,0);for(let d=0;d<n-1;++d)l=c,c=Jh(e,d+1),l&&c&&(Nu(t[d],0,Zh)?r[d]=r[d+1]=0:(s=r[d]/t[d],a=r[d+1]/t[d],i=Math.pow(s,2)+Math.pow(a,2),i<=9||(o=3/Math.sqrt(i),r[d]=s*o*t[d],r[d+1]=a*o*t[d])))}(e,s,a),function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";const n=Xh(r),s=e.length;let a,o,i,l=Jh(e,0);for(let c=0;c<s;++c){if(o=i,i=l,l=Jh(e,c+1),!i)continue;const s=i[r],d=i[n];o&&(a=(s-o[r])/3,i[`cp1${r}`]=s-a,i[`cp1${n}`]=d-a*t[c]),l&&(a=(l[r]-s)/3,i[`cp2${r}`]=s+a,i[`cp2${n}`]=d+a*t[c])}}(e,a,t)}function rm(e,t,r){return Math.max(Math.min(e,r),t)}function nm(e,t,r,n,s){let a,o,i,l;if(t.spanGaps&&(e=e.filter((e=>!e.skip))),"monotone"===t.cubicInterpolationMode)tm(e,s);else{let r=n?e[e.length-1]:e[0];for(a=0,o=e.length;a<o;++a)i=e[a],l=em(r,i,e[Math.min(a+1,o-(n?0:1))%o],t.tension),i.cp1x=l.previous.x,i.cp1y=l.previous.y,i.cp2x=l.next.x,i.cp2y=l.next.y,r=i}t.capBezierPoints&&function(e,t){let r,n,s,a,o,i=yh(e[0],t);for(r=0,n=e.length;r<n;++r)o=a,a=i,i=r<n-1&&yh(e[r+1],t),a&&(s=e[r],o&&(s.cp1x=rm(s.cp1x,t.left,t.right),s.cp1y=rm(s.cp1y,t.top,t.bottom)),i&&(s.cp2x=rm(s.cp2x,t.left,t.right),s.cp2y=rm(s.cp2y,t.top,t.bottom)))}(e,r)}function sm(){return"undefined"!==typeof window&&"undefined"!==typeof document}function am(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function om(e,t,r){let n;return"string"===typeof e?(n=parseInt(e,10),-1!==e.indexOf("%")&&(n=n/100*t.parentNode[r])):n=e,n}const im=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);const lm=["top","right","bottom","left"];function cm(e,t,r){const n={};r=r?"-"+r:"";for(let s=0;s<4;s++){const a=lm[s];n[a]=parseFloat(e[t+"-"+a+r])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}function dm(e,t){if("native"in e)return e;const{canvas:r,currentDevicePixelRatio:n}=t,s=im(r),a="border-box"===s.boxSizing,o=cm(s,"padding"),i=cm(s,"border","width"),{x:l,y:c,box:d}=function(e,t){const r=e.touches,n=r&&r.length?r[0]:e,{offsetX:s,offsetY:a}=n;let o,i,l=!1;if(((e,t,r)=>(e>0||t>0)&&(!r||!r.shadowRoot))(s,a,e.target))o=s,i=a;else{const e=t.getBoundingClientRect();o=n.clientX-e.left,i=n.clientY-e.top,l=!0}return{x:o,y:i,box:l}}(e,r),u=o.left+(d&&i.left),h=o.top+(d&&i.top);let{width:m,height:f}=t;return a&&(m-=o.width+i.width,f-=o.height+i.height),{x:Math.round((l-u)/m*r.width/n),y:Math.round((c-h)/f*r.height/n)}}const um=e=>Math.round(10*e)/10;function hm(e,t,r,n){const s=im(e),a=cm(s,"margin"),o=om(s.maxWidth,e,"clientWidth")||gu,i=om(s.maxHeight,e,"clientHeight")||gu,l=function(e,t,r){let n,s;if(void 0===t||void 0===r){const a=e&&am(e);if(a){const e=a.getBoundingClientRect(),o=im(a),i=cm(o,"border","width"),l=cm(o,"padding");t=e.width-l.width-i.width,r=e.height-l.height-i.height,n=om(o.maxWidth,a,"clientWidth"),s=om(o.maxHeight,a,"clientHeight")}else t=e.clientWidth,r=e.clientHeight}return{width:t,height:r,maxWidth:n||gu,maxHeight:s||gu}}(e,t,r);let{width:c,height:d}=l;if("content-box"===s.boxSizing){const e=cm(s,"border","width"),t=cm(s,"padding");c-=t.width+e.width,d-=t.height+e.height}c=Math.max(0,c-a.width),d=Math.max(0,n?c/n:d-a.height),c=um(Math.min(c,o,l.maxWidth)),d=um(Math.min(d,i,l.maxHeight)),c&&!d&&(d=um(c/2));return(void 0!==t||void 0!==r)&&n&&l.height&&d>l.height&&(d=l.height,c=um(Math.floor(d*n))),{width:c,height:d}}function mm(e,t,r){const n=t||1,s=Math.floor(e.height*n),a=Math.floor(e.width*n);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const o=e.canvas;return o.style&&(r||!o.style.height&&!o.style.width)&&(o.style.height=`${e.height}px`,o.style.width=`${e.width}px`),(e.currentDevicePixelRatio!==n||o.height!==s||o.width!==a)&&(e.currentDevicePixelRatio=n,o.height=s,o.width=a,e.ctx.setTransform(n,0,0,n,0,0),!0)}const fm=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};sm()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(Ie){}return e}();function pm(e,t){const r=function(e,t){return im(e).getPropertyValue(t)}(e,t),n=r&&r.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function gm(e,t,r,n){return{x:e.x+r*(t.x-e.x),y:e.y+r*(t.y-e.y)}}function xm(e,t,r,n){return{x:e.x+r*(t.x-e.x),y:"middle"===n?r<.5?e.y:t.y:"after"===n?r<1?e.y:t.y:r>0?t.y:e.y}}function bm(e,t,r,n){const s={x:e.cp2x,y:e.cp2y},a={x:t.cp1x,y:t.cp1y},o=gm(e,s,r),i=gm(s,a,r),l=gm(a,t,r),c=gm(o,i,r),d=gm(i,l,r);return gm(c,d,r)}function ym(e,t,r){return e?function(e,t){return{x:r=>e+e+t-r,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,r):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function vm(e,t){let r,n;"ltr"!==t&&"rtl"!==t||(r=e.canvas.style,n=[r.getPropertyValue("direction"),r.getPropertyPriority("direction")],r.setProperty("direction",t,"important"),e.prevTextDirection=n)}function wm(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function jm(e){return"angle"===e?{between:Iu,compare:zu,normalize:Pu}:{between:Mu,compare:(e,t)=>e-t,normalize:e=>e}}function Nm(e){let{start:t,end:r,count:n,loop:s,style:a}=e;return{start:t%n,end:r%n,loop:s&&(r-t+1)%n===0,style:a}}function km(e,t,r){if(!r)return[e];const{property:n,start:s,end:a}=r,o=t.length,{compare:i,between:l,normalize:c}=jm(n),{start:d,end:u,loop:h,style:m}=function(e,t,r){const{property:n,start:s,end:a}=r,{between:o,normalize:i}=jm(n),l=t.length;let c,d,{start:u,end:h,loop:m}=e;if(m){for(u+=l,h+=l,c=0,d=l;c<d&&o(i(t[u%l][n]),s,a);++c)u--,h--;u%=l,h%=l}return h<u&&(h+=l),{start:u,end:h,loop:m,style:e.style}}(e,t,r),f=[];let p,g,x,b=!1,y=null;const v=()=>b||l(s,x,p)&&0!==i(s,x),w=()=>!b||0===i(a,p)||l(a,x,p);for(let j=d,N=d;j<=u;++j)g=t[j%o],g.skip||(p=c(g[n]),p!==x&&(b=l(p,s,a),null===y&&v()&&(y=0===i(p,s)?j:N),null!==y&&w()&&(f.push(Nm({start:y,end:j,loop:h,count:o,style:m})),y=null),N=j,x=p));return null!==y&&f.push(Nm({start:y,end:u,loop:h,count:o,style:m})),f}function Sm(e,t){const r=[],n=e.segments;for(let s=0;s<n.length;s++){const a=km(n[s],e.points,t);a.length&&r.push(...a)}return r}function Cm(e,t,r,n){return n&&n.setContext&&r?function(e,t,r,n){const s=e._chart.getContext(),a=_m(e.options),{_datasetIndex:o,options:{spanGaps:i}}=e,l=r.length,c=[];let d=a,u=t[0].start,h=u;function m(e,t,n,s){const a=i?-1:1;if(e!==t){for(e+=l;r[e%l].skip;)e-=a;for(;r[t%l].skip;)t+=a;e%l!==t%l&&(c.push({start:e%l,end:t%l,loop:n,style:s}),d=s,u=t%l)}}for(const f of t){u=i?u:f.start;let e,t=r[u%l];for(h=u+1;h<=f.end;h++){const a=r[h%l];e=_m(n.setContext(qh(s,{type:"segment",p0:t,p1:a,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:o}))),Em(e,d)&&m(u,h-1,f.loop,d),t=a,d=e}u<h-1&&m(u,h-1,f.loop,d)}return c}(e,t,r,n):t}function _m(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function Em(e,t){if(!t)return!1;const r=[],n=function(e,t){return Xu(t)?(r.includes(t)||r.push(t),r.indexOf(t)):t};return JSON.stringify(e,n)!==JSON.stringify(t,n)}function Am(e,t,r){return e.options.clip?e[r]:t[r]}function Om(e,t){const r=t._clip;if(r.disabled)return!1;const n=function(e,t){const{xScale:r,yScale:n}=e;return r&&n?{left:Am(r,t,"left"),right:Am(r,t,"right"),top:Am(n,t,"top"),bottom:Am(n,t,"bottom")}:t}(t,e.chartArea);return{left:!1===r.left?0:n.left-(!0===r.left?0:r.left),right:!1===r.right?e.width:n.right+(!0===r.right?0:r.right),top:!1===r.top?0:n.top-(!0===r.top?0:r.top),bottom:!1===r.bottom?e.height:n.bottom+(!0===r.bottom?0:r.bottom)}}class Tm{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,r,n){const s=t.listeners[n],a=t.duration;s.forEach((n=>n({chart:e,initial:t.initial,numSteps:a,currentStep:Math.min(r-t.start,a)})))}_refresh(){this._request||(this._running=!0,this._request=Uu.call(window,(()=>{this._update(),this._request=null,this._running&&this._refresh()})))}_update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=0;this._charts.forEach(((r,n)=>{if(!r.running||!r.items.length)return;const s=r.items;let a,o=s.length-1,i=!1;for(;o>=0;--o)a=s[o],a._active?(a._total>r.duration&&(r.duration=a._total),a.tick(e),i=!0):(s[o]=s[s.length-1],s.pop());i&&(n.draw(),this._notify(n,r,e,"progress")),s.length||(r.running=!1,this._notify(n,r,e,"complete"),r.initial=!1),t+=s.length})),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let r=t.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,r)),r}listen(e,t,r){this._getAnims(e).listeners[t].push(r)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce(((e,t)=>Math.max(e,t._duration)),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const r=t.items;let n=r.length-1;for(;n>=0;--n)r[n].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var zm=new Tm;const Pm="transparent",Im={boolean:(e,t,r)=>r>.5?t:e,color(e,t,r){const n=eh(e||Pm),s=n.valid&&eh(t||Pm);return s&&s.valid?s.mix(n,r).hexString():t},number:(e,t,r)=>e+(t-e)*r};class Lm{constructor(e,t,r,n){const s=t[r];n=Mh([e.to,n,s,e.from]);const a=Mh([e.from,s,n]);this._active=!0,this._fn=e.fn||Im[e.type||typeof a],this._easing=Ju[e.easing]||Ju.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=r,this._from=a,this._to=n,this._promises=void 0}active(){return this._active}update(e,t,r){if(this._active){this._notify(!1);const n=this._target[this._prop],s=r-this._start,a=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(a,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=Mh([e.to,t,n,e.from]),this._from=Mh([e.from,n,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,r=this._duration,n=this._prop,s=this._from,a=this._loop,o=this._to;let i;if(this._active=s!==o&&(a||t<r),!this._active)return this._target[n]=o,void this._notify(!0);t<0?this._target[n]=s:(i=t/r%2,i=a&&i>1?2-i:i,i=this._easing(Math.min(1,Math.max(0,i))),this._target[n]=this._fn(s,o,i))}wait(){const e=this._promises||(this._promises=[]);return new Promise(((t,r)=>{e.push({res:t,rej:r})}))}_notify(e){const t=e?"res":"rej",r=this._promises||[];for(let n=0;n<r.length;n++)r[n][t]()}}class Mm{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!Vd(e))return;const t=Object.keys(mh.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach((n=>{const s=e[n];if(!Vd(s))return;const a={};for(const e of t)a[e]=s[e];(Qd(s.properties)&&s.properties||[n]).forEach((e=>{e!==n&&r.has(e)||r.set(e,a)}))}))}_animateOptions(e,t){const r=t.options,n=function(e,t){if(!t)return;let r=e.options;if(!r)return void(e.options=t);r.$shared&&(e.options=r=Object.assign({},r,{$shared:!1,$animations:{}}));return r}(e,r);if(!n)return[];const s=this._createAnimations(n,r);return r.$shared&&function(e,t){const r=[],n=Object.keys(t);for(let s=0;s<n.length;s++){const t=e[n[s]];t&&t.active()&&r.push(t.wait())}return Promise.all(r)}(e.options.$animations,r).then((()=>{e.options=r}),(()=>{})),s}_createAnimations(e,t){const r=this._properties,n=[],s=e.$animations||(e.$animations={}),a=Object.keys(t),o=Date.now();let i;for(i=a.length-1;i>=0;--i){const l=a[i];if("$"===l.charAt(0))continue;if("options"===l){n.push(...this._animateOptions(e,t));continue}const c=t[l];let d=s[l];const u=r.get(l);if(d){if(u&&d.active()){d.update(u,c,o);continue}d.cancel()}u&&u.duration?(s[l]=d=new Lm(u,e,l,c),n.push(d)):e[l]=c}return n}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const r=this._createAnimations(e,t);return r.length?(zm.add(this._chart,r),!0):void 0}}function qm(e,t){const r=e&&e.options||{},n=r.reverse,s=void 0===r.min?t:0,a=void 0===r.max?t:0;return{start:n?a:s,end:n?s:a}}function Rm(e,t){const r=[],n=e._getSortedDatasetMetas(t);let s,a;for(s=0,a=n.length;s<a;++s)r.push(n[s].index);return r}function Dm(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const s=e.keys,a="single"===n.mode;let o,i,l,c;if(null===t)return;let d=!1;for(o=0,i=s.length;o<i;++o){if(l=+s[o],l===r){if(d=!0,n.all)continue;break}c=e.values[l],Gd(c)&&(a||0===t||ju(t)===ju(c))&&(t+=c)}return d||n.all?t:0}function Fm(e,t){const r=e&&e.options.stacked;return r||void 0===r&&void 0!==t.stack}function Bm(e,t,r){const n=e[t]||(e[t]={});return n[r]||(n[r]={})}function $m(e,t,r,n){for(const s of t.getMatchingVisibleMetas(n).reverse()){const t=e[s.index];if(r&&t>0||!r&&t<0)return s.index}return null}function Um(e,t){const{chart:r,_cachedMeta:n}=e,s=r._stacks||(r._stacks={}),{iScale:a,vScale:o,index:i}=n,l=a.axis,c=o.axis,d=function(e,t,r){return`${e.id}.${t.id}.${r.stack||r.type}`}(a,o,n),u=t.length;let h;for(let m=0;m<u;++m){const e=t[m],{[l]:r,[c]:a}=e;h=(e._stacks||(e._stacks={}))[c]=Bm(s,d,r),h[i]=a,h._top=$m(h,o,!0,n.type),h._bottom=$m(h,o,!1,n.type);(h._visualValues||(h._visualValues={}))[i]=a}}function Hm(e,t){const r=e.scales;return Object.keys(r).filter((e=>r[e].axis===t)).shift()}function Wm(e,t){const r=e.controller.index,n=e.vScale&&e.vScale.axis;if(n){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[n]||void 0===t[n][r])return;delete t[n][r],void 0!==t[n]._visualValues&&void 0!==t[n]._visualValues[r]&&delete t[n]._visualValues[r]}}}const Qm=e=>"reset"===e||"none"===e,Vm=(e,t)=>t?e:Object.assign({},e);class Gm{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Fm(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Wm(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,r=this.getDataset(),n=(e,t,r,n)=>"x"===e?t:"r"===e?n:r,s=t.xAxisID=Yd(r.xAxisID,Hm(e,"x")),a=t.yAxisID=Yd(r.yAxisID,Hm(e,"y")),o=t.rAxisID=Yd(r.rAxisID,Hm(e,"r")),i=t.indexAxis,l=t.iAxisID=n(i,s,a,o),c=t.vAxisID=n(i,a,s,o);t.xScale=this.getScaleForId(s),t.yScale=this.getScaleForId(a),t.rScale=this.getScaleForId(o),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Bu(this._data,this),e._stacked&&Wm(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),r=this._data;if(Vd(t)){const e=this._cachedMeta;this._data=function(e,t){const{iScale:r,vScale:n}=t,s="x"===r.axis?"x":"y",a="x"===n.axis?"x":"y",o=Object.keys(e),i=new Array(o.length);let l,c,d;for(l=0,c=o.length;l<c;++l)d=o[l],i[l]={[s]:d,[a]:e[d]};return i}(t,e)}else if(r!==t){if(r){Bu(r,this);const e=this._cachedMeta;Wm(e),e._parsed=[]}t&&Object.isExtensible(t)&&(s=this,(n=t)._chartjs?n._chartjs.listeners.push(s):(Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[s]}}),Fu.forEach((e=>{const t="_onData"+cu(e),r=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(){for(var e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];const o=r.apply(this,s);return n._chartjs.listeners.forEach((e=>{"function"===typeof e[t]&&e[t](...s)})),o}})})))),this._syncList=[],this._data=t}var n,s}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,r=this.getDataset();let n=!1;this._dataCheck();const s=t._stacked;t._stacked=Fm(t.vScale,t),t.stack!==r.stack&&(n=!0,Wm(t),t.stack=r.stack),this._resyncElements(e),(n||s!==t._stacked)&&(Um(this,t._parsed),t._stacked=Fm(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:r,_data:n}=this,{iScale:s,_stacked:a}=r,o=s.axis;let i,l,c,d=0===e&&t===n.length||r._sorted,u=e>0&&r._parsed[e-1];if(!1===this._parsing)r._parsed=n,r._sorted=!0,c=n;else{c=Qd(n[e])?this.parseArrayData(r,n,e,t):Vd(n[e])?this.parseObjectData(r,n,e,t):this.parsePrimitiveData(r,n,e,t);const s=()=>null===l[o]||u&&l[o]<u[o];for(i=0;i<t;++i)r._parsed[i+e]=l=c[i],d&&(s()&&(d=!1),u=l);r._sorted=d}a&&Um(this,c)}parsePrimitiveData(e,t,r,n){const{iScale:s,vScale:a}=e,o=s.axis,i=a.axis,l=s.getLabels(),c=s===a,d=new Array(n);let u,h,m;for(u=0,h=n;u<h;++u)m=u+r,d[u]={[o]:c||s.parse(l[m],m),[i]:a.parse(t[m],m)};return d}parseArrayData(e,t,r,n){const{xScale:s,yScale:a}=e,o=new Array(n);let i,l,c,d;for(i=0,l=n;i<l;++i)c=i+r,d=t[c],o[i]={x:s.parse(d[0],c),y:a.parse(d[1],c)};return o}parseObjectData(e,t,r,n){const{xScale:s,yScale:a}=e,{xAxisKey:o="x",yAxisKey:i="y"}=this._parsing,l=new Array(n);let c,d,u,h;for(c=0,d=n;c<d;++c)u=c+r,h=t[u],l[c]={x:s.parse(lu(h,o),u),y:a.parse(lu(h,i),u)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,r){const n=this.chart,s=this._cachedMeta,a=t[e.axis];return Dm({keys:Rm(n,!0),values:t._stacks[e.axis]._visualValues},a,s.index,{mode:r})}updateRangeFromParsed(e,t,r,n){const s=r[t.axis];let a=null===s?NaN:s;const o=n&&r._stacks[t.axis];n&&o&&(n.values=o,a=Dm(n,s,this._cachedMeta.index)),e.min=Math.min(e.min,a),e.max=Math.max(e.max,a)}getMinMax(e,t){const r=this._cachedMeta,n=r._parsed,s=r._sorted&&e===r.iScale,a=n.length,o=this._getOtherScale(e),i=((e,t,r)=>e&&!t.hidden&&t._stacked&&{keys:Rm(r,!0),values:null})(t,r,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:d}=function(e){const{min:t,max:r,minDefined:n,maxDefined:s}=e.getUserBounds();return{min:n?t:Number.NEGATIVE_INFINITY,max:s?r:Number.POSITIVE_INFINITY}}(o);let u,h;function m(){h=n[u];const t=h[o.axis];return!Gd(h[e.axis])||c>t||d<t}for(u=0;u<a&&(m()||(this.updateRangeFromParsed(l,e,h,i),!s));++u);if(s)for(u=a-1;u>=0;--u)if(!m()){this.updateRangeFromParsed(l,e,h,i);break}return l}getAllParsedValues(e){const t=this._cachedMeta._parsed,r=[];let n,s,a;for(n=0,s=t.length;n<s;++n)a=t[n][e.axis],Gd(a)&&r.push(a);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,r=t.iScale,n=t.vScale,s=this.getParsed(e);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:n?""+n.getLabelForValue(s[n.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,r,n,s;return Vd(e)?(t=e.top,r=e.right,n=e.bottom,s=e.left):t=r=n=s=e,{top:t,right:r,bottom:n,left:s,disabled:!1===e}}(Yd(this.options.clip,function(e,t,r){if(!1===r)return!1;const n=qm(e,r),s=qm(t,r);return{top:s.end,right:n.end,bottom:s.start,left:n.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,r=this._cachedMeta,n=r.data||[],s=t.chartArea,a=[],o=this._drawStart||0,i=this._drawCount||n.length-o,l=this.options.drawActiveElementsOnTop;let c;for(r.dataset&&r.dataset.draw(e,s,o,i),c=o;c<o+i;++c){const t=n[c];t.hidden||(t.active&&l?a.push(t):t.draw(e,s))}for(c=0;c<a.length;++c)a[c].draw(e,s)}getStyle(e,t){const r=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,t,r){const n=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];s=t.$context||(t.$context=function(e,t,r){return qh(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:r,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),s.parsed=this.getParsed(e),s.raw=n.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=function(e,t){return qh(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),s.dataset=n,s.index=s.datasetIndex=this.index;return s.active=!!t,s.mode=r,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",r=arguments.length>2?arguments[2]:void 0;const n="active"===t,s=this._cachedDataOpts,a=e+"-"+t,o=s[a],i=this.enableOptionSharing&&du(r);if(o)return Vm(o,i);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,e),d=n?[`${e}Hover`,"hover",e,""]:[e,""],u=l.getOptionScopes(this.getDataset(),c),h=Object.keys(mh.elements[e]),m=l.resolveNamedOptions(u,h,(()=>this.getContext(r,n,t)),d);return m.$shared&&(m.$shared=i,s[a]=Object.freeze(Vm(m,i))),m}_resolveAnimations(e,t,r){const n=this.chart,s=this._cachedDataOpts,a=`animation-${t}`,o=s[a];if(o)return o;let i;if(!1!==n.options.animation){const n=this.chart.config,s=n.datasetAnimationScopeKeys(this._type,t),a=n.getOptionScopes(this.getDataset(),s);i=n.createResolver(a,this.getContext(e,r,t))}const l=new Mm(n,i&&i.animations);return i&&i._cacheable&&(s[a]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||Qm(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const r=this.resolveDataElementOptions(e,t),n=this._sharedOptions,s=this.getSharedOptions(r),a=this.includeOptions(t,s)||s!==n;return this.updateSharedOptions(s,t,r),{sharedOptions:s,includeOptions:a}}updateElement(e,t,r,n){Qm(n)?Object.assign(e,r):this._resolveAnimations(t,n).update(e,r)}updateSharedOptions(e,t,r){e&&!Qm(t)&&this._resolveAnimations(void 0,t).update(e,r)}_setStyle(e,t,r,n){e.active=n;const s=this.getStyle(t,n);this._resolveAnimations(t,r,n).update(e,{options:!n&&this.getSharedOptions(s)||s})}removeHoverStyle(e,t,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,t,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,r=this._cachedMeta.data;for(const[o,i,l]of this._syncList)this[o](i,l);this._syncList=[];const n=r.length,s=t.length,a=Math.min(s,n);a&&this.parse(0,a),s>n?this._insertElements(n,s-n,e):s<n&&this._removeElements(s,n-s)}_insertElements(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const n=this._cachedMeta,s=n.data,a=e+t;let o;const i=e=>{for(e.length+=t,o=e.length-1;o>=a;o--)e[o]=e[o-t]};for(i(s),o=e;o<a;++o)s[o]=new this.dataElementType;this._parsing&&i(n._parsed),this.parse(e,t),r&&this.updateElements(s,e,t,"reset")}updateElements(e,t,r,n){}_removeElements(e,t){const r=this._cachedMeta;if(this._parsing){const n=r._parsed.splice(e,t);r._stacked&&Wm(r,n)}r.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,r,n]=e;this[t](r,n)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}class Km extends Gm{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:r,color:n}}=e.legend.options;return t.labels.map(((t,s)=>{const a=e.getDatasetMeta(0).controller.getStyle(s);return{text:t,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,fontColor:n,lineWidth:a.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(s),index:s}}))}return[]}},onClick(e,t,r){r.chart.toggleDataVisibility(t.index),r.chart.update()}}}};constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const r=this.getDataset().data,n=this._cachedMeta;if(!1===this._parsing)n._parsed=r;else{let s,a,o=e=>+r[e];if(Vd(r[e])){const{key:e="value"}=this._parsing;o=t=>+lu(r[t],e)}for(s=e,a=e+t;s<a;++s)n._parsed[s]=o(s)}}_getRotation(){return _u(this.options.rotation-90)}_getCircumference(){return _u(this.options.circumference)}_getRotationExtents(){let e=fu,t=-fu;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const n=this.chart.getDatasetMeta(r).controller,s=n._getRotation(),a=n._getCircumference();e=Math.min(e,s),t=Math.max(t,s+a)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:r}=t,n=this._cachedMeta,s=n.data,a=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,o=Math.max((Math.min(r.width,r.height)-a)/2,0),i=Math.min((l=this.options.cutout,c=o,"string"===typeof l&&l.endsWith("%")?parseFloat(l)/100:+l/c),1);var l,c;const d=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:m,ratioY:f,offsetX:p,offsetY:g}=function(e,t,r){let n=1,s=1,a=0,o=0;if(t<fu){const i=e,l=i+t,c=Math.cos(i),d=Math.sin(i),u=Math.cos(l),h=Math.sin(l),m=(e,t,n)=>Iu(e,i,l,!0)?1:Math.max(t,t*r,n,n*r),f=(e,t,n)=>Iu(e,i,l,!0)?-1:Math.min(t,t*r,n,n*r),p=m(0,c,u),g=m(bu,d,h),x=f(mu,c,u),b=f(mu+bu,d,h);n=(p-x)/2,s=(g-b)/2,a=-(p+x)/2,o=-(g+b)/2}return{ratioX:n,ratioY:s,offsetX:a,offsetY:o}}(h,u,i),x=(r.width-a)/m,b=(r.height-a)/f,y=Math.max(Math.min(x,b)/2,0),v=Zd(this.options.radius,y),w=(v-Math.max(v*i,0))/this._getVisibleDatasetWeightTotal();this.offsetX=p*v,this.offsetY=g*v,n.total=this.calculateTotal(),this.outerRadius=v-w*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-w*d,0),this.updateElements(s,0,s.length,e)}_circumference(e,t){const r=this.options,n=this._cachedMeta,s=this._getCircumference();return t&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||null===n._parsed[e]||n.data[e].hidden?0:this.calculateCircumference(n._parsed[e]*s/fu)}updateElements(e,t,r,n){const s="reset"===n,a=this.chart,o=a.chartArea,i=a.options.animation,l=(o.left+o.right)/2,c=(o.top+o.bottom)/2,d=s&&i.animateScale,u=d?0:this.innerRadius,h=d?0:this.outerRadius,{sharedOptions:m,includeOptions:f}=this._getSharedOptions(t,n);let p,g=this._getRotation();for(p=0;p<t;++p)g+=this._circumference(p,s);for(p=t;p<t+r;++p){const t=this._circumference(p,s),r=e[p],a={x:l+this.offsetX,y:c+this.offsetY,startAngle:g,endAngle:g+t,circumference:t,outerRadius:h,innerRadius:u};f&&(a.options=m||this.resolveDataElementOptions(p,r.active?"active":n)),g+=t,this.updateElement(r,p,a,n)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let r,n=0;for(r=0;r<t.length;r++){const s=e._parsed[r];null===s||isNaN(s)||!this.chart.getDataVisibility(r)||t[r].hidden||(n+=Math.abs(s))}return n}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?fu*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,r=this.chart,n=r.data.labels||[],s=ah(t._parsed[e],r.options.locale);return{label:n[e]||"",value:s}}getMaxBorderWidth(e){let t=0;const r=this.chart;let n,s,a,o,i;if(!e)for(n=0,s=r.data.datasets.length;n<s;++n)if(r.isDatasetVisible(n)){a=r.getDatasetMeta(n),e=a.data,o=a.controller;break}if(!e)return 0;for(n=0,s=e.length;n<s;++n)i=o.resolveDataElementOptions(n),"inner"!==i.borderAlign&&(t=Math.max(t,i.borderWidth||0,i.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let r=0,n=e.length;r<n;++r){const e=this.resolveDataElementOptions(r);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(t+=this._getRingWeight(r));return t}_getRingWeight(e){return Math.max(Yd(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class Ym extends Gm{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:r,data:n=[],_dataset:s}=t,a=this.chart._animationsDisabled;let{start:o,count:i}=Vu(t,n,a);this._drawStart=o,this._drawCount=i,Gu(t)&&(o=0,i=n.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=n;const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(r,void 0,{animated:!a,options:l},e),this.updateElements(n,o,i,e)}updateElements(e,t,r,n){const s="reset"===n,{iScale:a,vScale:o,_stacked:i,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:d}=this._getSharedOptions(t,n),u=a.axis,h=o.axis,{spanGaps:m,segment:f}=this.options,p=Su(m)?m:Number.POSITIVE_INFINITY,g=this.chart._animationsDisabled||s||"none"===n,x=t+r,b=e.length;let y=t>0&&this.getParsed(t-1);for(let v=0;v<b;++v){const r=e[v],m=g?r:{};if(v<t||v>=x){m.skip=!0;continue}const b=this.getParsed(v),w=Wd(b[h]),j=m[u]=a.getPixelForValue(b[u],v),N=m[h]=s||w?o.getBasePixel():o.getPixelForValue(i?this.applyStack(o,b,i):b[h],v);m.skip=isNaN(j)||isNaN(N)||w,m.stop=v>0&&Math.abs(b[u]-y[u])>p,f&&(m.parsed=b,m.raw=l.data[v]),d&&(m.options=c||this.resolveDataElementOptions(v,r.active?"active":n)),g||this.updateElement(r,v,m,n),y=b}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,r=t.options&&t.options.borderWidth||0,n=e.data||[];if(!n.length)return r;const s=n[0].size(this.resolveDataElementOptions(0)),a=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(r,s,a)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}class Zm extends Km{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}function Jm(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Xm{static override(e){Object.assign(Xm.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return Jm()}parse(){return Jm()}format(){return Jm()}add(){return Jm()}diff(){return Jm()}startOf(){return Jm()}endOf(){return Jm()}}var ef=Xm;function tf(e,t,r,n){const{controller:s,data:a,_sorted:o}=e,i=s._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(i&&t===i.axis&&"r"!==t&&o&&a.length){const o=i._reversePixels?Du:Ru;if(!n){const n=o(a,t,r);if(l){const{vScale:t}=s._cachedMeta,{_parsed:r}=e,a=r.slice(0,n.lo+1).reverse().findIndex((e=>!Wd(e[t.axis])));n.lo-=Math.max(0,a);const o=r.slice(n.hi).findIndex((e=>!Wd(e[t.axis])));n.hi+=Math.max(0,o)}return n}if(s._sharedOptions){const e=a[0],n="function"===typeof e.getRange&&e.getRange(t);if(n){const e=o(a,t,r-n),s=o(a,t,r+n);return{lo:e.lo,hi:s.hi}}}}return{lo:0,hi:a.length-1}}function rf(e,t,r,n,s){const a=e.getSortedVisibleDatasetMetas(),o=r[t];for(let i=0,l=a.length;i<l;++i){const{index:e,data:r}=a[i],{lo:l,hi:c}=tf(a[i],t,o,s);for(let t=l;t<=c;++t){const s=r[t];s.skip||n(s,e,t)}}}function nf(e,t,r,n,s){const a=[];if(!s&&!e.isPointInArea(t))return a;return rf(e,r,t,(function(r,o,i){(s||yh(r,e.chartArea,0))&&r.inRange(t.x,t.y,n)&&a.push({element:r,datasetIndex:o,index:i})}),!0),a}function sf(e,t,r,n,s,a){let o=[];const i=function(e){const t=-1!==e.indexOf("x"),r=-1!==e.indexOf("y");return function(e,n){const s=t?Math.abs(e.x-n.x):0,a=r?Math.abs(e.y-n.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(a,2))}}(r);let l=Number.POSITIVE_INFINITY;return rf(e,r,t,(function(r,c,d){const u=r.inRange(t.x,t.y,s);if(n&&!u)return;const h=r.getCenterPoint(s);if(!(!!a||e.isPointInArea(h))&&!u)return;const m=i(t,h);m<l?(o=[{element:r,datasetIndex:c,index:d}],l=m):m===l&&o.push({element:r,datasetIndex:c,index:d})})),o}function af(e,t,r,n,s,a){return a||e.isPointInArea(t)?"r"!==r||n?sf(e,t,r,n,s,a):function(e,t,r,n){let s=[];return rf(e,r,t,(function(e,r,a){const{startAngle:o,endAngle:i}=e.getProps(["startAngle","endAngle"],n),{angle:l}=Ou(e,{x:t.x,y:t.y});Iu(l,o,i)&&s.push({element:e,datasetIndex:r,index:a})})),s}(e,t,r,s):[]}function of(e,t,r,n,s){const a=[],o="x"===r?"inXRange":"inYRange";let i=!1;return rf(e,r,t,((e,n,l)=>{e[o]&&e[o](t[r],s)&&(a.push({element:e,datasetIndex:n,index:l}),i=i||e.inRange(t.x,t.y,s))})),n&&!i?[]:a}var lf={evaluateInteractionItems:rf,modes:{index(e,t,r,n){const s=dm(t,e),a=r.axis||"x",o=r.includeInvisible||!1,i=r.intersect?nf(e,s,a,n,o):af(e,s,a,!1,n,o),l=[];return i.length?(e.getSortedVisibleDatasetMetas().forEach((e=>{const t=i[0].index,r=e.data[t];r&&!r.skip&&l.push({element:r,datasetIndex:e.index,index:t})})),l):[]},dataset(e,t,r,n){const s=dm(t,e),a=r.axis||"xy",o=r.includeInvisible||!1;let i=r.intersect?nf(e,s,a,n,o):af(e,s,a,!1,n,o);if(i.length>0){const t=i[0].datasetIndex,r=e.getDatasetMeta(t).data;i=[];for(let e=0;e<r.length;++e)i.push({element:r[e],datasetIndex:t,index:e})}return i},point:(e,t,r,n)=>nf(e,dm(t,e),r.axis||"xy",n,r.includeInvisible||!1),nearest(e,t,r,n){const s=dm(t,e),a=r.axis||"xy",o=r.includeInvisible||!1;return af(e,s,a,r.intersect,n,o)},x:(e,t,r,n)=>of(e,dm(t,e),"x",r.intersect,n),y:(e,t,r,n)=>of(e,dm(t,e),"y",r.intersect,n)}};const cf=["left","top","right","bottom"];function df(e,t){return e.filter((e=>e.pos===t))}function uf(e,t){return e.filter((e=>-1===cf.indexOf(e.pos)&&e.box.axis===t))}function hf(e,t){return e.sort(((e,r)=>{const n=t?r:e,s=t?e:r;return n.weight===s.weight?n.index-s.index:n.weight-s.weight}))}function mf(e,t){const r=function(e){const t={};for(const r of e){const{stack:e,pos:n,stackWeight:s}=r;if(!e||!cf.includes(n))continue;const a=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=s}return t}(e),{vBoxMaxWidth:n,hBoxMaxHeight:s}=t;let a,o,i;for(a=0,o=e.length;a<o;++a){i=e[a];const{fullSize:o}=i.box,l=r[i.stack],c=l&&i.stackWeight/l.weight;i.horizontal?(i.width=c?c*n:o&&t.availableWidth,i.height=s):(i.width=n,i.height=c?c*s:o&&t.availableHeight)}return r}function ff(e,t,r,n){return Math.max(e[r],t[r])+Math.max(e[n],t[n])}function pf(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function gf(e,t,r,n){const{pos:s,box:a}=r,o=e.maxPadding;if(!Vd(s)){r.size&&(e[s]-=r.size);const t=n[r.stack]||{size:0,count:1};t.size=Math.max(t.size,r.horizontal?a.height:a.width),r.size=t.size/t.count,e[s]+=r.size}a.getPadding&&pf(o,a.getPadding());const i=Math.max(0,t.outerWidth-ff(o,e,"left","right")),l=Math.max(0,t.outerHeight-ff(o,e,"top","bottom")),c=i!==e.w,d=l!==e.h;return e.w=i,e.h=l,r.horizontal?{same:c,other:d}:{same:d,other:c}}function xf(e,t){const r=t.maxPadding;function n(e){const n={left:0,top:0,right:0,bottom:0};return e.forEach((e=>{n[e]=Math.max(t[e],r[e])})),n}return n(e?["left","right"]:["top","bottom"])}function bf(e,t,r,n){const s=[];let a,o,i,l,c,d;for(a=0,o=e.length,c=0;a<o;++a){i=e[a],l=i.box,l.update(i.width||t.w,i.height||t.h,xf(i.horizontal,t));const{same:o,other:u}=gf(t,r,i,n);c|=o&&s.length,d=d||u,l.fullSize||s.push(i)}return c&&bf(s,t,r,n)||d}function yf(e,t,r,n,s){e.top=r,e.left=t,e.right=t+n,e.bottom=r+s,e.width=n,e.height=s}function vf(e,t,r,n){const s=r.padding;let{x:a,y:o}=t;for(const i of e){const e=i.box,l=n[i.stack]||{count:1,placed:0,weight:1},c=i.stackWeight/l.weight||1;if(i.horizontal){const n=t.w*c,a=l.size||e.height;du(l.start)&&(o=l.start),e.fullSize?yf(e,s.left,o,r.outerWidth-s.right-s.left,a):yf(e,t.left+l.placed,o,n,a),l.start=o,l.placed+=n,o=e.bottom}else{const n=t.h*c,o=l.size||e.width;du(l.start)&&(a=l.start),e.fullSize?yf(e,a,s.top,o,r.outerHeight-s.bottom-s.top):yf(e,a,t.top+l.placed,o,n),l.start=a,l.placed+=n,a=e.right}}t.x=a,t.y=o}var wf={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const r=e.boxes?e.boxes.indexOf(t):-1;-1!==r&&e.boxes.splice(r,1)},configure(e,t,r){t.fullSize=r.fullSize,t.position=r.position,t.weight=r.weight},update(e,t,r,n){if(!e)return;const s=Ih(e.options.layout.padding),a=Math.max(t-s.width,0),o=Math.max(r-s.height,0),i=function(e){const t=function(e){const t=[];let r,n,s,a,o,i;for(r=0,n=(e||[]).length;r<n;++r)s=e[r],({position:a,options:{stack:o,stackWeight:i=1}}=s),t.push({index:r,box:s,pos:a,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&a+o,stackWeight:i});return t}(e),r=hf(t.filter((e=>e.box.fullSize)),!0),n=hf(df(t,"left"),!0),s=hf(df(t,"right")),a=hf(df(t,"top"),!0),o=hf(df(t,"bottom")),i=uf(t,"x"),l=uf(t,"y");return{fullSize:r,leftAndTop:n.concat(a),rightAndBottom:s.concat(l).concat(o).concat(i),chartArea:df(t,"chartArea"),vertical:n.concat(s).concat(l),horizontal:a.concat(o).concat(i)}}(e.boxes),l=i.vertical,c=i.horizontal;Xd(e.boxes,(e=>{"function"===typeof e.beforeLayout&&e.beforeLayout()}));const d=l.reduce(((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1),0)||1,u=Object.freeze({outerWidth:t,outerHeight:r,padding:s,availableWidth:a,availableHeight:o,vBoxMaxWidth:a/2/d,hBoxMaxHeight:o/2}),h=Object.assign({},s);pf(h,Ih(n));const m=Object.assign({maxPadding:h,w:a,h:o,x:s.left,y:s.top},s),f=mf(l.concat(c),u);bf(i.fullSize,m,u,f),bf(l,m,u,f),bf(c,m,u,f)&&bf(l,m,u,f),function(e){const t=e.maxPadding;function r(r){const n=Math.max(t[r]-e[r],0);return e[r]+=n,n}e.y+=r("top"),e.x+=r("left"),r("right"),r("bottom")}(m),vf(i.leftAndTop,m,u,f),m.x+=m.w,m.y+=m.h,vf(i.rightAndBottom,m,u,f),e.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},Xd(i.chartArea,(t=>{const r=t.box;Object.assign(r,e.chartArea),r.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})}))}};class jf{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,r){}removeEventListener(e,t,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,r,n){return t=Math.max(0,t||e.width),r=r||e.height,{width:t,height:Math.max(0,n?Math.floor(t/n):r)}}isAttached(e){return!0}updateConfig(e){}}class Nf extends jf{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const kf="$chartjs",Sf={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Cf=e=>null===e||""===e;const _f=!!fm&&{passive:!0};function Ef(e,t,r){e&&e.canvas&&e.canvas.removeEventListener(t,r,_f)}function Af(e,t){for(const r of e)if(r===t||r.contains(t))return!0}function Of(e,t,r){const n=e.canvas,s=new MutationObserver((e=>{let t=!1;for(const r of e)t=t||Af(r.addedNodes,n),t=t&&!Af(r.removedNodes,n);t&&r()}));return s.observe(document,{childList:!0,subtree:!0}),s}function Tf(e,t,r){const n=e.canvas,s=new MutationObserver((e=>{let t=!1;for(const r of e)t=t||Af(r.removedNodes,n),t=t&&!Af(r.addedNodes,n);t&&r()}));return s.observe(document,{childList:!0,subtree:!0}),s}const zf=new Map;let Pf=0;function If(){const e=window.devicePixelRatio;e!==Pf&&(Pf=e,zf.forEach(((t,r)=>{r.currentDevicePixelRatio!==e&&t()})))}function Lf(e,t,r){const n=e.canvas,s=n&&am(n);if(!s)return;const a=Hu(((e,t)=>{const n=s.clientWidth;r(e,t),n<s.clientWidth&&r()}),window),o=new ResizeObserver((e=>{const t=e[0],r=t.contentRect.width,n=t.contentRect.height;0===r&&0===n||a(r,n)}));return o.observe(s),function(e,t){zf.size||window.addEventListener("resize",If),zf.set(e,t)}(e,a),o}function Mf(e,t,r){r&&r.disconnect(),"resize"===t&&function(e){zf.delete(e),zf.size||window.removeEventListener("resize",If)}(e)}function qf(e,t,r){const n=e.canvas,s=Hu((t=>{null!==e.ctx&&r(function(e,t){const r=Sf[e.type]||e.type,{x:n,y:s}=dm(e,t);return{type:r,chart:t,native:e,x:void 0!==n?n:null,y:void 0!==s?s:null}}(t,e))}),e);return function(e,t,r){e&&e.addEventListener(t,r,_f)}(n,t,s),s}class Rf extends jf{acquireContext(e,t){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(function(e,t){const r=e.style,n=e.getAttribute("height"),s=e.getAttribute("width");if(e[kf]={initial:{height:n,width:s,style:{display:r.display,height:r.height,width:r.width}}},r.display=r.display||"block",r.boxSizing=r.boxSizing||"border-box",Cf(s)){const t=pm(e,"width");void 0!==t&&(e.width=t)}if(Cf(n))if(""===e.style.height)e.height=e.width/(t||2);else{const t=pm(e,"height");void 0!==t&&(e.height=t)}}(e,t),r):null}releaseContext(e){const t=e.canvas;if(!t[kf])return!1;const r=t[kf].initial;["height","width"].forEach((e=>{const n=r[e];Wd(n)?t.removeAttribute(e):t.setAttribute(e,n)}));const n=r.style||{};return Object.keys(n).forEach((e=>{t.style[e]=n[e]})),t.width=t.width,delete t[kf],!0}addEventListener(e,t,r){this.removeEventListener(e,t);const n=e.$proxies||(e.$proxies={}),s={attach:Of,detach:Tf,resize:Lf}[t]||qf;n[t]=s(e,t,r)}removeEventListener(e,t){const r=e.$proxies||(e.$proxies={}),n=r[t];if(!n)return;({attach:Mf,detach:Mf,resize:Mf}[t]||Ef)(e,t,n),r[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,r,n){return hm(e,t,r,n)}isAttached(e){const t=e&&am(e);return!(!t||!t.isConnected)}}class Df{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:t,y:r}=this.getProps(["x","y"],e);return{x:t,y:r}}hasValue(){return Su(this.x)&&Su(this.y)}getProps(e,t){const r=this.$animations;if(!t||!r)return this;const n={};return e.forEach((e=>{n[e]=r[e]&&r[e].active()?r[e]._to:this[e]})),n}}function Ff(e,t){const r=e.options.ticks,n=function(e){const t=e.options.offset,r=e._tickSize(),n=e._length/r+(t?0:1),s=e._maxLength/r;return Math.floor(Math.min(n,s))}(e),s=Math.min(r.maxTicksLimit||n,n),a=r.major.enabled?function(e){const t=[];let r,n;for(r=0,n=e.length;r<n;r++)e[r].major&&t.push(r);return t}(t):[],o=a.length,i=a[0],l=a[o-1],c=[];if(o>s)return function(e,t,r,n){let s,a=0,o=r[0];for(n=Math.ceil(n),s=0;s<e.length;s++)s===o&&(t.push(e[s]),a++,o=r[a*n])}(t,c,a,o/s),c;const d=function(e,t,r){const n=function(e){const t=e.length;let r,n;if(t<2)return!1;for(n=e[0],r=1;r<t;++r)if(e[r]-e[r-1]!==n)return!1;return n}(e),s=t.length/r;if(!n)return Math.max(s,1);const a=function(e){const t=[],r=Math.sqrt(e);let n;for(n=1;n<r;n++)e%n===0&&(t.push(n),t.push(e/n));return r===(0|r)&&t.push(r),t.sort(((e,t)=>e-t)).pop(),t}(n);for(let o=0,i=a.length-1;o<i;o++){const e=a[o];if(e>s)return e}return Math.max(s,1)}(a,t,s);if(o>0){let e,r;const n=o>1?Math.round((l-i)/(o-1)):null;for(Bf(t,c,d,Wd(n)?0:i-n,i),e=0,r=o-1;e<r;e++)Bf(t,c,d,a[e],a[e+1]);return Bf(t,c,d,l,Wd(n)?t.length:l+n),c}return Bf(t,c,d),c}function Bf(e,t,r,n,s){const a=Yd(n,0),o=Math.min(Yd(s,e.length),e.length);let i,l,c,d=0;for(r=Math.ceil(r),s&&(i=s-n,r=i/Math.floor(i/r)),c=a;c<0;)d++,c=Math.round(a+d*r);for(l=Math.max(a,0);l<o;l++)l===c&&(t.push(e[l]),d++,c=Math.round(a+d*r))}const $f=(e,t,r)=>"top"===t||"left"===t?e[t]+r:e[t]-r,Uf=(e,t)=>Math.min(t||e,e);function Hf(e,t){const r=[],n=e.length/t,s=e.length;let a=0;for(;a<s;a+=n)r.push(e[Math.floor(a)]);return r}function Wf(e,t,r){const n=e.ticks.length,s=Math.min(t,n-1),a=e._startPixel,o=e._endPixel,i=1e-6;let l,c=e.getPixelForTick(s);if(!(r&&(l=1===n?Math.max(c-a,o-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(s-1))/2,c+=s<t?l:-l,c<a-i||c>o+i)))return c}function Qf(e){return e.drawTicks?e.tickLength:0}function Vf(e,t){if(!e.display)return 0;const r=Lh(e.font,t),n=Ih(e.padding);return(Qd(e.text)?e.text.length:1)*r.lineHeight+n.height}function Gf(e,t,r){let n=Wu(e);return(r&&"right"!==t||!r&&"right"===t)&&(n=(e=>"left"===e?"right":"right"===e?"left":e)(n)),n}class Kf extends Df{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:r,_suggestedMax:n}=this;return e=Kd(e,Number.POSITIVE_INFINITY),t=Kd(t,Number.NEGATIVE_INFINITY),r=Kd(r,Number.POSITIVE_INFINITY),n=Kd(n,Number.NEGATIVE_INFINITY),{min:Kd(e,r),max:Kd(t,n),minDefined:Gd(e),maxDefined:Gd(t)}}getMinMax(e){let t,{min:r,max:n,minDefined:s,maxDefined:a}=this.getUserBounds();if(s&&a)return{min:r,max:n};const o=this.getMatchingVisibleMetas();for(let i=0,l=o.length;i<l;++i)t=o[i].controller.getMinMax(this,e),s||(r=Math.min(r,t.min)),a||(n=Math.max(n,t.max));return r=a&&r>n?n:r,n=s&&r>n?r:n,{min:Kd(r,Kd(n,r)),max:Kd(n,Kd(r,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Jd(this.options.beforeUpdate,[this])}update(e,t,r){const{beginAtZero:n,grace:s,ticks:a}=this.options,o=a.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,r){const{min:n,max:s}=e,a=Zd(t,(s-n)/2),o=(e,t)=>r&&0===e?0:e+t;return{min:o(n,-Math.abs(a)),max:o(s,a)}}(this,s,n),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const i=o<this.ticks.length;this._convertTicksToLabels(i?Hf(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||"auto"===a.source)&&(this.ticks=Ff(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),i&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,r=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,r=!r),this._startPixel=e,this._endPixel=t,this._reversePixels=r,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Jd(this.options.afterUpdate,[this])}beforeSetDimensions(){Jd(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Jd(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Jd(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Jd(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let r,n,s;for(r=0,n=e.length;r<n;r++)s=e[r],s.label=Jd(t.callback,[s.value,r,e],this)}afterTickToLabelConversion(){Jd(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Jd(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,r=Uf(this.ticks.length,e.ticks.maxTicksLimit),n=t.minRotation||0,s=t.maxRotation;let a,o,i,l=n;if(!this._isVisible()||!t.display||n>=s||r<=1||!this.isHorizontal())return void(this.labelRotation=n);const c=this._getLabelSizes(),d=c.widest.width,u=c.highest.height,h=Lu(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/r:h/(r-1),d+6>a&&(a=h/(r-(e.offset?.5:1)),o=this.maxHeight-Qf(e.grid)-t.padding-Vf(e.title,this.chart.options.font),i=Math.sqrt(d*d+u*u),l=Eu(Math.min(Math.asin(Lu((c.highest.height+6)/a,-1,1)),Math.asin(Lu(o/i,-1,1))-Math.asin(Lu(u/i,-1,1)))),l=Math.max(n,Math.min(s,l))),this.labelRotation=l}afterCalculateLabelRotation(){Jd(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Jd(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:r,title:n,grid:s}}=this,a=this._isVisible(),o=this.isHorizontal();if(a){const a=Vf(n,t.options.font);if(o?(e.width=this.maxWidth,e.height=Qf(s)+a):(e.height=this.maxHeight,e.width=Qf(s)+a),r.display&&this.ticks.length){const{first:t,last:n,widest:s,highest:a}=this._getLabelSizes(),i=2*r.padding,l=_u(this.labelRotation),c=Math.cos(l),d=Math.sin(l);if(o){const t=r.mirror?0:d*s.width+c*a.height;e.height=Math.min(this.maxHeight,e.height+t+i)}else{const t=r.mirror?0:c*s.width+d*a.height;e.width=Math.min(this.maxWidth,e.width+t+i)}this._calculatePadding(t,n,d,c)}}this._handleMargins(),o?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,r,n){const{ticks:{align:s,padding:a},position:o}=this.options,i=0!==this.labelRotation,l="top"!==o&&"x"===this.axis;if(this.isHorizontal()){const o=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,u=0;i?l?(d=n*e.width,u=r*t.height):(d=r*e.height,u=n*t.width):"start"===s?u=t.width:"end"===s?d=e.width:"inner"!==s&&(d=e.width/2,u=t.width/2),this.paddingLeft=Math.max((d-o+a)*this.width/(this.width-o),0),this.paddingRight=Math.max((u-c+a)*this.width/(this.width-c),0)}else{let r=t.height/2,n=e.height/2;"start"===s?(r=0,n=e.height):"end"===s&&(r=t.height,n=0),this.paddingTop=r+a,this.paddingBottom=n+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Jd(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,r;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,r=e.length;t<r;t++)Wd(e[t].label)&&(e.splice(t,1),r--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let r=this.ticks;t<r.length&&(r=Hf(r,t)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,r){const{ctx:n,_longestTextCache:s}=this,a=[],o=[],i=Math.floor(t/Uf(t,r));let l,c,d,u,h,m,f,p,g,x,b,y=0,v=0;for(l=0;l<t;l+=i){if(u=e[l].label,h=this._resolveTickFontOptions(l),n.font=m=h.string,f=s[m]=s[m]||{data:{},gc:[]},p=h.lineHeight,g=x=0,Wd(u)||Qd(u)){if(Qd(u))for(c=0,d=u.length;c<d;++c)b=u[c],Wd(b)||Qd(b)||(g=fh(n,f.data,f.gc,g,b),x+=p)}else g=fh(n,f.data,f.gc,g,u),x=p;a.push(g),o.push(x),y=Math.max(g,y),v=Math.max(x,v)}!function(e,t){Xd(e,(e=>{const r=e.gc,n=r.length/2;let s;if(n>t){for(s=0;s<n;++s)delete e.data[r[s]];r.splice(0,n)}}))}(s,t);const w=a.indexOf(y),j=o.indexOf(v),N=e=>({width:a[e]||0,height:o[e]||0});return{first:N(0),last:N(t-1),widest:N(w),highest:N(j),widths:a,heights:o}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return Lu(this._alignToPixels?ph(this.chart,t,0):t,-32768,32767)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const r=t[e];return r.$context||(r.$context=function(e,t,r){return qh(e,{tick:r,index:t,type:"tick"})}(this.getContext(),e,r))}return this.$context||(this.$context=qh(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const e=this.options.ticks,t=_u(this.labelRotation),r=Math.abs(Math.cos(t)),n=Math.abs(Math.sin(t)),s=this._getLabelSizes(),a=e.autoSkipPadding||0,o=s?s.widest.width+a:0,i=s?s.highest.height+a:0;return this.isHorizontal()?i*r>o*n?o/r:i/n:i*n<o*r?i/r:o/n}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,r=this.chart,n=this.options,{grid:s,position:a,border:o}=n,i=s.offset,l=this.isHorizontal(),c=this.ticks.length+(i?1:0),d=Qf(s),u=[],h=o.setContext(this.getContext()),m=h.display?h.width:0,f=m/2,p=function(e){return ph(r,e,m)};let g,x,b,y,v,w,j,N,k,S,C,_;if("top"===a)g=p(this.bottom),w=this.bottom-d,N=g-f,S=p(e.top)+f,_=e.bottom;else if("bottom"===a)g=p(this.top),S=e.top,_=p(e.bottom)-f,w=g+f,N=this.top+d;else if("left"===a)g=p(this.right),v=this.right-d,j=g-f,k=p(e.left)+f,C=e.right;else if("right"===a)g=p(this.left),k=e.left,C=p(e.right)-f,v=g+f,j=this.left+d;else if("x"===t){if("center"===a)g=p((e.top+e.bottom)/2+.5);else if(Vd(a)){const e=Object.keys(a)[0],t=a[e];g=p(this.chart.scales[e].getPixelForValue(t))}S=e.top,_=e.bottom,w=g+f,N=w+d}else if("y"===t){if("center"===a)g=p((e.left+e.right)/2);else if(Vd(a)){const e=Object.keys(a)[0],t=a[e];g=p(this.chart.scales[e].getPixelForValue(t))}v=g-f,j=v-d,k=e.left,C=e.right}const E=Yd(n.ticks.maxTicksLimit,c),A=Math.max(1,Math.ceil(c/E));for(x=0;x<c;x+=A){const e=this.getContext(x),t=s.setContext(e),n=o.setContext(e),a=t.lineWidth,c=t.color,d=n.dash||[],h=n.dashOffset,m=t.tickWidth,f=t.tickColor,p=t.tickBorderDash||[],g=t.tickBorderDashOffset;b=Wf(this,x,i),void 0!==b&&(y=ph(r,b,a),l?v=j=k=C=y:w=N=S=_=y,u.push({tx1:v,ty1:w,tx2:j,ty2:N,x1:k,y1:S,x2:C,y2:_,width:a,color:c,borderDash:d,borderDashOffset:h,tickWidth:m,tickColor:f,tickBorderDash:p,tickBorderDashOffset:g}))}return this._ticksLength=c,this._borderValue=g,u}_computeLabelItems(e){const t=this.axis,r=this.options,{position:n,ticks:s}=r,a=this.isHorizontal(),o=this.ticks,{align:i,crossAlign:l,padding:c,mirror:d}=s,u=Qf(r.grid),h=u+c,m=d?-c:h,f=-_u(this.labelRotation),p=[];let g,x,b,y,v,w,j,N,k,S,C,_,E="middle";if("top"===n)w=this.bottom-m,j=this._getXAxisLabelAlignment();else if("bottom"===n)w=this.top+m,j=this._getXAxisLabelAlignment();else if("left"===n){const e=this._getYAxisLabelAlignment(u);j=e.textAlign,v=e.x}else if("right"===n){const e=this._getYAxisLabelAlignment(u);j=e.textAlign,v=e.x}else if("x"===t){if("center"===n)w=(e.top+e.bottom)/2+h;else if(Vd(n)){const e=Object.keys(n)[0],t=n[e];w=this.chart.scales[e].getPixelForValue(t)+h}j=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===n)v=(e.left+e.right)/2-h;else if(Vd(n)){const e=Object.keys(n)[0],t=n[e];v=this.chart.scales[e].getPixelForValue(t)}j=this._getYAxisLabelAlignment(u).textAlign}"y"===t&&("start"===i?E="top":"end"===i&&(E="bottom"));const A=this._getLabelSizes();for(g=0,x=o.length;g<x;++g){b=o[g],y=b.label;const e=s.setContext(this.getContext(g));N=this.getPixelForTick(g)+s.labelOffset,k=this._resolveTickFontOptions(g),S=k.lineHeight,C=Qd(y)?y.length:1;const t=C/2,r=e.color,i=e.textStrokeColor,c=e.textStrokeWidth;let u,h=j;if(a?(v=N,"inner"===j&&(h=g===x-1?this.options.reverse?"left":"right":0===g?this.options.reverse?"right":"left":"center"),_="top"===n?"near"===l||0!==f?-C*S+S/2:"center"===l?-A.highest.height/2-t*S+S:-A.highest.height+S/2:"near"===l||0!==f?S/2:"center"===l?A.highest.height/2-t*S:A.highest.height-C*S,d&&(_*=-1),0===f||e.showLabelBackdrop||(v+=S/2*Math.sin(f))):(w=N,_=(1-C)*S/2),e.showLabelBackdrop){const t=Ih(e.backdropPadding),r=A.heights[g],n=A.widths[g];let s=_-t.top,a=0-t.left;switch(E){case"middle":s-=r/2;break;case"bottom":s-=r}switch(j){case"center":a-=n/2;break;case"right":a-=n;break;case"inner":g===x-1?a-=n:g>0&&(a-=n/2)}u={left:a,top:s,width:n+t.width,height:r+t.height,color:e.backdropColor}}p.push({label:y,font:k,textOffset:_,options:{rotation:f,color:r,strokeColor:i,strokeWidth:c,textAlign:h,textBaseline:E,translation:[v,w],backdrop:u}})}return p}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-_u(this.labelRotation))return"top"===e?"left":"right";let r="center";return"start"===t.align?r="left":"end"===t.align?r="right":"inner"===t.align&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:r,mirror:n,padding:s}}=this.options,a=e+s,o=this._getLabelSizes().widest.width;let i,l;return"left"===t?n?(l=this.right+s,"near"===r?i="left":"center"===r?(i="center",l+=o/2):(i="right",l+=o)):(l=this.right-a,"near"===r?i="right":"center"===r?(i="center",l-=o/2):(i="left",l=this.left)):"right"===t?n?(l=this.left+s,"near"===r?i="right":"center"===r?(i="center",l-=o/2):(i="left",l-=o)):(l=this.left+a,"near"===r?i="left":"center"===r?(i="center",l+=o/2):(i="right",l=this.right)):i="right",{textAlign:i,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:r,top:n,width:s,height:a}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(r,n,s,a),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const r=this.ticks.findIndex((t=>t.value===e));if(r>=0){return t.setContext(this.getContext(r)).lineWidth}return 0}drawGrid(e){const t=this.options.grid,r=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,a;const o=(e,t,n)=>{n.width&&n.color&&(r.save(),r.lineWidth=n.width,r.strokeStyle=n.color,r.setLineDash(n.borderDash||[]),r.lineDashOffset=n.borderDashOffset,r.beginPath(),r.moveTo(e.x,e.y),r.lineTo(t.x,t.y),r.stroke(),r.restore())};if(t.display)for(s=0,a=n.length;s<a;++s){const e=n[s];t.drawOnChartArea&&o({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&o({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:r,grid:n}}=this,s=r.setContext(this.getContext()),a=r.display?s.width:0;if(!a)return;const o=n.setContext(this.getContext(0)).lineWidth,i=this._borderValue;let l,c,d,u;this.isHorizontal()?(l=ph(e,this.left,a)-a/2,c=ph(e,this.right,o)+o/2,d=u=i):(d=ph(e,this.top,a)-a/2,u=ph(e,this.bottom,o)+o/2,l=c=i),t.save(),t.lineWidth=s.width,t.strokeStyle=s.color,t.beginPath(),t.moveTo(l,d),t.lineTo(c,u),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,r=this._computeLabelArea();r&&vh(t,r);const n=this.getLabelItems(e);for(const s of n){const e=s.options,r=s.font;Ch(t,s.label,0,s.textOffset,r,e)}r&&wh(t)}drawTitle(){const{ctx:e,options:{position:t,title:r,reverse:n}}=this;if(!r.display)return;const s=Lh(r.font),a=Ih(r.padding),o=r.align;let i=s.lineHeight/2;"bottom"===t||"center"===t||Vd(t)?(i+=a.bottom,Qd(r.text)&&(i+=s.lineHeight*(r.text.length-1))):i+=a.top;const{titleX:l,titleY:c,maxWidth:d,rotation:u}=function(e,t,r,n){const{top:s,left:a,bottom:o,right:i,chart:l}=e,{chartArea:c,scales:d}=l;let u,h,m,f=0;const p=o-s,g=i-a;if(e.isHorizontal()){if(h=Qu(n,a,i),Vd(r)){const e=Object.keys(r)[0],n=r[e];m=d[e].getPixelForValue(n)+p-t}else m="center"===r?(c.bottom+c.top)/2+p-t:$f(e,r,t);u=i-a}else{if(Vd(r)){const e=Object.keys(r)[0],n=r[e];h=d[e].getPixelForValue(n)-g+t}else h="center"===r?(c.left+c.right)/2-g+t:$f(e,r,t);m=Qu(n,o,s),f="left"===r?-bu:bu}return{titleX:h,titleY:m,maxWidth:u,rotation:f}}(this,i,t,o);Ch(e,r.text,0,0,s,{color:r.color,maxWidth:d,rotation:u,textAlign:Gf(o,t,n),textBaseline:"middle",translation:[l,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,r=Yd(e.grid&&e.grid.z,-1),n=Yd(e.border&&e.border.z,0);return this._isVisible()&&this.draw===Kf.prototype.draw?[{z:r,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:n,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",n=[];let s,a;for(s=0,a=t.length;s<a;++s){const a=t[s];a[r]!==this.id||e&&a.type!==e||n.push(a)}return n}_resolveTickFontOptions(e){return Lh(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Yf{constructor(e,t,r){this.type=e,this.scope=t,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let r;(function(e){return"id"in e&&"defaults"in e})(t)&&(r=this.register(t));const n=this.items,s=e.id,a=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in n||(n[s]=e,function(e,t,r){const n=su(Object.create(null),[r?mh.get(r):{},mh.get(t),e.defaults]);mh.set(t,n),e.defaultRoutes&&function(e,t){Object.keys(t).forEach((r=>{const n=r.split("."),s=n.pop(),a=[e].concat(n).join("."),o=t[r].split("."),i=o.pop(),l=o.join(".");mh.route(a,s,l,i)}))}(t,e.defaultRoutes);e.descriptors&&mh.describe(t,e.descriptors)}(e,a,r),this.override&&mh.override(e.id,e.overrides)),a}get(e){return this.items[e]}unregister(e){const t=this.items,r=e.id,n=this.scope;r in t&&delete t[r],n&&r in mh[n]&&(delete mh[n][r],this.override&&delete lh[r])}}class Zf{constructor(){this.controllers=new Yf(Gm,"datasets",!0),this.elements=new Yf(Df,"elements"),this.plugins=new Yf(Object,"plugins"),this.scales=new Yf(Kf,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._each("register",t)}remove(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._each("unregister",t)}addControllers(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._each("register",t,this.controllers)}addElements(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._each("register",t,this.elements)}addPlugins(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._each("register",t,this.plugins)}addScales(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._each("register",t,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._each("unregister",t,this.controllers)}removeElements(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._each("unregister",t,this.elements)}removePlugins(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._each("unregister",t,this.plugins)}removeScales(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._each("unregister",t,this.scales)}_each(e,t,r){[...t].forEach((t=>{const n=r||this._getRegistryForType(t);r||n.isForType(t)||n===this.plugins&&t.id?this._exec(e,n,t):Xd(t,(t=>{const n=r||this._getRegistryForType(t);this._exec(e,n,t)}))}))}_exec(e,t,r){const n=cu(e);Jd(r["before"+n],[],r),t[e](r),Jd(r["after"+n],[],r)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const r=this._typedRegistries[t];if(r.isForType(e))return r}return this.plugins}_get(e,t,r){const n=t.get(e);if(void 0===n)throw new Error('"'+e+'" is not a registered '+r+".");return n}}var Jf=new Zf;class Xf{constructor(){this._init=[]}notify(e,t,r,n){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=n?this._descriptors(e).filter(n):this._descriptors(e),a=this._notify(s,e,t,r);return"afterDestroy"===t&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),a}_notify(e,t,r,n){n=n||{};for(const s of e){const e=s.plugin;if(!1===Jd(e[r],[t,n,s.options],e)&&n.cancelable)return!1}return!0}invalidate(){Wd(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const r=e&&e.config,n=Yd(r.options&&r.options.plugins,{}),s=function(e){const t={},r=[],n=Object.keys(Jf.plugins.items);for(let a=0;a<n.length;a++)r.push(Jf.getPlugin(n[a]));const s=e.plugins||[];for(let a=0;a<s.length;a++){const e=s[a];-1===r.indexOf(e)&&(r.push(e),t[e.id]=!0)}return{plugins:r,localIds:t}}(r);return!1!==n||t?function(e,t,r,n){let{plugins:s,localIds:a}=t;const o=[],i=e.getContext();for(const l of s){const t=l.id,s=ep(r[t],n);null!==s&&o.push({plugin:l,options:tp(e.config,{plugin:l,local:a[t]},s,i)})}return o}(e,s,n,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],r=this._cache,n=(e,t)=>e.filter((e=>!t.some((t=>e.plugin.id===t.plugin.id))));this._notify(n(t,r),e,"stop"),this._notify(n(r,t),e,"start")}}function ep(e,t){return t||!1!==e?!0===e?{}:e:null}function tp(e,t,r,n){let{plugin:s,local:a}=t;const o=e.pluginScopeKeys(s),i=e.getOptionScopes(r,o);return a&&s.defaults&&i.push(s.defaults),e.createResolver(i,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function rp(e,t){const r=mh.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||r.indexAxis||"x"}function np(e){if("x"===e||"y"===e||"r"===e)return e}function sp(e){if(np(e))return e;for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];for(const a of r){const t=a.axis||("top"===(s=a.position)||"bottom"===s?"x":"left"===s||"right"===s?"y":void 0)||e.length>1&&np(e[0].toLowerCase());if(t)return t}var s;throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function ap(e,t,r){if(r[t+"AxisID"]===e)return{axis:t}}function op(e,t){const r=lh[e.type]||{scales:{}},n=t.scales||{},s=rp(e.type,t),a=Object.create(null);return Object.keys(n).forEach((t=>{const o=n[t];if(!Vd(o))return console.error(`Invalid scale configuration for scale: ${t}`);if(o._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${t}`);const i=sp(t,o,function(e,t){if(t.data&&t.data.datasets){const r=t.data.datasets.filter((t=>t.xAxisID===e||t.yAxisID===e));if(r.length)return ap(e,"x",r[0])||ap(e,"y",r[0])}return{}}(t,e),mh.scales[o.type]),l=function(e,t){return e===t?"_index_":"_value_"}(i,s),c=r.scales||{};a[t]=au(Object.create(null),[{axis:i},o,c[i],c[l]])})),e.data.datasets.forEach((r=>{const s=r.type||e.type,o=r.indexAxis||rp(s,t),i=(lh[s]||{}).scales||{};Object.keys(i).forEach((e=>{const t=function(e,t){let r=e;return"_index_"===e?r=t:"_value_"===e&&(r="x"===t?"y":"x"),r}(e,o),s=r[t+"AxisID"]||t;a[s]=a[s]||Object.create(null),au(a[s],[{axis:t},n[s],i[e]])}))})),Object.keys(a).forEach((e=>{const t=a[e];au(t,[mh.scales[t.type],mh.scale])})),a}function ip(e){const t=e.options||(e.options={});t.plugins=Yd(t.plugins,{}),t.scales=op(e,t)}function lp(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const cp=new Map,dp=new Set;function up(e,t){let r=cp.get(e);return r||(r=t(),cp.set(e,r),dp.add(r)),r}const hp=(e,t,r)=>{const n=lu(t,r);void 0!==n&&e.add(n)};class mp{constructor(e){this._config=function(e){return(e=e||{}).data=lp(e.data),ip(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=lp(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),ip(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return up(e,(()=>[[`datasets.${e}`,""]]))}datasetAnimationScopeKeys(e,t){return up(`${e}.transition.${t}`,(()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]]))}datasetElementScopeKeys(e,t){return up(`${e}-${t}`,(()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]]))}pluginScopeKeys(e){const t=e.id;return up(`${this.type}-plugin-${t}`,(()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]]))}_cachedScopes(e,t){const r=this._scopeCache;let n=r.get(e);return n&&!t||(n=new Map,r.set(e,n)),n}getOptionScopes(e,t,r){const{options:n,type:s}=this,a=this._cachedScopes(e,r),o=a.get(t);if(o)return o;const i=new Set;t.forEach((t=>{e&&(i.add(e),t.forEach((t=>hp(i,e,t)))),t.forEach((e=>hp(i,n,e))),t.forEach((e=>hp(i,lh[s]||{},e))),t.forEach((e=>hp(i,mh,e))),t.forEach((e=>hp(i,ch,e)))}));const l=Array.from(i);return 0===l.length&&l.push(Object.create(null)),dp.has(t)&&a.set(t,l),l}chartOptionScopes(){const{options:e,type:t}=this;return[e,lh[t]||{},mh.datasets[t]||{},{type:t},mh,ch]}resolveNamedOptions(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];const s={$shared:!0},{resolver:a,subPrefixes:o}=fp(this._resolverCache,e,n);let i=a;if(function(e,t){const{isScriptable:r,isIndexable:n}=Fh(e);for(const s of t){const t=r(s),a=n(s),o=(a||t)&&e[s];if(t&&(uu(o)||pp(o))||a&&Qd(o))return!0}return!1}(a,t)){s.$shared=!1;i=Dh(a,r=uu(r)?r():r,this.createResolver(e,r,o))}for(const l of t)s[l]=i[l];return s}createResolver(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],n=arguments.length>3?arguments[3]:void 0;const{resolver:s}=fp(this._resolverCache,e,r);return Vd(t)?Dh(s,t,void 0,n):s}}function fp(e,t,r){let n=e.get(t);n||(n=new Map,e.set(t,n));const s=r.join();let a=n.get(s);if(!a){a={resolver:Rh(t,r),subPrefixes:r.filter((e=>!e.toLowerCase().includes("hover")))},n.set(s,a)}return a}const pp=e=>Vd(e)&&Object.getOwnPropertyNames(e).some((t=>uu(e[t])));const gp=["top","bottom","left","right","chartArea"];function xp(e,t){return"top"===e||"bottom"===e||-1===gp.indexOf(e)&&"x"===t}function bp(e,t){return function(r,n){return r[e]===n[e]?r[t]-n[t]:r[e]-n[e]}}function yp(e){const t=e.chart,r=t.options.animation;t.notifyPlugins("afterRender"),Jd(r&&r.onComplete,[e],t)}function vp(e){const t=e.chart,r=t.options.animation;Jd(r&&r.onProgress,[e],t)}function wp(e){return sm()&&"string"===typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const jp={},Np=e=>{const t=wp(e);return Object.values(jp).filter((e=>e.canvas===t)).pop()};function kp(e,t,r){const n=Object.keys(e);for(const s of n){const n=+s;if(n>=t){const a=e[s];delete e[s],(r>0||n>t)&&(e[n+r]=a)}}}class Sp{static defaults=(()=>mh)();static instances=(()=>jp)();static overrides=(()=>lh)();static registry=(()=>Jf)();static version="4.4.9";static getChart=(()=>Np)();static register(){Jf.add(...arguments),Cp()}static unregister(){Jf.remove(...arguments),Cp()}constructor(e,t){const r=this.config=new mp(t),n=wp(e),s=Np(n);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const a=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||function(e){return!sm()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?Nf:Rf}(n)),this.platform.updateConfig(r);const o=this.platform.acquireContext(n,a.aspectRatio),i=o&&o.canvas,l=i&&i.height,c=i&&i.width;this.id=Hd(),this.ctx=o,this.canvas=i,this.width=c,this.height=l,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Xf,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let r;return function(){for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return t?(clearTimeout(r),r=setTimeout(e,t,s)):e.apply(this,s),t}}((e=>this.update(e)),a.resizeDelay||0),this._dataChanges=[],jp[this.id]=this,o&&i?(zm.listen(this,"complete",yp),zm.listen(this,"progress",vp),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:r,height:n,_aspectRatio:s}=this;return Wd(e)?t&&s?s:n?r/n:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Jf}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():mm(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return gh(this.canvas,this.ctx),this}stop(){return zm.stop(this),this}resize(e,t){zm.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const r=this.options,n=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(n,e,t,s),o=r.devicePixelRatio||this.platform.getDevicePixelRatio(),i=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,mm(this,o,!0)&&(this.notifyPlugins("resize",{size:a}),Jd(r.onResize,[this,a],this),this.attached&&this._doResize(i)&&this.render())}ensureScalesHaveIDs(){Xd(this.options.scales||{},((e,t)=>{e.id=t}))}buildOrUpdateScales(){const e=this.options,t=e.scales,r=this.scales,n=Object.keys(r).reduce(((e,t)=>(e[t]=!1,e)),{});let s=[];t&&(s=s.concat(Object.keys(t).map((e=>{const r=t[e],n=sp(e,r),s="r"===n,a="x"===n;return{options:r,dposition:s?"chartArea":a?"bottom":"left",dtype:s?"radialLinear":a?"category":"linear"}})))),Xd(s,(t=>{const s=t.options,a=s.id,o=sp(a,s),i=Yd(s.type,t.dtype);void 0!==s.position&&xp(s.position,o)===xp(t.dposition)||(s.position=t.dposition),n[a]=!0;let l=null;if(a in r&&r[a].type===i)l=r[a];else{l=new(Jf.getScale(i))({id:a,type:i,ctx:this.ctx,chart:this}),r[l.id]=l}l.init(s,e)})),Xd(n,((e,t)=>{e||delete r[t]})),Xd(r,(e=>{wf.configure(this,e,e.options),wf.addBox(this,e)}))}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,r=e.length;if(e.sort(((e,t)=>e.index-t.index)),r>t){for(let e=t;e<r;++e)this._destroyDatasetMeta(e);e.splice(t,r-t)}this._sortedMetasets=e.slice(0).sort(bp("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach(((e,r)=>{0===t.filter((t=>t===e._dataset)).length&&this._destroyDatasetMeta(r)}))}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let r,n;for(this._removeUnreferencedMetasets(),r=0,n=t.length;r<n;r++){const n=t[r];let s=this.getDatasetMeta(r);const a=n.type||this.config.type;if(s.type&&s.type!==a&&(this._destroyDatasetMeta(r),s=this.getDatasetMeta(r)),s.type=a,s.indexAxis=n.indexAxis||rp(a,this.options),s.order=n.order||0,s.index=r,s.label=""+n.label,s.visible=this.isDatasetVisible(r),s.controller)s.controller.updateIndex(r),s.controller.linkScales();else{const t=Jf.getController(a),{datasetElementType:n,dataElementType:o}=mh.datasets[a];Object.assign(t,{dataElementType:Jf.getElement(o),datasetElementType:n&&Jf.getElement(n)}),s.controller=new t(this,r),e.push(s.controller)}}return this._updateMetasets(),e}_resetElements(){Xd(this.data.datasets,((e,t)=>{this.getDatasetMeta(t).controller.reset()}),this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const r=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),n=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:e}=this.getDatasetMeta(l),t=!n&&-1===s.indexOf(e);e.buildOrUpdateElements(t),a=Math.max(+e.getMaxOverflow(),a)}a=this._minPadding=r.layout.autoPadding?a:0,this._updateLayout(a),n||Xd(s,(e=>{e.reset()})),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(bp("z","_idx"));const{_active:o,_lastEvent:i}=this;i?this._eventHandler(i,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){Xd(this.scales,(e=>{wf.removeBox(this,e)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),r=new Set(e.events);hu(t,r)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:r,start:n,count:s}of t){kp(e,n,"_removeElements"===r?-s:s)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,r=t=>new Set(e.filter((e=>e[0]===t)).map(((e,t)=>t+","+e.splice(1).join(",")))),n=r(0);for(let s=1;s<t;s++)if(!hu(n,r(s)))return;return Array.from(n).map((e=>e.split(","))).map((e=>({method:e[1],start:+e[2],count:+e[3]})))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;wf.update(this,this.width,this.height,e);const t=this.chartArea,r=t.width<=0||t.height<=0;this._layers=[],Xd(this.boxes,(e=>{r&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))}),this),this._layers.forEach(((e,t)=>{e._idx=t})),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,r=this.data.datasets.length;t<r;++t)this._updateDataset(t,uu(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const r=this.getDatasetMeta(e),n={meta:r,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",n)&&(r.controller._update(t),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(zm.has(this)?this.attached&&!zm.running(this)&&zm.start(this):(this.draw(),yp({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(e,t)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,r=[];let n,s;for(n=0,s=t.length;n<s;++n){const s=t[n];e&&!s.visible||r.push(s)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,r={meta:e,index:e.index,cancelable:!0},n=Om(this,e);!1!==this.notifyPlugins("beforeDatasetDraw",r)&&(n&&vh(t,n),e.controller.draw(),n&&wh(t),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return yh(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,r,n){const s=lf.modes[t];return"function"===typeof s?s(this,e,r,n):[]}getDatasetMeta(e){const t=this.data.datasets[e],r=this._metasets;let n=r.filter((e=>e&&e._dataset===t)).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},r.push(n)),n}getContext(){return this.$context||(this.$context=qh(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const r=this.getDatasetMeta(e);return"boolean"===typeof r.hidden?!r.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,r){const n=r?"show":"hide",s=this.getDatasetMeta(e),a=s.controller._resolveAnimations(void 0,n);du(t)?(s.data[t].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),a.update(s,{visible:r}),this.update((t=>t.datasetIndex===e?n:void 0)))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),zm.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),gh(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete jp[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(){return this.canvas.toDataURL(...arguments)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,r=(r,n)=>{t.addEventListener(this,r,n),e[r]=n},n=(e,t,r)=>{e.offsetX=t,e.offsetY=r,this._eventHandler(e)};Xd(this.options.events,(e=>r(e,n)))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,r=(r,n)=>{t.addEventListener(this,r,n),e[r]=n},n=(r,n)=>{e[r]&&(t.removeEventListener(this,r,n),delete e[r])},s=(e,t)=>{this.canvas&&this.resize(e,t)};let a;const o=()=>{n("attach",o),this.attached=!0,this.resize(),r("resize",s),r("detach",a)};a=()=>{this.attached=!1,n("resize",s),this._stop(),this._resize(0,0),r("attach",o)},t.isAttached(this.canvas)?o():a()}unbindEvents(){Xd(this._listeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._listeners={},Xd(this._responsiveListeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._responsiveListeners=void 0}updateHoverStyle(e,t,r){const n=r?"set":"remove";let s,a,o,i;for("dataset"===t&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+n+"DatasetHoverStyle"]()),o=0,i=e.length;o<i;++o){a=e[o];const t=a&&this.getDatasetMeta(a.datasetIndex).controller;t&&t[n+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],r=e.map((e=>{let{datasetIndex:t,index:r}=e;const n=this.getDatasetMeta(t);if(!n)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:n.data[r],index:r}}));!eu(r,t)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,t))}notifyPlugins(e,t,r){return this._plugins.notify(this,e,t,r)}isPluginEnabled(e){return 1===this._plugins._cache.filter((t=>t.plugin.id===e)).length}_updateHoverStyles(e,t,r){const n=this.options.hover,s=(e,t)=>e.filter((e=>!t.some((t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)))),a=s(t,e),o=r?e:s(e,t);a.length&&this.updateHoverStyle(a,n.mode,!1),o.length&&n.mode&&this.updateHoverStyle(o,n.mode,!0)}_eventHandler(e,t){const r={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},n=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",r,n))return;const s=this._handleEvent(e,t,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,n),(s||r.changed)&&this.render(),this}_handleEvent(e,t,r){const{_active:n=[],options:s}=this,a=t,o=this._getActiveElements(e,n,r,a),i=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),l=function(e,t,r,n){return r&&"mouseout"!==e.type?n?t:e:null}(e,this._lastEvent,r,i);r&&(this._lastEvent=null,Jd(s.onHover,[e,o,this],this),i&&Jd(s.onClick,[e,o,this],this));const c=!eu(o,n);return(c||t)&&(this._active=o,this._updateHoverStyles(o,n,t)),this._lastEvent=l,c}_getActiveElements(e,t,r,n){if("mouseout"===e.type)return[];if(!r)return t;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,n)}}function Cp(){return Xd(Sp.instances,(e=>e._plugins.invalidate()))}function _p(e,t,r,n){const s=Th(e.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const a=(r-t)/2,o=Math.min(a,n*t/2),i=e=>{const t=(r-Math.min(a,e))*n/2;return Lu(e,0,Math.min(a,t))};return{outerStart:i(s.outerStart),outerEnd:i(s.outerEnd),innerStart:Lu(s.innerStart,0,o),innerEnd:Lu(s.innerEnd,0,o)}}function Ep(e,t,r,n){return{x:r+e*Math.cos(t),y:n+e*Math.sin(t)}}function Ap(e,t,r,n,s,a){const{x:o,y:i,startAngle:l,pixelMargin:c,innerRadius:d}=t,u=Math.max(t.outerRadius+n+r-c,0),h=d>0?d+n+r+c:0;let m=0;const f=s-l;if(n){const e=((d>0?d-n:0)+(u>0?u-n:0))/2;m=(f-(0!==e?f*e/(e+n):f))/2}const p=(f-Math.max(.001,f*u-r/mu)/u)/2,g=l+p+m,x=s-p-m,{outerStart:b,outerEnd:y,innerStart:v,innerEnd:w}=_p(t,h,u,x-g),j=u-b,N=u-y,k=g+b/j,S=x-y/N,C=h+v,_=h+w,E=g+v/C,A=x-w/_;if(e.beginPath(),a){const t=(k+S)/2;if(e.arc(o,i,u,k,t),e.arc(o,i,u,t,S),y>0){const t=Ep(N,S,o,i);e.arc(t.x,t.y,y,S,x+bu)}const r=Ep(_,x,o,i);if(e.lineTo(r.x,r.y),w>0){const t=Ep(_,A,o,i);e.arc(t.x,t.y,w,x+bu,A+Math.PI)}const n=(x-w/h+(g+v/h))/2;if(e.arc(o,i,h,x-w/h,n,!0),e.arc(o,i,h,n,g+v/h,!0),v>0){const t=Ep(C,E,o,i);e.arc(t.x,t.y,v,E+Math.PI,g-bu)}const s=Ep(j,g,o,i);if(e.lineTo(s.x,s.y),b>0){const t=Ep(j,k,o,i);e.arc(t.x,t.y,b,g-bu,k)}}else{e.moveTo(o,i);const t=Math.cos(k)*u+o,r=Math.sin(k)*u+i;e.lineTo(t,r);const n=Math.cos(S)*u+o,s=Math.sin(S)*u+i;e.lineTo(n,s)}e.closePath()}function Op(e,t,r,n,s){const{fullCircles:a,startAngle:o,circumference:i,options:l}=t,{borderWidth:c,borderJoinStyle:d,borderDash:u,borderDashOffset:h}=l,m="inner"===l.borderAlign;if(!c)return;e.setLineDash(u||[]),e.lineDashOffset=h,m?(e.lineWidth=2*c,e.lineJoin=d||"round"):(e.lineWidth=c,e.lineJoin=d||"bevel");let f=t.endAngle;if(a){Ap(e,t,r,n,f,s);for(let t=0;t<a;++t)e.stroke();isNaN(i)||(f=o+(i%fu||fu))}m&&function(e,t,r){const{startAngle:n,pixelMargin:s,x:a,y:o,outerRadius:i,innerRadius:l}=t;let c=s/i;e.beginPath(),e.arc(a,o,i,n-c,r+c),l>s?(c=s/l,e.arc(a,o,l,r+c,n-c,!0)):e.arc(a,o,s,r+bu,n-bu),e.closePath(),e.clip()}(e,t,f),a||(Ap(e,t,r,n,f,s),e.stroke())}class Tp extends Df{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>"borderDash"!==e};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,r){const n=this.getProps(["x","y"],r),{angle:s,distance:a}=Ou(n,{x:e,y:t}),{startAngle:o,endAngle:i,innerRadius:l,outerRadius:c,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),u=(this.options.spacing+this.options.borderWidth)/2,h=Yd(d,i-o),m=Iu(s,o,i)&&o!==i,f=h>=fu||m,p=Mu(a,l+u,c+u);return f&&p}getCenterPoint(e){const{x:t,y:r,startAngle:n,endAngle:s,innerRadius:a,outerRadius:o}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:i,spacing:l}=this.options,c=(n+s)/2,d=(a+o+l+i)/2;return{x:t+Math.cos(c)*d,y:r+Math.sin(c)*d}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:r}=this,n=(t.offset||0)/4,s=(t.spacing||0)/2,a=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=r>fu?Math.floor(r/fu):0,0===r||this.innerRadius<0||this.outerRadius<0)return;e.save();const o=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(o)*n,Math.sin(o)*n);const i=n*(1-Math.sin(Math.min(mu,r||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function(e,t,r,n,s){const{fullCircles:a,startAngle:o,circumference:i}=t;let l=t.endAngle;if(a){Ap(e,t,r,n,l,s);for(let t=0;t<a;++t)e.fill();isNaN(i)||(l=o+(i%fu||fu))}Ap(e,t,r,n,l,s),e.fill()}(e,this,i,s,a),Op(e,this,i,s,a),e.restore()}}function zp(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.lineCap=Yd(r.borderCapStyle,t.borderCapStyle),e.setLineDash(Yd(r.borderDash,t.borderDash)),e.lineDashOffset=Yd(r.borderDashOffset,t.borderDashOffset),e.lineJoin=Yd(r.borderJoinStyle,t.borderJoinStyle),e.lineWidth=Yd(r.borderWidth,t.borderWidth),e.strokeStyle=Yd(r.borderColor,t.borderColor)}function Pp(e,t,r){e.lineTo(r.x,r.y)}function Ip(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=e.length,{start:s=0,end:a=n-1}=r,{start:o,end:i}=t,l=Math.max(s,o),c=Math.min(a,i),d=s<o&&a<o||s>i&&a>i;return{count:n,start:l,loop:t.loop,ilen:c<l&&!d?n+c-l:c-l}}function Lp(e,t,r,n){const{points:s,options:a}=t,{count:o,start:i,loop:l,ilen:c}=Ip(s,r,n),d=function(e){return e.stepped?jh:e.tension||"monotone"===e.cubicInterpolationMode?Nh:Pp}(a);let u,h,m,{move:f=!0,reverse:p}=n||{};for(u=0;u<=c;++u)h=s[(i+(p?c-u:u))%o],h.skip||(f?(e.moveTo(h.x,h.y),f=!1):d(e,m,h,p,a.stepped),m=h);return l&&(h=s[(i+(p?c:0))%o],d(e,m,h,p,a.stepped)),!!l}function Mp(e,t,r,n){const s=t.points,{count:a,start:o,ilen:i}=Ip(s,r,n),{move:l=!0,reverse:c}=n||{};let d,u,h,m,f,p,g=0,x=0;const b=e=>(o+(c?i-e:e))%a,y=()=>{m!==f&&(e.lineTo(g,f),e.lineTo(g,m),e.lineTo(g,p))};for(l&&(u=s[b(0)],e.moveTo(u.x,u.y)),d=0;d<=i;++d){if(u=s[b(d)],u.skip)continue;const t=u.x,r=u.y,n=0|t;n===h?(r<m?m=r:r>f&&(f=r),g=(x*g+t)/++x):(y(),e.lineTo(t,r),h=n,x=0,m=f=r),p=r}y()}function qp(e){const t=e.options,r=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&"monotone"!==t.cubicInterpolationMode&&!t.stepped&&!r?Mp:Lp}const Rp="function"===typeof Path2D;function Dp(e,t,r,n){Rp&&!t.options.segment?function(e,t,r,n){let s=t._path;s||(s=t._path=new Path2D,t.path(s,r,n)&&s.closePath()),zp(e,t.options),e.stroke(s)}(e,t,r,n):function(e,t,r,n){const{segments:s,options:a}=t,o=qp(t);for(const i of s)zp(e,a,i.style),e.beginPath(),o(e,t,i,{start:r,end:r+n-1})&&e.closePath(),e.stroke()}(e,t,r,n)}class Fp extends Df{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const r=this.options;if((r.tension||"monotone"===r.cubicInterpolationMode)&&!r.stepped&&!this._pointsUpdated){const n=r.spanGaps?this._loop:this._fullLoop;nm(this._points,r,e,n,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(e,t){const r=e.points,n=e.options.spanGaps,s=r.length;if(!s)return[];const a=!!e._loop,{start:o,end:i}=function(e,t,r,n){let s=0,a=t-1;if(r&&!n)for(;s<t&&!e[s].skip;)s++;for(;s<t&&e[s].skip;)s++;for(s%=t,r&&(a+=s);a>s&&e[a%t].skip;)a--;return a%=t,{start:s,end:a}}(r,s,a,n);return Cm(e,!0===n?[{start:o,end:i,loop:a}]:function(e,t,r,n){const s=e.length,a=[];let o,i=t,l=e[t];for(o=t+1;o<=r;++o){const r=e[o%s];r.skip||r.stop?l.skip||(n=!1,a.push({start:t%s,end:(o-1)%s,loop:n}),t=i=r.stop?o:null):(i=o,l.skip&&(t=o)),l=r}return null!==i&&a.push({start:t%s,end:i%s,loop:n}),a}(r,o,i<o?i+s:i,!!e._fullLoop&&0===o&&i===s-1),r,t)}(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,r=e.length;return r&&t[e[r-1].end]}interpolate(e,t){const r=this.options,n=e[t],s=this.points,a=Sm(this,{property:t,start:n,end:n});if(!a.length)return;const o=[],i=function(e){return e.stepped?xm:e.tension||"monotone"===e.cubicInterpolationMode?bm:gm}(r);let l,c;for(l=0,c=a.length;l<c;++l){const{start:c,end:d}=a[l],u=s[c],h=s[d];if(u===h){o.push(u);continue}const m=i(u,h,Math.abs((n-u[t])/(h[t]-u[t])),r.stepped);m[t]=e[t],o.push(m)}return 1===o.length?o[0]:o}pathSegment(e,t,r){return qp(this)(e,this,t,r)}path(e,t,r){const n=this.segments,s=qp(this);let a=this._loop;t=t||0,r=r||this.points.length-t;for(const o of n)a&=s(e,this,o,{start:t,end:t+r-1});return!!a}draw(e,t,r,n){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),Dp(e,this,r,n),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function Bp(e,t,r,n){const s=e.options,{[r]:a}=e.getProps([r],n);return Math.abs(t-a)<s.radius+s.hitRadius}class $p extends Df{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,r){const n=this.options,{x:s,y:a}=this.getProps(["x","y"],r);return Math.pow(e-s,2)+Math.pow(t-a,2)<Math.pow(n.hitRadius+n.radius,2)}inXRange(e,t){return Bp(this,e,"x",t)}inYRange(e,t){return Bp(this,e,"y",t)}getCenterPoint(e){const{x:t,y:r}=this.getProps(["x","y"],e);return{x:t,y:r}}size(e){let t=(e=e||this.options||{}).radius||0;t=Math.max(t,t&&e.hoverRadius||0);return 2*(t+(t&&e.borderWidth||0))}draw(e,t){const r=this.options;this.skip||r.radius<.1||!yh(this,t,this.size(r)/2)||(e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.fillStyle=r.backgroundColor,xh(e,r,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function Up(e,t){const{x:r,y:n,base:s,width:a,height:o}=e.getProps(["x","y","base","width","height"],t);let i,l,c,d,u;return e.horizontal?(u=o/2,i=Math.min(r,s),l=Math.max(r,s),c=n-u,d=n+u):(u=a/2,i=r-u,l=r+u,c=Math.min(n,s),d=Math.max(n,s)),{left:i,top:c,right:l,bottom:d}}function Hp(e,t,r,n){return e?0:Lu(t,r,n)}function Wp(e){const t=Up(e),r=t.right-t.left,n=t.bottom-t.top,s=function(e,t,r){const n=e.options.borderWidth,s=e.borderSkipped,a=zh(n);return{t:Hp(s.top,a.top,0,r),r:Hp(s.right,a.right,0,t),b:Hp(s.bottom,a.bottom,0,r),l:Hp(s.left,a.left,0,t)}}(e,r/2,n/2),a=function(e,t,r){const{enableBorderRadius:n}=e.getProps(["enableBorderRadius"]),s=e.options.borderRadius,a=Ph(s),o=Math.min(t,r),i=e.borderSkipped,l=n||Vd(s);return{topLeft:Hp(!l||i.top||i.left,a.topLeft,0,o),topRight:Hp(!l||i.top||i.right,a.topRight,0,o),bottomLeft:Hp(!l||i.bottom||i.left,a.bottomLeft,0,o),bottomRight:Hp(!l||i.bottom||i.right,a.bottomRight,0,o)}}(e,r/2,n/2);return{outer:{x:t.left,y:t.top,w:r,h:n,radius:a},inner:{x:t.left+s.l,y:t.top+s.t,w:r-s.l-s.r,h:n-s.t-s.b,radius:{topLeft:Math.max(0,a.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,a.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,a.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,a.bottomRight-Math.max(s.b,s.r))}}}}function Qp(e,t,r,n){const s=null===t,a=null===r,o=e&&!(s&&a)&&Up(e,n);return o&&(s||Mu(t,o.left,o.right))&&(a||Mu(r,o.top,o.bottom))}function Vp(e,t){e.rect(t.x,t.y,t.w,t.h)}function Gp(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=e.x!==r.x?-t:0,s=e.y!==r.y?-t:0,a=(e.x+e.w!==r.x+r.w?t:0)-n,o=(e.y+e.h!==r.y+r.h?t:0)-s;return{x:e.x+n,y:e.y+s,w:e.w+a,h:e.h+o,radius:e.radius}}class Kp extends Df{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:r,backgroundColor:n}}=this,{inner:s,outer:a}=Wp(this),o=(i=a.radius).topLeft||i.topRight||i.bottomLeft||i.bottomRight?_h:Vp;var i;e.save(),a.w===s.w&&a.h===s.h||(e.beginPath(),o(e,Gp(a,t,s)),e.clip(),o(e,Gp(s,-t,a)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),o(e,Gp(s,t)),e.fillStyle=n,e.fill(),e.restore()}inRange(e,t,r){return Qp(this,e,t,r)}inXRange(e,t){return Qp(this,e,null,t)}inYRange(e,t){return Qp(this,null,e,t)}getCenterPoint(e){const{x:t,y:r,base:n,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(t+n)/2:t,y:s?r:(r+n)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}const Yp=(e,t)=>{let{boxHeight:r=t,boxWidth:n=t}=e;return e.usePointStyle&&(r=Math.min(r,t),n=e.pointStyleWidth||Math.min(n,t)),{boxWidth:n,boxHeight:r,itemHeight:Math.max(t,r)}};class Zp extends Df{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,r){this.maxWidth=e,this.maxHeight=t,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=Jd(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter((t=>e.filter(t,this.chart.data)))),e.sort&&(t=t.sort(((t,r)=>e.sort(t,r,this.chart.data)))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const r=e.labels,n=Lh(r.font),s=n.size,a=this._computeTitleHeight(),{boxWidth:o,itemHeight:i}=Yp(r,s);let l,c;t.font=n.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(a,s,o,i)+10):(c=this.maxHeight,l=this._fitCols(a,n,o,i)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,t,r,n){const{ctx:s,maxWidth:a,options:{labels:{padding:o}}}=this,i=this.legendHitBoxes=[],l=this.lineWidths=[0],c=n+o;let d=e;s.textAlign="left",s.textBaseline="middle";let u=-1,h=-c;return this.legendItems.forEach(((e,m)=>{const f=r+t/2+s.measureText(e.text).width;(0===m||l[l.length-1]+f+2*o>a)&&(d+=c,l[l.length-(m>0?0:1)]=0,h+=c,u++),i[m]={left:0,top:h,row:u,width:f,height:n},l[l.length-1]+=f+o})),d}_fitCols(e,t,r,n){const{ctx:s,maxHeight:a,options:{labels:{padding:o}}}=this,i=this.legendHitBoxes=[],l=this.columnSizes=[],c=a-e;let d=o,u=0,h=0,m=0,f=0;return this.legendItems.forEach(((e,a)=>{const{itemWidth:p,itemHeight:g}=function(e,t,r,n,s){const a=function(e,t,r,n){let s=e.text;s&&"string"!==typeof s&&(s=s.reduce(((e,t)=>e.length>t.length?e:t)));return t+r.size/2+n.measureText(s).width}(n,e,t,r),o=function(e,t,r){let n=e;"string"!==typeof t.text&&(n=Jp(t,r));return n}(s,n,t.lineHeight);return{itemWidth:a,itemHeight:o}}(r,t,s,e,n);a>0&&h+g+2*o>c&&(d+=u+o,l.push({width:u,height:h}),m+=u+o,f++,u=h=0),i[a]={left:m,top:h,col:f,width:p,height:g},u=Math.max(u,p),h+=g+o})),d+=u,l.push({width:u,height:h}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:r,labels:{padding:n},rtl:s}}=this,a=ym(s,this.left,this.width);if(this.isHorizontal()){let s=0,o=Qu(r,this.left+n,this.right-this.lineWidths[s]);for(const i of t)s!==i.row&&(s=i.row,o=Qu(r,this.left+n,this.right-this.lineWidths[s])),i.top+=this.top+e+n,i.left=a.leftForLtr(a.x(o),i.width),o+=i.width+n}else{let s=0,o=Qu(r,this.top+e+n,this.bottom-this.columnSizes[s].height);for(const i of t)i.col!==s&&(s=i.col,o=Qu(r,this.top+e+n,this.bottom-this.columnSizes[s].height)),i.top=o,i.left+=this.left+n,i.left=a.leftForLtr(a.x(i.left),i.width),o+=i.height+n}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;vh(e,this),this._draw(),wh(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:r,ctx:n}=this,{align:s,labels:a}=e,o=mh.color,i=ym(e.rtl,this.left,this.width),l=Lh(a.font),{padding:c}=a,d=l.size,u=d/2;let h;this.drawTitle(),n.textAlign=i.textAlign("left"),n.textBaseline="middle",n.lineWidth=.5,n.font=l.string;const{boxWidth:m,boxHeight:f,itemHeight:p}=Yp(a,d),g=this.isHorizontal(),x=this._computeTitleHeight();h=g?{x:Qu(s,this.left+c,this.right-r[0]),y:this.top+c+x,line:0}:{x:this.left+c,y:Qu(s,this.top+x+c,this.bottom-t[0].height),line:0},vm(this.ctx,e.textDirection);const b=p+c;this.legendItems.forEach(((y,v)=>{n.strokeStyle=y.fontColor,n.fillStyle=y.fontColor;const w=n.measureText(y.text).width,j=i.textAlign(y.textAlign||(y.textAlign=a.textAlign)),N=m+u+w;let k=h.x,S=h.y;i.setWidth(this.width),g?v>0&&k+N+c>this.right&&(S=h.y+=b,h.line++,k=h.x=Qu(s,this.left+c,this.right-r[h.line])):v>0&&S+b>this.bottom&&(k=h.x=k+t[h.line].width+c,h.line++,S=h.y=Qu(s,this.top+x+c,this.bottom-t[h.line].height));if(function(e,t,r){if(isNaN(m)||m<=0||isNaN(f)||f<0)return;n.save();const s=Yd(r.lineWidth,1);if(n.fillStyle=Yd(r.fillStyle,o),n.lineCap=Yd(r.lineCap,"butt"),n.lineDashOffset=Yd(r.lineDashOffset,0),n.lineJoin=Yd(r.lineJoin,"miter"),n.lineWidth=s,n.strokeStyle=Yd(r.strokeStyle,o),n.setLineDash(Yd(r.lineDash,[])),a.usePointStyle){const o={radius:f*Math.SQRT2/2,pointStyle:r.pointStyle,rotation:r.rotation,borderWidth:s},l=i.xPlus(e,m/2);bh(n,o,l,t+u,a.pointStyleWidth&&m)}else{const a=t+Math.max((d-f)/2,0),o=i.leftForLtr(e,m),l=Ph(r.borderRadius);n.beginPath(),Object.values(l).some((e=>0!==e))?_h(n,{x:o,y:a,w:m,h:f,radius:l}):n.rect(o,a,m,f),n.fill(),0!==s&&n.stroke()}n.restore()}(i.x(k),S,y),k=((e,t,r,n)=>e===(n?"left":"right")?r:"center"===e?(t+r)/2:t)(j,k+m+u,g?k+N:this.right,e.rtl),function(e,t,r){Ch(n,r.text,e,t+p/2,l,{strikethrough:r.hidden,textAlign:i.textAlign(r.textAlign)})}(i.x(k),S,y),g)h.x+=N+c;else if("string"!==typeof y.text){const e=l.lineHeight;h.y+=Jp(y,e)+c}else h.y+=b})),wm(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,r=Lh(t.font),n=Ih(t.padding);if(!t.display)return;const s=ym(e.rtl,this.left,this.width),a=this.ctx,o=t.position,i=r.size/2,l=n.top+i;let c,d=this.left,u=this.width;if(this.isHorizontal())u=Math.max(...this.lineWidths),c=this.top+l,d=Qu(e.align,d,this.right-u);else{const t=this.columnSizes.reduce(((e,t)=>Math.max(e,t.height)),0);c=l+Qu(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const h=Qu(o,d,d+u);a.textAlign=s.textAlign(Wu(o)),a.textBaseline="middle",a.strokeStyle=t.color,a.fillStyle=t.color,a.font=r.string,Ch(a,t.text,h,c,r)}_computeTitleHeight(){const e=this.options.title,t=Lh(e.font),r=Ih(e.padding);return e.display?t.lineHeight+r.height:0}_getLegendItemAt(e,t){let r,n,s;if(Mu(e,this.left,this.right)&&Mu(t,this.top,this.bottom))for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(n=s[r],Mu(e,n.left,n.left+n.width)&&Mu(t,n.top,n.top+n.height))return this.legendItems[r];return null}handleEvent(e){const t=this.options;if(!function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t))return;const r=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const n=this._hoveredItem,s=((e,t)=>null!==e&&null!==t&&e.datasetIndex===t.datasetIndex&&e.index===t.index)(n,r);n&&!s&&Jd(t.onLeave,[e,n,this],this),this._hoveredItem=r,r&&!s&&Jd(t.onHover,[e,r,this],this)}else r&&Jd(t.onClick,[e,r,this],this)}}function Jp(e,t){return t*(e.text?e.text.length:0)}var Xp={id:"legend",_element:Zp,start(e,t,r){const n=e.legend=new Zp({ctx:e.ctx,options:r,chart:e});wf.configure(e,n,r),wf.addBox(e,n)},stop(e){wf.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,r){const n=e.legend;wf.configure(e,n,r),n.options=r},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,r){const n=t.datasetIndex,s=r.chart;s.isDatasetVisible(n)?(s.hide(n),t.hidden=!0):(s.show(n),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:r,pointStyle:n,textAlign:s,color:a,useBorderRadius:o,borderRadius:i}}=e.legend.options;return e._getSortedDatasetMetas().map((e=>{const l=e.controller.getStyle(r?0:void 0),c=Ih(l.borderWidth);return{text:t[e.index].label,fillStyle:l.backgroundColor,fontColor:a,hidden:!e.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:n||l.pointStyle,rotation:l.rotation,textAlign:s||l.textAlign,borderRadius:o&&(i||l.borderRadius),datasetIndex:e.index}}),this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class eg extends Df{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const r=this.options;if(this.left=0,this.top=0,!r.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const n=Qd(r.text)?r.text.length:1;this._padding=Ih(r.padding);const s=n*Lh(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:r,bottom:n,right:s,options:a}=this,o=a.align;let i,l,c,d=0;return this.isHorizontal()?(l=Qu(o,r,s),c=t+e,i=s-r):("left"===a.position?(l=r+e,c=Qu(o,n,t),d=-.5*mu):(l=s-e,c=Qu(o,t,n),d=.5*mu),i=n-t),{titleX:l,titleY:c,maxWidth:i,rotation:d}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const r=Lh(t.font),n=r.lineHeight/2+this._padding.top,{titleX:s,titleY:a,maxWidth:o,rotation:i}=this._drawArgs(n);Ch(e,t.text,0,0,r,{color:t.color,maxWidth:o,rotation:i,textAlign:Wu(t.align),textBaseline:"middle",translation:[s,a]})}}var tg={id:"title",_element:eg,start(e,t,r){!function(e,t){const r=new eg({ctx:e.ctx,options:t,chart:e});wf.configure(e,r,t),wf.addBox(e,r),e.titleBlock=r}(e,r)},stop(e){const t=e.titleBlock;wf.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,r){const n=e.titleBlock;wf.configure(e,n,r),n.options=r},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};new WeakMap;const rg={average(e){if(!e.length)return!1;let t,r,n=new Set,s=0,a=0;for(t=0,r=e.length;t<r;++t){const r=e[t].element;if(r&&r.hasValue()){const e=r.tooltipPosition();n.add(e.x),s+=e.y,++a}}if(0===a||0===n.size)return!1;const o=[...n].reduce(((e,t)=>e+t))/n.size;return{x:o,y:s/a}},nearest(e,t){if(!e.length)return!1;let r,n,s,a=t.x,o=t.y,i=Number.POSITIVE_INFINITY;for(r=0,n=e.length;r<n;++r){const n=e[r].element;if(n&&n.hasValue()){const e=Tu(t,n.getCenterPoint());e<i&&(i=e,s=n)}}if(s){const e=s.tooltipPosition();a=e.x,o=e.y}return{x:a,y:o}}};function ng(e,t){return t&&(Qd(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function sg(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function ag(e,t){const{element:r,datasetIndex:n,index:s}=t,a=e.getDatasetMeta(n).controller,{label:o,value:i}=a.getLabelAndValue(s);return{chart:e,label:o,parsed:a.getParsed(s),raw:e.data.datasets[n].data[s],formattedValue:i,dataset:a.getDataset(),dataIndex:s,datasetIndex:n,element:r}}function og(e,t){const r=e.chart.ctx,{body:n,footer:s,title:a}=e,{boxWidth:o,boxHeight:i}=t,l=Lh(t.bodyFont),c=Lh(t.titleFont),d=Lh(t.footerFont),u=a.length,h=s.length,m=n.length,f=Ih(t.padding);let p=f.height,g=0,x=n.reduce(((e,t)=>e+t.before.length+t.lines.length+t.after.length),0);if(x+=e.beforeBody.length+e.afterBody.length,u&&(p+=u*c.lineHeight+(u-1)*t.titleSpacing+t.titleMarginBottom),x){p+=m*(t.displayColors?Math.max(i,l.lineHeight):l.lineHeight)+(x-m)*l.lineHeight+(x-1)*t.bodySpacing}h&&(p+=t.footerMarginTop+h*d.lineHeight+(h-1)*t.footerSpacing);let b=0;const y=function(e){g=Math.max(g,r.measureText(e).width+b)};return r.save(),r.font=c.string,Xd(e.title,y),r.font=l.string,Xd(e.beforeBody.concat(e.afterBody),y),b=t.displayColors?o+2+t.boxPadding:0,Xd(n,(e=>{Xd(e.before,y),Xd(e.lines,y),Xd(e.after,y)})),b=0,r.font=d.string,Xd(e.footer,y),r.restore(),g+=f.width,{width:g,height:p}}function ig(e,t,r,n){const{x:s,width:a}=r,{width:o,chartArea:{left:i,right:l}}=e;let c="center";return"center"===n?c=s<=(i+l)/2?"left":"right":s<=a/2?c="left":s>=o-a/2&&(c="right"),function(e,t,r,n){const{x:s,width:a}=n,o=r.caretSize+r.caretPadding;return"left"===e&&s+a+o>t.width||"right"===e&&s-a-o<0||void 0}(c,e,t,r)&&(c="center"),c}function lg(e,t,r){const n=r.yAlign||t.yAlign||function(e,t){const{y:r,height:n}=t;return r<n/2?"top":r>e.height-n/2?"bottom":"center"}(e,r);return{xAlign:r.xAlign||t.xAlign||ig(e,t,r,n),yAlign:n}}function cg(e,t,r,n){const{caretSize:s,caretPadding:a,cornerRadius:o}=e,{xAlign:i,yAlign:l}=r,c=s+a,{topLeft:d,topRight:u,bottomLeft:h,bottomRight:m}=Ph(o);let f=function(e,t){let{x:r,width:n}=e;return"right"===t?r-=n:"center"===t&&(r-=n/2),r}(t,i);const p=function(e,t,r){let{y:n,height:s}=e;return"top"===t?n+=r:n-="bottom"===t?s+r:s/2,n}(t,l,c);return"center"===l?"left"===i?f+=c:"right"===i&&(f-=c):"left"===i?f-=Math.max(d,h)+s:"right"===i&&(f+=Math.max(u,m)+s),{x:Lu(f,0,n.width-t.width),y:Lu(p,0,n.height-t.height)}}function dg(e,t,r){const n=Ih(r.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-n.right:e.x+n.left}function ug(e){return ng([],sg(e))}function hg(e,t){const r=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return r?e.override(r):e}const mg={beforeTitle:Ud,title(e){if(e.length>0){const t=e[0],r=t.chart.data.labels,n=r?r.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(n>0&&t.dataIndex<n)return r[t.dataIndex]}return""},afterTitle:Ud,beforeBody:Ud,beforeLabel:Ud,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const r=e.formattedValue;return Wd(r)||(t+=r),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Ud,afterBody:Ud,beforeFooter:Ud,footer:Ud,afterFooter:Ud};function fg(e,t,r,n){const s=e[t].call(r,n);return"undefined"===typeof s?mg[t].call(r,n):s}class pg extends Df{static positioners=(()=>rg)();constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,r=this.options.setContext(this.getContext()),n=r.enabled&&t.options.animation&&r.animations,s=new Mm(this.chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,r=this._tooltipItems,qh(e,{tooltip:t,tooltipItems:r,type:"tooltip"})));var e,t,r}getTitle(e,t){const{callbacks:r}=t,n=fg(r,"beforeTitle",this,e),s=fg(r,"title",this,e),a=fg(r,"afterTitle",this,e);let o=[];return o=ng(o,sg(n)),o=ng(o,sg(s)),o=ng(o,sg(a)),o}getBeforeBody(e,t){return ug(fg(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:r}=t,n=[];return Xd(e,(e=>{const t={before:[],lines:[],after:[]},s=hg(r,e);ng(t.before,sg(fg(s,"beforeLabel",this,e))),ng(t.lines,fg(s,"label",this,e)),ng(t.after,sg(fg(s,"afterLabel",this,e))),n.push(t)})),n}getAfterBody(e,t){return ug(fg(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:r}=t,n=fg(r,"beforeFooter",this,e),s=fg(r,"footer",this,e),a=fg(r,"afterFooter",this,e);let o=[];return o=ng(o,sg(n)),o=ng(o,sg(s)),o=ng(o,sg(a)),o}_createItems(e){const t=this._active,r=this.chart.data,n=[],s=[],a=[];let o,i,l=[];for(o=0,i=t.length;o<i;++o)l.push(ag(this.chart,t[o]));return e.filter&&(l=l.filter(((t,n,s)=>e.filter(t,n,s,r)))),e.itemSort&&(l=l.sort(((t,n)=>e.itemSort(t,n,r)))),Xd(l,(t=>{const r=hg(e.callbacks,t);n.push(fg(r,"labelColor",this,t)),s.push(fg(r,"labelPointStyle",this,t)),a.push(fg(r,"labelTextColor",this,t))})),this.labelColors=n,this.labelPointStyles=s,this.labelTextColors=a,this.dataPoints=l,l}update(e,t){const r=this.options.setContext(this.getContext()),n=this._active;let s,a=[];if(n.length){const e=rg[r.position].call(this,n,this._eventPosition);a=this._createItems(r),this.title=this.getTitle(a,r),this.beforeBody=this.getBeforeBody(a,r),this.body=this.getBody(a,r),this.afterBody=this.getAfterBody(a,r),this.footer=this.getFooter(a,r);const t=this._size=og(this,r),o=Object.assign({},e,t),i=lg(this.chart,r,o),l=cg(r,o,i,this.chart);this.xAlign=i.xAlign,this.yAlign=i.yAlign,s={opacity:1,x:l.x,y:l.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(s={opacity:0});this._tooltipItems=a,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,r,n){const s=this.getCaretPosition(e,r,n);t.lineTo(s.x1,s.y1),t.lineTo(s.x2,s.y2),t.lineTo(s.x3,s.y3)}getCaretPosition(e,t,r){const{xAlign:n,yAlign:s}=this,{caretSize:a,cornerRadius:o}=r,{topLeft:i,topRight:l,bottomLeft:c,bottomRight:d}=Ph(o),{x:u,y:h}=e,{width:m,height:f}=t;let p,g,x,b,y,v;return"center"===s?(y=h+f/2,"left"===n?(p=u,g=p-a,b=y+a,v=y-a):(p=u+m,g=p+a,b=y-a,v=y+a),x=p):(g="left"===n?u+Math.max(i,c)+a:"right"===n?u+m-Math.max(l,d)-a:this.caretX,"top"===s?(b=h,y=b-a,p=g-a,x=g+a):(b=h+f,y=b+a,p=g+a,x=g-a),v=b),{x1:p,x2:g,x3:x,y1:b,y2:y,y3:v}}drawTitle(e,t,r){const n=this.title,s=n.length;let a,o,i;if(s){const l=ym(r.rtl,this.x,this.width);for(e.x=dg(this,r.titleAlign,r),t.textAlign=l.textAlign(r.titleAlign),t.textBaseline="middle",a=Lh(r.titleFont),o=r.titleSpacing,t.fillStyle=r.titleColor,t.font=a.string,i=0;i<s;++i)t.fillText(n[i],l.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+o,i+1===s&&(e.y+=r.titleMarginBottom-o)}}_drawColorBox(e,t,r,n,s){const a=this.labelColors[r],o=this.labelPointStyles[r],{boxHeight:i,boxWidth:l}=s,c=Lh(s.bodyFont),d=dg(this,"left",s),u=n.x(d),h=i<c.lineHeight?(c.lineHeight-i)/2:0,m=t.y+h;if(s.usePointStyle){const t={radius:Math.min(l,i)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},r=n.leftForLtr(u,l)+l/2,c=m+i/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,xh(e,t,r,c),e.strokeStyle=a.borderColor,e.fillStyle=a.backgroundColor,xh(e,t,r,c)}else{e.lineWidth=Vd(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,e.strokeStyle=a.borderColor,e.setLineDash(a.borderDash||[]),e.lineDashOffset=a.borderDashOffset||0;const t=n.leftForLtr(u,l),r=n.leftForLtr(n.xPlus(u,1),l-2),o=Ph(a.borderRadius);Object.values(o).some((e=>0!==e))?(e.beginPath(),e.fillStyle=s.multiKeyBackground,_h(e,{x:t,y:m,w:l,h:i,radius:o}),e.fill(),e.stroke(),e.fillStyle=a.backgroundColor,e.beginPath(),_h(e,{x:r,y:m+1,w:l-2,h:i-2,radius:o}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(t,m,l,i),e.strokeRect(t,m,l,i),e.fillStyle=a.backgroundColor,e.fillRect(r,m+1,l-2,i-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,t,r){const{body:n}=this,{bodySpacing:s,bodyAlign:a,displayColors:o,boxHeight:i,boxWidth:l,boxPadding:c}=r,d=Lh(r.bodyFont);let u=d.lineHeight,h=0;const m=ym(r.rtl,this.x,this.width),f=function(r){t.fillText(r,m.x(e.x+h),e.y+u/2),e.y+=u+s},p=m.textAlign(a);let g,x,b,y,v,w,j;for(t.textAlign=a,t.textBaseline="middle",t.font=d.string,e.x=dg(this,p,r),t.fillStyle=r.bodyColor,Xd(this.beforeBody,f),h=o&&"right"!==p?"center"===a?l/2+c:l+2+c:0,y=0,w=n.length;y<w;++y){for(g=n[y],x=this.labelTextColors[y],t.fillStyle=x,Xd(g.before,f),b=g.lines,o&&b.length&&(this._drawColorBox(t,e,y,m,r),u=Math.max(d.lineHeight,i)),v=0,j=b.length;v<j;++v)f(b[v]),u=d.lineHeight;Xd(g.after,f)}h=0,u=d.lineHeight,Xd(this.afterBody,f),e.y-=s}drawFooter(e,t,r){const n=this.footer,s=n.length;let a,o;if(s){const i=ym(r.rtl,this.x,this.width);for(e.x=dg(this,r.footerAlign,r),e.y+=r.footerMarginTop,t.textAlign=i.textAlign(r.footerAlign),t.textBaseline="middle",a=Lh(r.footerFont),t.fillStyle=r.footerColor,t.font=a.string,o=0;o<s;++o)t.fillText(n[o],i.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+r.footerSpacing}}drawBackground(e,t,r,n){const{xAlign:s,yAlign:a}=this,{x:o,y:i}=e,{width:l,height:c}=r,{topLeft:d,topRight:u,bottomLeft:h,bottomRight:m}=Ph(n.cornerRadius);t.fillStyle=n.backgroundColor,t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.beginPath(),t.moveTo(o+d,i),"top"===a&&this.drawCaret(e,t,r,n),t.lineTo(o+l-u,i),t.quadraticCurveTo(o+l,i,o+l,i+u),"center"===a&&"right"===s&&this.drawCaret(e,t,r,n),t.lineTo(o+l,i+c-m),t.quadraticCurveTo(o+l,i+c,o+l-m,i+c),"bottom"===a&&this.drawCaret(e,t,r,n),t.lineTo(o+h,i+c),t.quadraticCurveTo(o,i+c,o,i+c-h),"center"===a&&"left"===s&&this.drawCaret(e,t,r,n),t.lineTo(o,i+d),t.quadraticCurveTo(o,i,o+d,i),t.closePath(),t.fill(),n.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,r=this.$animations,n=r&&r.x,s=r&&r.y;if(n||s){const r=rg[e.position].call(this,this._active,this._eventPosition);if(!r)return;const a=this._size=og(this,e),o=Object.assign({},r,this._size),i=lg(t,e,o),l=cg(e,o,i,t);n._to===l.x&&s._to===l.y||(this.xAlign=i.xAlign,this.yAlign=i.yAlign,this.width=a.width,this.height=a.height,this.caretX=r.x,this.caretY=r.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(t);const n={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const a=Ih(t.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&o&&(e.save(),e.globalAlpha=r,this.drawBackground(s,e,n,t),vm(e,t.textDirection),s.y+=a.top,this.drawTitle(s,e,t),this.drawBody(s,e,t),this.drawFooter(s,e,t),wm(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const r=this._active,n=e.map((e=>{let{datasetIndex:t,index:r}=e;const n=this.chart.getDatasetMeta(t);if(!n)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:n.data[r],index:r}})),s=!eu(r,n),a=this._positionChanged(n,t);(s||a)&&(this._active=n,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const n=this.options,s=this._active||[],a=this._getActiveElements(e,s,t,r),o=this._positionChanged(a,e),i=t||!eu(a,s)||o;return i&&(this._active=a,(n.enabled||n.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),i}_getActiveElements(e,t,r,n){const s=this.options;if("mouseout"===e.type)return[];if(!n)return t.filter((e=>this.chart.data.datasets[e.datasetIndex]&&void 0!==this.chart.getDatasetMeta(e.datasetIndex).controller.getParsed(e.index)));const a=this.chart.getElementsAtEventForMode(e,s.mode,s,r);return s.reverse&&a.reverse(),a}_positionChanged(e,t){const{caretX:r,caretY:n,options:s}=this,a=rg[s.position].call(this,e,t);return!1!==a&&(r!==a.x||n!==a.y)}}var gg={id:"tooltip",_element:pg,positioners:rg,afterInit(e,t,r){r&&(e.tooltip=new pg({chart:e,options:r}))},beforeUpdate(e,t,r){e.tooltip&&e.tooltip.initialize(r)},reset(e,t,r){e.tooltip&&e.tooltip.initialize(r)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const r={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",{...r,cancelable:!0}))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",r)}},afterEvent(e,t){if(e.tooltip){const r=t.replay;e.tooltip.handleEvent(t.event,r,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:mg},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function xg(e,t,r,n){const s=e.indexOf(t);if(-1===s)return((e,t,r,n)=>("string"===typeof t?(r=e.push(t)-1,n.unshift({index:r,label:t})):isNaN(t)&&(r=null),r))(e,t,r,n);return s!==e.lastIndexOf(t)?r:s}function bg(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class yg extends Kf{static id="category";static defaults=(()=>({ticks:{callback:bg}}))();constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:r,label:n}of t)e[r]===n&&e.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(Wd(e))return null;const r=this.getLabels();return((e,t)=>null===e?null:Lu(Math.round(e),0,t))(t=isFinite(t)&&r[t]===e?t:xg(r,e,Yd(t,e),this._addedLabels),r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:r,max:n}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(r=0),t||(n=this.getLabels().length-1)),this.min=r,this.max=n}buildTicks(){const e=this.min,t=this.max,r=this.options.offset,n=[];let s=this.getLabels();s=0===e&&t===s.length-1?s:s.slice(e,t+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let a=e;a<=t;a++)n.push({value:a});return n}getLabelForValue(e){return bg.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!==typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function vg(e,t){const r=[],{bounds:n,step:s,min:a,max:o,precision:i,count:l,maxTicks:c,maxDigits:d,includeBounds:u}=e,h=s||1,m=c-1,{min:f,max:p}=t,g=!Wd(a),x=!Wd(o),b=!Wd(l),y=(p-f)/(d+1);let v,w,j,N,k=ku((p-f)/m/h)*h;if(k<1e-14&&!g&&!x)return[{value:f},{value:p}];N=Math.ceil(p/k)-Math.floor(f/k),N>m&&(k=ku(N*k/m/h)*h),Wd(i)||(v=Math.pow(10,i),k=Math.ceil(k*v)/v),"ticks"===n?(w=Math.floor(f/k)*k,j=Math.ceil(p/k)*k):(w=f,j=p),g&&x&&s&&function(e,t){const r=Math.round(e);return r-t<=e&&r+t>=e}((o-a)/s,k/1e3)?(N=Math.round(Math.min((o-a)/k,c)),k=(o-a)/N,w=a,j=o):b?(w=g?a:w,j=x?o:j,N=l-1,k=(j-w)/N):(N=(j-w)/k,N=Nu(N,Math.round(N),k/1e3)?Math.round(N):Math.ceil(N));const S=Math.max(Au(k),Au(w));v=Math.pow(10,Wd(i)?S:i),w=Math.round(w*v)/v,j=Math.round(j*v)/v;let C=0;for(g&&(u&&w!==a?(r.push({value:a}),w<a&&C++,Nu(Math.round((w+C*k)*v)/v,a,wg(a,y,e))&&C++):w<a&&C++);C<N;++C){const e=Math.round((w+C*k)*v)/v;if(x&&e>o)break;r.push({value:e})}return x&&u&&j!==o?r.length&&Nu(r[r.length-1].value,o,wg(o,y,e))?r[r.length-1].value=o:r.push({value:o}):x&&j!==o||r.push({value:j}),r}function wg(e,t,r){let{horizontal:n,minRotation:s}=r;const a=_u(s),o=(n?Math.sin(a):Math.cos(a))||.001,i=.75*t*(""+e).length;return Math.min(t/o,i)}class jg extends Kf{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return Wd(e)||("number"===typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:r}=this.getUserBounds();let{min:n,max:s}=this;const a=e=>n=t?n:e,o=e=>s=r?s:e;if(e){const e=ju(n),t=ju(s);e<0&&t<0?o(0):e>0&&t>0&&a(0)}if(n===s){let t=0===s?1:Math.abs(.05*s);o(s+t),e||a(n-t)}this.min=n,this.max=s}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:r,stepSize:n}=e;return n?(t=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,t>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${t} ticks. Limiting to 1000.`),t=1e3)):(t=this.computeTickLimit(),r=r||11),r&&(t=Math.min(r,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const n=vg({maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&Cu(n,this,"value"),e.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}configure(){const e=this.ticks;let t=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const n=(r-t)/Math.max(e.length-1,1)/2;t-=n,r+=n}this._startValue=t,this._endValue=r,this._valueRange=r-t}getLabelForValue(e){return ah(e,this.chart.options.locale,this.options.ticks.format)}}class Ng extends jg{static id="linear";static defaults=(()=>({ticks:{callback:ih.formatters.numeric}}))();determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Gd(e)?e:0,this.max=Gd(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,r=_u(this.options.ticks.minRotation),n=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,s.lineHeight/n))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}ih.formatters.logarithmic;ih.formatters.numeric;const kg={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Sg=Object.keys(kg);function Cg(e,t){return e-t}function _g(e,t){if(Wd(t))return null;const r=e._adapter,{parser:n,round:s,isoWeekday:a}=e._parseOpts;let o=t;return"function"===typeof n&&n(o),Gd(o)||("string"===typeof n?r.parse(o,n):r.parse(o)),null===o?null:(s&&("week"!==s||!Su(a)&&!0!==a?r.startOf(o,s):r.startOf(o,"isoWeek",a)),+o)}function Eg(e,t,r,n){const s=Sg.length;for(let a=Sg.indexOf(e);a<s-1;++a){const e=kg[Sg[a]],s=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((r-t)/(s*e.size))<=n)return Sg[a]}return Sg[s-1]}function Ag(e,t,r){if(r){if(r.length){const{lo:n,hi:s}=qu(r,t);e[r[n]>=t?r[n]:r[s]]=!0}}else e[t]=!0}function Og(e,t,r){const n=[],s={},a=t.length;let o,i;for(0;o<a;++o)t[o],s[i]=o,n.push({value:i,major:!1});return 0!==a&&r?function(e,t,r,n){const s=e._adapter,a=+s.startOf(t[0].value,n),o=t[t.length-1].value;let i,l;for(a;i<=o;+s.add(i,1,n))r[i],l>=0&&(t[l].major=!0);return t}(e,n,s,r):n}class Tg extends Kf{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=e.time||(e.time={}),n=this._adapter=new ef(e.adapters.date);n.init(t),au(r.displayFormats,n.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:_g(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,r=e.time.unit||"day";let{min:n,max:s,minDefined:a,maxDefined:o}=this.getUserBounds();function i(e){a||isNaN(e.min)||Math.min(n,e.min),o||isNaN(e.max)||Math.max(s,e.max)}a&&o||(i(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||i(this.getMinMax(!1))),Gd(n)&&!isNaN(n)?n:+t.startOf(Date.now(),r),Gd(s)&&!isNaN(s)?s:+t.endOf(Date.now(),r)+1,this.min=Math.min(n,s-1),this.max=Math.max(n+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(e[0],e[e.length-1]),{min:t,max:r}}buildTicks(){const e=this.options,t=e.time,r=e.ticks,n="labels"===r.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&n.length&&(this.min=this._userMin||n[0],this.max=this._userMax||n[n.length-1]);const s=this.min,a=function(e,t,r){let n=0,s=e.length;for(;n<s&&e[n]<t;)0;for(;s>n&&e[s-1]>r;)0;return n>0||s<e.length?e.slice(n,s):e}(n,s,this.max);return this._unit=t.unit||(r.autoSkip?Eg(t.minUnit,this.min,this.max,this._getLabelCapacity(s)):function(e,t,r,n,s){for(let a=Sg.length-1;a>=Sg.indexOf(r);a--){const r=Sg[a];if(kg[r].common&&e._adapter.diff(s,n,r)>=t-1)return r}return Sg[r?Sg.indexOf(r):0]}(this,a.length,t.minUnit,this.min,this.max)),this._majorUnit=r.major.enabled&&"year"!==this._unit?function(e){for(let t=Sg.indexOf(e)+1,r=Sg.length;t<r;++t)if(kg[Sg[t]].common)return Sg[t]}(this._unit):void 0,this.initOffsets(n),e.reverse&&a.reverse(),Og(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map((e=>+e.value)))}initOffsets(){let e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=0,s=0;this.options.offset&&r.length&&(this.getDecimalForValue(r[0]),1===r.length?1-e:(this.getDecimalForValue(r[1])-e)/2,this.getDecimalForValue(r[r.length-1]),1===r.length?t:(t-this.getDecimalForValue(r[r.length-2]))/2);const a=r.length<3?.5:.25;Lu(n,0,a),Lu(s,0,a),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){const e=this._adapter,t=this.min,r=this.max,n=this.options,s=n.time,a=s.unit||Eg(s.minUnit,t,r,this._getLabelCapacity(t)),o=Yd(n.ticks.stepSize,1),i="week"===a&&s.isoWeekday,l=Su(i)||!0===i,c={};let d,u,h=t;if(l&&+e.startOf(h,"isoWeek",i),+e.startOf(h,l?"day":a),e.diff(r,t,a)>1e5*o)throw new Error(t+" and "+r+" are too far apart with stepSize of "+o+" "+a);const m="data"===n.ticks.source&&this.getDataTimestamps();for(0;d<r;+e.add(d,o,a),u++)Ag(c,d,m);return d!==r&&"ticks"!==n.bounds&&1!==u||Ag(c,d,m),Object.keys(c).sort(Cg).map((e=>+e))}getLabelForValue(e){const t=this._adapter,r=this.options.time;return r.tooltipFormat?t.format(e,r.tooltipFormat):t.format(e,r.displayFormats.datetime)}format(e,t){const r=this.options.time.displayFormats,n=this._unit,s=t||r[n];return this._adapter.format(e,s)}_tickFormatFunction(e,t,r,n){const s=this.options,a=s.ticks.callback;if(a)return Jd(a,[e,t,r],this);const o=s.time.displayFormats,i=this._unit,l=this._majorUnit,c=i&&o[i],d=l&&o[l],u=r[t],h=l&&d&&u&&u.major;return this._adapter.format(e,n||(h?d:c))}generateTickLabels(e){let t,r,n;for(e.length;t<r;++t)e[t],n.label=this._tickFormatFunction(n.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+r)*t.factor)}getValueForPixel(e){const t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,r=this.ctx.measureText(e).width,n=_u(this.isHorizontal()?t.maxRotation:t.minRotation),s=Math.cos(n),a=Math.sin(n),o=this._resolveTickFontOptions(0).size;return{w:r*s+o*a,h:r*a+o*s}}_getLabelCapacity(e){const t=this.options.time,r=t.displayFormats,n=r[t.unit]||r.millisecond,s=this._tickFormatFunction(e,0,Og(this,[e],this._majorUnit),n),a=this._getLabelSize(s),o=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return o>0?o:1}getDataTimestamps(){let e,t,r=this._cache.data||[];if(r.length)return r;const n=this.getMatchingVisibleMetas();if(this._normalized&&n.length)return this._cache.data=n[0].controller.getAllParsedValues(this);for(n.length;e<t;++e)r.concat(n[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(r)}getLabelTimestamps(){const e=this._cache.labels||[];let t,r;if(e.length)return e;const n=this.getLabels();for(n.length;t<r;++t)e.push(_g(this,n[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return $u(e.sort(Cg))}}const zg="label";function Pg(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function Ig(e,t){e.labels=t}function Lg(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:zg;const n=[];e.datasets=t.map((t=>{const s=e.datasets.find((e=>e[r]===t[r]));return s&&t.data&&!n.includes(s)?(n.push(s),Object.assign(s,t),s):{...t}}))}function Mg(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:zg;const r={labels:[],datasets:[]};return Ig(r,e.labels),Lg(r,e.datasets,t),r}function qg(e,t){const{height:r=150,width:s=300,redraw:a=!1,datasetIdKey:o,type:i,data:l,options:c,plugins:d=[],fallbackContent:u,updateMode:h,...m}=e,f=(0,n.useRef)(null),p=(0,n.useRef)(null),g=()=>{f.current&&(p.current=new Sp(f.current,{type:i,data:Mg(l,o),options:c&&{...c},plugins:d}),Pg(t,p.current))},x=()=>{Pg(t,null),p.current&&(p.current.destroy(),p.current=null)};return(0,n.useEffect)((()=>{!a&&p.current&&c&&function(e,t){const r=e.options;r&&t&&Object.assign(r,t)}(p.current,c)}),[a,c]),(0,n.useEffect)((()=>{!a&&p.current&&Ig(p.current.config.data,l.labels)}),[a,l.labels]),(0,n.useEffect)((()=>{!a&&p.current&&l.datasets&&Lg(p.current.config.data,l.datasets,o)}),[a,l.datasets]),(0,n.useEffect)((()=>{p.current&&(a?(x(),setTimeout(g)):p.current.update(h))}),[a,c,l.labels,l.datasets,h]),(0,n.useEffect)((()=>{p.current&&(x(),setTimeout(g))}),[i]),(0,n.useEffect)((()=>(g(),()=>x())),[]),n.createElement("canvas",{ref:f,role:"img",height:r,width:s,...m},u)}const Rg=(0,n.forwardRef)(qg);function Dg(e,t){return Sp.register(t),(0,n.forwardRef)(((t,r)=>n.createElement(Rg,{...t,ref:r,type:e})))}const Fg=Dg("line",Ym),Bg=Dg("pie",Zm);Sp.register(Tp,yg,Ng,Kp,tg,gg,Xp);const $g=e=>e?e.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase())).join(" "):"",Ug=e=>{let{classroomId:t}=e;const{currentUser:r,token:s}=is(),[a,o]=(0,n.useState)([]),[i,l]=(0,n.useState)(null),[c,d]=(0,n.useState)(!0),[u,h]=(0,n.useState)(!0),[m,f]=(0,n.useState)(!1),[p,g]=(0,n.useState)(!1),[x,b]=(0,n.useState)(""),[y,v]=(0,n.useState)(""),[w,j]=(0,n.useState)("reports"),[N,k]=(0,n.useState)(null),[S,C]=(0,n.useState)(null),[_,E]=(0,n.useState)(!1),[A,O]=(0,n.useState)(null),[T,z]=(0,n.useState)(null),[P,I]=(0,n.useState)(!0),[L,M]=(0,n.useState)(null),[q,R]=(0,n.useState)("desc"),[D,F]=(0,n.useState)(!1),[B,$]=(0,n.useState)("overall"),U=(0,n.useRef)(null),[H,W]=(0,n.useState)(!1),Q=(0,n.useRef)(null),[V,G]=(0,n.useState)(!1);(0,n.useEffect)((()=>{if(null!==A&&void 0!==A&&A.quizzes&&null!==T&&void 0!==T&&T.attempts&&null!==T&&void 0!==T&&T.students){const e=((e,t)=>{if(null===e||void 0===e||!e.quizzes||null===t||void 0===t||!t.attempts||null===t||void 0===t||!t.students)return null;const{quizzes:r}=e,{attempts:n,students:s}=t,a={};s.forEach((e=>{a[e.id]={}})),n.forEach((e=>{const t=e.studentId||e.user_id,r=e.quizId||e.quiz_id,n=e.score||0;a[t][r]||(a[t][r]={scores:[],average:0}),a[t][r].scores.push(n)})),Object.keys(a).forEach((e=>{Object.keys(a[e]).forEach((t=>{const r=a[e][t].scores,n=r.reduce(((e,t)=>e+t),0)/r.length;a[e][t].average=n}))}));let o=0;s.forEach((e=>{const t=a[e.id]||{};Object.keys(t).length===r.length&&r.every((e=>{const r=t[e.id];return!!r&&r.average/e.overallScore*100>=e.passingScore/e.overallScore*100}))&&o++}));const i=s.length>0?o/s.length*100:0,l=r.map((e=>{let t=0,r=0,n=0,o=[],i=[];s.forEach((s=>{var l;const c=null===(l=a[s.id])||void 0===l?void 0:l[e.id];if(c){t++;const a=c.average/(e.overallScore||100)*100;o.push(a),i.push({studentId:s.id,score:a}),n+=a,a>=e.passingScore/(e.overallScore||100)*100&&r++}}));const l=t>0?r/t*100:0,c=t>0?n/t:0;return{quizId:e.id,quizName:e.quizName,passRate:parseFloat(l.toFixed(2)),averageScore:parseFloat(c.toFixed(2)),totalStudents:t,passedStudents:r,studentAverages:o,studentScores:i,passingScore:e.passingScore,overallScore:e.overallScore,topic:e.topic||`Quiz ${e.id}`}})),c={};l.forEach((e=>{var t;const r=e.topic||`Quiz ${e.id}`;c[r]||(c[r]={totalQuizzes:0,totalPassRate:0,totalStudents:0,quizzes:[],studentPerformance:{}}),c[r].quizzes.push({quizName:e.quizName,averageScore:e.averageScore,passRate:e.passRate,totalStudents:e.totalStudents,passedStudents:e.passedStudents}),c[r].totalQuizzes++,c[r].totalPassRate+=e.passRate||0,c[r].totalStudents+=e.totalStudents||0,null===(t=e.studentScores)||void 0===t||t.forEach((e=>{c[r].studentPerformance[e.studentId]||(c[r].studentPerformance[e.studentId]={scores:[],average:0}),c[r].studentPerformance[e.studentId].scores.push(e.score)}))})),Object.keys(c).forEach((e=>{const t=c[e];t.averagePassRate=t.totalQuizzes>0?t.totalPassRate/t.totalQuizzes:0,Object.values(t.studentPerformance).forEach((e=>{e.average=e.scores.length>0?e.scores.reduce(((e,t)=>e+t),0)/e.scores.length:0})),t.studentAverages=Object.values(t.studentPerformance).map((e=>e.average)),t.topicAverage=t.studentAverages.length>0?t.studentAverages.reduce(((e,t)=>e+t),0)/t.studentAverages.length:0,t.masteryLevel=t.averagePassRate>=80?"High":t.averagePassRate>=60?"Medium":"Low"}));const d=l.length>0?l.reduce(((e,t)=>e+(t.averageScore||0)),0)/l.length:0;return{totalStudents:s.length,totalQuizzes:r.length,uniqueQuizzesTaken:new Set(n.map((e=>e.quizId||e.quiz_id))).size,averageScore:parseFloat(d.toFixed(2)),masteryRate:parseFloat(i.toFixed(2)),studentsWithMastery:o,quizPerformance:l,topicMastery:c,totalQuizzesPassed:l.reduce(((e,t)=>e+(t.passedStudents||0)),0),totalQuizzesFailed:l.reduce(((e,t)=>e+((t.totalStudents||0)-(t.passedStudents||0))),0)}})(A,T);l(e),h(!1)}}),[A,T]),(0,n.useEffect)((()=>{const e=e=>{D&&U.current&&!U.current.contains(e.target)&&F(!1),H&&Q.current&&!Q.current.contains(e.target)&&W(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[D,H]),(0,n.useEffect)((()=>{if(null===r||void 0===r||!r.id)return console.error("No user found in context"),void st.error("Please log in to access this feature");if(!s){console.error("No authentication token found");if(!localStorage.getItem("token"))return void st.error("Please log in to access this feature")}K()}),[t,r,s]);const K=async()=>{if(null!==r&&void 0!==r&&r.id&&(s||localStorage.getItem("token")))try{var e;d(!0),h(!0),I(!0);const r=await fetch(`/classrooms/${t}`,{headers:{Authorization:`Bearer ${s||localStorage.getItem("token")}`,"Content-Type":"application/json"}});if(!r.ok)throw new Error("Failed to fetch classroom data");const n=await r.json();M(n);const a=(await nd(t)).map((e=>{const t={...e,reportData:"string"===typeof e.reportData?JSON.parse(e.reportData):e.reportData};return"string"===typeof t.reportData.students&&(t.reportData.students=JSON.parse(t.reportData.students)),"string"===typeof t.reportData.quizzes&&(t.reportData.quizzes=JSON.parse(t.reportData.quizzes)),t.reportData.students&&t.reportData.students.forEach((e=>{"string"===typeof e.quizAttempts&&(e.quizAttempts=JSON.parse(e.quizAttempts))})),t}));o(a),a&&a.length>0&&k(a[0]);const i=await ad(t),c=(null===(e=n.students)||void 0===e?void 0:e.length)||await qs.getStudentCountInClassroom(t);l({...i,totalStudents:c});const[u,m]=await Promise.all([id(t),ld(t)]);O(u),z(m),d(!1),I(!1)}catch(a){var n;console.error("Error fetching class record data:",a),401===(null===(n=a.response)||void 0===n?void 0:n.status)?(console.error("Authentication error:",a.response.data),st.error("Session expired. Please log in again.")):st.error("Failed to load class record data"),d(!1),h(!1),I(!1)}},Y=async e=>{if(null!==r&&void 0!==r&&r.id)if(L)try{if("EXCEL"===e?f(!0):"CSV"===e&&g(!0),null===A||void 0===A||!A.quizzes||null===T||void 0===T||!T.attempts||null===T||void 0===T||!T.students)throw new Error("Required data is not available");const n=new Map(A.quizzes.map((e=>[e.id,e]))),s=T.attempts.filter((e=>{const t=n.has(e.quizId);return t||console.warn(`Found attempt with no matching quiz: Attempt ID ${e.id}, Quiz ID ${e.quizId}`),t})),a={};s.forEach((e=>{const t=e.studentId||e.user_id,r=e.quizId||e.quiz_id;t&&r?(a[t]||(a[t]={attempts:{},totalAttempts:0}),a[t].attempts[r]||(a[t].attempts[r]={attempts:[],bestScore:0}),a[t].attempts[r].attempts.push(e),a[t].totalAttempts++,(!a[t].attempts[r].bestScore||a[t].attempts[r].bestScore<e.score)&&(a[t].attempts[r].bestScore=e.score)):console.warn("Skipping attempt with missing IDs:",e)}));const o=T.students.map((e=>{const t=a[e.id]||{attempts:{},totalAttempts:0},r={};let n=0,s=0;const o=A.quizzes.reduce(((e,t)=>e+(Number(t.overallScore)||0)),0);A.quizzes.forEach((e=>{const a=t.attempts[e.id];if(a){const t=a.attempts.reduce(((e,t)=>e+(t.score||0)),0)/a.attempts.length;r[`quiz_${e.id}`]=t.toFixed(2),n+=Number(t),s++}else r[`quiz_${e.id}`]=null}));const i=o>0?(n/o*100).toFixed(2):0,l=s===A.quizzes.length?"Complete":"Incomplete";return{rank:0,lastName:$g(e.lastName),firstName:$g(e.firstName),...r,totalPoints:Number(n.toFixed(4)),averageScore:parseFloat(i),status:l}})).sort(((e,t)=>t.averageScore-e.averageScore)).map(((e,t)=>({...e,rank:t+1}))),i=[{key:"rank",label:"Rank"},{key:"lastName",label:"Last Name"},{key:"firstName",label:"First Name"},...A.quizzes.map((e=>({key:`quiz_${e.id}`,label:`${e.quizName} (Quiz Items: ${e.totalItems} | Overall Score: ${e.overallScore} | Passing: ${e.passingScore})`}))),{key:"totalPoints",label:"Total Points"},{key:"averageScore",label:"Average Score (%)"},{key:"status",label:"Status"}],l=JSON.stringify({classroomId:L.id,classroomName:L.name,totalStudents:T.students.length,totalQuizzes:A.quizzes.length,quizzes:A.quizzes.map((e=>({id:e.id,quizName:e.quizName,totalItems:e.totalItems,passingScore:e.passingScore,overallScore:Number(e.overallScore)||0}))),students:o.map((e=>({...e,totalPoints:Number(e.totalPoints),averageScore:Number(e.averageScore)}))),headers:i,generatedAt:(new Date).toISOString()}),c=await rd(t,r.id,x,l,e);if(null===c||void 0===c||!c.id)throw new Error("Failed to generate report: No report ID returned");const d=e=>{switch(e.toUpperCase()){case"EXCEL":return".xlsx";case"CSV":return".csv";default:return".txt"}},u=`${L.name||"Class"}_Record${d(e)}`;await od(c.id,u),st.success(`Class record report generated and downloaded as ${e}`),await K()}catch(i){var n,s,a,o;const e=(null===(n=i.response)||void 0===n||null===(s=n.data)||void 0===s?void 0:s.message)||i.message;console.error("Error message:",e),401===(null===(a=i.response)||void 0===a?void 0:a.status)?st.error("Session expired. Please log in again."):500===(null===(o=i.response)||void 0===o?void 0:o.status)?st.error("Server error while generating report. Please try again later."):st.error(`Failed to generate report: ${e}`)}finally{"EXCEL"===e?f(!1):"CSV"===e&&g(!1)}else st.error("Failed to load classroom data");else st.error("Please log in to generate reports")},Z=()=>{var e;if("overall"===B)return"Overall Analytics";const t=null===i||void 0===i||null===(e=i.quizPerformance)||void 0===e?void 0:e.find((e=>e.quizId===B));return t?t.quizName:"Overall Analytics"},J=()=>{if(P)return(0,as.jsx)("div",{className:"flex justify-center items-center h-32",children:(0,as.jsx)(Ta,{className:"animate-spin text-blue-600 text-2xl"})});if(null===A||void 0===A||!A.quizzes||null===T||void 0===T||!T.attempts)return(0,as.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No quiz data available for this classroom."});const{quizzes:e}=A,{attempts:t,students:r}=T,n={};t.forEach((e=>{!e.studentId&&e.user_id&&(e.studentId=e.user_id),!e.quizId&&e.quiz_id&&(e.quizId=e.quiz_id),n[e.studentId]||(n[e.studentId]={attempts:{},totalAttempts:0}),n[e.studentId].attempts[e.quizId]||(n[e.studentId].attempts[e.quizId]={attempts:[],bestScore:0}),n[e.studentId].attempts[e.quizId].attempts.push(e),n[e.studentId].totalAttempts++,(!n[e.studentId].attempts[e.quizId].bestScore||n[e.studentId].attempts[e.quizId].bestScore<e.score)&&(n[e.studentId].attempts[e.quizId].bestScore=e.score)}));const s=r.map((t=>{const r=n[t.id]||{attempts:{},totalAttempts:0},s=e.map((e=>{const t=r.attempts[e.id];if(!t)return null;return{score:t.attempts.reduce(((e,t)=>e+(t.score||0)),0)/t.attempts.length,totalAttempts:t.attempts.length,bestScore:t.bestScore}})),a=s.reduce(((e,t)=>e+(Number(null===t||void 0===t?void 0:t.score)||0)),0),o=e.reduce(((e,t)=>e+(Number(t.overallScore)||0)),0),i=o>0?(a/o*100).toFixed(2):0,l=s.every((e=>null!==e));return{...t,quizScores:s,totalScore:Number(a.toFixed(2)),averageScore:parseFloat(i),status:l?"Complete":"Incomplete",totalAttempts:r.totalAttempts}})),a=((e,t)=>{const r=t.reduce(((e,t)=>e+(Number(t.overallScore)||0)),0);return e.map(((e,t)=>({...e,index:t}))).map((e=>{var t,n;const s=(null===(t=e.quizScores)||void 0===t?void 0:t.reduce(((e,t)=>e+("object"===typeof t?(null===t||void 0===t?void 0:t.score)||0:Number(t)||0)),0))||0,a=r>0?(s/r*100).toFixed(2):0,o=null===(n=e.quizScores)||void 0===n?void 0:n.every((e=>null!==e&&void 0!==e));return{...e,totalScore:s,averageScore:parseFloat(a),status:o?"Complete":"Incomplete"}})).sort(((e,t)=>t.averageScore-e.averageScore)).map(((e,t)=>({...e,rank:t+1}))).sort(((e,t)=>e.index-t.index))})(s,e),o=(e=>{const t=[...e];return t.sort(((e,t)=>"desc"===q?e.rank-t.rank:t.rank-e.rank)),t})(a);return(0,as.jsx)("div",{children:(0,as.jsxs)("div",{className:"overflow-x-auto "+(V?"fixed inset-0 z-50 bg-white p-4":""),children:[V&&(0,as.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,as.jsx)("h3",{className:"text-lg font-semibold",children:"Class Record - Full Screen View"}),(0,as.jsx)("button",{onClick:()=>G(!1),className:"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-full",children:"\u2715"})]}),(0,as.jsxs)("div",{className:"mt-2 mb-6 flex flex-col md:flex-row justify-end  items-start md:items-center gap-4 px-1",children:[!V&&(0,as.jsxs)("button",{onClick:()=>G(!V),className:"flex items-center justify-center px-4 py-2 bg-white border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 w-full md:w-auto",children:[(0,as.jsx)(cd,{className:"mr-2 h-4 w-4"}),"Full Screen"]}),(0,as.jsxs)("button",{onClick:()=>R("desc"===q?"asc":"desc"),className:"flex items-center justify-center px-4 py-2 bg-white border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 w-full md:w-auto",children:["Sort: ","desc"===q?"Highest Rank":"Lowest Rank","desc"===q?" \u2193":" \u2191"]}),(0,as.jsxs)("div",{className:"relative w-full md:w-auto",ref:Q,children:[(0,as.jsxs)("button",{onClick:()=>W(!H),className:"flex items-center justify-center px-4 py-2 bg-white border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 w-full md:w-auto",children:[(0,as.jsxs)("div",{className:"flex items-center",children:[(0,as.jsx)(ca,{className:"mr-2 h-4 w-4"}),"Download Report"]}),(0,as.jsx)(ta,{className:"ml-2 h-4 w-4"})]}),H&&(0,as.jsx)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg z-50 border border-gray-200 md:right-0",children:(0,as.jsxs)("div",{className:"py-1",children:[(0,as.jsxs)("button",{onClick:()=>{Y("EXCEL"),W(!1)},disabled:m,className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center "+(m?"opacity-50 cursor-not-allowed":""),children:[(0,as.jsx)(fa,{className:"mr-2 h-4 w-4"}),m?"Generating Excel...":"Download Excel"]}),(0,as.jsxs)("button",{onClick:()=>{Y("CSV"),W(!1)},disabled:p,className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center "+(p?"opacity-50 cursor-not-allowed":""),children:[(0,as.jsx)(ma,{className:"mr-2 h-4 w-4"}),p?"Generating CSV...":"Download CSV"]})]})})]})]}),(0,as.jsx)("div",{className:(V?"h-[calc(100vh-120px)]":"max-h-96")+" overflow-y-auto",children:(0,as.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,as.jsx)("thead",{className:"bg-gray-50 sticky top-0 z-10",children:(0,as.jsxs)("tr",{children:[(0,as.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-20",children:["Rank ","desc"===q?"\u2193":"\u2191"]}),(0,as.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-48",children:"Student Name"}),e.map((e=>(0,as.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-40",children:[(0,as.jsx)("div",{className:"break-words",children:e.quizName}),(0,as.jsxs)("div",{className:"text-xxs font-normal normal-case text-gray-400 mt-1",children:["Items: ",e.totalItems," | Score: ",e.overallScore," | Pass: ",e.passingScore]})]},e.id))),(0,as.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-32",children:["Total Points",(0,as.jsxs)("div",{className:"text-xxs font-normal normal-case text-gray-400",children:["(Max: ",e.reduce(((e,t)=>e+(Number(t.overallScore)||0)),0),")"]})]}),(0,as.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-32",children:"Average Score"}),(0,as.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-32",children:"Status"})]})}),(0,as.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map((t=>(0,as.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,as.jsx)("td",{className:"px-6 py-4 whitespace-nowrap w-20",children:(0,as.jsx)("div",{className:"text-sm font-medium text-gray-900",children:t.rank})}),(0,as.jsx)("td",{className:"px-6 py-4 whitespace-nowrap w-48",children:(0,as.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[$g(t.lastName),", ",$g(t.firstName)]})}),e.map((e=>{var r;const s=null===(r=n[t.id])||void 0===r?void 0:r.attempts[e.id],a=s?(s.attempts.reduce(((e,t)=>e+(t.score||0)),0)/s.attempts.length).toFixed(2):null;return(0,as.jsx)("td",{className:"px-6 py-4 whitespace-nowrap w-40",children:s?(0,as.jsxs)("button",{onClick:()=>(async(e,t)=>{try{var r,n;const s=(null===(r=t[e.studentId])||void 0===r||null===(n=r.attempts[e.quizId])||void 0===n?void 0:n.attempts)||[],a=s.length,o=s.reduce(((e,t)=>e+(t.score||0)),0)/a,i=s.reduce(((e,t,r)=>!e||t.score>e.score?{...t,attemptNumber:r+1}:e),null),l=await jc(e.quizId),c=(null===l||void 0===l?void 0:l.findIndex((t=>t.studentId===e.studentId)))+1,d=e.timeSpentSeconds||e.timeSpent||0,u=`${Math.floor(d/60)}.${(d%60).toString().padStart(2,"0")}`;C({...e,totalAttempts:a,averageScore:o.toFixed(2),timeSpent:u,rank:c||"N/A",highestScore:(null===i||void 0===i?void 0:i.score)||0,bestScoreAttemptNumber:(null===i||void 0===i?void 0:i.attemptNumber)||0}),E(!0)}catch(s){st.error("Failed to fetch student rank")}})(s.attempts[0],n),className:"text-sm flex items-center "+(a>=e.passingScore?"text-green-600":"text-red-600"),children:[a,(0,as.jsx)(ga,{className:"ml-1"})]}):(0,as.jsx)("span",{className:"text-sm text-gray-400",children:"-"})},e.id)})),(0,as.jsx)("td",{className:"px-6 py-4 whitespace-nowrap w-32",children:(0,as.jsx)("span",{className:"text-sm font-medium text-gray-900",children:t.totalScore.toFixed(2)})}),(0,as.jsx)("td",{className:"px-6 py-4 whitespace-nowrap w-32",children:(0,as.jsxs)("span",{className:"text-sm font-medium "+(t.averageScore>=60?"text-green-600":"text-red-600"),children:[t.averageScore,"%"]})}),(0,as.jsx)("td",{className:"px-6 py-4 whitespace-nowrap w-32",children:(0,as.jsx)("span",{className:"text-sm font-medium "+("Complete"===t.status?"text-green-600":"text-red-600"),children:t.status})})]},t.id)))})]})})]})})};return(0,as.jsxs)("div",{className:"p-3 md:p-6",children:[(0,as.jsx)("div",{className:"flex justify-center mb-8",children:(0,as.jsxs)("nav",{className:"flex space-x-4","aria-label":"Tabs",children:[(0,as.jsx)("button",{className:"px-4 py-2 text-sm font-medium rounded-sm "+("reports"===w?"bg-blue-900 text-gray-50":"text-gray-500 hover:text-gray-700"),onClick:()=>j("reports"),children:"Class Records"}),(0,as.jsx)("button",{className:"px-4 py-2 text-sm font-medium rounded-sm "+("analytics"===w?"bg-blue-900 text-gray-50":"text-gray-500 hover:text-gray-700"),onClick:()=>j("analytics"),children:"Analytics"})]})}),"reports"===w?(0,as.jsx)(as.Fragment,{children:c?(0,as.jsx)("div",{className:"flex justify-center items-center h-32",children:(0,as.jsx)(Ta,{className:"animate-spin text-blue-600 text-2xl"})}):N?(0,as.jsxs)("div",{children:[(0,as.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,as.jsx)(po,{type:"h3",fontSize:"lg",weight:"semibold",className:"text-gray-700 ml-2",children:N.reportName})}),J()]}):null!==A&&void 0!==A&&A.quizzes&&null!==T&&void 0!==T&&T.attempts?(0,as.jsxs)("div",{children:[(0,as.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,as.jsx)(po,{type:"h3",fontSize:"lg",weight:"semibold",className:"text-gray-700",children:"Class Record"})}),J()]}):(0,as.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No reports available. Generate a new report to see it here."})}):(()=>{var e,t,r,n,s,a,o,l,c,d;if(u)return(0,as.jsx)("div",{className:"flex justify-center items-center h-32",children:(0,as.jsx)(Ta,{className:"animate-spin text-blue-600 text-2xl"})});if(!i)return(0,as.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No analytics data available."});null===(e=i.quizPerformance)||void 0===e||e.map((e=>e.quizName)),null===(t=i.quizPerformance)||void 0===t||t.map((e=>e.averageScore)),null===(r=i.quizPerformance)||void 0===r||r.map((e=>e.averageScore));const h=(e,t)=>{if(!e||0===e.length)return{labels:["No Data"],datasets:[{data:[1],backgroundColor:["#9CA3AF"]}]};const r=e.length,n=e.filter((e=>e>=t)).length;return{labels:["Passed","Failed"],datasets:[{data:[n,r-n],backgroundColor:["#4CAF50","#f44336"]}]}};return(0,as.jsxs)("div",{className:"space-y-8",children:[(0,as.jsx)("div",{className:"flex justify-end mb-6",children:(0,as.jsxs)("div",{className:"relative",ref:U,children:[(0,as.jsxs)("button",{onClick:()=>F(!D),className:"flex items-center px-4 py-2 bg-white border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,as.jsxs)("div",{className:"flex items-center",children:[(0,as.jsx)(Qs,{className:"mr-2 h-4 w-4"}),Z()]}),(0,as.jsx)(ta,{className:"ml-2 h-4 w-4"})]}),D&&(0,as.jsx)("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-md shadow-lg z-10 border border-gray-200",children:(0,as.jsxs)("div",{className:"py-1",children:[(0,as.jsx)("button",{onClick:()=>{$("overall"),F(!1)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Overall Analytics"}),null===i||void 0===i||null===(n=i.quizPerformance)||void 0===n?void 0:n.map(((e,t)=>(0,as.jsx)("button",{onClick:()=>{$(e.quizId),F(!1)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:e.quizName||`Quiz ${t+1}`},e.quizId||t)))]})})]})}),"overall"===B&&(0,as.jsxs)("div",{className:"space-y-8",children:[(0,as.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 lg:gap-6",children:[(0,as.jsxs)("div",{className:"bg-white  p-4 md:p-6 rounded-lg shadow",children:[(0,as.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Total Students"}),(0,as.jsx)("p",{className:"text-3xl font-bold text-blue-800",children:(null===i||void 0===i?void 0:i.totalStudents)||0})]}),(0,as.jsxs)("div",{className:"bg-white  p-4 md:p-6 rounded-lg shadow",children:[(0,as.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Average Score"}),(0,as.jsxs)("p",{className:"text-3xl font-bold text-blue-800",children:[(null===i||void 0===i||null===(s=i.averageScore)||void 0===s?void 0:s.toFixed(2))||"0.00","%"]})]}),(0,as.jsxs)("div",{className:"bg-white  p-4 md:p-6 rounded-lg shadow",children:[(0,as.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Mastery Rate"}),(0,as.jsxs)("p",{className:"text-3xl font-bold text-blue-800",children:[(null===i||void 0===i||null===(a=i.masteryRate)||void 0===a?void 0:a.toFixed(2))||"0.00","%"]}),(0,as.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["Among ",(null===i||void 0===i?void 0:i.totalStudents)||0," students in the classroom, ",(null===i||void 0===i?void 0:i.studentsWithMastery)||0," ",1===(null===i||void 0===i?void 0:i.studentsWithMastery)?"student has":"students have"," passed all quizzes"]})]}),(0,as.jsxs)("div",{className:"bg-white  p-4 md:p-6 rounded-lg shadow",children:[(0,as.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Quizzes Taken"}),(0,as.jsx)("p",{className:"text-3xl font-bold text-blue-800",children:(null===i||void 0===i?void 0:i.uniqueQuizzesTaken)||0}),(0,as.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Unique quizzes attempted"})]})]}),(0,as.jsxs)("div",{className:"bg-white  p-4 md:p-6 rounded-lg shadow",children:[(0,as.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Class Progress Over Time"}),(0,as.jsx)("div",{className:"h-64 sm:h-80 lg:h-96 pr-2 lg:pr-4",children:(0,as.jsx)(Rg,{type:"bar",data:{labels:(null===(o=i.quizPerformance)||void 0===o?void 0:o.map((e=>{const t=e.quizName||"";return t.length>18?t.slice(0,15)+"...":t})))||[],datasets:[{type:"bar",label:"Class Average Score",data:(null===(l=i.quizPerformance)||void 0===l?void 0:l.map((e=>e.averageScore)))||[],backgroundColor:e=>{const t=e.chart.ctx;if(!t)return"rgba(125, 211, 252, 0.7)";const r=t.createLinearGradient(0,e.chart.height,0,0);return r.addColorStop(0,"rgba(125, 211, 252, 0.6)"),r.addColorStop(1,"rgba(125, 211, 252, 0.9)"),r},borderColor:"rgba(125, 211, 252, 1)",barPercentage:.7,categoryPercentage:.7,order:2},{type:"line",label:"Class Average Score",data:(null===(c=i.quizPerformance)||void 0===c?void 0:c.map((e=>e.averageScore)))||[],borderColor:"rgb(30, 58, 138)",backgroundColor:"rgb(30, 58, 138)",tension:0,fill:!1,pointBackgroundColor:"rgb(30, 58, 138)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgb(30, 58, 138)",pointRadius:6,pointHoverRadius:8,pointBorderWidth:2,order:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!1},tooltip:{enabled:!0,backgroundColor:"rgba(255, 255, 255, 0.9)",titleFont:{size:14,weight:"bold"},bodyFont:{size:12},titleColor:"#333",bodyColor:"#666",borderColor:"rgba(0,0,0,0.1)",borderWidth:1,padding:15,displayColors:!0,mode:"index",intersect:!1,filter:e=>"line"===e.dataset.type,callbacks:{title:function(e){var t,r;const n=e[0].dataIndex;return(null===(t=i.quizPerformance)||void 0===t||null===(r=t[n])||void 0===r?void 0:r.quizName)||e[0].label},label:function(e){return`${e.dataset.label||""}: ${e.parsed.y}%`}}}},scales:{y:{beginAtZero:!0,max:100,title:{display:!1},grid:{drawBorder:!1,color:"rgba(200, 200, 200, 0.3)"},ticks:{padding:10,stepSize:10,color:"#6b7280"}},x:{title:{display:!1},grid:{display:!1},ticks:{autoSkip:!1,maxRotation:0,minRotation:0,color:"#6b7280",callback:function(e,t,r){const n=this.getLabelForValue(e);return n.length>18?n.slice(0,15)+"...":n}}}},interaction:{mode:"index",intersect:!1}}})})]}),(0,as.jsxs)("div",{className:"bg-white  p-4 md:p-6 rounded-lg shadow",children:[(0,as.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Content Mastery & Progress Analysis"}),(0,as.jsx)("div",{className:"min-h-[400px] lg:min-h-[500px]",children:(0,as.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-6 h-full",children:[(0,as.jsxs)("div",{className:"space-y-4 lg:space-y-6",children:[(0,as.jsx)("h4",{className:"font-medium text-blue-800 mb-2",children:"Content Mastery by Topic"}),(0,as.jsx)("div",{className:"space-y-3 lg:space-y-4",children:Object.entries((null===i||void 0===i?void 0:i.topicMastery)||{}).sort(((e,t)=>t[1].averagePassRate-e[1].averagePassRate)).map((e=>{var t,r;let[n,s]=e;return(0,as.jsxs)("div",{className:"flex items-center gap-2 lg:gap-4",children:[(0,as.jsx)("span",{className:"w-24 lg:w-32 truncate text-gray-700 text-xs lg:text-sm",children:(null===(t=s.quizzes)||void 0===t||null===(r=t[0])||void 0===r?void 0:r.quizName)||n}),(0,as.jsxs)("div",{className:"flex-1 flex items-center",children:[(0,as.jsx)("div",{className:"w-full h-2 lg:h-3 bg-gray-200 rounded-full overflow-hidden flex",children:Array.from({length:20}).map(((e,t)=>(0,as.jsx)("div",{className:`h-full ${t<Math.round(s.averagePassRate/5)?["bg-blue-400","bg-blue-400","bg-blue-500","bg-blue-500","bg-blue-600","bg-blue-600","bg-blue-700","bg-blue-700","bg-blue-800","bg-blue-800","bg-blue-900","bg-blue-900","bg-blue-900","bg-blue-800","bg-blue-700","bg-blue-600","bg-blue-500","bg-blue-400","bg-blue-400","bg-blue-400"][t]:"bg-gray-200"}`,style:{width:"5%"}},t)))}),(0,as.jsxs)("span",{className:"ml-2 lg:ml-3 text-xs lg:text-sm font-semibold text-gray-800 w-8 lg:w-10 text-right",children:[Math.round(s.averagePassRate),"%"]})]})]},n)}))}),(0,as.jsxs)("div",{className:"mt-3 lg:mt-4 p-2 lg:p-3 bg-blue-50 border-l-4 border-blue-400 rounded max-h-32 lg:max-h-44 overflow-y-auto",children:[(0,as.jsx)("h5",{className:"font-semibold text-blue-700 mb-1 flex items-center gap-2 text-sm lg:text-base",children:(0,as.jsx)("span",{children:"Notes"})}),(0,as.jsxs)("ul",{className:"list-disc list-inside text-xs lg:text-sm text-blue-800 space-y-1",children:[Object.entries((null===i||void 0===i?void 0:i.topicMastery)||{}).filter((e=>{let[t,r]=e;return r.averagePassRate<70})).map((e=>{var t,r;let[n,s]=e;return(0,as.jsxs)("li",{children:["Consider re-teaching ",(0,as.jsx)("span",{className:"font-semibold",children:(null===(t=s.quizzes)||void 0===t||null===(r=t[0])||void 0===r?void 0:r.quizName)||n})," (Current mastery: ",s.averagePassRate.toFixed(1),"%)"]},n)})),0===Object.entries((null===i||void 0===i?void 0:i.topicMastery)||{}).filter((e=>{let[t,r]=e;return r.averagePassRate<70})).length&&(0,as.jsx)("li",{children:"All topics have satisfactory mastery rates."})]})]})]}),(0,as.jsxs)("div",{className:"space-y-4 lg:space-y-6",children:[(0,as.jsx)("h4",{className:"font-medium text-purple-800 mb-2",children:"Progress Analysis"}),(0,as.jsx)("div",{className:"space-y-3 lg:space-y-4",children:null===i||void 0===i||null===(d=i.quizPerformance)||void 0===d?void 0:d.map(((e,t)=>(0,as.jsxs)("div",{className:"flex items-center gap-2 lg:gap-4",children:[(0,as.jsx)("span",{className:"w-24 lg:w-32 truncate text-gray-700 text-xs lg:text-sm",children:e.quizName}),(0,as.jsxs)("div",{className:"flex-1 flex items-center",children:[(0,as.jsx)("div",{className:"w-full h-2 lg:h-3 bg-gray-200 rounded-full overflow-hidden flex",children:Array.from({length:20}).map(((t,r)=>(0,as.jsx)("div",{className:`h-full ${r<Math.round(e.averageScore/5)?["bg-violet-400","bg-violet-400","bg-violet-500","bg-violet-500","bg-violet-600","bg-violet-600","bg-violet-700","bg-violet-700","bg-violet-800","bg-violet-800","bg-violet-900","bg-violet-900","bg-violet-900","bg-violet-800","bg-violet-700","bg-violet-600","bg-violet-500","bg-violet-400","bg-violet-400","bg-violet-400"][r]:"bg-gray-200"}`,style:{width:"5%"}},r)))}),(0,as.jsxs)("span",{className:"ml-2 lg:ml-3 text-xs lg:text-sm font-semibold text-gray-800 w-8 lg:w-10 text-right",children:[Math.round(e.averageScore),"%"]})]})]},e.quizId||t)))}),(0,as.jsxs)("div",{className:"mt-3 lg:mt-4 p-2 lg:p-3 bg-violet-50 border-l-4 border-violet-400 rounded max-h-32 lg:max-h-44 overflow-y-auto",children:[(0,as.jsx)("h5",{className:"font-semibold text-violet-700 mb-1 flex items-center gap-2 text-sm lg:text-base",children:(0,as.jsx)("span",{children:"Notes"})}),(0,as.jsxs)("div",{className:"text-xs lg:text-sm text-violet-800",children:[(0,as.jsxs)("div",{className:"mb-1",children:[(0,as.jsx)("span",{className:"font-semibold",children:"Overall Trend:"})," ",(()=>{const e=(null===i||void 0===i?void 0:i.quizPerformance)||[],t=e.map(((t,r)=>{if(0===r)return null;const n=e[r-1];return t.averageScore-n.averageScore})).filter(Boolean),r=t.length>0?t.reduce(((e,t)=>e+t),0)/t.length:0;return(0,as.jsxs)("span",{className:r>0?"text-green-600":"text-red-600",children:[r>0?"\u2191":"\u2193"," ",Math.abs(r).toFixed(1),"%"]})})()]}),(0,as.jsxs)("div",{className:"mb-1",children:[(0,as.jsx)("span",{className:"font-semibold",children:"Quiz-to-Quiz Progress:"}),(0,as.jsx)("ul",{className:"list-disc list-inside ml-2 lg:ml-4",children:(()=>{const e=(null===i||void 0===i?void 0:i.quizPerformance)||[];return e.map(((t,r)=>{if(0===r)return null;const n=e[r-1],s=t.averageScore-n.averageScore;return(0,as.jsxs)("li",{className:s>0?"text-green-600":"text-red-600",children:[n.quizName," \u2192 ",t.quizName,": ",s>0?"+":"",s.toFixed(1),"%"]},t.quizId||r)})).filter(Boolean)})()})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)("span",{className:"font-semibold",children:"Recommendations:"}),(0,as.jsx)("ul",{className:"list-disc list-inside ml-2 lg:ml-4",children:(()=>{const e=(null===i||void 0===i?void 0:i.quizPerformance)||[],t=e.map(((t,r)=>{if(0===r)return null;const n=e[r-1];return t.averageScore-n.averageScore<0?{from:n.quizName,to:t.quizName}:null})).filter(Boolean);return t.length>0?t.map(((e,t)=>(0,as.jsxs)("li",{children:["Encourage students to review ",(0,as.jsx)("span",{className:"font-semibold",children:e.from})," and ",(0,as.jsx)("span",{className:"font-semibold",children:e.to})," as scores declined between these quizzes."]},t))):(0,as.jsx)("li",{children:"Class is showing consistent or improving performance. Continue current strategies!"})})()})]})]})]})]})]})})]})]}),"overall"!==B&&(null===i||void 0===i?void 0:i.quizPerformance)&&(0,as.jsx)("div",{className:"space-y-8",children:((e,t,r)=>{const n=i.quizPerformance.find((e=>e.quizId===B));if(!n)return(0,as.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No quiz data available."});const s=null===A||void 0===A||null===(e=A.quizzes)||void 0===e?void 0:e.find((e=>e.id===n.quizId)),a=(e=>{if(null===T||void 0===T||!T.attempts||null===T||void 0===T||!T.students)return[];const t={};T.attempts.filter((t=>(t.quizId||t.quiz_id)===e)).forEach((e=>{const r=e.studentId||e.user_id;t[r]||(t[r]={scores:[],average:0}),t[r].scores.push(e.score||0)})),Object.values(t).forEach((e=>{const t=e.scores.reduce(((e,t)=>e+t),0);e.average=t/e.scores.length}));const r=Object.values(t).map((e=>e.average));return r})(n.quizId);return(0,as.jsxs)(as.Fragment,{children:[(0,as.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,as.jsxs)("div",{className:"bg-white  p-4 md:p-6 rounded-lg shadow",children:[(0,as.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Score Distribution (Bell Curve)"}),(0,as.jsx)("div",{className:"h-64 sm:h-72 lg:h-80",children:(0,as.jsx)(Fg,{data:(()=>{const e=((e,t)=>{const r=Number(t.overallScore)||100,n=Number(t.passingScore)||60,s=Math.ceil(r/5),a=[];for(let i=0;i<5;i++){const e=i*s,t=Math.min((i+1)*s,r);a.push({min:e,max:t,label:`${e}-${t}`})}const o=a.map((t=>{const r=e.filter((e=>e>=t.min&&e<=t.max)).length;return{label:t.label,count:r,isPassingRange:t.min>=n}}));return{labels:o.map((e=>e.label)),datasets:[{label:"Number of Students",data:o.map((e=>e.count)),backgroundColor:o.map((e=>e.isPassingRange?"#4CAF50":"#2196F3")),borderColor:o.map((e=>e.isPassingRange?"#388E3C":"#1976D2")),borderWidth:1}]}})(a,s||n),t=e.datasets[0].data;let r=0;const o=t.map((e=>r+=e));return{labels:e.labels,datasets:[{label:"Actual (# students)",data:t,borderColor:"#60a5fa",backgroundColor:"rgba(96,165,250,0.08)",tension:.5,fill:!1,borderWidth:4,pointRadius:3,pointHoverRadius:6,order:1},{label:"Cumulative (# students \u2264 range)",data:o,borderColor:"#2563eb",backgroundColor:"rgba(37,99,235,0.08)",tension:.5,fill:!1,borderWidth:3,pointRadius:3,pointHoverRadius:6,order:2}]}})(),options:{maintainAspectRatio:!1,interaction:{mode:"nearest",intersect:!1},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Number of Students"},grid:{drawOnChartArea:!0,color:"#e5e7eb"},ticks:{color:"#666"}},x:{title:{display:!0,text:"Score Ranges"},grid:{drawOnChartArea:!1},ticks:{color:"#666"}}},plugins:{legend:{display:!0,labels:{usePointStyle:!0,boxWidth:18,font:{weight:"bold"}}},tooltip:{callbacks:{label:function(e){const t=e.dataset.label||"",r=e.raw;return t.startsWith("Actual")?`${t}: ${r} students in this range`:t.startsWith("Cumulative")?`${t}: ${r} students scored \u2264 this range`:`${t}: ${r}`}}},annotation:{}},plugins:[{id:"bellCurveBands",afterDraw:e=>{const{ctx:t,chartArea:r,scales:n}=e;if(!r)return;const s=["#f3f4f6","#e0e7ef","#e3fcec"];[.2,.4,.6].forEach(((e,a)=>{const o=n.y.getPixelForValue(n.y.max*(1-e));t.save(),t.globalAlpha=.18,t.fillStyle=s[a],t.fillRect(r.left,o,r.right-r.left,32),t.globalAlpha=1,t.font="bold 16px sans-serif",t.fillStyle="#222",t.textAlign="center",t.fillText(100*e+"%",(r.left+r.right)/2,o+24),t.restore()}));const a=n.x.getTicks(),o=r.bottom+24;t.save(),t.strokeStyle="#bbb",t.fillStyle="#222",t.lineWidth=2,t.font="bold 14px sans-serif",t.textAlign="center";for(let i=0;i<a.length-1;i++){const e=n.x.getPixelForTick(i),r=n.x.getPixelForTick(i+1);t.beginPath(),t.moveTo(e,o),t.lineTo(r,o),t.stroke(),t.beginPath(),t.moveTo(r-6,o-4),t.lineTo(r,o),t.lineTo(r-6,o+4),t.stroke(),t.fillText("10%",(e+r)/2,o+18)}t.restore()}}]}})}),(0,as.jsxs)("div",{className:"mt-2 text-sm text-gray-600",children:[(0,as.jsxs)("p",{children:["Perfect Score: ",(null===s||void 0===s?void 0:s.overallScore)||n.overallScore||"N/A"]}),(0,as.jsxs)("p",{children:["Passing Score: ",n.passingScore]})]})]}),(0,as.jsxs)("div",{className:"bg-white  p-4 md:p-6 rounded-lg shadow",children:[(0,as.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Pass/Fail Distribution"}),(0,as.jsx)("div",{className:"h-64 sm:h-72 lg:h-80",children:(0,as.jsx)(Bg,{data:h(a,n.passingScore),options:{maintainAspectRatio:!1,plugins:{legend:{position:"top",display:a&&a.length>0},tooltip:{enabled:a&&a.length>0,callbacks:{label:function(e){if("No Data"===e.label)return"No student data available";const t=e.dataset.data.reduce(((e,t)=>e+t),0),r=(e.raw/t*100).toFixed(1);return`${e.label}: ${e.raw} students (${r}%)`}}}}}})})]})]}),(0,as.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 lg:gap-6",children:[(0,as.jsxs)("div",{className:"bg-white  p-4 md:p-6 rounded-lg shadow",children:[(0,as.jsx)("h3",{className:"text-lg font-bold text-primary mb-2",children:"Average Score"}),(0,as.jsxs)("p",{className:"text-3xl font-bold text-blue-800",children:[null===(t=n.averageScore)||void 0===t?void 0:t.toFixed(2),"%"]})]}),(0,as.jsxs)("div",{className:"bg-white  p-4 md:p-6 rounded-lg shadow",children:[(0,as.jsx)("h3",{className:"text-lg font-bold text-primary mb-2",children:"Pass Rate"}),(0,as.jsxs)("p",{className:"text-3xl font-bold text-blue-800",children:[null===(r=n.passRate)||void 0===r?void 0:r.toFixed(2),"%"]})]}),(0,as.jsxs)("div",{className:"bg-white  p-4 md:p-6 rounded-lg shadow",children:[(0,as.jsx)("h3",{className:"text-lg font-bold text-primary mb-2",children:"Students Who Took the Quiz"}),(0,as.jsx)("p",{className:"text-3xl font-bold text-blue-800",children:(()=>{const e=new Set;return null!==T&&void 0!==T&&T.attempts&&T.attempts.forEach((t=>{(t.quizId||t.quiz_id)===n.quizId&&e.add(t.studentId||t.user_id)})),e.size})()})]})]})]})})()})]})})(),S?(0,as.jsx)(lc,{isOpen:_,onClose:()=>E(!1),title:"Quiz Attempt Details",children:(0,as.jsx)("div",{className:"p-4",children:(0,as.jsx)("div",{className:"grid grid-cols-2 gap-4",children:(0,as.jsxs)("div",{className:"text-sm",children:[(0,as.jsxs)("p",{className:"dark:text-gray-300",children:[(0,as.jsx)("strong",{children:"Average Score:"})," ",S.averageScore]}),(0,as.jsxs)("p",{className:"dark:text-gray-300",children:[(0,as.jsx)("strong",{children:"Highest Score:"})," ",S.highestScore]}),(0,as.jsxs)("p",{className:"dark:text-gray-300",children:[(0,as.jsx)("strong",{children:"Best Score Attempt:"})," #",S.bestScoreAttemptNumber]}),(0,as.jsxs)("p",{className:"dark:text-gray-300",children:[(0,as.jsx)("strong",{children:"Total Attempts:"})," ",S.totalAttempts]}),(0,as.jsxs)("p",{className:"dark:text-gray-300",children:[(0,as.jsx)("strong",{children:"Status:"})," ",S.passed?"Passed":"Failed"]}),(0,as.jsxs)("p",{className:"dark:text-gray-300",children:[(0,as.jsx)("strong",{children:"Time Spent:"})," ",S.timeSpent||"N/A"]}),(0,as.jsxs)("p",{className:"dark:text-gray-300",children:[(0,as.jsx)("strong",{children:"Rank:"})," ",S.rank||"N/A"]}),(0,as.jsxs)("p",{className:"dark:text-gray-300",children:[(0,as.jsx)("strong",{children:"Completed:"})," ",S.completedAt?new Date(S.completedAt).toLocaleString():"N/A"]})]})})})}):null]})},Hg=e=>{var t;let{isOpen:r,onClose:s,quizId:a}=e;const[o,i]=(0,n.useState)(null),[l,c]=(0,n.useState)(!1),[d,u]=(0,n.useState)("");(0,n.useEffect)((()=>{r&&a&&(c(!0),_c.getQuiz(a).then((e=>{let t=e.quizContent;if("string"===typeof t)try{t=JSON.parse(t)}catch{t=[]}i({...e,questions:t})})).catch((()=>u("Failed to load quiz"))).finally((()=>c(!1)))),r||(i(null),u(""))}),[r,a]);const h=e=>{if(!e)return"N/A";try{return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Invalid date"}};return(0,as.jsx)(lc,{isOpen:r,onClose:s,title:"Quiz Preview",maxWidth:"max-w-4xl",children:l?(0,as.jsx)("div",{className:"flex justify-center items-center h-32",children:(0,as.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"})}):d?(0,as.jsx)("div",{className:"text-red-500 text-center py-8",children:d}):o?(0,as.jsxs)("div",{children:[(0,as.jsxs)("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[(0,as.jsx)("h3",{className:"text-xl font-bold mb-2 text-gray-900",children:o.quizName}),(0,as.jsx)("p",{className:"text-gray-700 mb-3",children:o.description}),(0,as.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-gray-600",children:[(0,as.jsxs)("div",{children:[(0,as.jsx)("span",{className:"font-semibold",children:"Available From:"}),(0,as.jsx)("br",{}),h(o.availableFrom)]}),(0,as.jsxs)("div",{children:[(0,as.jsx)("span",{className:"font-semibold",children:"Available To:"}),(0,as.jsx)("br",{}),h(o.availableTo)]}),(0,as.jsxs)("div",{children:[(0,as.jsx)("span",{className:"font-semibold",children:"Time Limit:"}),(0,as.jsx)("br",{}),o.timeLimitMinutes," minutes"]}),(0,as.jsxs)("div",{children:[(0,as.jsx)("span",{className:"font-semibold",children:"Passing Score:"}),(0,as.jsx)("br",{}),o.passingScore,"/",o.overallScore]})]})]}),(0,as.jsxs)("div",{className:"space-y-4",children:[(0,as.jsxs)("h4",{className:"text-lg font-semibold dark:text-gray-300 text-gray-900 border-b border-gray-200 pb-2",children:["Questions (",(null===(t=o.questions)||void 0===t?void 0:t.length)||0,")"]}),o.questions&&o.questions.length>0?o.questions.map(((e,t)=>(0,as.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg bg-white shadow-sm",children:[(0,as.jsx)("div",{className:"mb-3",children:(0,as.jsxs)("div",{className:"flex items-start gap-3",children:[(0,as.jsx)("span",{className:"bg-blue-100 text-blue-800 text-sm font-semibold px-2 py-1 rounded-full min-w-[2rem] text-center",children:t+1}),(0,as.jsxs)("div",{className:"flex-1",children:[(0,as.jsx)("div",{className:"font-semibold text-gray-900 mb-1",children:e.questionText}),(0,as.jsxs)("div",{className:"text-xs text-gray-500 mb-2",children:["Type: ",e.questionType.replace(/_/g," ")," | Points: ",e.points]})]})]})}),"MULTIPLE_CHOICE"===e.questionType&&e.options&&(0,as.jsx)("div",{className:"ml-11",children:(0,as.jsx)("ul",{className:"space-y-2",children:e.options.map(((t,r)=>(0,as.jsxs)("li",{className:"p-3 rounded-lg border "+(e.correctAnswer===t?"bg-green-50 border-green-200 text-green-800 font-medium":"bg-gray-50 border-gray-200"),children:[(0,as.jsxs)("span",{className:"mr-2 text-sm font-medium",children:[String.fromCharCode(65+r),"."]}),t,e.correctAnswer===t&&(0,as.jsx)("span",{className:"ml-2 text-green-600 text-sm",children:"\u2713 Correct Answer"})]},r)))})}),"CHECKBOX"===e.questionType&&e.options&&(0,as.jsx)("div",{className:"ml-11",children:(0,as.jsx)("ul",{className:"space-y-2",children:e.options.map(((t,r)=>(0,as.jsxs)("li",{className:"p-3 rounded-lg border "+(Array.isArray(e.correctAnswer)&&e.correctAnswer.includes(t)?"bg-green-50 border-green-200 text-green-800 font-medium":"bg-gray-50 border-gray-200"),children:[(0,as.jsxs)("span",{className:"mr-2 text-sm font-medium",children:[String.fromCharCode(65+r),"."]}),t,Array.isArray(e.correctAnswer)&&e.correctAnswer.includes(t)&&(0,as.jsx)("span",{className:"ml-2 text-green-600 text-sm",children:"\u2713 Correct Answer"})]},r)))})}),"IDENTIFICATION"===e.questionType&&(0,as.jsx)("div",{className:"ml-11",children:(0,as.jsxs)("div",{className:"p-3 rounded-lg bg-green-50 border border-green-200 text-green-800 font-medium",children:[(0,as.jsx)("span",{className:"font-semibold",children:"Correct Answer:"})," ",e.correctAnswer]})})]},t))):(0,as.jsx)("div",{className:"text-center py-8 text-gray-500 bg-gray-50 rounded-lg",children:"No questions found for this quiz."})]})]}):null})};function Wg(e){return Es({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"},child:[]},{tag:"path",attr:{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"},child:[]},{tag:"path",attr:{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"},child:[]}]})(e)}const Qg=e=>{let{classroomId:t,isStudent:r=!1,refreshTrigger:s=0}=e;const{token:a,currentUser:o}=is(),i=X(),[l,c]=(0,n.useState)([]),[d,u]=(0,n.useState)(!0),[h,m]=(0,n.useState)(null),[f,p]=(0,n.useState)(null),[g,x]=(0,n.useState)(null),[b,y]=(0,n.useState)({}),[v,w]=(0,n.useState)(null);(0,n.useEffect)((()=>{if(!t)return;(async()=>{try{u(!0),m(null);let s=[];try{if(s=await _c.getQuizzesByClassroom(t),r&&null!==o&&void 0!==o&&o.id){const e=await _c.getQuizAttemptsByStudent(o.id),t={};e.forEach((e=>{t[e.quizId]||(t[e.quizId]=[]),t[e.quizId].push(e)})),y(t)}}catch(e){console.error(`Error fetching quizzes for classroom ${t}:`,e);try{const e=await Xn.get(`/activities/classroom/${t}`),r=e.data.filter((e=>"QUIZ"===e.type)),n=r.map((e=>_c.getQuizByActivity(e.id).catch((e=>null))));s=(await Promise.all(n)).filter((e=>null!==e))}catch(n){throw console.error("Fallback quiz fetch also failed:",n),e}}s&&Array.isArray(s)?c(s):(console.warn("Response is not an array:",s),c([]))}catch(e){console.error("Error fetching quizzes:",e),m("Failed to load quizzes. Please try again."),st.error("Failed to load quizzes"),c([])}finally{u(!1)}})()}),[t,a,r,s]),(0,n.useEffect)((()=>{const e=e=>{v&&!e.target.closest(".dropdown-container")&&w(null)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[v]);const j=e=>{if(!e)return"No end date";try{return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch(Ie){return"Invalid date"}},N=e=>{if(!e)return"Unknown";switch(e){case"MAJOR_EXAMS":return"Major Exams";case"DIAGNOSTIC_QUIZ":return"Diagnostic Quiz";case"PRACTICE_QUIZ":return"Practice Quiz";case"POP_QUIZ":return"Pop Quiz";case"ACTIVITY":return"Activity";default:return e.toLowerCase().replace(/_/g," ").replace(/\b\w/g,(e=>e.toUpperCase()))}};return d?(0,as.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,as.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):h?(0,as.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[(0,as.jsx)("strong",{className:"font-bold",children:"Error! "}),(0,as.jsx)("span",{className:"block sm:inline",children:h})]}):l.length?(0,as.jsxs)("div",{children:[(0,as.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Quizzes"}),(0,as.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:l.map((e=>{const t=(e=>{if(!r||null===o||void 0===o||!o.id)return null;const t=b[e.id]||[],n=t.filter((e=>e.passed)),s=n.length>0,a=t.length,i=e.repeatable?!e.maxAttempts||a<e.maxAttempts:0===a,l=t.length>0?Math.max(...t.map((e=>e.score||0))):0;return{hasPassed:s,attemptCount:a,canAttempt:i,bestScore:l}})(e);return(0,as.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden border border-gray-200",children:[(0,as.jsxs)("div",{className:"bg-blue-900 text-white px-4 py-3 flex justify-between items-center",children:[(0,as.jsx)("h4",{className:"font-semibold break-words max-w-sm",children:e.quizName}),(0,as.jsxs)("div",{className:"flex items-center gap-2",children:[r&&t&&(0,as.jsx)("div",{className:"flex items-center gap-2",children:t.hasPassed?(0,as.jsxs)("div",{className:"flex items-center gap-1 bg-green-500 px-2 py-1 rounded-full",children:[(0,as.jsx)(ea,{className:"text-white"}),(0,as.jsx)("span",{className:"text-sm",children:"Passed!"})]}):t.attemptCount>0?(0,as.jsxs)("div",{className:"flex items-center gap-1 bg-blue-600 px-2 py-1  rounded-full",children:[(0,as.jsx)(za,{className:"text-yellow-300"}),(0,as.jsxs)("span",{className:"text-sm",children:["Best: ",t.bestScore,"%"]})]}):null}),!r&&(0,as.jsxs)("div",{className:"relative dropdown-container",children:[(0,as.jsx)("button",{onClick:()=>w(v===e.id?null:e.id),className:"p-2 text-gray-300 hover:text-white rounded-full hover:bg-blue-800 transition-colors",children:(0,as.jsx)(Wg,{className:"w-5 h-5"})}),v===e.id&&(0,as.jsx)("div",{className:"absolute right-0 top-full mt-1 w-48 bg-white rounded-md shadow-lg border border-gray-200 z-10",children:(0,as.jsxs)("div",{className:"py-1",children:[(0,as.jsx)("button",{onClick:()=>{x(e.id),w(null)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Preview"}),(0,as.jsx)("button",{onClick:()=>{p(e.id),w(null)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Edit"}),(0,as.jsx)("button",{onClick:()=>{(async e=>{if(window.confirm("Are you sure you want to delete this quiz? This action will permanently delete:\n\n\u2022 All student attempts and scores for this quiz\n\u2022 All quiz data and questions\n\u2022 All related leaderboard entries\n\nThis action cannot be undone. Do you want to proceed?"))try{await _c.deleteQuiz(e),c((t=>t.filter((t=>t.id!==e)))),st.success("Quiz and all related data deleted successfully")}catch(h){console.error("Error deleting quiz:",h),st.error("Failed to delete quiz: "+(h.message||"Unknown error"))}})(e.id),w(null)},className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50",children:"Delete"})]})})]})]})]}),(0,as.jsxs)("div",{className:"p-4 text-base",children:[(0,as.jsx)("p",{className:"text-base text-gray-700 mb-2 line-clamp-2",children:e.description||"No description provided"}),(0,as.jsxs)("div",{className:"mt-3 space-y-1 text-base text-gray-600",children:[(0,as.jsxs)("p",{children:[(0,as.jsx)("span",{className:"font-bold",children:"Quiz Type:"})," ",N(e.quizType)]}),(0,as.jsxs)("p",{children:[(0,as.jsx)("span",{className:"font-bold",children:"Total Questions:"})," ",e.totalItems]}),(0,as.jsxs)("p",{children:[(0,as.jsx)("span",{className:"font-bold",children:"Time Limit:"})," ",e.timeLimitMinutes," minutes"]}),(0,as.jsxs)("p",{children:[(0,as.jsx)("span",{className:"font-bold",children:"Passing Score:"})," ",e.passingScore,"/",e.overallScore]}),(0,as.jsxs)("p",{children:[(0,as.jsx)("span",{className:"font-bold",children:"Available From:"})," ",j(e.availableFrom)]}),(0,as.jsxs)("p",{children:[(0,as.jsx)("span",{className:"font-bold",children:"Available To:"})," ",j(e.availableTo)]}),(0,as.jsx)("p",{children:(0,as.jsx)("span",{className:"font-bold",children:e.repeatable?"Multiple attempts allowed"+(e.maxAttempts?` : ${e.maxAttempts} attempts`:""):"Single attempt"})}),r&&t&&(0,as.jsx)("div",{className:"mt-2 p-2 bg-gray-50 rounded",children:(0,as.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["Attempts: ",t.attemptCount,e.maxAttempts?`/${e.maxAttempts}`:""]})})]}),(0,as.jsx)("div",{className:"flex justify-between mt-4 items-center",children:r?(0,as.jsx)("button",{onClick:()=>(async e=>{try{if(null===o||void 0===o||!o.id)return void st.error("You must be logged in to take a quiz");const t=l.find((t=>t.id===e));if(!t)return void st.error("Quiz not found");const r=new Date,n=new Date(t.availableFrom),s=new Date(t.availableTo);if(r<n||r>s)return void st.error("Quiz is not available at this time");const a=await _c.startQuizAttempt(e,o.id);i(`/student/quizzes/${e}/attempt/${a.id}`)}catch(h){console.error("Error starting quiz:",h),st.error("Failed to start quiz: "+(h.message||"Unknown error"))}})(e.id),disabled:!(null!==t&&void 0!==t&&t.canAttempt),className:"w-full px-3 py-2  transition-colors text-base rounded-full "+(null!==t&&void 0!==t&&t.canAttempt?"bg-blue-400 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:(null===t||void 0===t?void 0:t.attemptCount)>0?(t.hasPassed,"Try Again"):"Start Quiz"}):(0,as.jsx)("div",{className:"w-full"})})]})]},e.id)}))}),f&&(0,as.jsx)(Uc,{isOpen:!!f,onClose:()=>p(null),quizId:f,classroomId:t,isEdit:!0,onQuizCreated:()=>{p(null),u(!0)}}),g&&(0,as.jsx)(Hg,{isOpen:!!g,onClose:()=>x(null),quizId:g})]}):(0,as.jsx)("div",{className:"text-center py-8",children:(0,as.jsx)("p",{className:"text-gray-500 mb-4",children:"No quizzes available for this classroom yet."})})},Vg=e=>{var t;let{block:r}=e;const{darkMode:n}=ds();if(!r)return null;if(!r.type&&(r.structuredContent||r.content))return(0,as.jsx)("div",{className:"rich-text-content "+(n?"text-gray-200":"text-gray-900"),dangerouslySetInnerHTML:{__html:r.structuredContent||r.content}});return(0,as.jsx)("div",{className:`content-block content-block-${(null===(t=r.type)||void 0===t?void 0:t.toLowerCase())||"default"}`,children:(()=>{switch(r.type){case"TEXT":return(0,as.jsx)("div",{className:""+(n?"text-gray-200":"text-gray-900"),dangerouslySetInnerHTML:{__html:r.content}});case"HEADING1":return(0,as.jsx)(po,{type:"h1",size:"4xl",className:n?"text-gray-100":"text-gray-900",children:r.content});case"HEADING2":return(0,as.jsx)(po,{type:"h2",size:"3xl",className:n?"text-gray-100":"text-gray-900",children:r.content});case"HEADING3":return(0,as.jsx)(po,{type:"h3",size:"2xl",className:n?"text-gray-100":"text-gray-900",children:r.content});case"PARAGRAPH":return(0,as.jsx)("p",{className:n?"text-gray-200":"text-gray-900",children:r.content});case"IMAGE":return r.mediaUrl?(0,as.jsx)("img",{src:r.mediaUrl,alt:r.altText||"Lesson content image",style:{maxWidth:"100%",height:"auto"}}):(0,as.jsx)("p",{className:n?"text-gray-200":"text-gray-900",children:(0,as.jsx)("em",{children:"Image not available."})});case"VIDEO":if(r.mediaUrl){if(r.mediaUrl.includes("youtube.com")||r.mediaUrl.includes("youtu.be")){var e;const t=(null===(e=r.mediaUrl.split("v=")[1])||void 0===e?void 0:e.split("&")[0])||r.mediaUrl.split("/").pop();return(0,as.jsx)("iframe",{width:"560",height:"315",src:`https://www.youtube.com/embed/${t}`,title:r.caption||"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}return(0,as.jsx)("video",{controls:!0,src:r.mediaUrl,style:{maxWidth:"100%"},children:"Your browser does not support the video tag."})}return(0,as.jsx)("p",{className:n?"text-gray-200":"text-gray-900",children:(0,as.jsx)("em",{children:"Video not available."})});case"LINK":return r.url&&r.content?(0,as.jsx)("a",{href:r.url,target:"_blank",rel:"noopener noreferrer",className:n?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-700",children:r.content}):(0,as.jsx)("p",{className:n?"text-gray-200":"text-gray-900",children:(0,as.jsx)("em",{children:"Link information missing."})});default:return console.warn("Unsupported content block type:",r.type),r.structuredContent||r.content?(0,as.jsx)("div",{className:"rich-text-content "+(n?"text-gray-200":"text-gray-900"),dangerouslySetInnerHTML:{__html:r.structuredContent||r.content}}):(0,as.jsxs)("div",{children:[(0,as.jsxs)("p",{className:n?"text-gray-200":"text-gray-900",children:["Unsupported content type: ",r.type]}),r.content&&(0,as.jsx)("p",{className:n?"text-gray-200":"text-gray-900",children:r.content})]})}})()})},Gg=e=>{const t=e%10,r=e%100;return 1===t&&11!==r?"st":2===t&&12!==r?"nd":3===t&&13!==r?"rd":"th"},Kg=e=>{switch(e){case 1:return"\ud83e\udd47";case 2:return"\ud83e\udd48";case 3:return"\ud83e\udd49";default:return""}},Yg=e=>{let{gameId:t,finalScore:r}=e;const{currentUser:s,token:a,isTeacher:o}=is(),[i,l]=(0,n.useState)([]),[c,d]=(0,n.useState)(!0),[u,h]=(0,n.useState)(null);return(0,n.useEffect)((()=>{t&&(async()=>{try{null!==r&&d(!0);const e=Date.now();let n=(await Xn.get(`/games/${t}/leaderboard?t=${e}`)).data;if(o()||(n=n.filter((e=>"ROLE_STUDENT"===e.role||!e.role))),l(n),s&&!o()){const e=n.findIndex((e=>e.studentId===s.id||e.studentEmail===s.email));-1!==e&&h(e+1)}}catch(e){console.error("Error fetching leaderboard:",e),st.error("Failed to load leaderboard")}finally{d(!1)}})()}),[t,a,s,r,o]),c?(0,as.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,as.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):(0,as.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,as.jsx)("h2",{className:"text-2xl font-bold mb-6 text-center",children:o()?"Student Game Leaderboard":"Game Leaderboard"}),!o()&&null!==r&&(0,as.jsxs)("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg border-2 border-blue-200",children:[(0,as.jsxs)("p",{className:"text-center text-lg",children:[(0,as.jsx)("span",{className:"font-bold",children:"Your Score:"})," ",r]}),u&&(0,as.jsxs)("p",{className:"text-center text-lg",children:[(0,as.jsx)("span",{className:"font-bold",children:"Your Rank:"})," ",u,Gg(u)]})]}),0===i.length?(0,as.jsx)("div",{className:"text-center py-8 text-gray-500",children:(0,as.jsx)("p",{children:o()?"No students have played this game yet.":"No scores recorded yet. Be the first to play!"})}):(0,as.jsx)("div",{className:"overflow-x-auto",children:(0,as.jsxs)("table",{className:"min-w-full bg-white",children:[(0,as.jsx)("thead",{children:(0,as.jsxs)("tr",{className:"bg-gray-100 text-gray-700 text-left",children:[(0,as.jsx)("th",{className:"py-3 px-4 font-semibold",children:"Rank"}),(0,as.jsx)("th",{className:"py-3 px-4 font-semibold",children:"Player"}),(0,as.jsx)("th",{className:"py-3 px-4 font-semibold text-right",children:"Score"}),(0,as.jsx)("th",{className:"py-3 px-4 font-semibold text-right",children:"Date"})]})}),(0,as.jsx)("tbody",{className:"divide-y divide-gray-200",children:i.map(((e,t)=>{const r=s&&(e.studentId===s.id||e.studentEmail===s.email);return(0,as.jsxs)("tr",{className:r?"bg-blue-50":"hover:bg-gray-50",children:[(0,as.jsxs)("td",{className:"py-3 px-4",children:[Kg(t+1)," ",t+1,Gg(t+1)]}),(0,as.jsxs)("td",{className:"py-3 px-4 font-medium",children:[e.studentName||"Anonymous",r&&(0,as.jsx)("span",{className:"ml-2 text-blue-600",children:"(You)"})]}),(0,as.jsx)("td",{className:"py-3 px-4 text-right font-bold",children:e.score}),(()=>{const t=new Date(e.playedAt);return(0,as.jsx)("td",{className:"py-3 px-4 text-right text-gray-500",children:e.playedAt&&!isNaN(t)?t.toLocaleDateString():"\u2014"})})()]},t)}))})]})})]})},Zg=e=>{let{classroomId:t,refreshTrigger:r}=e;const{token:s}=is(),[a,o]=(X(),(0,n.useState)([])),[i,l]=(0,n.useState)([]),[c,d]=(0,n.useState)(!0),[u,h]=(0,n.useState)(null),[m,f]=(0,n.useState)(null),[p,g]=(0,n.useState)(!1),[x,b]=(0,n.useState)(null);(0,n.useEffect)((()=>{if(!t)return;(async()=>{try{d(!0);const e=(await Xn.get(`/activities/classroom/${t}`)).data;o(e);const r=e.filter((e=>"GAME"===e.type));if(r.length>0){const e=r.map((e=>Xn.get(`/games/activity/${e.id}`))),t=(await Promise.all(e)).map((e=>e.data));l(t)}else l([])}catch(e){console.error("Error fetching activities:",e),h("Failed to load activities. Please try again."),st.error("Failed to load activities")}finally{d(!1)}})()}),[t,s,r]),(0,n.useEffect)((()=>{const e=e=>{x&&!e.target.closest(".dropdown-container")&&b(null)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[x]);const y=e=>{switch(e){case"FALLING_GAME":return"Falling Game";case"MULTIPLE_CHOICE":return"Multiple Choice";default:return e}},v=e=>{switch(e){case"FALLING_GAME":return"\ud83c\udfaf";case"MULTIPLE_CHOICE":return"\ud83c\udfae";default:return"\ud83c\udfb2"}};return c?(0,as.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,as.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):u?(0,as.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[(0,as.jsx)("strong",{className:"font-bold",children:"Error! "}),(0,as.jsx)("span",{className:"block sm:inline",children:u})]}):a.length?i.length?(0,as.jsxs)("div",{children:[(0,as.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Game Activities"}),(0,as.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map((e=>(0,as.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[(0,as.jsxs)("div",{className:"bg-blue-500 text-white px-4 py-3 flex justify-between items-center",children:[(0,as.jsxs)("div",{className:"flex items-center",children:[(0,as.jsx)("span",{className:"text-2xl mr-2",children:v(e.type)}),(0,as.jsx)("span",{className:"font-semibold",children:e.name})]}),(0,as.jsx)("div",{className:"flex items-center gap-2",children:(0,as.jsxs)("div",{className:"relative dropdown-container",children:[(0,as.jsx)("button",{onClick:()=>b(x===e.id?null:e.id),className:"p-2 text-gray-300 hover:text-white rounded-full hover:bg-blue-600 transition-colors",children:(0,as.jsx)(Wg,{className:"w-5 h-5"})}),x===e.id&&(0,as.jsx)("div",{className:"absolute right-0 top-full mt-1 w-48 bg-white rounded-md shadow-lg border border-gray-200 z-10",children:(0,as.jsxs)("div",{className:"py-1",children:[(0,as.jsx)("button",{onClick:()=>{(e=>{f(e),g(!0)})(e),b(null)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Preview"}),(0,as.jsx)("button",{onClick:()=>{(async e=>{if(window.confirm("Are you sure you want to delete this game activity? All student scores will be lost."))try{const t=i.find((t=>t.id===e));if(!t||!t.activityId)return void st.error("Could not find the activity for this game");await Xn.delete(`/games/${e}`),await Xn.delete(`/activities/${t.activityId}`),l((t=>t.filter((t=>t.id!==e)))),o((e=>e.filter((e=>e.id!==t.activityId)))),st.success("Game activity deleted successfully")}catch(u){console.error("Error deleting game:",u),st.error("Failed to delete game activity")}})(e.id),b(null)},className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50",children:"Delete"})]})})]})})]}),(0,as.jsx)("div",{className:"p-4",children:(0,as.jsxs)("div",{className:"space-y-1 text-base text-gray-600",children:[(0,as.jsxs)("p",{children:[(0,as.jsx)("span",{className:"font-bold",children:"Type: "})," ",y(e.type)]}),(0,as.jsxs)("p",{children:[(0,as.jsx)("span",{className:"font-bold",children:"Topic: "})," ",e.topic]}),e.instructions&&(0,as.jsx)("p",{className:"text-gray-600 mb-4 line-clamp-2",children:e.instructions})]})})]},e.id)))}),p&&m&&(0,as.jsx)(lc,{isOpen:p,onClose:()=>{g(!1),f(null)},title:`Preview Leaderboard - ${m.name}`,maxWidth:"max-w-4xl",children:(0,as.jsx)(Yg,{gameId:m.id})})]}):(0,as.jsx)("div",{className:"text-center py-8",children:(0,as.jsx)("p",{className:"text-gray-500 mb-4",children:"No game activities available for this lesson yet."})}):(0,as.jsx)("div",{className:"text-center py-8",children:(0,as.jsx)("p",{className:"text-gray-500 mb-4",children:"No activities available for this lesson yet."})})};function Jg(e){return Es({tag:"svg",attr:{version:"1.1",id:"search",x:"0px",y:"0px",viewBox:"0 0 24 24",style:"enable-background:new 0 0 24 24;"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M20.031,20.79c0.46,0.46,1.17-0.25,0.71-0.7l-3.75-3.76c1.27-1.41,2.04-3.27,2.04-5.31\n\t\tc0-4.39-3.57-7.96-7.96-7.96s-7.96,3.57-7.96,7.96c0,4.39,3.57,7.96,7.96,7.96c1.98,0,3.81-0.73,5.21-1.94L20.031,20.79z\n\t\t M4.11,11.02c0-3.84,3.13-6.96,6.96-6.96c3.84,0,6.96,3.12,6.96,6.96c0,3.84-3.12,6.96-6.96,6.96C7.24,17.98,4.11,14.86,4.11,11.02\n\t\tz"},child:[]}]}]})(e)}const Xg=()=>{var e,t,r,s,a,o,i;const{classroomId:l,lessonId:c}=te(),[d,u]=(0,n.useState)(null),[h,m]=(0,n.useState)([]),[f,p]=(0,n.useState)(null),[g,x]=(0,n.useState)(null),[b,y]=(0,n.useState)(!0),[v,w]=(0,n.useState)(!1),[j,N]=(0,n.useState)(null),[k,S]=(0,n.useState)("lessons"),[C,_]=(0,n.useState)(!1),[E,A]=(0,n.useState)(!1),[O,T]=(0,n.useState)(!1),[z,P]=(0,n.useState)(!1),[I,L]=(0,n.useState)(!1),[M,q]=(0,n.useState)({}),[R,D]=(0,n.useState)(0),[F,B]=(0,n.useState)(0),[$,U]=(0,n.useState)(0),[H,W]=(0,n.useState)([]),[Q,V]=(0,n.useState)([]),{user:G}=is(),[K,Y]=(0,n.useState)(null),[Z,J]=(0,n.useState)([]),[X,ee]=(0,n.useState)(!1),[re,ne]=(0,n.useState)(null),[se,ae]=(0,n.useState)(null),[oe,ie]=(0,n.useState)({}),{darkMode:le}=ds(),[ce,de]=(0,n.useState)([]),[ue,he]=(0,n.useState)(!1),[me,fe]=(0,n.useState)([]),[pe,ge]=(0,n.useState)(!1),[xe,be]=(0,n.useState)(""),[ye,ve]=(0,n.useState)(!1),[we,je]=(0,n.useState)("");(0,n.useEffect)((()=>{const e=()=>{const e=window.location.hash;if(e){const t=e.replace("#",""),r={"class-record-tab":"class-record","lessons-tab":"lessons","activities-tab":"activities","students-tab":"students"};r[t]&&S(r[t])}};return e(),window.addEventListener("hashchange",e),()=>{window.removeEventListener("hashchange",e)}}),[]),(0,n.useEffect)((()=>{(async()=>{if(l)try{y(!0);const e=await qs.getClassroomDetails(l);u(e);const t=await yc.getLessonsByClassroomId(l);m(t);let r=c;!r&&t&&t.length>0&&(r=t[t.length-1].id),x(r);const n={};t.forEach((e=>{n[e.id]=e.students?e.students.length:0})),q(n);const s=await qs.getStudentCountInClassroom(l);D(s)}catch(e){console.error("Error fetching classroom data:",e),N("Failed to load classroom data."),u(null),m([])}})()}),[l,c]),(0,n.useEffect)((()=>{"students"===k&&l&&Ne()}),[k,l]);const Ne=async()=>{try{he(!0);const e=await qs.getStudentsInClassroom(l);de(e)}catch(e){console.error("Fetch students error:",e),N(`Failed to load students for ${(null===d||void 0===d?void 0:d.name)||"classroom"}`)}finally{he(!1)}},ke=e=>{var t,r;if(e.profileImage)return e.profileImage.startsWith("http")||e.profileImage.startsWith("data:")?(0,as.jsx)(oc,{src:e.profileImage,alt:`${e.firstName} ${e.lastName}`}):(0,as.jsx)(oc,{src:`data:image/jpeg;base64,${e.profileImage}`,alt:`${e.firstName} ${e.lastName}`});const n=`${(null===(t=e.firstName)||void 0===t?void 0:t[0])||""}${(null===(r=e.lastName)||void 0===r?void 0:r[0])||""}`.toUpperCase();return(0,as.jsx)(ic,{className:"bg-blue-500 text-white",children:n||"?"})},Se=()=>{if(!we.trim())return ce;const e=we.toLowerCase();return ce.filter((t=>{const r=(t.firstName||"").toLowerCase(),n=(t.lastName||"").toLowerCase(),s=(t.username||"").toLowerCase(),a=`${r} ${n}`.toLowerCase();return r.includes(e)||n.includes(e)||s.includes(e)||a.includes(e)}))},Ce=async e=>{if(!e||!l)return;const t=me.find((t=>t.id===e));if(t&&!t.inClassroom){fe((t=>t.map((t=>t.id===e?{...t,inClassroom:!0,isAdding:!0}:t))));try{await qs.addStudentToClassroom(l,e),fe((t=>t.map((t=>t.id===e?{...t,inClassroom:!0,isAdding:!1}:t)))),await Ne();const t=await qs.getStudentCountInClassroom(l);D(t),N(""),st.success("Student added successfully")}catch(r){console.error("Add student error:",r),N(r.message||"Failed to add student to classroom"),st.error(r.message||"Failed to add student to classroom"),fe((t=>t.map((t=>t.id===e?{...t,inClassroom:!1,isAdding:!1}:t))))}}};(0,n.useEffect)((()=>{const e=setTimeout((()=>{xe?(async e=>{if(l&&e.trim()){ge(!0);try{const t=(await qs.searchStudents(e,l)).filter((t=>{const r=e.toLowerCase(),n=(t.firstName||"").toLowerCase(),s=(t.lastName||"").toLowerCase(),a=(t.username||"").toLowerCase(),o=`${n} ${s}`.toLowerCase();return n.includes(r)||s.includes(r)||a.includes(r)||o.includes(r)}));fe(t),N("")}catch(t){console.error("Search students error:",t),N(t.message||"Failed to search for students"),fe([])}finally{ge(!1)}}else fe([])})(xe):fe([])}),500);return()=>clearTimeout(e)}),[xe,l]),(0,n.useEffect)((()=>{(async()=>{const e=await Fc.getActivitiesByClassroom(l);e&&V(e)})()}),[l]),(0,n.useEffect)((()=>{d&&(async()=>{if(!g)return p(null),void(0===h.length&&d&&y(!1));try{w(!0);const e=await yc.getLessonById(g);p(e),e&&e.activities?U(e.activities.length):U(0)}catch(e){console.error(`Error fetching lesson ${g}:`,e),N(`Failed to load lesson: ${e.message}`),p(null)}finally{w(!1),(g||0===h.length&&d)&&y(!1)}})()}),[g,d,F]),(0,n.useEffect)((()=>{(async()=>{if(l)try{const e=await _c.getQuizzesByClassroom(l);W(e)}catch(e){console.error("Error fetching quizzes:",e)}})()}),[l]),(0,n.useEffect)((()=>{if(null===f||void 0===f||!f.id||X||se===f.id)return;(async()=>{try{ee(!0),ne(null);const e=await yc.getLessonCompletionStats(f.id);if(Y(e),ae(f.id),e.studentsRead>0){const e=await yc.getStudentsWhoReadLesson(f.id);J(e)}else J([])}catch(e){ne(e.message||"Failed to fetch lesson statistics"),Y(null),J([])}finally{ee(!1)}})()}),[null===f||void 0===f?void 0:f.id,X,se]),(0,n.useEffect)((()=>{if(null===f||void 0===f||!f.activities)return;const e=f.activities.filter((e=>"QUIZ"===(null===e||void 0===e?void 0:e.type)&&(null===e||void 0===e?void 0:e.id)));e.length>0&&e.forEach((e=>{oe[e.id]||_c.getQuizByActivityId(e.id).then((t=>{ie((r=>({...r,[e.id]:t})))})).catch((t=>{console.error(`[TeacherClassroomPage] Error fetching quiz for activity ${e.id}:`,t)}))}))}),[null===f||void 0===f?void 0:f.id,null===f||void 0===f?void 0:f.activities,oe]),(0,n.useEffect)((()=>{Z.length>0&&Z.slice(-4).forEach((e=>{e.profileImage&&e.profileImage.substring(0,16)}))}),[Z]);const _e=e=>{S(e)},Ee=()=>{_(!0)};return b&&!j?(0,as.jsx)("div",{className:"flex justify-center items-center h-screen",style:{backgroundImage:le?"linear-gradient(180deg, rgba(2,6,23,1) 0%, rgba(3,7,18,1) 100%)":"linear-gradient(135deg, #fef3c7 0%, #fde68a 50%, #f59e0b 100%)",backgroundSize:"cover",backgroundRepeat:"no-repeat"},children:(0,as.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,as.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-yellow-500"}),(0,as.jsx)("p",{className:(le?"text-yellow-300":"text-yellow-800")+" text-lg font-semibold",children:"Hoisting the sails..."})]})}):j?(0,as.jsxs)("div",{style:{color:"red"},children:["Error: ",j]}):d?(0,as.jsxs)("div",{className:"relative px-4 sm:px-6 lg:px-8 pt-16 md:pt-0 lg:py-8 min-h-screen",style:{backgroundImage:le?"linear-gradient(180deg, rgba(2,6,23,1) 0%, rgba(3,7,18,1) 100%)":"linear-gradient(135deg, #fef3c7 0%, #fde68a 50%, #f59e0b 100%)",backgroundSize:"cover",backgroundRepeat:"no-repeat"},children:[(0,as.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,as.jsx)("div",{className:"rounded-2xl shadow-2xl p-6 border-2 backdrop-blur-sm mb-6 "+(le?"bg-[#0b1022]/85 border-yellow-700/40":"bg-[#f5ecd2] border-yellow-300"),style:{boxShadow:le?"0 10px 25px rgba(255, 215, 0, 0.08)":"0 10px 25px rgba(0,0,0,0.08)"},children:(0,as.jsxs)("div",{className:"flex flex-col md:flex-row gap-6",children:[(0,as.jsx)("div",{className:"w-full md:w-1/3",children:(0,as.jsx)("div",{className:"rounded-2xl overflow-hidden border-2 shadow-lg "+(le?"border-yellow-700/40":"border-yellow-300"),children:d.image?(0,as.jsx)("img",{src:`data:image/jpeg;base64,${d.image}`,alt:d.name,className:"w-full h-[280px] object-cover"}):(0,as.jsxs)("div",{className:"w-full h-[280px] flex flex-col items-center justify-center bg-gradient-to-br from-yellow-500 via-amber-500 to-orange-500 relative",children:[(0,as.jsx)(Aa,{className:"text-white text-6xl mb-4"}),(0,as.jsx)("span",{className:"text-2xl text-white font-bold tracking-wide",children:d.shortCode}),(0,as.jsx)("div",{className:"absolute top-2 right-2 text-white/70 text-lg",children:"\u2693"}),(0,as.jsx)("div",{className:"absolute bottom-2 left-2 text-white/70 text-lg",children:"\ud83e\udded"})]})})}),(0,as.jsxs)("div",{className:"w-full md:w-2/3 flex flex-col",children:[(0,as.jsxs)("div",{className:"flex flex-col md:flex-row justify-between",children:[(0,as.jsxs)("div",{children:[(0,as.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,as.jsx)(Vs,{className:(le?"text-yellow-400":"text-yellow-600")+" text-sm"}),(0,as.jsxs)("span",{className:"text-sm font-semibold uppercase tracking-wide "+(le?"text-yellow-300":"text-yellow-700"),children:["Ship Code: ",d.shortCode]})]}),(0,as.jsxs)("div",{className:"flex items-center gap-2",children:[(0,as.jsx)(po,{type:"h1",fontSize:"3xl",weight:"bold",className:""+(le?"text-yellow-200":"text-gray-900"),children:d.name}),(0,as.jsx)("button",{onClick:()=>{T(!0)},className:"transition-colors "+(le?"text-yellow-400 hover:text-yellow-300":"text-yellow-600 hover:text-yellow-700"),title:"Edit ship details",children:(0,as.jsx)($s,{className:"w-5 h-5"})})]})]}),(0,as.jsx)("div",{className:"mt-2 md:mt-0",children:(0,as.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium "+(le?"text-yellow-200":"text-gray-800"),children:[(0,as.jsx)(Aa,{className:le?"text-yellow-400":"text-yellow-600"}),"Captain:"," ",null!==(e=d.teacher)&&void 0!==e&&e.firstName&&null!==(t=d.teacher)&&void 0!==t&&t.lastName?`${d.teacher.firstName} ${d.teacher.lastName}`:(null===(r=d.teacher)||void 0===r?void 0:r.name)||"N/A"]})})]}),(0,as.jsx)("div",{className:"mt-3",children:(0,as.jsx)("p",{className:""+(le?"text-gray-300":"text-gray-700"),children:d.description})}),(0,as.jsxs)("div",{className:"mt-8 grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(0,as.jsxs)("div",{className:"px-4 py-3 rounded-xl border-2 shadow-sm "+(le?"bg-[#0f1428]/80 border-yellow-700/40":"bg-[#fbf4de] border-yellow-300"),children:[(0,as.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,as.jsx)(Ea,{className:le?"text-yellow-400":"text-yellow-600"}),(0,as.jsx)("div",{className:"text-2xl font-extrabold "+(le?"text-yellow-300":"text-yellow-800"),children:h.length})]}),(0,as.jsx)("div",{className:"mt-1 text-xs tracking-wide text-center "+(le?"text-yellow-200/90":"text-yellow-700/80"),children:"Scrolls"})]}),(0,as.jsxs)("div",{className:"px-4 py-3 rounded-xl border-2 shadow-sm "+(le?"bg-[#0f1428]/80 border-yellow-700/40":"bg-[#fbf4de] border-yellow-300"),children:[(0,as.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,as.jsx)(ha,{className:le?"text-yellow-400":"text-yellow-600"}),(0,as.jsx)("div",{className:"text-2xl font-extrabold "+(le?"text-yellow-300":"text-yellow-800"),children:Q.length})]}),(0,as.jsx)("div",{className:"mt-1 text-xs tracking-wide text-center "+(le?"text-yellow-200/90":"text-yellow-700/80"),children:"Quests"})]}),(0,as.jsxs)("div",{className:"px-4 py-3 rounded-xl border-2 shadow-sm "+(le?"bg-[#0f1428]/80 border-yellow-700/40":"bg-[#fbf4de] border-yellow-300"),children:[(0,as.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,as.jsx)(Da,{className:le?"text-yellow-400":"text-yellow-600"}),(0,as.jsx)("div",{className:"text-2xl font-extrabold "+(le?"text-yellow-300":"text-yellow-800"),children:R})]}),(0,as.jsx)("div",{className:"mt-1 text-xs tracking-wide text-center "+(le?"text-yellow-200/90":"text-yellow-700/80"),children:"Crew"})]})]})]})]})}),(0,as.jsxs)("div",{className:"mt-6 tab-content-section",children:[(0,as.jsxs)("div",{className:"mb-6 grid grid-cols-2 md:grid-cols-4 gap-3 sticky top-16 md:static z-10",children:[(0,as.jsxs)("button",{onClick:()=>_e("lessons"),title:"Scrolls (Lessons)","aria-label":"Go to Scrolls",className:`flex items-center justify-between p-4 rounded-xl border-2 transition-all duration-200 shadow-sm hover:shadow-md hover:scale-105 ${le?"bg-[#0b1022]/85 border-yellow-700/40":"bg-[#f5ecd2] border-yellow-300"} ${"lessons"===k?le?"ring-2 ring-yellow-500/50":"ring-2 ring-yellow-400":""}`,children:[(0,as.jsxs)("div",{className:"flex items-center gap-3",children:[(0,as.jsx)(Ea,{className:le?"text-yellow-400":"text-yellow-600"}),(0,as.jsx)("span",{className:"text-sm font-semibold "+(le?"text-yellow-200":"text-yellow-800"),children:"Scrolls"})]}),(0,as.jsx)("span",{className:le?"text-yellow-400":"text-yellow-600",children:"\u2192"})]}),(0,as.jsxs)("button",{onClick:()=>_e("activities"),title:"Quests (Treasure & Games)","aria-label":"Go to Quests",className:`flex items-center justify-between p-4 rounded-xl border-2 transition-all duration-200 shadow-sm hover:shadow-md hover:scale-105 ${le?"bg-[#0b1022]/85 border-yellow-700/40":"bg-[#f5ecd2] border-yellow-300"} ${"activities"===k?le?"ring-2 ring-yellow-500/50":"ring-2 ring-yellow-400":""}`,children:[(0,as.jsxs)("div",{className:"flex items-center gap-3",children:[(0,as.jsx)(ha,{className:le?"text-yellow-400":"text-yellow-600"}),(0,as.jsx)("span",{className:"text-sm font-semibold "+(le?"text-yellow-200":"text-yellow-800"),children:"Quests"})]}),(0,as.jsx)("span",{className:le?"text-yellow-400":"text-yellow-600",children:"\u2192"})]}),(0,as.jsxs)("button",{onClick:()=>_e("class-record"),title:"Treasure Log (Coins & Compass)","aria-label":"Go to Treasure Log",className:`flex items-center justify-between p-4 rounded-xl border-2 transition-all duration-200 shadow-sm hover:shadow-md hover:scale-105 ${le?"bg-[#0b1022]/85 border-yellow-700/40":"bg-[#f5ecd2] border-yellow-300"} ${"class-record"===k?le?"ring-2 ring-yellow-500/50":"ring-2 ring-yellow-400":""}`,children:[(0,as.jsxs)("div",{className:"flex items-center gap-3",children:[(0,as.jsx)(aa,{className:le?"text-yellow-400":"text-yellow-600"}),(0,as.jsx)("span",{className:"text-sm font-semibold "+(le?"text-yellow-200":"text-yellow-800"),children:"Treasure Log"})]}),(0,as.jsx)("span",{className:le?"text-yellow-400":"text-yellow-600",children:"\u2192"})]}),(0,as.jsxs)("button",{onClick:()=>_e("students"),title:"Crew Roster","aria-label":"Go to Crew",className:`flex items-center justify-between p-4 rounded-xl border-2 transition-all duration-200 shadow-sm hover:shadow-md hover:scale-105 ${le?"bg-[#0b1022]/85 border-yellow-700/40":"bg-[#f5ecd2] border-yellow-300"} ${"students"===k?le?"ring-2 ring-yellow-500/50":"ring-2 ring-yellow-400":""}`,children:[(0,as.jsxs)("div",{className:"flex items-center gap-3",children:[(0,as.jsx)(Da,{className:le?"text-yellow-400":"text-yellow-600"}),(0,as.jsx)("span",{className:"text-sm font-semibold "+(le?"text-yellow-200":"text-yellow-800"),children:"Crew"})]}),(0,as.jsx)("span",{className:le?"text-yellow-400":"text-yellow-600",children:"\u2192"})]})]}),(0,as.jsxs)("div",{className:"flex justify-end my-5 gap-2",children:["activities"===k&&(0,as.jsx)(as.Fragment,{children:(0,as.jsxs)("button",{onClick:()=>{A(!0)},title:"Add Game Activity","aria-label":"Add Game Activity",className:"font-semibold flex items-center gap-2 h-10 px-4 rounded-lg transition-all duration-300 hover:scale-105 "+(le?"bg-yellow-600 hover:bg-yellow-700 text-white":"bg-yellow-500 hover:bg-yellow-600 text-white"),children:[(0,as.jsx)(ha,{className:"w-4 h-4"}),"Add Quest"]})}),"lessons"===k&&(0,as.jsxs)("button",{onClick:Ee,title:"Add Lesson","aria-label":"Add Lesson",className:"font-semibold flex items-center gap-2 h-10 px-4 rounded-lg transition-all duration-300 hover:scale-105 "+(le?"bg-yellow-600 hover:bg-yellow-700 text-white":"bg-yellow-500 hover:bg-yellow-600 text-white"),children:[(0,as.jsx)(Ea,{className:"w-4 h-4"}),"Add Scroll"]}),"students"===k&&(0,as.jsxs)("button",{onClick:()=>ve(!0),title:"Add Student","aria-label":"Add Student",className:"font-semibold flex items-center gap-2 h-10 px-4 rounded-lg transition-all duration-300 hover:scale-105 "+(le?"bg-yellow-600 hover:bg-yellow-700 text-white":"bg-yellow-500 hover:bg-yellow-600 text-white"),children:[(0,as.jsx)(Ra,{className:"w-4 h-4"}),"Recruit Crew"]})]}),"lessons"===k&&(0,as.jsxs)("div",{className:"flex flex-col md:flex-row gap-6",children:[(0,as.jsx)("div",{className:"w-full md:w-1/3 rounded-2xl overflow-hidden p-5 border-2 shadow-lg "+(le?"bg-[#0b1022]/85 border-yellow-700/40":"bg-[#f5ecd2] border-yellow-300"),style:{boxShadow:le?"0 10px 25px rgba(255, 215, 0, 0.08)":"0 10px 25px rgba(0,0,0,0.08)"},children:(0,as.jsx)(qc,{lessons:h,currentLessonId:g,onSelectLesson:e=>{x(e)}})}),(0,as.jsxs)("div",{className:"w-full md:w-2/3 rounded-2xl shadow-2xl h-[70vh] sm:h-[75vh] md:h-[calc(85vh)] min-h-[420px] flex flex-col relative border-2 backdrop-blur-sm "+(le?"bg-[#0b1022]/85 border-yellow-700/40":"bg-[#f5ecd2] border-yellow-300"),style:{boxShadow:le?"0 10px 25px rgba(255, 215, 0, 0.08)":"0 10px 25px rgba(0,0,0,0.08)"},children:[v&&(0,as.jsx)("div",{className:"absolute inset-0 flex items-center justify-center z-10 "+(le?"bg-[#0b1022]/90":"bg-[#f5ecd2]/90"),children:(0,as.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,as.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-yellow-500"}),(0,as.jsx)("p",{className:"text-sm "+(le?"text-yellow-300":"text-yellow-800"),children:"Hoisting the scroll..."})]})}),h&&0!==h.length?b&&g&&!f?(0,as.jsx)("main",{className:"lesson-detail-placeholder p-6 rounded-2xl min-h-[300px] flex items-center justify-center shadow-2xl flex-1 border-2 backdrop-blur-sm "+(le?"bg-[#0b1022]/85 border-yellow-700/40":"bg-[#f5ecd2] border-yellow-300"),style:{boxShadow:le?"0 10px 25px rgba(255, 215, 0, 0.08)":"0 10px 25px rgba(0,0,0,0.08)"},children:(0,as.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,as.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-yellow-500"}),(0,as.jsx)("p",{className:"text-lg "+(le?"text-yellow-300":"text-yellow-800"),children:"Unrolling the scroll..."})]})}):f?(0,as.jsxs)("div",{className:"flex flex-col h-full",children:[(0,as.jsx)("div",{className:"p-5 border-b-2 backdrop-blur-sm "+(le?"border-yellow-700/40 bg-[#0f1428]/80":"border-yellow-300 bg-[#fbf4de]/80"),children:(0,as.jsxs)("div",{className:"flex justify-between items-center",children:[(0,as.jsxs)("div",{className:"flex items-center gap-3",children:[(0,as.jsx)(Ea,{className:le?"text-yellow-400":"text-yellow-600"}),(0,as.jsx)(po,{type:"h2",weight:"bold",className:"!text-4xl "+(le?"text-yellow-200":"text-yellow-800"),children:f.title})]}),(0,as.jsx)("button",{onClick:()=>{f?P(!0):N("Please select a lesson first to edit.")},className:"transition-colors p-1 "+(le?"text-yellow-400 hover:text-yellow-300":"text-yellow-600 hover:text-yellow-700"),title:"Edit scroll details",children:(0,as.jsx)($s,{className:"w-6 h-6"})})]})}),(0,as.jsxs)("div",{className:"flex-1 overflow-y-auto p-5",children:[K&&(0,as.jsx)("div",{className:"rounded-2xl p-4 shadow-sm mb-6 border-2 backdrop-blur-sm "+(le?"bg-[#0f1428]/80 border-yellow-700/40":"bg-[#fbf4de]/80 border-yellow-300"),children:(0,as.jsx)("div",{className:"flex items-center justify-between",children:(0,as.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[(0,as.jsxs)("div",{className:"flex items-center gap-2",title:"Crew members who read the scroll",children:[(0,as.jsx)(Ic,{className:"w-4 h-4 "+(le?"text-yellow-400":"text-yellow-600")}),(0,as.jsxs)("span",{className:le?"text-yellow-200":"text-yellow-800",children:[K.studentsRead," / ",K.totalStudents," Read"]})]}),(null===(s=f.activities)||void 0===s?void 0:s.some((e=>"QUIZ"===(null===e||void 0===e?void 0:e.type))))&&(0,as.jsxs)("div",{className:"flex items-center gap-2",title:"Crew members who completed the quest",children:[(0,as.jsx)(Lc,{className:"w-4 h-4 "+(le?"text-yellow-400":"text-yellow-600")}),(0,as.jsxs)("span",{className:le?"text-yellow-200":"text-yellow-800",children:[K.studentsCompletedQuiz," / ",K.totalStudents," Completed Quest"]})]})]})})}),(null===(a=f.contentBlocks)||void 0===a?void 0:a.length)>0?(0,as.jsxs)("div",{className:"content-blocks space-y-8",children:[f.contentBlocks.map((e=>(0,as.jsx)("div",{className:"content-block bg-right-bottom bg-no-repeat",style:{backgroundImage:"url('/images/game-images/dash-path.png')",backgroundSize:"100px"},children:(0,as.jsx)(Vg,{block:e})},e.id))),(null===(o=f.activities)||void 0===o||null===(i=o.filter((e=>"QUIZ"===(null===e||void 0===e?void 0:e.type)&&(null===e||void 0===e?void 0:e.id))))||void 0===i?void 0:i.length)>0&&(0,as.jsx)("div",{className:"mt-8",children:(0,as.jsxs)("div",{className:"quiz-section",children:[(0,as.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,as.jsx)(aa,{className:le?"text-yellow-400":"text-yellow-600"}),(0,as.jsx)(po,{type:"h3",weight:"semibold",className:""+(le?"text-yellow-200":"text-yellow-800"),children:"Scroll Quest"})]}),f.activities.filter((e=>"QUIZ"===(null===e||void 0===e?void 0:e.type)&&(null===e||void 0===e?void 0:e.id))).map((e=>{const t=oe[e.id];return(0,as.jsxs)("div",{className:"mb-6 p-4 rounded-2xl shadow border-2 backdrop-blur-sm "+(le?"bg-[#0f1428]/80 border-yellow-700/40":"bg-[#fbf4de]/80 border-yellow-300"),children:[(0,as.jsx)("h4",{className:"text-lg font-semibold mb-2 "+(le?"text-yellow-200":"text-yellow-800"),children:e.title||(null===t||void 0===t?void 0:t.quizName)||"Quest"}),(0,as.jsx)("p",{className:"mb-4 "+(le?"text-yellow-300/90":"text-yellow-700/90"),children:e.description||(null===t||void 0===t?void 0:t.description)}),(0,as.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4 text-sm",children:[(0,as.jsxs)("div",{children:[(0,as.jsx)("span",{className:"font-medium "+(le?"text-yellow-200":"text-yellow-800"),children:"Time Limit:"})," ",(0,as.jsxs)("span",{className:le?"text-yellow-300":"text-yellow-700",children:[(null===t||void 0===t?void 0:t.timeLimitMinutes)||0," minutes"]})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)("span",{className:"font-medium "+(le?"text-yellow-200":"text-yellow-800"),children:"Quest Type:"})," ",(0,as.jsx)("span",{className:le?"text-yellow-300":"text-yellow-700",children:(null===t||void 0===t?void 0:t.quizType)||"Standard"})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)("span",{className:"font-medium "+(le?"text-yellow-200":"text-yellow-800"),children:"Passing Score:"})," ",(0,as.jsxs)("span",{className:le?"text-yellow-300":"text-yellow-700",children:[(null===t||void 0===t?void 0:t.passingScore)||0,"/",(null===t||void 0===t?void 0:t.overallScore)||0]})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)("span",{className:"font-medium "+(le?"text-yellow-200":"text-yellow-800"),children:"Max Attempts:"})," ",(0,as.jsx)("span",{className:le?"text-yellow-300":"text-yellow-700",children:(null===t||void 0===t?void 0:t.maxAttempts)||"1"})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)("span",{className:"font-medium "+(le?"text-yellow-200":"text-yellow-800"),children:"Available From:"})," ",(0,as.jsx)("span",{className:le?"text-yellow-300":"text-yellow-700",children:null!==t&&void 0!==t&&t.availableFrom?new Date(t.availableFrom).toLocaleString():"Not set"})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)("span",{className:"font-medium "+(le?"text-yellow-200":"text-yellow-800"),children:"Available To:"})," ",(0,as.jsx)("span",{className:le?"text-yellow-300":"text-yellow-700",children:null!==t&&void 0!==t&&t.availableTo?new Date(t.availableTo).toLocaleString():"Not set"})]}),(null===t||void 0===t?void 0:t.attempts)&&(0,as.jsxs)("div",{children:[(0,as.jsx)("span",{className:"font-medium "+(le?"text-yellow-200":"text-yellow-800"),children:"Total Attempts:"})," ",(0,as.jsx)("span",{className:le?"text-yellow-300":"text-yellow-700",children:t.attempts.length||0})]})]}),(0,as.jsxs)("div",{className:"mt-4 p-3 rounded-2xl border-2 backdrop-blur-sm "+(le?"bg-[#0f1428]/60 border-yellow-700/30":"bg-[#fbf4de]/60 border-yellow-300"),children:[(0,as.jsx)("p",{className:"font-medium "+(le?"text-yellow-200":"text-yellow-800"),children:"Quest Status:"}),(0,as.jsxs)("p",{className:le?"text-yellow-300":"text-yellow-700",children:[(null===K||void 0===K?void 0:K.studentsCompletedQuiz)||0," out of ",(null===K||void 0===K?void 0:K.totalStudents)||0," crew members have completed this quest."]})]})]},e.id)}))]})})]}):(0,as.jsxs)("div",{className:"text-center py-8",children:[(0,as.jsx)(Ea,{className:`mx-auto mb-4 ${le?"text-yellow-400":"text-yellow-600"} text-4xl`}),(0,as.jsx)("p",{className:""+(le?"text-yellow-300/90":"text-yellow-700/90"),children:"No content has been added to this scroll yet."})]})]}),Z.length>0&&(0,as.jsxs)("div",{style:{position:"absolute",bottom:24,right:24,display:"flex",alignItems:"center",zIndex:10,background:"rgba(255,255,255,0.95)",borderRadius:"9999px",padding:"4px 8px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)"},children:[Z.length>4&&(0,as.jsxs)("div",{style:{background:"#8b5e34",color:"#fff",borderRadius:"9999px",padding:"2px 8px",fontSize:"14px",fontWeight:500,marginRight:"4px"},children:["+",Z.length-4]}),Z.slice(-4).map((e=>(0,as.jsx)(ac,{className:"h-8 w-8 border-2 border-amber-700 -ml-2 first:ml-0 dark:border-yellow-500",children:ke(e)},e.id)))]})]}):h.length>0&&!g?(0,as.jsx)("main",{className:"lesson-detail-placeholder p-6 rounded-2xl min-h-[300px] flex items-center justify-center shadow-2xl flex-1 border-2 backdrop-blur-sm "+(le?"bg-[#0b1022]/85 border-yellow-700/40":"bg-[#f5ecd2] border-yellow-300"),style:{boxShadow:le?"0 10px 25px rgba(255, 215, 0, 0.08)":"0 10px 25px rgba(0,0,0,0.08)"},children:(0,as.jsx)("p",{className:"text-lg "+(le?"text-yellow-300/90":"text-yellow-700/90"),children:"Please select a scroll to view its details."})}):(0,as.jsx)("main",{className:"lesson-detail-placeholder p-6 rounded-2xl min-h-[300px] flex items-center justify-center shadow-2xl flex-1 border-2 backdrop-blur-sm "+(le?"bg-[#0b1022]/85 border-yellow-700/40":"bg-[#f5ecd2] border-yellow-300"),style:{boxShadow:le?"0 10px 25px rgba(255, 215, 0, 0.08)":"0 10px 25px rgba(0,0,0,0.08)"},children:(0,as.jsxs)("div",{className:"text-center",children:[(0,as.jsx)(Ea,{className:`mx-auto mb-4 ${le?"text-yellow-400":"text-yellow-600"} text-4xl`}),(0,as.jsx)("p",{className:"text-lg mb-4 "+(le?"text-yellow-300/90":"text-yellow-700/90"),children:"This ship currently has no scrolls."})]})}):(0,as.jsx)("main",{className:"lesson-detail-placeholder p-6 rounded-2xl min-h-[300px] flex items-center justify-center shadow-2xl flex-1 border-2 backdrop-blur-sm "+(le?"bg-[#0b1022]/85 border-yellow-700/40":"bg-[#f5ecd2] border-yellow-300"),style:{boxShadow:le?"0 10px 25px rgba(255, 215, 0, 0.08)":"0 10px 25px rgba(0,0,0,0.08)"},children:(0,as.jsxs)("div",{className:"text-center",children:[(0,as.jsx)(Ea,{className:`mx-auto mb-4 ${le?"text-yellow-400":"text-yellow-600"} text-6xl`}),(0,as.jsx)(po,{type:"h1",weight:"bold",size:"3xl",className:"!text-4xl mb-4 "+(le?"text-yellow-200":"text-yellow-800"),children:"Create Your First Scroll"}),(0,as.jsx)("p",{className:"text-lg mb-6 "+(le?"text-yellow-300":"text-yellow-700"),children:"This ship has no scrolls yet. Time to chart your course!"}),(0,as.jsxs)(bs,{variant:"default",size:"sm",rounded:"full",className:"flex items-center gap-2 h-10 "+(le?"bg-yellow-600 hover:bg-yellow-700 text-white":"bg-yellow-500 hover:bg-yellow-600 text-white"),onClick:Ee,children:[(0,as.jsx)(Ea,{className:"w-4 h-4"}),"Create First Scroll"]})]})})]})]}),"activities"===k&&(0,as.jsxs)("div",{className:"p-6 rounded-2xl shadow-2xl border-2 backdrop-blur-sm "+(le?"bg-[#0b1022]/85 border-yellow-700/40":"bg-[#f5ecd2] border-yellow-300"),style:{boxShadow:le?"0 10px 25px rgba(255, 215, 0, 0.08)":"0 10px 25px rgba(0,0,0,0.08)"},children:[(0,as.jsxs)("div",{className:"mb-8",children:[(0,as.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,as.jsx)(aa,{className:le?"text-yellow-400":"text-yellow-600"}),(0,as.jsx)("span",{className:"font-semibold "+(le?"text-yellow-200":"text-yellow-800"),children:"Treasure Quests"})]}),(0,as.jsx)(Qg,{classroomId:l,refreshTrigger:F})]}),(0,as.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,as.jsx)(ha,{className:le?"text-yellow-400":"text-yellow-600"}),(0,as.jsx)("span",{className:"font-semibold "+(le?"text-yellow-200":"text-yellow-800"),children:"Adventure Quests"})]}),(0,as.jsx)(Zg,{classroomId:l,refreshTrigger:F})]}),"class-record"===k&&(0,as.jsx)("div",{className:"p-6 rounded-2xl shadow-2xl border-2 backdrop-blur-sm "+(le?"bg-[#0b1022]/85 border-yellow-700/40":"bg-[#f5ecd2] border-yellow-300"),style:{boxShadow:le?"0 10px 25px rgba(255, 215, 0, 0.08)":"0 10px 25px rgba(0,0,0,0.08)"},children:(0,as.jsx)(Ug,{classroomId:l,teacherId:null===G||void 0===G?void 0:G.id})}),"students"===k&&(0,as.jsxs)("div",{className:"p-6 rounded-2xl shadow-2xl border-2 backdrop-blur-sm "+(le?"bg-[#0b1022]/85 border-yellow-700/40":"bg-[#f5ecd2] border-yellow-300"),style:{boxShadow:le?"0 10px 25px rgba(255, 215, 0, 0.08)":"0 10px 25px rgba(0,0,0,0.08)"},children:[(0,as.jsxs)("div",{className:"mb-6",children:[(0,as.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,as.jsx)(Da,{className:le?"text-yellow-400":"text-yellow-600"}),(0,as.jsxs)(po,{type:"h2",fontSize:"2xl",weight:"bold",className:""+(le?"text-yellow-200":"text-yellow-800"),children:["Crew Roster (",ce.length,")"]})]}),(0,as.jsx)("p",{className:"mb-4 "+(le?"text-yellow-300/90":"text-yellow-700/90"),children:"Manage crew members aboard this ship"}),(0,as.jsxs)("div",{className:"relative w-full md:max-w-md",children:[(0,as.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,as.jsx)(ba,{className:le?"text-yellow-400":"text-yellow-600"})}),(0,as.jsx)(Si,{type:"text",placeholder:"Search crew members...",className:"pl-10 pr-3 py-2 border-2 rounded-lg shadow-sm focus:outline-none focus:ring-2 sm:text-sm "+(le?"bg-[#0f1428] text-gray-100 border-yellow-700/40 focus:ring-yellow-500/50 focus:border-yellow-500":"bg-[#fbf4de] text-gray-900 border-yellow-300 focus:ring-yellow-500/50 focus:border-yellow-500"),value:we,onChange:e=>je(e.target.value)})]})]}),ue?(0,as.jsx)("div",{className:"flex justify-center items-center py-8",children:(0,as.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,as.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-yellow-500"}),(0,as.jsx)("p",{className:"text-sm "+(le?"text-yellow-300":"text-yellow-800"),children:"Gathering the crew..."})]})}):0===ce.length?(0,as.jsxs)("div",{className:"text-center py-8",children:[(0,as.jsx)(Da,{className:`mx-auto mb-4 ${le?"text-yellow-400":"text-yellow-600"} text-4xl`}),(0,as.jsx)("p",{className:"mb-6 text-lg "+(le?"text-yellow-300/90":"text-yellow-700/90"),children:"No crew members aboard this ship yet."}),(0,as.jsxs)(bs,{variant:"default",size:"sm",onClick:()=>ve(!0),className:"flex items-center gap-2 "+(le?"bg-yellow-600 hover:bg-yellow-700 text-white":"bg-yellow-500 hover:bg-yellow-600 text-white"),children:[(0,as.jsx)(Ra,{className:"w-4 h-4"}),"Recruit First Crew Member"]})]}):0===Se().length?(0,as.jsxs)("div",{className:"text-center py-8",children:[(0,as.jsx)(ba,{className:`mx-auto mb-4 ${le?"text-yellow-400":"text-yellow-600"} text-4xl`}),(0,as.jsxs)("p",{className:"mb-4 "+(le?"text-yellow-300/90":"text-yellow-700/90"),children:["No crew members found matching '",we,"' ",(0,as.jsx)("span",{className:"underline "+(le?"text-yellow-400":"text-yellow-600"),onClick:()=>je(""),children:"clear search"})]})]}):(0,as.jsx)("div",{className:"overflow-x-auto",children:(0,as.jsxs)("table",{className:"min-w-full divide-y divide-amber-200 dark:divide-yellow-500/30",children:[(0,as.jsx)("thead",{className:""+(le?"bg-[#0f1428]/80":"bg-[#fbf4de]/80"),children:(0,as.jsxs)("tr",{children:[(0,as.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider "+(le?"text-yellow-200":"text-yellow-800"),children:"Crew Member"}),(0,as.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider "+(le?"text-yellow-200":"text-yellow-800"),children:"Username"}),(0,as.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider "+(le?"text-yellow-200":"text-yellow-800"),children:"Email"}),(0,as.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider "+(le?"text-yellow-200":"text-yellow-800"),children:"Actions"})]})}),(0,as.jsx)("tbody",{className:(le?"bg-[#0b1022]/60":"bg-[#f5ecd2]/60")+" divide-y divide-amber-100 dark:divide-yellow-500/20",children:Se().map((e=>(0,as.jsxs)("tr",{className:"hover:"+(le?"bg-[#0f1428]/80":"bg-[#fbf4de]/80"),children:[(0,as.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,as.jsxs)("div",{className:"flex items-center",children:[(0,as.jsx)(ac,{className:"h-10 w-10 mr-3",children:ke(e)},e.id),(0,as.jsxs)("div",{children:[(0,as.jsxs)("div",{className:"text-sm font-medium "+(le?"text-yellow-200":"text-yellow-800"),children:[e.firstName," ",e.lastName]}),(0,as.jsxs)("div",{className:"text-sm "+(le?"text-yellow-300/80":"text-yellow-700/80"),children:["ID: ",e.id]})]})]})}),(0,as.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm "+(le?"text-yellow-200":"text-yellow-800"),children:["@",e.username]}),(0,as.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm "+(le?"text-yellow-200":"text-yellow-800"),children:e.email}),(0,as.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,as.jsxs)(bs,{variant:"danger",size:"sm",onClick:()=>(async e=>{if(l&&window.confirm("Are you sure you want to remove this student from the classroom?"))try{await qs.removeStudentFromClassroom(l,e),de((t=>t.filter((t=>t.id!==e))));const t=await qs.getStudentCountInClassroom(l);D(t),st.success("Student removed successfully")}catch(t){console.error("Remove student error:",t),N(t.message||"Failed to remove student from classroom"),st.error(t.message||"Failed to remove student from classroom")}})(e.id),className:"flex items-center gap-1 text-red-700 hover:text-red-900",children:[(0,as.jsx)(Ma,{className:"w-3 h-3"}),"Walk the Plank"]})})]},e.id)))})]})})]})]})]}),(0,as.jsx)(Qc,{isOpen:C,onClose:()=>{_(!1)},classroomId:l,onLessonAdded:async e=>{try{const t=await yc.getLessonsByClassroomId(l);m(t),x(e.id)}catch(t){console.error("Error refreshing lessons:",t)}}}),(0,as.jsx)(Yc,{isOpen:O,onClose:()=>{T(!1)},classroom:d,onClassroomUpdated:async e=>{try{u(e)}catch(t){console.error("Error updating classroom details:",t)}}}),(0,as.jsx)(Kc,{isOpen:z,onClose:()=>{P(!1)},lesson:f,classroomId:l,onLessonUpdated:async e=>{try{const t=await yc.getLessonsByClassroomId(l);m(t),e.id===g&&p(e)}catch(t){console.error("Error refreshing lesson data:",t)}}}),(0,as.jsx)(Xc,{isOpen:E,onClose:()=>{A(!1)},classroomId:l,onActivityCreated:async e=>{if(B((e=>e+1)),g)try{const e=await yc.getLessonById(g);p(e),e&&e.activities&&U(e.activities.length)}catch(t){console.error("Error refreshing lesson data:",t)}}}),(0,as.jsx)(Uc,{isOpen:I,onClose:()=>{L(!1)},classroomId:l,onQuizCreated:async e=>{try{L(!1),st.success("Quiz created successfully!"),B((e=>e+1));const e=await _c.getQuizzesByClassroom(l);W(e)}catch(t){console.error("Error updating after quiz creation:",t)}}}),(0,as.jsxs)(lc,{isOpen:ye,onClose:()=>{ve(!1),be(""),fe([]),N("")},title:`Recruit Crew Member for ${(null===d||void 0===d?void 0:d.name)||"Ship"}`,maxWidth:"max-w-lg",children:[j&&ye&&(0,as.jsx)("div",{className:"text-red-500 mb-3",children:j}),(0,as.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,as.jsxs)("div",{children:[(0,as.jsx)(Mi,{htmlFor:"studentSearch",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Search for New Crew Members"}),(0,as.jsxs)("div",{className:"relative",children:[(0,as.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,as.jsx)(Jg,{className:"text-gray-400 dark:text-gray-300"})}),(0,as.jsx)(Si,{type:"text",id:"studentSearch",placeholder:"Search by name or username...",className:"w-full pl-10 pr-3 py-2 border dark:text-gray-300 border-gray-300 dark:border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:xe,onChange:e=>be(e.target.value)})]}),(0,as.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Search by name or username. Results will show crew members not already aboard this ship."})]}),pe?(0,as.jsxs)("div",{className:"text-center py-2 text-sm text-gray-500 dark:text-gray-300 flex items-center justify-center gap-2",children:[(0,as.jsx)("div",{className:"animate-spin rounded-full h-3 w-3 border-t-2 border-b-2 border-yellow-500"}),(0,as.jsx)("span",{children:"Searching the seas..."})]}):xe&&0===me.length?(0,as.jsxs)("div",{className:"text-center py-2 text-sm text-gray-500 dark:text-gray-300 flex flex-col items-center gap-2",children:[(0,as.jsx)(Da,{className:"text-2xl text-gray-400"}),(0,as.jsxs)("span",{children:["No crew members found matching '",xe,"'"]})]}):xe?(0,as.jsx)("div",{className:"mt-2 max-h-60 overflow-y-auto",children:me.map((e=>(0,as.jsxs)("div",{className:"flex justify-between items-center p-3 border-b border-gray-100 "+(e.inClassroom?"":"hover:bg-blue-50 cursor-pointer transition-colors duration-150"),onClick:()=>!e.inClassroom&&Ce(e.id),children:[(0,as.jsxs)("div",{className:"flex items-center gap-3 flex-grow",children:[(0,as.jsx)(ac,{className:"h-8 w-8",children:ke(e)}),(0,as.jsxs)("div",{className:"flex-grow",children:[(0,as.jsxs)("p",{className:"font-medium text-gray-800 dark:text-gray-300",children:[e.firstName," ",e.lastName]}),(0,as.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-300",children:["@",e.username]})]})]}),e.inClassroom?(0,as.jsxs)("span",{className:"text-sm text-green-600 font-medium flex items-center gap-1",children:[(0,as.jsx)(Vs,{className:"w-3 h-3"}),"Already aboard"]}):e.isAdding?(0,as.jsxs)("span",{className:"text-sm text-blue-600 font-medium animate-pulse flex items-center gap-1",children:[(0,as.jsx)(Aa,{className:"w-3 h-3"}),"Recruiting..."]}):(0,as.jsx)("div",{className:"flex items-center",children:(0,as.jsxs)(bs,{onClick:t=>{t.stopPropagation(),Ce(e.id)},variant:"default",size:"sm",className:"text-sm flex items-center gap-1",children:[(0,as.jsx)(Ra,{className:"w-3 h-3"}),"Recruit"]})})]},e.id)))}):(0,as.jsxs)("div",{className:"text-center py-2 text-sm text-gray-500 dark:text-gray-300 flex flex-col items-center gap-2",children:[(0,as.jsx)(ia,{className:"text-2xl text-gray-400"}),(0,as.jsx)("span",{children:"Type to search for new crew members"})]})]})]})]}):(0,as.jsx)("div",{children:"Classroom not found or failed to load."})},ex=e=>{let{classroomId:t}=e;const r=X(),{currentUser:s}=is(),{classroomId:a}=te(),[o,i]=(0,n.useState)([]),[l,c]=(0,n.useState)(!0),[d,u]=(0,n.useState)({}),h=t||a;(0,n.useEffect)((()=>{if(!h)return void c(!1);(async()=>{try{const e=await Jc.getGamesByClassroomId(h);if(i(e||[]),s&&e){const t=e.map((e=>Jc.getGameLeaderboard(e.id).then((t=>{const r=t.filter((e=>e.studentId===s.id)).reduce(((e,t)=>Math.max(e,t.score)),0);return{gameId:e.id,highScore:r}})).catch((()=>({gameId:e.id,highScore:0}))))),r=(await Promise.all(t)).reduce(((e,t)=>{let{gameId:r,highScore:n}=t;return e[r]=n,e}),{});u(r)}}catch(e){console.error("Error fetching games:",e),st.error("Failed to load games"),i([])}finally{c(!1)}})()}),[h,s]);const m=e=>{switch(e){case"FALLING_GAME":return"Falling Game";case"MULTIPLE_CHOICE":return"Multiple Choice";default:return e}},f=e=>{switch(e){case"FALLING_GAME":return"\ud83c\udfaf";case"MULTIPLE_CHOICE":return"\ud83c\udfae";default:return"\ud83c\udfb2"}};return h?l?(0,as.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,as.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):0===o.length?(0,as.jsx)("div",{className:"mt-4  p-6 text-center",children:(0,as.jsx)("p",{className:"text-gray-600",children:"No games available for this classroom yet."})}):(0,as.jsxs)("div",{className:"mt-4",children:[(0,as.jsx)("h2",{className:"text-xl font-bold mb-6",children:"Available Games"}),(0,as.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Array.isArray(o)&&o.map((e=>{return(0,as.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden cursor-pointer transform transition hover:scale-105",onClick:()=>r(`/student/games/${e.id}`),children:[(0,as.jsxs)("div",{className:"bg-blue-900 text-white px-4 py-3 flex justify-between items-center",children:[(0,as.jsx)("span",{className:"text-2xl",children:f(e.type)}),(t=e.level,(0,as.jsx)("span",{className:`px-2 py-1 text-xs rounded-full ${{EASY:"bg-green-100 text-green-800",MEDIUM:"bg-yellow-100 text-yellow-800",HARD:"bg-red-100 text-red-800"}[t]||"bg-gray-100 text-gray-800"}`,children:t}))]}),(0,as.jsxs)("div",{className:"p-4",children:[(0,as.jsx)("h3",{className:"text-lg font-bold mb-2",children:e.name}),(0,as.jsxs)("div",{className:"mt-3 space-y-1 text-base text-gray-600",children:[(0,as.jsxs)("p",{children:[(0,as.jsx)("span",{className:"font-bold",children:"Type: "})," ",m(e.type)]}),(0,as.jsxs)("p",{children:[(0,as.jsx)("span",{className:"font-bold",children:"Topic: "})," ",e.topic]}),e.instructions&&(0,as.jsx)("p",{className:" text-gray-600 mb-4 line-clamp-2",children:e.instructions})]}),(0,as.jsxs)("div",{className:"flex justify-between mt-4",children:[(0,as.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[(0,as.jsx)("span",{className:"mr-1",children:(0,as.jsxs)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:[(0,as.jsx)("path",{d:"M10 2a8 8 0 100 16 8 8 0 000-16zm0 14a6 6 0 110-12 6 6 0 010 12z"}),(0,as.jsx)("path",{d:"M10 4a6 6 0 00-6 6h2a4 4 0 014-4V4z"})]})}),(0,as.jsxs)("span",{children:["Your Best Score: ",d[e.id]>0?d[e.id]:"None yet"]})]}),(0,as.jsx)("button",{className:"px-5 py-1 bg-blue-400  hover:bg-blue-700 text-white rounded-full",children:"Play"})]})]})]},e.id);var t}))})]}):(0,as.jsx)("div",{className:"mt-4  p-6 text-center",children:(0,as.jsx)("p",{className:"text-gray-600",children:"No classroom selected. Please select a classroom to view games."})})};Sp.register(yg,Ng,$p,Fp,Kp,tg,gg,Xp);const tx=e=>{if(!e)return"-";const t=e.split(" ");if(1===t.length)return t[0].charAt(0).toUpperCase()+t[0].slice(1).toLowerCase();const r=t[t.length-1],n=t.slice(0,-1).join(" ");return`${r.charAt(0).toUpperCase()+r.slice(1).toLowerCase()}, ${n.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase())).join(" ")}`},rx=e=>{var t,r,n;let{entries:s}=e;const a=[...(null===s||void 0===s?void 0:s.slice(0,10))||[]].sort(((e,t)=>{if(t.finalScore!==e.finalScore)return t.finalScore-e.finalScore;return(e.fastestTimeSeconds||1/0)-(t.fastestTimeSeconds||1/0)}));return(0,as.jsxs)("div",{className:"space-y-8",children:[(0,as.jsxs)("div",{className:"flex justify-center items-end space-x-2 sm:space-x-4 sm:h-80",children:[(0,as.jsxs)("div",{className:"flex flex-col items-center",children:[(0,as.jsx)("div",{className:"w-8 h-8 sm:w-16 sm:h-16 flex items-center justify-center rounded-full bg-gray-300 mb-2",children:(0,as.jsx)(va,{className:"text-white text-sm sm:text-2xl"})}),(0,as.jsxs)("div",{className:"w-20 h-20 sm:w-48 sm:h-48 bg-white rounded-lg shadow-lg p-2 sm:p-4 flex flex-col items-center justify-center",children:[(0,as.jsx)("h3",{className:"text-xs sm:text-xl font-bold mb-1 sm:mb-2",children:tx(null===(t=a[1])||void 0===t?void 0:t.studentName)}),(0,as.jsx)("p",{className:"text-xs sm:text-sm text-gray-500",children:"#2"})]})]}),(0,as.jsxs)("div",{className:"flex flex-col items-center",children:[(0,as.jsx)("div",{className:"w-8 h-8 sm:w-16 sm:h-16 flex items-center justify-center rounded-full bg-yellow-400 mb-2",children:(0,as.jsx)(qa,{className:"text-white text-sm sm:text-2xl"})}),(0,as.jsxs)("div",{className:"w-20 h-24 sm:w-48 sm:h-56 bg-white rounded-lg shadow-lg p-2 sm:p-4 flex flex-col items-center justify-center",children:[(0,as.jsx)("h3",{className:"text-xs text-center sm:text-xl font-bold mb-1 sm:mb-2",children:tx(null===(r=a[0])||void 0===r?void 0:r.studentName)}),(0,as.jsx)("p",{className:"text-xs sm:text-sm text-gray-500",children:"#1"})]})]}),(0,as.jsxs)("div",{className:"flex flex-col items-center",children:[(0,as.jsx)("div",{className:"w-8 h-8 sm:w-16 sm:h-16 flex items-center justify-center rounded-full bg-amber-600 mb-2",children:(0,as.jsx)(va,{className:"text-white text-sm sm:text-2xl"})}),(0,as.jsxs)("div",{className:"w-20 h-16 sm:w-48 sm:h-40 bg-white rounded-lg shadow-lg p-2 sm:p-4 flex flex-col items-center justify-center",children:[(0,as.jsx)("h3",{className:"text-xs sm:text-xl font-bold mb-1 sm:mb-2",children:tx(null===(n=a[2])||void 0===n?void 0:n.studentName)}),(0,as.jsx)("p",{className:"text-xs sm:text-sm text-gray-500",children:"#3"})]})]})]}),(0,as.jsx)("div",{className:"bg-white rounded-lg shadow-lg overflow-x-auto",children:(0,as.jsxs)("table",{className:"min-w-full",children:[(0,as.jsx)("thead",{className:"bg-gray-50",children:(0,as.jsxs)("tr",{children:[(0,as.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rank"}),(0,as.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"})]})}),(0,as.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(((e,t)=>(0,as.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,as.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t+1}),(0,as.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,as.jsx)("div",{className:"text-sm font-medium text-gray-900",children:tx(null===e||void 0===e?void 0:e.studentName)})})]},(null===e||void 0===e?void 0:e.id)||t)))})]})})]})},nx=e=>{var t;let{attempts:r,quizStatus:n,quizId:s,quizList:a,quizLeaderboards:o,currentUser:i}=e;if(!r||0===r.length){if("available"===n)return(0,as.jsxs)("div",{className:"bg-blue-50 rounded-lg p-6 text-center",children:[(0,as.jsx)("p",{className:"text-blue-800 font-medium",children:"This quiz is available!"}),(0,as.jsx)("button",{className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Take the quiz now"})]});if("unavailable"===n)return(0,as.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 text-center",children:[(0,as.jsx)("p",{className:"text-gray-800",children:"Quiz not available"}),(0,as.jsx)("p",{className:"text-gray-600 mt-2",children:"Score: 0"})]});if("upcoming"===n)return(0,as.jsxs)("div",{className:"bg-yellow-50 rounded-lg p-6 text-center",children:[(0,as.jsx)("p",{className:"text-yellow-800",children:"Quiz will be available soon"}),(0,as.jsx)("p",{className:"text-yellow-600 mt-2",children:"Check back later"})]})}const l=r.filter((e=>e.quizId===s));if(0===l.length)return(0,as.jsx)("div",{className:"bg-gray-50 rounded-lg p-6 text-center",children:(0,as.jsx)("p",{className:"text-gray-800",children:"No attempts for this quiz yet"})});const c=[...l].sort(((e,t)=>e.attemptNumber-t.attemptNumber)),d=l.reduce(((e,t)=>e+(t.score||0)),0)/l.length,u=null===a||void 0===a?void 0:a.find((e=>e.id===s)),h=(null===u||void 0===u?void 0:u.passing_score)||(null===u||void 0===u?void 0:u.passingScore)||0,m=d>=h,f=(null===(t=o[s])||void 0===t?void 0:t.findIndex((e=>e.studentId===i.id)))+1,p=e=>{if(!e)return"N/A";try{const t=new Date(e);if(isNaN(t.getTime()))return"Invalid Date";return t.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch(t){return console.error("[QuizAttemptsTable] Date formatting error:",t),"Invalid Date"}};return(0,as.jsxs)("div",{className:"space-y-6",children:[(0,as.jsx)("div",{className:"bg-white rounded-lg shadow-lg overflow-x-auto",children:(0,as.jsxs)("table",{className:"min-w-full",children:[(0,as.jsx)("thead",{className:"bg-gray-50",children:(0,as.jsxs)("tr",{children:[(0,as.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Attempt #"}),(0,as.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Score"}),(0,as.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time Spent (minutes)"}),(0,as.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,as.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"})]})}),(0,as.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map((e=>{const t=e.timeSpentSeconds||0,r=`${Math.floor(t/60)}.${(t%60).toString().padStart(2,"0")}`;return(0,as.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,as.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:e.attemptNumber||"-"}),(0,as.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:e.score||0}),(0,as.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:r}),(0,as.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:(0,as.jsx)("span",{className:"px-2 py-1 rounded-full text-xs "+(e.passed?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"),children:e.passed?"Passed":"Keep Learning"})}),(0,as.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:p(e.completedAt)})]},e.id)}))})]})}),(0,as.jsxs)("div",{className:"bg-blue-100 rounded-lg p-4",children:[(0,as.jsx)("h3",{className:"text-lg font-medium text-blue-800 mb-2",children:"Final Score"}),(0,as.jsxs)("div",{className:"flex items-center justify-between",children:[(0,as.jsxs)("p",{className:"text-2xl font-bold text-blue-600",children:[d,m&&(0,as.jsx)("span",{className:"ml-2 text-sm font-normal text-green-600",children:"(Passed)"})]}),f&&f<=10&&(0,as.jsxs)("span",{className:"text-sm font-medium text-gray-600",children:["Rank: #",f]})]}),h>0&&(0,as.jsxs)("p",{className:"text-sm text-gray-600 mt-2",children:["Passing Score: ",h]})]}),(0,as.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,as.jsx)("h3",{className:"text-sm font-medium text-gray-800 mb-2",children:"Score Calculation Formula:"}),(0,as.jsx)("p",{className:"text-sm text-gray-600",children:"Final Score = Highest Score / Number of Attempts"}),(0,as.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:"Note: In case of tied scores, ranking is determined by completion time (faster completion ranks higher)"})]})]})},sx=e=>{let{quizData:t}=e;const[r,s]=(0,n.useState)(!1);(0,n.useEffect)((()=>{const e=()=>{s(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]);const a=t.map((e=>{const t=e.attempts||[];let r=e.overallScore||0;if(0===r){for(const e of t){if(e.totalPoints){r=e.totalPoints;break}if(e.totalQuestions){r=e.totalQuestions;break}}0===r&&(r=e.totalPoints||e.totalQuestions||10)}const n=t.reduce(((e,t)=>e+(t.score||0)),0),s=t.length>0?n/t.length:0,a=t.reduce(((e,t)=>Math.max(e,t.score||0)),0),o=r>0?s/r*100:0,i=r>0?a/r*100:0;return{quizName:e.quizName||"Unnamed Quiz",averageScore:Number(o.toFixed(1)),highestScorePercentage:Number(i.toFixed(1)),rawAverageScore:Number(s.toFixed(1)),rawHighestScore:a,attempts:t.length,totalPoints:r}})),o={labels:a.map((e=>function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return e.length<=t?e:`${e.substring(0,t)}...`}(e.quizName))),datasets:[{type:"bar",label:"Highest Score",data:a.map((e=>e.highestScorePercentage)),backgroundColor:e=>{const t=e.chart.ctx;if(!t)return"rgba(196, 181, 253, 0.7)";const r=t.createLinearGradient(0,e.chart.height,0,0);return r.addColorStop(0,"rgba(196, 181, 253, 0.6)"),r.addColorStop(1,"rgba(196, 181, 253, 0.9)"),r},borderColor:"rgba(196, 181, 253, 1)",barPercentage:.5,categoryPercentage:.5},{type:"bar",label:"Average Score",data:a.map((e=>e.averageScore)),backgroundColor:e=>{const t=e.chart.ctx;if(!t)return"rgba(125, 211, 252, 0.7)";const r=t.createLinearGradient(0,e.chart.height,0,0);return r.addColorStop(0,"rgba(125, 211, 252, 0.6)"),r.addColorStop(1,"rgba(125, 211, 252, 0.9)"),r},borderColor:"rgba(125, 211, 252, 1)",barPercentage:.5,categoryPercentage:.5},{type:"line",label:"Performance Trend",data:a.map((e=>e.averageScore)),borderColor:"rgb(30, 58, 138)",backgroundColor:"rgb(30, 58, 138)",tension:0,fill:!1,pointBackgroundColor:"rgb(30, 58, 138)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgb(30, 58, 138)",pointRadius:6,pointHoverRadius:8,pointBorderWidth:2}]},i={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!1},tooltip:{enabled:!0,backgroundColor:"rgba(255, 255, 255, 0.9)",titleFont:{size:14,weight:"bold"},bodyFont:{size:12},titleColor:"#333",bodyColor:"#666",borderColor:"rgba(0,0,0,0.1)",borderWidth:1,padding:15,displayColors:!0,callbacks:{title:function(e){return e[0].label},label:function(e){const t=e.dataset.label||"",r=e.parsed.y;if("line"===e.dataset.type)return`${t}: ${r}%`;const n=a[e.dataIndex];return t.includes("Highest")?`Highest Score: ${n.rawHighestScore}/${n.totalPoints} (${r}%)`:`Average Score: ${n.rawAverageScore}/${n.totalPoints} (${r}%)`},afterBody:function(e){return`\nAttempts: ${a[e[0].dataIndex].attempts}`}}}},scales:{y:{beginAtZero:!0,max:100,title:{display:!1},grid:{drawBorder:!1,color:"rgba(200, 200, 200, 0.3)"},ticks:{padding:10,stepSize:10,color:"#6b7280"}},x:{title:{display:!1},grid:{display:!1},ticks:{autoSkip:!0,maxRotation:r?45:0,minRotation:r?45:0,color:"#6b7280"}}},interaction:{mode:"index",intersect:!1}};return t&&0!==t.length?(0,as.jsxs)("div",{className:"bg-white rounded-lg shadow-lg py-4 sm:py-8",style:{backgroundImage:"radial-gradient(rgba(0, 0, 0, 0.1) 0.5px, transparent 0.5px)",backgroundSize:"10px 10px"},children:[(0,as.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4 px-4 sm:px-6",children:"Overall Performance"}),(0,as.jsx)("div",{className:"h-80 pr-4",children:(0,as.jsx)(Rg,{type:"bar",data:o,options:i})}),(0,as.jsxs)("div",{className:"mt-6 text-sm text-gray-600 px-4 sm:px-6",children:[(0,as.jsx)("p",{children:"This graph shows your average score across all attempts for each quiz."}),(0,as.jsx)("p",{className:"mt-2",children:"Hover over points to see detailed information including number of attempts and highest score achieved."})]})]}):(0,as.jsx)("div",{className:"bg-gray-50 rounded-lg p-6 text-center",children:(0,as.jsx)("p",{className:"text-gray-800",children:"No quiz data available"})})},ax=e=>{var t;let{classroomId:r}=e;const s=X(),{currentUser:a}=is(),{classroomId:o}=te(),[i,l]=(0,n.useState)("overall"),[c,d]=(0,n.useState)("overall"),[u,h]=(0,n.useState)([]),[m,f]=(0,n.useState)([]),[p,g]=(0,n.useState)({}),[x,b]=(0,n.useState)([]),[y,v]=(0,n.useState)(null),[w,j]=(0,n.useState)(!0),[N,k]=(0,n.useState)(null),[S,C]=(0,n.useState)(!1),_=r||o;(0,n.useEffect)((()=>{if(a)return _?void E():(k("No classroom ID provided"),void j(!1));s("/login")}),[_,i,c,a,s]);const E=async()=>{try{if(j(!0),k(null),"overall"===i){const e=await wc(_);h(e||[]);const t=await Nc(_);f(t||[]);const r={};for(const n of t)try{const e=await jc(n.id);r[n.id]=e||[]}catch(N){console.error(`[Leaderboard] Error loading leaderboard for quiz ${n.id}:`,N),r[n.id]=[]}g(r)}else if("mystatus"===i){const e=await Sc(_);v(e||{averageScore:0,totalQuizzes:0,totalAvailableQuizzes:0,notTakenQuizzes:0,passedQuizzes:0,failedQuizzes:0,currentRank:"-",bestScore:0,recentQuizzes:[],improvement:0,streak:0})}else if("myquizzes"===i){const e=await Nc(_),t=(await kc(a.id)).reduce(((e,t)=>(e[t.quizId]||(e[t.quizId]=[]),e[t.quizId].push(t),e)),{}),r=e.map((e=>{const r=t[e.id]||[];return{...e,attempts:r,status:e.status||"unavailable"}}));b(r),f(e)}}catch(N){var e;console.error("[Leaderboard] Error loading data:",N),"User not authenticated"===N.message||401===(null===(e=N.response)||void 0===e?void 0:e.status)?s("/login"):k(`Failed to load data: ${N.message||"Unknown error"}`)}finally{j(!1)}};if(w)return(0,as.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,as.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})});if(N)return(0,as.jsx)("div",{className:"text-center text-red-600 p-4",children:N});return(0,as.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,as.jsx)(po,{type:"h2",fontSize:"2xl",weight:"bold",className:"text-center mb-8",children:"Leaderboard"}),(0,as.jsx)("div",{className:"flex justify-center mb-8",children:(0,as.jsxs)("nav",{className:"flex space-x-4","aria-label":"Tabs",children:[(0,as.jsx)("button",{onClick:()=>l("overall"),className:"px-4 py-2 text-sm font-medium rounded-sm "+("overall"===i?"bg-blue-900 text-gray-50":"text-gray-500  hover:text-gray-700"),children:"Overall"}),(0,as.jsx)("button",{onClick:()=>l("myquizzes"),className:"px-4 py-2 text-sm font-medium rounded-sm "+("myquizzes"===i?"bg-blue-900 text-gray-50":"text-gray-500  hover:text-gray-700"),children:"My Quizzes"})]})}),(0,as.jsx)("div",{className:"flex justify-end mb-6",children:(0,as.jsxs)("div",{className:"relative",children:[(0,as.jsxs)("button",{onClick:()=>C(!S),className:"flex items-center px-4 py-2 bg-white border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,as.jsxs)("div",{className:"flex items-center",children:[(0,as.jsx)(Qs,{className:"mr-2 h-4 w-4"}),(()=>{if("overall"===c)return"overall"===i?"Overall Quizzes":"Overall";const e=m.find((e=>e.id.toString()===c));return(null===e||void 0===e?void 0:e.quizName)||"Select Quiz"})()]}),(0,as.jsx)(ta,{className:"ml-2 h-4 w-4"})]}),S&&(0,as.jsx)("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-md shadow-lg z-10 border border-gray-200",children:(0,as.jsxs)("div",{className:"py-1",children:[(0,as.jsx)("button",{onClick:()=>{d("overall"),C(!1)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"overall"===i?"Overall Quizzes":"Overall"}),m.map((e=>(0,as.jsx)("button",{onClick:()=>{d(e.id.toString()),C(!1)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:e.quizName},e.id)))]})})]})}),"overall"===i&&(0,as.jsx)("div",{children:"overall"===c?(0,as.jsx)(rx,{entries:u}):(0,as.jsx)(rx,{entries:p[c]||[]})}),"myquizzes"===i&&(0,as.jsx)("div",{children:"overall"===c?(0,as.jsx)(sx,{quizData:x||[]}):(0,as.jsx)(nx,{attempts:(null===x||void 0===x?void 0:x.flatMap((e=>e.attempts||[])))||[],quizStatus:(null===m||void 0===m||null===(t=m.find((e=>{var t;return(null===e||void 0===e||null===(t=e.id)||void 0===t?void 0:t.toString())===c})))||void 0===t?void 0:t.status)||"unavailable",quizId:parseInt(c),quizList:m,quizLeaderboards:p,currentUser:a})})]})},ox=Pc("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),ix=Pc("ship",[["path",{d:"M12 10.189V14",key:"1p8cqu"}],["path",{d:"M12 2v3",key:"qbqxhf"}],["path",{d:"M19 13V7a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v6",key:"qpkstq"}],["path",{d:"M19.38 20A11.6 11.6 0 0 0 21 14l-8.188-3.639a2 2 0 0 0-1.624 0L3 14a11.6 11.6 0 0 0 2.81 7.76",key:"7tigtc"}],["path",{d:"M2 21c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1s1.2 1 2.5 1c2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"1924j5"}]]),lx=Pc("sword",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]]),cx=Pc("crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]),dx=()=>{var e,t,r,s;const{classroomId:a,lessonId:o}=te(),i=Z(),{currentUser:l}=is(),{darkMode:c,isInitialized:d}=ds(),[u,h]=(0,n.useState)(null),[m,f]=(0,n.useState)([]),[p,g]=(0,n.useState)(null),[x,b]=(0,n.useState)(null),[y,v]=(0,n.useState)(!0),[w,j]=(0,n.useState)(!1),[N,k]=(0,n.useState)(null),[S,C]=(0,n.useState)(null),[_,E]=(0,n.useState)([]),[A,O]=(0,n.useState)({passedQuizzes:0,notTakenQuizzes:0}),[T,z]=(0,n.useState)(!1),[P,I]=(0,n.useState)(null),[L,M]=(0,n.useState)(!1),[q,R]=(0,n.useState)(new Set),[D,F]=(0,n.useState)({}),B=async()=>{if(a)try{const e=await yc.getLessonsByClassroomId(a);f(e)}catch(e){k("Failed to load lessons."),f([])}},$=async()=>{if(!m.length||null===l||void 0===l||!l.id)return null;try{var e;for(let e=0;e<m.length;e++){var t;const r=m[e],n=await yc.getLessonCompletionStatus(r.id,l.id);if(null===(t=r.activities)||void 0===t?void 0:t.some((e=>"QUIZ"===e.type))){if(!n.quizCompleted||!n.quizPassed)return r.id}else if(!n.contentRead)return r.id}return(null===(e=m[m.length-1])||void 0===e?void 0:e.id)||null}catch(n){var r;return console.error("Error finding last unlocked lesson:",n),(null===(r=m[0])||void 0===r?void 0:r.id)||null}};(0,n.useEffect)((()=>{var e;null!==(e=i.state)&&void 0!==e&&e.activeTab?C(i.state.activeTab):i.state&&!i.state.activeTab&&C(null)}),[i.state]),(0,n.useEffect)((()=>{const e=()=>{const e=window.location.hash;if(e){const t=e.replace("#",""),r={"leaderboard-tab":"leaderboard","lessons-tab":"lessons","activities-tab":"activities"};r[t]&&C(r[t])}else C(null)};return e(),window.addEventListener("hashchange",e),()=>{window.removeEventListener("hashchange",e)}}),[]),(0,n.useEffect)((()=>{(async()=>{if(a)try{v(!0);const t=await qs.getClassroomDetails(a);h(t),await B();const r=await Fc.getActivitiesByClassroom(a);r&&E(r);try{const e=await Sc(a);O({passedQuizzes:e.passedQuizzes||0,notTakenQuizzes:e.notTakenQuizzes||0})}catch(e){console.error("Error fetching quiz statistics:",e)}let n=o;!n&&m.length>0&&(n=await $()),b(n)}catch(t){console.error("Error fetching classroom data:",t),k("Failed to load classroom data."),h(null),f([]),E([])}finally{v(!1)}})()}),[a,o]),(0,n.useEffect)((()=>{u&&(async()=>{if(x)try{j(!0);const e=await yc.getLessonById(x);g(e)}catch(e){console.error(`Error fetching lesson ${x}:`,e),k(`Failed to load lesson: ${e.message}`),g(null)}finally{j(!1)}else g(null)})()}),[x,u]),(0,n.useEffect)((()=>{null!==p&&void 0!==p&&p.id&&null!==l&&void 0!==l&&l.id&&yc.getLessonCompletionStatus(p.id,l.id).then((e=>{var t;let r=e.quizPassed;if(void 0===r||null===r){var n,s;const t=null===(n=p.activities)||void 0===n?void 0:n.find((e=>"QUIZ"===e.type));if(t&&null!==(s=D[t.id])&&void 0!==s&&s.quiz&&void 0!==e.quizScore){const n=D[t.id].quiz;r=e.quizScore>=n.passingScore}}const a={...e,quizPassed:r};I(a);const o=null===(t=p.activities)||void 0===t?void 0:t.some((e=>"QUIZ"===e.type));e.contentRead?(o&&!e.quizCompleted?M(!0):o&&e.quizCompleted&&r?H():o||H(),z(!0)):setTimeout((()=>{const e=document.querySelector(".content-blocks");if(e){e.scrollHeight<=e.clientHeight&&U()}}),100)})).catch((e=>{console.error("Error fetching completion status:",e)}))}),[null===p||void 0===p?void 0:p.id,null===l||void 0===l?void 0:l.id,D]),(0,n.useEffect)((()=>{if(null===p||void 0===p||!p.id||null===l||void 0===l||!l.id)return;const e=setInterval((async()=>{try{const r=await yc.getLessonCompletionStatus(p.id,l.id);if(r.quizCompleted&&(null===P||void 0===P||!P.quizCompleted)){let n=r.quizPassed;if(void 0===n||null===n){var e,t;const s=null===(e=p.activities)||void 0===e?void 0:e.find((e=>"QUIZ"===e.type));if(s&&null!==(t=D[s.id])&&void 0!==t&&t.quiz&&void 0!==r.quizScore){const e=D[s.id].quiz;n=r.quizScore>=e.passingScore}}const s={...r,quizPassed:n};I(s),n&&H()}}catch(r){console.error("Error checking quiz completion:",r)}}),1e4);return()=>clearInterval(e)}),[null===p||void 0===p?void 0:p.id,null===l||void 0===l?void 0:l.id,null===P||void 0===P?void 0:P.quizCompleted,D]),(0,n.useEffect)((()=>{var e;null!==(e=i.state)&&void 0!==e&&e.quizCompleted&&(void 0!==i.state.score&&null!==p&&void 0!==p&&p.id?Q(i.state.score):console.error("Quiz completion state missing required data:",{score:i.state.score,lessonId:null===p||void 0===p?void 0:p.id}),window.history.replaceState({},document.title))}),[i.state,p]);const U=()=>{!p||null!==P&&void 0!==P&&P.contentRead||yc.markLessonContentAsRead(p.id,l.id).then((e=>{var t;I((e=>({...e,contentRead:!0}))),z(!0);(null===(t=p.activities)||void 0===t?void 0:t.some((e=>"QUIZ"===e.type)))?M(!0):H(),setTimeout((()=>{window.location.reload()}),2e3)})).catch((e=>{var t;console.error("Error marking content as read:",e),I((e=>({...e,contentRead:!0}))),z(!0);(null===(t=p.activities)||void 0===t?void 0:t.some((e=>"QUIZ"===e.type)))?M(!0):H(),setTimeout((()=>{window.location.reload()}),2e3)}))};(0,n.useEffect)((()=>{if(null!==p&&void 0!==p&&p.contentBlocks&&(null===P||void 0===P||!P.contentRead)){const e=setTimeout((()=>{const e=document.querySelector(".content-blocks");if(e){e.scrollHeight<=e.clientHeight+10&&U()}}),500);return()=>clearTimeout(e)}}),[null===p||void 0===p?void 0:p.contentBlocks,null===P||void 0===P?void 0:P.contentRead]),(0,n.useEffect)((()=>{(async()=>{if(m.length&&null!==l&&void 0!==l&&l.id)try{const t=new Set;for(let r=0;r<m.length;r++){var e;const n=m[r];if(0===r){t.add(n.id);continue}const s=m[r-1],a=await yc.getLessonCompletionStatus(s.id,l.id),o=null===(e=s.activities)||void 0===e?void 0:e.some((e=>"QUIZ"===e.type));let i=!1;if(i=o?a.quizCompleted&&a.quizPassed:a.contentRead,!i)break;t.add(n.id)}R(t)}catch(t){console.error("Error initializing unlocked lessons:",t);const e=new Set;m.length>0&&e.add(m[0].id),R(e)}})()}),[m,null===l||void 0===l?void 0:l.id]),(0,n.useEffect)((()=>{(async()=>{if(m.length>0&&!x&&null!==l&&void 0!==l&&l.id){const e=await $();e&&b(e)}})()}),[m,x,null===l||void 0===l?void 0:l.id]);const H=()=>{const e=m.findIndex((e=>e.id===p.id));if(e<m.length-1){const t=m[e+1];R((e=>{const r=new Set([...e]);return r.add(t.id),r}))}},W=e=>{C(e)},Q=e=>{yc.markLessonQuizAsCompleted(p.id,l.id,e).then((t=>{var r,n;const s=null===(r=p.activities)||void 0===r?void 0:r.find((e=>"QUIZ"===e.type));let a=!1;if(s&&null!==(n=D[s.id])&&void 0!==n&&n.quiz){const t=D[s.id].quiz;a=e>=t.passingScore}I((t=>({...t,quizCompleted:!0,quizScore:e,quizPassed:a,quizCompletedAt:(new Date).toISOString()}))),a&&H(),B()})).catch((e=>{console.error("Error marking lesson quiz as completed:",e)}))};(0,n.useEffect)((()=>{(async()=>{if(null!==p&&void 0!==p&&p.activities&&null!==l&&void 0!==l&&l.id)try{const t=p.activities.filter((e=>"QUIZ"===e.type)),r={};for(const n of t)try{const e=await _c.getQuizByActivityId(n.id);if(e){const t=(await _c.getQuizAttemptsByStudent(l.id)).filter((t=>t.quizId===e.id)).sort(((e,t)=>new Date(t.completedAt)-new Date(e.completedAt)));r[n.id]={quiz:{...e,quizName:e.quizName,timeLimitMinutes:e.timeLimitMinutes,totalItems:e.totalItems,passingScore:e.passingScore,overallScore:e.overallScore,maxAttempts:e.maxAttempts,repeatable:e.repeatable,availableFrom:e.availableFrom,availableTo:e.availableTo},attempts:t||[],lastAttempt:(null===t||void 0===t?void 0:t.length)>0?t[0]:null}}}catch(e){console.error(`Error fetching quiz data for activity ${n.id}:`,e)}F(r)}catch(e){console.error("Error fetching quiz attempts:",e)}})()}),[null===p||void 0===p?void 0:p.activities,null===l||void 0===l?void 0:l.id]);const V=async e=>{var t;if(null===(t=p.activities)||void 0===t?void 0:t.find((t=>t.id===e&&"QUIZ"===t.type)))try{const t=await _c.getQuizByActivityId(e);if(!t)throw new Error("Quiz not found");const r=await _c.createQuizAttempt(t.id,l.id);window.location.href=`/student/quizzes/${t.id}/attempt/${r.id}`}catch(N){var r;if(console.error("Error starting quiz:",N),500===(null===(r=N.response)||void 0===r?void 0:r.status)){var n,s;const t=(null===(n=N.response)||void 0===n||null===(s=n.data)||void 0===s?void 0:s.message)||N.message;t.includes("cannot be attempted more than once")?alert("You have already completed this quiz. This quiz cannot be taken again."):t.includes("Maximum attempts reached")?alert("You have reached the maximum number of attempts for this quiz."):t.includes("not yet available")?alert("This quiz is not yet available."):t.includes("no longer available")?alert("This quiz is no longer available."):alert("Failed to start quiz. Please try again later.")}else alert("Failed to start quiz. Please try again later.")}else console.error(`Quiz activity ${e} not found in lesson`)};return(0,n.useEffect)((()=>{S&&setTimeout((()=>{const e=document.querySelector(".tab-content-section");e&&e.scrollIntoView({behavior:"smooth",block:"start"})}),100)}),[S]),y&&!N?(0,as.jsxs)("div",{className:`min-h-screen transition-colors duration-300 ${c?"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900":"bg-gradient-to-br from-amber-50 via-yellow-50 to-orange-100"} relative overflow-hidden`,children:[(0,as.jsxs)("div",{className:"absolute inset-0 opacity-10",children:[(0,as.jsx)("div",{className:"absolute top-10 left-10 text-6xl",children:"\u2693"}),(0,as.jsx)("div",{className:"absolute top-20 right-20 text-5xl",children:"\ud83d\uddfa\ufe0f"}),(0,as.jsx)("div",{className:"absolute bottom-20 left-20 text-5xl",children:"\ud83c\udff4\u200d\u2620\ufe0f"}),(0,as.jsx)("div",{className:"absolute bottom-10 right-10 text-6xl",children:"\u2694\ufe0f"})]}),(0,as.jsx)("div",{className:"flex flex-col justify-center items-center h-screen relative z-10",children:(0,as.jsxs)("div",{className:"flex flex-col items-center gap-6",children:[(0,as.jsxs)("div",{className:"relative",children:[(0,as.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-amber-200 border-t-amber-600"}),(0,as.jsx)("div",{className:"absolute inset-0 rounded-full border-4 border-transparent animate-spin border-t-amber-400",style:{animationDirection:"reverse",animationDuration:"1.5s"}})]}),(0,as.jsxs)("div",{className:"text-center",children:[(0,as.jsx)("h3",{className:"text-xl font-semibold mb-2 "+(c?"text-amber-300":"text-amber-800"),children:"\u2693 Preparing Your Pirate Adventure"}),(0,as.jsx)("p",{className:""+(c?"text-amber-400":"text-amber-600"),children:"Charting the course to your classroom..."})]})]})})]}):N?(0,as.jsx)("div",{className:`min-h-screen transition-colors duration-300 ${c?"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900":"bg-gradient-to-br from-amber-50 via-yellow-50 to-orange-100"} flex items-center justify-center`,children:(0,as.jsxs)("div",{className:"text-center p-8 rounded-2xl shadow-xl border-2 transition-colors duration-300 "+(c?"bg-gray-800/80 border-red-500/50":"bg-white/80 border-amber-200"),children:[(0,as.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udea8"}),(0,as.jsx)("h3",{className:"text-2xl font-bold mb-2 "+(c?"text-red-400":"text-red-600"),children:"Ahoy! We've Hit Rough Waters!"}),(0,as.jsxs)("p",{className:""+(c?"text-red-300":"text-red-500"),children:["Error: ",N]})]})}):u?(0,as.jsxs)("div",{className:`min-h-screen transition-colors duration-300 ${c?"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900":"bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50"} relative overflow-hidden`,children:[(0,as.jsxs)("div",{className:"absolute inset-0 opacity-5",children:[(0,as.jsx)("div",{className:"absolute top-20 left-10 text-8xl",children:"\ud83d\uddfa\ufe0f"}),(0,as.jsx)("div",{className:"absolute top-40 right-20 text-6xl",children:"\u2693"}),(0,as.jsx)("div",{className:"absolute bottom-40 left-20 text-7xl",children:"\ud83c\udff4\u200d\u2620\ufe0f"}),(0,as.jsx)("div",{className:"absolute bottom-20 right-10 text-8xl",children:"\u2694\ufe0f"}),(0,as.jsx)("div",{className:"absolute top-1/2 left-1/4 text-5xl",children:"\ud83c\udff4"}),(0,as.jsx)("div",{className:"absolute top-1/3 right-1/3 text-6xl",children:"\ud83d\uddfa\ufe0f"}),(0,as.jsx)("div",{className:"absolute bottom-1/3 left-1/2 text-5xl",children:"\u2693"})]}),(0,as.jsx)("div",{className:"relative z-10 px-4 sm:px-6 lg:px-8 py-8",children:(0,as.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,as.jsx)("div",{className:"relative mb-8",children:(0,as.jsx)("div",{className:"backdrop-blur-sm rounded-2xl shadow-xl border p-6 sm:p-8 transition-colors duration-300 "+(c?"bg-gray-800/80 border-gray-700/20":"bg-white/80 border-white/20"),children:(0,as.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[(0,as.jsx)("div",{className:"flex-1",children:(0,as.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,as.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center shadow-lg",children:(0,as.jsx)(ya,{className:"text-white text-xl"})}),(0,as.jsxs)("div",{children:[(0,as.jsx)(po,{type:"h1",fontSize:"4xl",weight:"bold",className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600",children:(null===u||void 0===u?void 0:u.name)||"Classroom Adventure"}),(0,as.jsx)("p",{className:"text-sm mt-1 transition-colors duration-300 "+(c?"text-gray-300":"text-gray-600"),children:"Embark on your learning journey through treasure-filled waters!"})]})]})}),(0,as.jsx)("div",{className:"flex flex-col sm:flex-row items-end sm:items-center gap-3",children:(null===u||void 0===u?void 0:u.teacher)&&(0,as.jsxs)("div",{className:"flex items-center gap-2 text-sm px-4 py-2 rounded-full shadow-sm transition-colors duration-300 "+(c?"text-blue-300 bg-blue-900/30 border border-blue-700/50":"text-blue-700 bg-blue-100 border border-blue-200"),children:[(0,as.jsx)(ix,{className:"w-4 h-4"}),(0,as.jsxs)("span",{className:"font-medium",children:["Captain: ",null!==(e=u.teacher)&&void 0!==e&&e.firstName&&null!==(t=u.teacher)&&void 0!==t&&t.lastName?`${u.teacher.firstName} ${u.teacher.lastName}`:(null===(r=u.teacher)||void 0===r?void 0:r.name)||"N/A"]})]})})]})})}),(0,as.jsx)("div",{className:"mb-8",children:(0,as.jsxs)("div",{className:"backdrop-blur-sm rounded-2xl shadow-xl border p-6 sm:p-8 transition-colors duration-300 "+(c?"bg-gray-800/90 border-gray-700/20":"bg-white/90 border-white/20"),children:[(0,as.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6",children:[(0,as.jsxs)("div",{className:"flex items-center gap-3 mb-3 sm:mb-0",children:[(0,as.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-xl flex items-center justify-center shadow-lg",children:(0,as.jsx)(va,{className:"text-white text-lg"})}),(0,as.jsxs)("div",{children:[(0,as.jsx)("h2",{className:"text-xl font-bold transition-colors duration-300 "+(c?"text-white":"text-gray-800"),children:"Classroom Progress"}),(0,as.jsx)("p",{className:"text-sm transition-colors duration-300 "+(c?"text-gray-300":"text-gray-600"),children:"Track your learning journey and achievements!"})]})]}),(0,as.jsxs)("div",{className:"flex items-center gap-2",children:[(0,as.jsxs)("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white px-4 py-2 rounded-full shadow-lg",children:[(0,as.jsx)("span",{className:"font-bold text-lg",children:A.passedQuizzes}),(0,as.jsxs)("span",{className:"text-sm opacity-90",children:["/",A.passedQuizzes+A.notTakenQuizzes]})]}),(0,as.jsx)("span",{className:"text-sm font-medium transition-colors duration-300 "+(c?"text-gray-400":"text-gray-500"),children:"Completed"})]})]}),(0,as.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[(0,as.jsxs)("div",{className:"group relative overflow-hidden rounded-2xl p-4 transition-all duration-300 transform hover:scale-105 hover:shadow-xl "+(c?"bg-gradient-to-br from-blue-900/30 to-indigo-900/30 border-2 border-blue-700/50 shadow-lg":"bg-gradient-to-br from-blue-50 to-indigo-50 border-2 border-blue-200 shadow-lg"),children:[(0,as.jsx)("div",{className:"flex justify-center mb-3",children:(0,as.jsx)("div",{className:"w-16 h-16 rounded-full flex items-center justify-center transition-all duration-300 shadow-lg bg-gradient-to-br from-blue-400 to-blue-600 group-hover:from-blue-500 group-hover:to-blue-700",children:(0,as.jsx)(ya,{className:"text-white text-2xl"})})}),(0,as.jsxs)("div",{className:"text-center",children:[(0,as.jsx)("span",{className:"text-sm font-bold text-center block mb-1 transition-colors duration-300 "+(c?"text-blue-300":"text-blue-800"),children:"Treasure Maps"}),(0,as.jsxs)("span",{className:"text-xs text-center px-2 py-1 rounded-full font-medium transition-colors duration-300 "+(c?"bg-blue-900/50 text-blue-300":"bg-blue-100 text-blue-700"),children:[m.length," Available"]})]})]}),(0,as.jsxs)("div",{className:"group relative overflow-hidden rounded-2xl p-4 transition-all duration-300 transform hover:scale-105 hover:shadow-xl "+(c?"bg-gradient-to-br from-purple-900/30 to-pink-900/30 border-2 border-purple-700/50 shadow-lg":"bg-gradient-to-br from-purple-50 to-pink-50 border-2 border-purple-200 shadow-lg"),children:[(0,as.jsx)("div",{className:"flex justify-center mb-3",children:(0,as.jsx)("div",{className:"w-16 h-16 rounded-full flex items-center justify-center transition-all duration-300 shadow-lg bg-gradient-to-br from-purple-400 to-purple-600 group-hover:from-purple-500 group-hover:to-purple-700",children:(0,as.jsx)(lx,{className:"text-white text-2xl"})})}),(0,as.jsxs)("div",{className:"text-center",children:[(0,as.jsx)("span",{className:"text-sm font-bold text-center block mb-1 transition-colors duration-300 "+(c?"text-purple-300":"text-purple-800"),children:"Adventures"}),(0,as.jsxs)("span",{className:"text-xs text-center px-2 py-1 rounded-full font-medium transition-colors duration-300 "+(c?"bg-purple-900/50 text-purple-300":"bg-purple-100 text-purple-700"),children:[_.length," Quests"]})]})]}),(0,as.jsxs)("div",{className:"group relative overflow-hidden rounded-2xl p-4 transition-all duration-300 transform hover:scale-105 hover:shadow-xl "+(c?"bg-gradient-to-br from-green-900/30 to-emerald-900/30 border-2 border-green-700/50 shadow-lg":"bg-gradient-to-br from-green-50 to-emerald-50 border-2 border-green-200 shadow-lg"),children:[(0,as.jsx)("div",{className:"flex justify-center mb-3",children:(0,as.jsx)("div",{className:"w-16 h-16 rounded-full flex items-center justify-center transition-all duration-300 shadow-lg bg-gradient-to-br from-green-400 to-green-600 group-hover:from-green-500 group-hover:to-green-700",children:(0,as.jsx)(Xs,{className:"text-white text-2xl"})})}),(0,as.jsxs)("div",{className:"text-center",children:[(0,as.jsx)("span",{className:"text-sm font-bold text-center block mb-1 transition-colors duration-300 "+(c?"text-green-300":"text-green-800"),children:"Victories"}),(0,as.jsxs)("span",{className:"text-xs text-center px-2 py-1 rounded-full font-medium transition-colors duration-300 "+(c?"bg-green-900/50 text-green-300":"bg-green-100 text-green-700"),children:[A.passedQuizzes," Won"]})]})]}),(0,as.jsxs)("div",{className:"group relative overflow-hidden rounded-2xl p-4 transition-all duration-300 transform hover:scale-105 hover:shadow-xl "+(c?"bg-gradient-to-br from-orange-900/30 to-red-900/30 border-2 border-orange-700/50 shadow-lg":"bg-gradient-to-br from-orange-50 to-red-50 border-2 border-orange-200 shadow-lg"),children:[(0,as.jsx)("div",{className:"flex justify-center mb-3",children:(0,as.jsx)("div",{className:"w-16 h-16 rounded-full flex items-center justify-center transition-all duration-300 shadow-lg bg-gradient-to-br from-orange-400 to-orange-600 group-hover:from-orange-500 group-hover:to-orange-700",children:(0,as.jsx)(ia,{className:"text-white text-2xl"})})}),(0,as.jsxs)("div",{className:"text-center",children:[(0,as.jsx)("span",{className:"text-sm font-bold text-center block mb-1 transition-colors duration-300 "+(c?"text-orange-300":"text-orange-800"),children:"Uncharted"}),(0,as.jsxs)("span",{className:"text-xs text-center px-2 py-1 rounded-full font-medium transition-colors duration-300 "+(c?"bg-orange-900/50 text-orange-300":"bg-orange-100 text-orange-700"),children:[A.notTakenQuizzes," Remaining"]})]})]})]}),(0,as.jsxs)("div",{className:"mt-6",children:[(0,as.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,as.jsx)("span",{className:"text-sm font-medium transition-colors duration-300 "+(c?"text-gray-300":"text-gray-700"),children:"Overall Progress"}),(0,as.jsxs)("span",{className:"text-sm font-bold transition-colors duration-300 "+(c?"text-white":"text-gray-800"),children:[Math.round(A.passedQuizzes/(A.passedQuizzes+A.notTakenQuizzes)*100)||0,"%"]})]}),(0,as.jsx)("div",{className:"w-full rounded-full h-3 overflow-hidden transition-colors duration-300 "+(c?"bg-gray-700":"bg-gray-200"),children:(0,as.jsx)("div",{className:"h-full bg-gradient-to-r from-blue-500 to-purple-600 rounded-full transition-all duration-500 ease-out shadow-sm",style:{width:`${A.passedQuizzes/(A.passedQuizzes+A.notTakenQuizzes)*100||0}%`}})})]})]})}),(0,as.jsx)("div",{className:"relative mb-8",children:(0,as.jsxs)("div",{className:"backdrop-blur-sm rounded-3xl shadow-2xl border p-6 sm:p-8 transition-colors duration-300 "+(c?"bg-gray-800/90 border-gray-700/20":"bg-white/90 border-white/20"),children:[(0,as.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,as.jsxs)("div",{className:"flex items-center gap-3",children:[(0,as.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-yellow-500 to-orange-600 rounded-xl flex items-center justify-center shadow-lg",children:(0,as.jsx)(ya,{className:"text-white text-lg"})}),(0,as.jsxs)("div",{children:[(0,as.jsx)("h2",{className:"text-xl font-bold transition-colors duration-300 "+(c?"text-white":"text-gray-800"),children:"Navigation Map"}),(0,as.jsx)("p",{className:"text-sm transition-colors duration-300 "+(c?"text-gray-300":"text-gray-600"),children:"Choose your adventure path!"})]})]})}),(0,as.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[(0,as.jsxs)("button",{onClick:()=>W("lessons"),className:"group relative overflow-hidden rounded-2xl p-6 transition-all duration-300 transform hover:scale-105 hover:shadow-xl w-full sm:w-auto "+("lessons"===S?c?"bg-gradient-to-br from-blue-900/50 to-indigo-900/50 border-2 border-blue-500 shadow-2xl":"bg-gradient-to-br from-blue-100 to-indigo-100 border-2 border-blue-400 shadow-2xl":c?"bg-gradient-to-br from-gray-700/50 to-gray-800/50 border-2 border-gray-600 hover:border-gray-500":"bg-gradient-to-br from-gray-50 to-gray-100 border-2 border-gray-200 hover:border-gray-300"),id:"lessons-tab",children:[(0,as.jsxs)("div",{className:"flex items-center gap-4",children:[(0,as.jsx)("div",{className:"w-16 h-16 rounded-full flex items-center justify-center transition-all duration-300 shadow-lg "+("lessons"===S?"bg-gradient-to-br from-blue-500 to-blue-700 group-hover:from-blue-600 group-hover:to-blue-800":"bg-gradient-to-br from-gray-400 to-gray-600 group-hover:from-gray-500 group-hover:to-gray-700"),children:(0,as.jsx)(ya,{className:"text-white text-2xl"})}),(0,as.jsxs)("div",{className:"text-left",children:[(0,as.jsx)("h3",{className:"text-lg font-bold transition-colors duration-300 "+("lessons"===S?c?"text-blue-300":"text-blue-800":c?"text-gray-300":"text-gray-700"),children:"Treasure Maps"}),(0,as.jsx)("p",{className:"text-sm transition-colors duration-300 "+("lessons"===S?c?"text-blue-200":"text-blue-600":c?"text-gray-400":"text-gray-500"),children:"Explore learning content"})]})]}),"lessons"===S&&(0,as.jsx)("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-300 "+(c?"bg-gradient-to-br from-blue-400/20 to-indigo-500/20":"bg-gradient-to-br from-blue-400/10 to-indigo-500/10")})]}),(0,as.jsxs)("button",{onClick:()=>W("activities"),className:"group relative overflow-hidden rounded-2xl p-6 transition-all duration-300 transform hover:scale-105 hover:shadow-xl w-full sm:w-auto "+("activities"===S?c?"bg-gradient-to-br from-purple-900/50 to-pink-900/50 border-2 border-purple-500 shadow-2xl":"bg-gradient-to-br from-purple-100 to-pink-100 border-2 border-purple-400 shadow-2xl":c?"bg-gradient-to-br from-gray-700/50 to-gray-800/50 border-2 border-gray-600 hover:border-gray-500":"bg-gradient-to-br from-gray-50 to-gray-100 border-2 border-gray-200 hover:border-gray-300"),id:"activities-tab",children:[(0,as.jsxs)("div",{className:"flex items-center gap-4",children:[(0,as.jsx)("div",{className:"w-16 h-16 rounded-full flex items-center justify-center transition-all duration-300 shadow-lg "+("activities"===S?"bg-gradient-to-br from-purple-500 to-purple-700 group-hover:from-purple-600 group-hover:to-purple-800":"bg-gradient-to-br from-gray-400 to-gray-600 group-hover:from-gray-500 group-hover:to-gray-700"),children:(0,as.jsx)(lx,{className:"text-white text-2xl"})}),(0,as.jsxs)("div",{className:"text-left",children:[(0,as.jsx)("h3",{className:"text-lg font-bold transition-colors duration-300 "+("activities"===S?c?"text-purple-300":"text-purple-800":c?"text-gray-300":"text-gray-700"),children:"Adventures"}),(0,as.jsx)("p",{className:"text-sm transition-colors duration-300 "+("activities"===S?c?"text-purple-200":"text-purple-600":c?"text-gray-400":"text-gray-500"),children:"Take on quests & games"})]})]}),"activities"===S&&(0,as.jsx)("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-300 "+(c?"bg-gradient-to-br from-purple-400/20 to-pink-500/20":"bg-gradient-to-br from-purple-400/10 to-pink-500/10")})]}),(0,as.jsxs)("button",{onClick:()=>W("leaderboard"),className:"group relative overflow-hidden rounded-2xl p-6 transition-all duration-300 transform hover:scale-105 hover:shadow-xl w-full sm:w-auto "+("leaderboard"===S?c?"bg-gradient-to-br from-yellow-900/50 to-orange-900/50 border-2 border-yellow-500 shadow-2xl":"bg-gradient-to-br from-yellow-100 to-orange-100 border-2 border-yellow-400 shadow-2xl":c?"bg-gradient-to-br from-gray-700/50 to-gray-800/50 border-2 border-gray-600 hover:border-gray-500":"bg-gradient-to-br from-gray-50 to-gray-100 border-2 border-gray-200 hover:border-gray-300"),id:"leaderboard-tab",children:[(0,as.jsxs)("div",{className:"flex items-center gap-4",children:[(0,as.jsx)("div",{className:"w-16 h-16 rounded-full flex items-center justify-center transition-all duration-300 shadow-lg "+("leaderboard"===S?"bg-gradient-to-br from-yellow-500 to-yellow-700 group-hover:from-yellow-600 group-hover:to-yellow-800":"bg-gradient-to-br from-gray-400 to-gray-600 group-hover:from-gray-500 group-hover:to-gray-700"),children:(0,as.jsx)(cx,{className:"text-white text-2xl"})}),(0,as.jsxs)("div",{className:"text-left",children:[(0,as.jsx)("h3",{className:"text-lg font-bold transition-colors duration-300 "+("leaderboard"===S?c?"text-yellow-300":"text-yellow-800":c?"text-gray-300":"text-gray-700"),children:"Captain's Board"}),(0,as.jsx)("p",{className:"text-sm transition-colors duration-300 "+("leaderboard"===S?c?"text-yellow-200":"text-yellow-600":c?"text-gray-400":"text-gray-500"),children:"See who's leading"})]})]}),"leaderboard"===S&&(0,as.jsx)("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-300 "+(c?"bg-gradient-to-br from-yellow-400/20 to-orange-500/20":"bg-gradient-to-br from-yellow-400/10 to-orange-500/10")})]})]})]})}),(0,as.jsxs)("div",{className:"mt-6 tab-content-section",children:["lessons"===S&&(0,as.jsxs)("div",{className:"flex flex-col md:flex-row gap-6",children:[(0,as.jsx)("div",{className:"w-full md:w-1/3 rounded-2xl overflow-hidden p-6 border-2 shadow-2xl relative transition-colors duration-300 "+(c?"bg-gradient-to-br from-gray-800/90 to-gray-900/90 border-gray-700/20":"bg-gradient-to-br from-white/90 to-gray-50/90 border-white/20"),children:(0,as.jsxs)("div",{className:"relative z-10",children:[(0,as.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,as.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center shadow-lg",children:(0,as.jsx)(ya,{className:"text-white text-lg"})}),(0,as.jsxs)("div",{children:[(0,as.jsx)("h3",{className:"text-xl font-bold transition-colors duration-300 "+(c?"text-white":"text-gray-800"),children:"Treasure Map Collection"}),(0,as.jsx)("p",{className:"text-sm transition-colors duration-300 "+(c?"text-gray-300":"text-gray-600"),children:"Choose your learning path"})]})]}),(0,as.jsx)(qc,{lessons:m,currentLessonId:x,onSelectLesson:e=>{b(e)},isStudent:!0,unlockedLessons:q})]})}),(0,as.jsxs)("div",{className:"w-full md:w-2/3 rounded-2xl shadow-2xl border-2 h-[calc(85vh)] flex flex-col relative overflow-hidden transition-colors duration-300 "+(c?"bg-gradient-to-br from-gray-800/90 to-gray-900/90 border-gray-700/20":"bg-gradient-to-br from-white/90 to-gray-50/90 border-white/20"),children:[w&&(0,as.jsx)("div",{className:"absolute inset-0 backdrop-blur-sm flex items-center justify-center z-10 transition-colors duration-300 "+(c?"bg-gray-900/90":"bg-amber-100/90"),children:(0,as.jsxs)("div",{className:"flex flex-col items-center gap-4 rounded-2xl p-6 shadow-xl border-2 transition-colors duration-300 "+(c?"bg-gray-700/80 border-gray-600":"bg-white/80 border-amber-300"),children:[(0,as.jsxs)("div",{className:"relative",children:[(0,as.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-4 transition-colors duration-300 "+(c?"border-gray-400 border-t-gray-200":"border-amber-200 border-t-amber-600")}),(0,as.jsx)("div",{className:"absolute inset-0 rounded-full border-4 border-transparent animate-spin transition-colors duration-300 "+(c?"border-t-gray-300":"border-t-amber-400"),style:{animationDirection:"reverse",animationDuration:"1.5s"}})]}),(0,as.jsx)("p",{className:"font-medium transition-colors duration-300 "+(c?"text-gray-200":"text-amber-700"),children:"loading the treasure map..."})]})}),y&&x&&!p?(0,as.jsx)("main",{className:"lesson-detail-placeholder p-6 rounded-md min-h-[300px] flex items-center justify-center shadow h-full",children:(0,as.jsxs)("div",{className:"flex flex-col items-center gap-4 rounded-2xl p-6 shadow-xl border-2 transition-colors duration-300 "+(c?"bg-gray-700/80 border-gray-600":"bg-white/80 border-amber-300"),children:[(0,as.jsx)("div",{className:"text-4xl",children:"\ud83d\uddfa\ufe0f"}),(0,as.jsx)("div",{className:"relative",children:(0,as.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-4 transition-colors duration-300 "+(c?"border-gray-400 border-t-gray-200":"border-amber-200 border-t-amber-600")})}),(0,as.jsx)("p",{className:"font-medium transition-colors duration-300 "+(c?"text-gray-200":"text-amber-700"),children:"Charting the course..."})]})}):p?(0,as.jsxs)("div",{className:"flex flex-col h-full",children:[(0,as.jsx)("div",{className:"p-6 border-b-2 transition-colors duration-300 "+(c?"border-gray-600 bg-gradient-to-r from-gray-800/80 to-gray-700/80":"border-gray-200 bg-gradient-to-r from-white/80 to-gray-50/80"),children:(0,as.jsxs)("div",{className:"flex items-center gap-4",children:[(0,as.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center shadow-lg",children:(0,as.jsx)(ya,{className:"text-white text-xl"})}),(0,as.jsxs)("div",{children:[(0,as.jsx)(po,{type:"h2",weight:"bold",className:"!text-3xl bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent transition-colors duration-300",children:p.title}),(0,as.jsx)("p",{className:"text-sm mt-1 transition-colors duration-300 "+(c?"text-gray-300":"text-gray-600"),children:"Explore this treasure map to discover new knowledge!"})]})]})}),(0,as.jsx)("div",{className:"flex-1 overflow-y-auto p-6 transition-colors duration-300 "+(c?"bg-gradient-to-b from-gray-800/50 to-gray-900/50":"bg-gradient-to-b from-white/50 to-gray-50/50"),onScroll:e=>{const{scrollTop:t,scrollHeight:r,clientHeight:n}=e.target;Math.abs(r-t-n)<1&&!T&&U()},children:(null===(s=p.contentBlocks)||void 0===s?void 0:s.length)>0?(0,as.jsxs)("div",{className:"content-blocks space-y-6",children:[p.contentBlocks.map((e=>(0,as.jsx)("div",{className:"content-block rounded-2xl p-6 shadow-lg border-2 transition-colors duration-300 "+(c?"bg-gray-700/80 border-gray-600/50":"bg-white/80 border-gray-200/50"),children:(0,as.jsx)(Vg,{block:e})},e.id))),(null===P||void 0===P?void 0:P.contentRead)&&!(null!==P&&void 0!==P&&P.quizCompleted)&&(0,as.jsxs)("div",{className:"mt-8",children:[(0,as.jsxs)("div",{className:"flex items-center gap-3 rounded-2xl p-6 border-2 shadow-lg transition-colors duration-300 "+(c?"bg-gradient-to-r from-green-900/30 to-emerald-900/30 border-green-700/50 text-green-300":"bg-gradient-to-r from-green-100 to-emerald-100 border-green-300 text-green-800"),children:[(0,as.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center shadow-lg",children:(0,as.jsx)(Xs,{className:"text-white text-xl"})}),(0,as.jsxs)("div",{children:[(0,as.jsx)("span",{className:"font-bold text-lg",children:"Treasure Map Studied!"}),(0,as.jsx)("p",{className:"text-sm transition-colors duration-300 "+(c?"text-green-200":"text-green-600"),children:"You've successfully explored this learning content"})]})]}),(e=>{const t=m.findIndex((e=>e.id===p.id)),r=t<m.length-1,n=null===(e=p.activities)||void 0===e?void 0:e.some((e=>"QUIZ"===e.type));return r&&!n?(0,as.jsxs)("div",{className:"mt-4 flex items-center gap-3 rounded-2xl p-6 border-2 shadow-lg transition-colors duration-300 "+(c?"bg-gradient-to-r from-blue-900/30 to-indigo-900/30 border-blue-700/50 text-blue-300":"bg-gradient-to-r from-blue-100 to-indigo-100 border-blue-300 text-blue-800"),children:[(0,as.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center shadow-lg",children:(0,as.jsx)(ia,{className:"text-white text-xl"})}),(0,as.jsxs)("div",{children:[(0,as.jsx)("span",{className:"font-bold text-lg",children:"Next Adventure Unlocked!"}),(0,as.jsx)("p",{className:"text-sm transition-colors duration-300 "+(c?"text-blue-200":"text-blue-600"),children:"You've completed this lesson! The next treasure map is now available in your collection."})]})]}):null})()]}),(()=>{var e;return null!==p&&void 0!==p&&null!==(e=p.activities)&&void 0!==e&&e.filter((e=>"QUIZ"===e.type)).length?(0,as.jsxs)("div",{className:"mt-8",children:[!(null!==P&&void 0!==P&&P.contentRead)&&(0,as.jsxs)("div",{className:"border-2 rounded-xl p-6 mb-6 flex items-center justify-between gap-3 shadow-lg transition-colors duration-300 bg-gradient-to-r from-yellow-100 to-orange-100 border-yellow-400",children:[(0,as.jsxs)("div",{className:"flex items-center gap-3",children:[(0,as.jsx)("div",{className:"text-2xl",children:"\u26a0\ufe0f"}),(0,as.jsx)(ox,{className:"w-6 h-6 text-yellow-700"}),(0,as.jsx)("p",{className:"text-yellow-800 font-medium text-lg",children:"Ahoy! Study the treasure map completely before attempting the quest!"})]}),(0,as.jsx)("button",{onClick:U,className:"px-4 py-2 bg-yellow-600 hover:bg-yellow-700 text-white font-medium rounded-lg transition-colors duration-200 shadow-md hover:shadow-lg",children:"Mark as Read"})]}),(null===P||void 0===P?void 0:P.contentRead)&&(0,as.jsxs)("div",{className:"quiz-section",children:[(0,as.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,as.jsx)("div",{className:"text-3xl",children:"\u2694\ufe0f"}),(0,as.jsx)(po,{type:"h3",weight:"semibold",className:"text-2xl transition-colors duration-300 "+(c?"text-gray-800":"text-amber-800"),children:"Pirate Quest"})]}),p.activities.filter((e=>"QUIZ"===e.type)).map((e=>{var t,r,n,s,a,o,i,l,d,u,h,m;const f=D[e.id],p=(e=>{const t=D[e];if(!t)return!1;const{quiz:r,attempts:n}=t,s=new Date,a=new Date(r.availableFrom),o=new Date(r.availableTo);if(s<a||s>o)return!1;if(r.maxAttempts&&n.length>=r.maxAttempts)return!1;const i=n[0];return!(i&&!r.repeatable&&i.passed)})(e.id),g=(e=>{const t=D[e];if(!t)return"Start Quiz";const{quiz:r,attempts:n}=t,s=new Date,a=new Date(r.availableFrom),o=new Date(r.availableTo);if(s<a)return"Not Available Yet";if(s>o)return"Quiz Expired";if(r.maxAttempts&&n.length>=r.maxAttempts)return"Max Attempts Reached";if(n.length>0){const e=n[0];return e&&!e.passed?"Try Again - Quest Failed":e&&e.passed?"Quest Completed":"Try Again"}return"Start Quiz"})(e.id),x=null===f||void 0===f?void 0:f.lastAttempt;return(0,as.jsxs)("div",{className:"mb-6 p-6 rounded-2xl shadow-xl border-2 transition-colors duration-300 "+(c?"bg-gradient-to-br from-gray-100 to-gray-50 border-gray-300":"bg-gradient-to-br from-amber-100 to-amber-50 border-amber-300"),children:[(0,as.jsxs)("div",{className:"mb-6",children:[(0,as.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,as.jsx)("div",{className:"text-2xl",children:"\ud83d\udde1\ufe0f"}),(0,as.jsx)("h4",{className:"text-xl font-bold transition-colors duration-300 "+(c?"text-gray-800":"text-amber-800"),children:(null===f||void 0===f||null===(t=f.quiz)||void 0===t?void 0:t.quizName)||"Pirate Quest"})]}),(0,as.jsx)("p",{className:"font-medium transition-colors duration-300 "+(c?"text-gray-700":"text-amber-700"),children:null===f||void 0===f||null===(r=f.quiz)||void 0===r?void 0:r.description})]}),(0,as.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6 text-sm rounded-xl p-4 border transition-colors duration-300 "+(c?"bg-white/60 border-gray-200":"bg-white/60 border-amber-200"),children:[(0,as.jsxs)("div",{className:"flex items-center gap-2",children:[(0,as.jsx)("div",{className:"text-lg",children:"\u23f0"}),(0,as.jsxs)("div",{children:[(0,as.jsx)("span",{className:"font-bold transition-colors duration-300 "+(c?"text-gray-800":"text-amber-800"),children:"Quest Duration:"})," ",(null===f||void 0===f||null===(n=f.quiz)||void 0===n?void 0:n.timeLimitMinutes)||0," minutes"]})]}),(0,as.jsxs)("div",{className:"flex items-center gap-2",children:[(0,as.jsx)("div",{className:"text-lg",children:"\ud83d\uddfa\ufe0f"}),(0,as.jsxs)("div",{children:[(0,as.jsx)("span",{className:"font-bold transition-colors duration-300 "+(c?"text-gray-800":"text-amber-800"),children:"Challenges:"})," ",(null===f||void 0===f||null===(s=f.quiz)||void 0===s?void 0:s.totalItems)||0]})]}),(0,as.jsxs)("div",{className:"flex items-center gap-2",children:[(0,as.jsx)("div",{className:"text-lg",children:"\ud83c\udfc6"}),(0,as.jsxs)("div",{children:[(0,as.jsx)("span",{className:"font-bold transition-colors duration-300 "+(c?"text-gray-800":"text-amber-800"),children:"Victory Threshold:"})," ",(null===f||void 0===f||null===(a=f.quiz)||void 0===a?void 0:a.passingScore)||0,"/",(null===f||void 0===f||null===(o=f.quiz)||void 0===o?void 0:o.overallScore)||0]})]}),(0,as.jsxs)("div",{className:"flex items-center gap-2",children:[(0,as.jsx)("div",{className:"text-lg",children:"\u2694\ufe0f"}),(0,as.jsxs)("div",{children:[(0,as.jsx)("span",{className:"font-bold transition-colors duration-300 "+(c?"text-gray-800":"text-amber-800"),children:"Max Attempts:"})," ",(null===f||void 0===f||null===(i=f.quiz)||void 0===i?void 0:i.maxAttempts)||"1"]})]}),(0,as.jsxs)("div",{className:"flex items-center gap-2",children:[(0,as.jsx)("div",{className:"text-lg",children:"\ud83c\udf05"}),(0,as.jsxs)("div",{children:[(0,as.jsx)("span",{className:"font-bold transition-colors duration-300 "+(c?"text-gray-800":"text-amber-800"),children:"Quest Begins:"})," ",null!==f&&void 0!==f&&null!==(l=f.quiz)&&void 0!==l&&l.availableFrom?new Date(f.quiz.availableFrom).toLocaleString():"Anytime"]})]}),(0,as.jsxs)("div",{className:"flex items-center gap-2",children:[(0,as.jsx)("div",{className:"text-lg",children:"\ud83c\udf07"}),(0,as.jsxs)("div",{children:[(0,as.jsx)("span",{className:"font-bold transition-colors duration-300 "+(c?"text-gray-800":"text-amber-800"),children:"Quest Ends:"})," ",null!==f&&void 0!==f&&null!==(d=f.quiz)&&void 0!==d&&d.availableTo?new Date(f.quiz.availableTo).toLocaleString():"Never"]})]}),(0,as.jsxs)("div",{className:"flex items-center gap-2",children:[(0,as.jsx)("div",{className:"text-lg",children:"\ud83d\udcca"}),(0,as.jsxs)("div",{children:[(0,as.jsx)("span",{className:"font-bold transition-colors duration-300 "+(c?"text-gray-800":"text-amber-800"),children:"Attempts:"})," ",(null===f||void 0===f||null===(u=f.attempts)||void 0===u?void 0:u.length)||0,"/",(null===f||void 0===f||null===(h=f.quiz)||void 0===h?void 0:h.maxAttempts)||"\u221e"]})]})]}),x&&(0,as.jsxs)("div",{className:"mb-6 p-4 rounded-xl border-2 transition-colors duration-300 "+(c?"bg-gradient-to-r from-gray-200 to-gray-300 border-gray-300":"bg-gradient-to-r from-amber-200 to-yellow-200 border-amber-300"),children:[(0,as.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,as.jsx)("div",{className:"text-xl",children:"\ud83c\udff4\u200d\u2620\ufe0f"}),(0,as.jsx)("p",{className:"font-bold transition-colors duration-300 "+(c?"text-gray-800":"text-amber-800"),children:"Last Adventure:"})]}),(0,as.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,as.jsxs)("div",{children:[(0,as.jsx)("span",{className:"font-medium transition-colors duration-300 "+(c?"text-gray-700":"text-amber-700"),children:"Score:"})," ",x.score,"/",(null===f||void 0===f||null===(m=f.quiz)||void 0===m?void 0:m.overallScore)||0]}),(0,as.jsxs)("div",{children:[(0,as.jsx)("span",{className:"font-medium transition-colors duration-300 "+(c?"text-gray-700":"text-amber-700"),children:"Date:"})," ",new Date(x.completedAt).toLocaleDateString()]})]})]}),(0,as.jsx)("button",{onClick:()=>V(e.id),className:"w-full px-6 py-4 transition-all duration-300 text-lg font-bold rounded-xl shadow-lg transform hover:scale-105 "+(p?"bg-gradient-to-r from-amber-600 to-orange-600 text-white hover:from-amber-700 hover:to-orange-700 shadow-xl":"bg-gray-400 text-gray-600 cursor-not-allowed"),disabled:!p,children:(0,as.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,as.jsx)("div",{className:"text-xl",children:p?"\u2694\ufe0f":"\ud83d\udd12"}),(0,as.jsx)("span",{children:g})]})})]},e.id)}))]})]}):null})(),(null===P||void 0===P?void 0:P.quizCompleted)&&(0,as.jsx)("div",{className:"mt-8",children:null!==P&&void 0!==P&&P.quizPassed?(0,as.jsxs)("div",{children:[(0,as.jsxs)("div",{className:"flex items-center gap-3 rounded-2xl p-6 border-2 shadow-lg transition-colors duration-300 "+(c?"bg-gradient-to-r from-green-900/30 to-emerald-900/30 border-green-700/50 text-green-300":"bg-gradient-to-r from-green-100 to-emerald-100 border-green-300 text-green-800"),children:[(0,as.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center shadow-lg",children:(0,as.jsx)(lx,{className:"text-white text-xl"})}),(0,as.jsxs)("div",{children:[(0,as.jsx)("span",{className:"font-bold text-lg",children:"Quest Completed!"}),(0,as.jsx)("p",{className:"text-sm transition-colors duration-300 "+(c?"text-green-200":"text-green-600"),children:"Congratulations! You've successfully completed this adventure"})]})]}),(()=>{const e=m.findIndex((e=>e.id===p.id));return e<m.length-1?(0,as.jsxs)("div",{className:"mt-4 flex items-center gap-3 rounded-2xl p-6 border-2 shadow-lg transition-colors duration-300 "+(c?"bg-gradient-to-r from-blue-900/30 to-indigo-900/30 border-blue-700/50 text-blue-300":"bg-gradient-to-r from-blue-100 to-indigo-100 border-blue-300 text-blue-800"),children:[(0,as.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center shadow-lg",children:(0,as.jsx)(ia,{className:"text-white text-xl"})}),(0,as.jsxs)("div",{children:[(0,as.jsx)("span",{className:"font-bold text-lg",children:"Next Adventure Unlocked!"}),(0,as.jsx)("p",{className:"text-sm transition-colors duration-300 "+(c?"text-blue-200":"text-blue-600"),children:"Congratulations! You've passed the quest! The next treasure map is now available in your collection."})]})]}):null})()]}):(0,as.jsxs)("div",{className:"flex items-center gap-3 rounded-2xl p-6 border-2 shadow-lg transition-colors duration-300 "+(c?"bg-gradient-to-r from-red-900/30 to-pink-900/30 border-red-700/50 text-red-300":"bg-gradient-to-r from-red-100 to-pink-100 border-red-300 text-red-800"),children:[(0,as.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-red-500 to-red-600 rounded-full flex items-center shadow-lg",children:(0,as.jsx)(ox,{className:"text-white text-xl"})}),(0,as.jsxs)("div",{children:[(0,as.jsx)("span",{className:"font-bold text-lg",children:"Quest Failed - Try Again!"}),(0,as.jsx)("p",{className:"text-sm transition-colors duration-300 "+(c?"text-red-200":"text-red-600"),children:"Don't give up! Every great adventurer learns from their mistakes"})]})]})})]}):(0,as.jsx)("div",{className:"text-center py-12",children:(0,as.jsxs)("div",{className:"rounded-2xl p-8 shadow-lg border-2 transition-colors duration-300 "+(c?"bg-gray-700/80 border-gray-600/50":"bg-white/80 border-gray-200/50"),children:[(0,as.jsx)("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center shadow-lg mx-auto mb-4",children:(0,as.jsx)(ya,{className:"text-white text-3xl"})}),(0,as.jsx)("p",{className:"text-lg font-medium transition-colors duration-300 "+(c?"text-gray-200":"text-gray-700"),children:"This treasure map is empty!"}),(0,as.jsx)("p",{className:"text-sm mt-2 transition-colors duration-300 "+(c?"text-gray-300":"text-gray-500"),children:"No content available for this lesson."})]})})})]}):m.length>0&&!x?(0,as.jsx)("main",{className:"lesson-detail-placeholder p-6 rounded-md min-h-[300px] flex items-center justify-center shadow h-full",children:(0,as.jsxs)("div",{className:"rounded-2xl p-8 shadow-xl border-2 text-center transition-colors duration-300 "+(c?"bg-gray-700/80 border-gray-600/50":"bg-white/80 border-gray-200/50"),children:[(0,as.jsx)("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center shadow-lg mx-auto mb-4",children:(0,as.jsx)(ya,{className:"text-white text-3xl"})}),(0,as.jsx)("p",{className:"text-lg font-medium transition-colors duration-300 "+(c?"text-gray-200":"text-gray-700"),children:"Choose a treasure map from your collection to begin your adventure!"})]})}):(0,as.jsx)("main",{className:"lesson-detail-placeholder p-6 rounded-md min-h-[300px] flex items-center justify-center shadow h-full",children:(0,as.jsx)("div",{className:"text-center",children:(0,as.jsxs)("div",{className:"rounded-2xl p-8 shadow-xl border-2 transition-colors duration-300 "+(c?"bg-gray-700/80 border-gray-600/50":"bg-white/80 border-gray-200/50"),children:[(0,as.jsx)("div",{className:"w-20 h-20 bg-gradient-to-br from-orange-500 to-red-600 rounded-full flex items-center justify-center shadow-lg mx-auto mb-4",children:(0,as.jsx)(ia,{className:"text-white text-3xl"})}),(0,as.jsx)("p",{className:"text-lg font-medium mb-2 transition-colors duration-300 "+(c?"text-gray-200":"text-gray-700"),children:"This treasure map is still being charted by the captain!"}),(0,as.jsx)("p",{className:"transition-colors duration-300 "+(c?"text-gray-300":"text-gray-500"),children:"Check back later for new learning content"})]})})})]})]}),"activities"===S&&(0,as.jsxs)("div",{className:"p-8 rounded-2xl shadow-2xl border-2 transition-colors duration-300 "+(c?"bg-gradient-to-br from-gray-800/90 to-gray-900/90 border-gray-700/20":"bg-gradient-to-br from-white/90 to-gray-50/90 border-white/20"),children:[(0,as.jsxs)("div",{className:"flex items-center gap-4 mb-8",children:[(0,as.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-pink-600 rounded-xl flex items-center justify-center shadow-lg",children:(0,as.jsx)(lx,{className:"text-white text-xl"})}),(0,as.jsxs)("div",{children:[(0,as.jsx)("h2",{className:"text-3xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent transition-colors duration-300",children:"Adventure Quests"}),(0,as.jsx)("p",{className:"text-sm mt-1 transition-colors duration-300 "+(c?"text-gray-300":"text-gray-600"),children:"Take on exciting games and challenges to test your skills! Complete lessons first to unlock quiz quests."})]})]}),(0,as.jsx)(ex,{classroomId:a})]}),"leaderboard"===S&&(0,as.jsxs)("div",{className:"p-8 rounded-2xl shadow-2xl border-2 transition-colors duration-300 "+(c?"bg-gradient-to-br from-gray-800/90 to-gray-900/90 border-gray-700/20":"bg-gradient-to-br from-white/90 to-gray-50/90 border-white/20"),children:[(0,as.jsxs)("div",{className:"flex items-center gap-4 mb-8",children:[(0,as.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-yellow-500 to-orange-600 rounded-xl flex items-center justify-center shadow-lg",children:(0,as.jsx)(cx,{className:"text-white text-xl"})}),(0,as.jsxs)("div",{children:[(0,as.jsx)("h2",{className:"text-3xl font-bold bg-gradient-to-r from-yellow-600 to-orange-600 bg-clip-text text-transparent transition-colors duration-300",children:"Captain's Board"}),(0,as.jsx)("p",{className:"text-sm mt-1 transition-colors duration-300 "+(c?"text-gray-300":"text-gray-600"),children:"See who's leading the adventure and competing for the top spots!"})]})]}),(0,as.jsx)(ax,{classroomId:a})]}),!S&&(0,as.jsx)("div",{className:"p-12 rounded-2xl shadow-2xl border-2 text-center transition-colors duration-300 "+(c?"bg-gradient-to-br from-gray-800/90 to-gray-900/90 border-gray-700/20":"bg-gradient-to-br from-white/90 to-gray-50/90 border-white/20"),children:(0,as.jsxs)("div",{className:"max-w-lg mx-auto",children:[(0,as.jsx)("div",{className:"w-24 h-24 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center shadow-lg mx-auto mb-6",children:(0,as.jsx)(ya,{className:"text-white text-4xl"})}),(0,as.jsxs)("h3",{className:"text-3xl font-bold mb-4 bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent transition-colors duration-300",children:["Welcome to ",null===u||void 0===u?void 0:u.name,"!"]}),(0,as.jsx)("p",{className:"text-lg mb-8 transition-colors duration-300 "+(c?"text-gray-300":"text-gray-700"),children:"Ready for your learning adventure? Choose your path below to begin exploring the treasure-filled waters of knowledge!"}),(0,as.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,as.jsxs)("button",{onClick:()=>W("lessons"),className:"group flex items-center justify-center gap-3 p-6 bg-gradient-to-r from-blue-500 to-blue-700 hover:from-blue-600 hover:to-blue-800 rounded-2xl transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl",children:[(0,as.jsx)("div",{className:"w-8 h-8 bg-white/20 rounded-full flex items-center justify-center",children:(0,as.jsx)(ya,{className:"w-5 h-5 text-white"})}),(0,as.jsx)("span",{className:"font-bold text-white text-lg",children:"Explore Treasure Maps"})]}),(0,as.jsxs)("button",{onClick:()=>W("activities"),className:"group flex items-center justify-center gap-3 p-6 bg-gradient-to-r from-purple-500 to-purple-700 hover:from-purple-600 hover:to-purple-800 rounded-2xl transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl",children:[(0,as.jsx)("div",{className:"w-8 h-8 bg-white/20 rounded-full flex items-center justify-center",children:(0,as.jsx)(lx,{className:"w-5 h-5 text-white"})}),(0,as.jsx)("span",{className:"font-bold text-white text-lg",children:"Begin Adventures"})]}),(0,as.jsxs)("button",{onClick:()=>W("leaderboard"),className:"group flex items-center justify-center gap-3 p-6 bg-gradient-to-r from-yellow-500 to-orange-600 hover:from-yellow-600 hover:to-orange-700 rounded-2xl transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl",children:[(0,as.jsx)("div",{className:"w-8 h-8 bg-white/20 rounded-full flex items-center justify-center",children:(0,as.jsx)(cx,{className:"w-5 h-5 text-white"})}),(0,as.jsx)("span",{className:"font-bold text-white text-lg",children:"Check Captain's Board"})]})]})]})})]})]})})]}):(0,as.jsx)("div",{className:`min-h-screen transition-colors duration-300 ${c?"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900":"bg-gradient-to-br from-amber-50 via-yellow-50 to-orange-100"} flex items-center justify-center`,children:(0,as.jsxs)("div",{className:"text-center p-8 rounded-2xl shadow-xl border-2 transition-colors duration-300 "+(c?"bg-gray-800/80 border-amber-500/50":"bg-white/80 border-amber-200"),children:[(0,as.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\uddfa\ufe0f"}),(0,as.jsx)("h3",{className:"text-2xl font-bold mb-2 "+(c?"text-amber-300":"text-amber-800"),children:"Lost at Sea!"}),(0,as.jsx)("p",{className:""+(c?"text-amber-400":"text-amber-600"),children:"Classroom not found or failed to load."})]})})},ux=()=>{const[e,t]=(0,n.useState)([]),[r,s]=(0,n.useState)(!0),[a,o]=(0,n.useState)(""),[i,l]=(0,n.useState)(null),[c,d]=(0,n.useState)([]),[u,h]=(0,n.useState)(!1),[m,f]=(0,n.useState)(""),[p,g]=(0,n.useState)(""),[x,b]=(0,n.useState)("alphabetical"),[y,v]=(0,n.useState)([]),[w,j]=(0,n.useState)(!1),[N,k]=(0,n.useState)(""),[S,C]=(0,n.useState)(!1),[_,E]=(0,n.useState)(!1),[A,O]=(0,n.useState)(null),{darkMode:T}=ds();(0,n.useEffect)((()=>{(async()=>{try{const e=await qs.getTeacherClassrooms();t(e)}catch(e){o(e.message||"Failed to load classrooms")}finally{s(!1)}})()}),[x]),(0,n.useEffect)((()=>{const e=e=>{A&&!e.target.closest(".dropdown-container")&&O(null)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[A]);const z=async e=>{if(!e||!i)return;const t=y.find((t=>t.id===e));if(t&&!t.inClassroom){v((t=>t.map((t=>t.id===e?{...t,inClassroom:!0,isAdding:!0}:t))));try{await qs.addStudentToClassroom(i.id,e),v((t=>t.map((t=>t.id===e?{...t,inClassroom:!0,isAdding:!1}:t)))),o("")}catch(r){console.error("Add student error:",r),o(r.message||"Failed to add student to classroom"),v((t=>t.map((t=>t.id===e?{...t,inClassroom:!1,isAdding:!1}:t))))}}};(0,n.useEffect)((()=>{const e=setTimeout((()=>{N?(async e=>{if(i&&e.trim()){j(!0);try{const t=await qs.searchStudents(e,i.id);v(t),o("")}catch(t){console.error("Search students error:",t),o(t.message||"Failed to search for students"),v([])}finally{j(!1)}}else v([])})(N):v([])}),500);return()=>clearTimeout(e)}),[N,i]);const P=e.filter((e=>e.name.toLowerCase().includes(p.toLowerCase())||e.shortCode&&e.shortCode.toLowerCase().includes(p.toLowerCase()))),I=[...P].sort(((e,t)=>{if("alphabetical"===x)return e.name.localeCompare(t.name);if("date"===x){const r=new Date(e.createdDate||e.created_at||e.createdAt||e.created_date);return new Date(t.createdDate||t.created_at||t.createdAt||t.created_date)-r}return 0}));return r?(0,as.jsx)("div",{className:"flex justify-center items-center h-screen",style:{backgroundImage:T?"linear-gradient(180deg, rgba(2,6,23,1) 0%, rgba(3,7,18,1) 100%)":"linear-gradient(135deg, #fef3c7 0%, #fde68a 50%, #f59e0b 100%)",backgroundSize:"cover",backgroundRepeat:"no-repeat"},children:(0,as.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,as.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-yellow-500"}),(0,as.jsx)("p",{className:(T?"text-yellow-300":"text-yellow-800")+" text-lg font-semibold",children:"Hoisting the sails..."})]})}):(0,as.jsxs)("div",{className:"px-4 sm:px-6 lg:px-8 lg:py-8 min-h-screen",style:{backgroundImage:T?"linear-gradient(180deg, rgba(2,6,23,1) 0%, rgba(3,7,18,1) 100%)":"linear-gradient(135deg, #fef3c7 0%, #fde68a 50%, #f59e0b 100%)",backgroundSize:"cover",backgroundRepeat:"no-repeat"},children:[(0,as.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,as.jsx)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-center gap-3 mt-6 sm:mt-8 mb-4",children:(0,as.jsxs)("div",{className:"flex items-center gap-3",children:[(0,as.jsx)(ia,{className:(T?"text-yellow-400":"text-yellow-700")+" text-xl sm:text-2xl"}),(0,as.jsx)(po,{type:"h1",fontSize:"4xl",weight:"bold",className:(T?"text-yellow-300":"text-blue-800")+" tracking-wide",children:"Captain's Fleet"}),(0,as.jsx)(Oa,{className:(T?"text-yellow-400":"text-yellow-700")+" text-xl sm:text-2xl"})]})}),(0,as.jsx)("div",{className:"max-w-6xl w-full",children:(0,as.jsx)("div",{className:"h-[2px] w-full bg-gradient-to-r from-yellow-400 via-amber-500 to-yellow-600 opacity-80 mb-6"})}),(0,as.jsx)("div",{className:"rounded-2xl shadow-2xl p-4 sm:p-6 border-2 backdrop-blur-sm mb-6 "+(T?"bg-[#0b1022]/85 border-yellow-700/40":"bg-[#f5ecd2] border-yellow-300"),style:{boxShadow:T?"0 10px 25px rgba(255, 215, 0, 0.08)":"0 10px 25px rgba(0,0,0,0.08)"},children:(0,as.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,as.jsxs)("div",{className:"flex items-center gap-4 w-full sm:w-auto",children:[(0,as.jsxs)("div",{className:"relative flex-1 sm:flex-none",children:[(0,as.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,as.jsx)(ba,{className:(T?"text-yellow-400":"text-yellow-700")+" text-lg"})}),(0,as.jsx)(Si,{type:"search",name:"search",id:"search",className:"block w-full sm:w-64 pl-10 pr-3 py-2 sm:text-sm border-2 rounded-lg "+(T?"bg-[#0f1428] text-gray-100 border-yellow-700/40":"bg-[#fbf4de] text-gray-900 border-yellow-300"),placeholder:"Search your fleet...",value:p,onChange:e=>g(e.target.value)})]}),(0,as.jsxs)("div",{className:"flex items-center gap-2",children:[(0,as.jsx)(ia,{className:(T?"text-yellow-400":"text-yellow-700")+" text-sm"}),(0,as.jsx)("span",{className:"text-sm "+(T?"text-yellow-200":"text-yellow-800"),children:"Sort by:"}),(0,as.jsxs)("select",{className:"text-sm bg-transparent focus:outline-none font-medium rounded-lg px-2 py-1 "+(T?"text-yellow-200 bg-[#0f1428]":"text-yellow-800 bg-[#fbf4de]"),value:x,onChange:e=>b(e.target.value),children:[(0,as.jsx)("option",{value:"alphabetical",children:"Alphabetical"}),(0,as.jsx)("option",{value:"date",children:"Most Recent"})]})]})]}),(0,as.jsxs)(Te,{to:"/teacher/add-classroom",className:"font-semibold flex items-center gap-2 h-10 px-4 rounded-lg transition-all duration-300 hover:scale-105 "+(T?"bg-yellow-600 hover:bg-yellow-700 text-white":"bg-yellow-500 hover:bg-yellow-600 text-white"),children:[(0,as.jsx)(Aa,{className:"w-4 h-4"}),"Launch New Ship"]})]})}),a&&!S&&!_&&(0,as.jsxs)("div",{className:"border-2 px-4 py-3 rounded-lg relative mb-4 "+(T?"bg-red-900/30 border-red-600/50 text-red-300":"bg-red-100 border-red-400 text-red-700"),role:"alert",children:[(0,as.jsx)("span",{className:"block sm:inline",children:a}),(0,as.jsxs)("button",{className:"absolute top-0 bottom-0 right-0 px-4 py-3",onClick:()=>o(""),children:[(0,as.jsx)("span",{className:"sr-only",children:"Close"}),(0,as.jsx)("span",{className:T?"text-red-300":"text-red-500",children:"\xd7"})]})]}),0===I.length?(0,as.jsxs)("div",{className:"rounded-2xl shadow-2xl p-8 text-center border-2 backdrop-blur-sm "+(T?"bg-[#0b1022]/85 border-yellow-700/40":"bg-[#f5ecd2] border-yellow-300"),style:{boxShadow:T?"0 10px 25px rgba(255, 215, 0, 0.08)":"0 10px 25px rgba(0,0,0,0.08)"},children:[(0,as.jsx)(Aa,{className:`mx-auto mb-4 ${T?"text-yellow-400":"text-yellow-600"} text-4xl`}),(0,as.jsx)("p",{className:"mb-6 text-lg "+(T?"text-yellow-200":"text-yellow-800"),children:"Your fleet is empty, Captain! Time to launch your first ship."}),(0,as.jsx)(Te,{to:"/teacher/add-classroom",children:(0,as.jsxs)(bs,{variant:"default",size:"sm",className:"flex items-center gap-2 mx-auto "+(T?"bg-yellow-600 hover:bg-yellow-700 text-white":"bg-yellow-500 hover:bg-yellow-600 text-white"),children:[(0,as.jsx)(Aa,{className:"w-4 h-4"}),"Launch New Ship"]})})]}):0===P.length&&p?(0,as.jsxs)("div",{className:"rounded-2xl shadow-2xl p-8 text-center border-2 backdrop-blur-sm "+(T?"bg-[#0b1022]/85 border-yellow-700/40":"bg-[#f5ecd2] border-yellow-300"),style:{boxShadow:T?"0 10px 25px rgba(255, 215, 0, 0.08)":"0 10px 25px rgba(0,0,0,0.08)"},children:[(0,as.jsx)(ba,{className:`mx-auto mb-4 ${T?"text-yellow-400":"text-yellow-600"} text-4xl`}),(0,as.jsxs)("p",{className:"text-lg "+(T?"text-yellow-200":"text-yellow-800"),children:["No ships found for '",p,"' in your fleet"]})]}):(0,as.jsx)("div",{className:"space-y-6",children:I.map((r=>(0,as.jsxs)("div",{className:"rounded-2xl shadow-2xl overflow-hidden flex flex-col sm:flex-row border-2 backdrop-blur-sm transition-all duration-300 hover:scale-[1.02] "+(T?"bg-[#0b1022]/85 border-yellow-700/40":"bg-[#f5ecd2] border-yellow-300"),style:{boxShadow:T?"0 10px 25px rgba(255, 215, 0, 0.08)":"0 10px 25px rgba(0,0,0,0.08)"},children:[(0,as.jsxs)(Te,{to:`/teacher/classrooms/${r.id}`,className:"sm:w-1/3 md:w-1/3 flex-shrink-0 cursor-pointer relative",children:[r.image?(0,as.jsx)("img",{src:`data:image/jpeg;base64,${r.image}`,alt:r.name,className:"w-full h-[200px] object-cover"}):(0,as.jsxs)("div",{className:"w-full h-[200px] bg-gradient-to-br from-yellow-500 via-amber-500 to-orange-500 flex items-center justify-center relative",children:[(0,as.jsx)(Aa,{className:"text-white text-4xl mb-2"}),(0,as.jsx)("span",{className:"text-white font-bold text-lg lg:text-2xl absolute bottom-4",children:r.shortCode||"N/A"})]}),(0,as.jsx)("div",{className:"absolute top-2 right-2 text-yellow-500/70 text-sm",children:"\u2693"}),(0,as.jsx)("div",{className:"absolute bottom-2 left-2 text-yellow-500/70 text-sm",children:"\ud83e\udded"})]}),(0,as.jsx)("div",{className:"p-5 flex-grow sm:w-2/3 md:w-2/3",children:(0,as.jsxs)("div",{className:"flex justify-between items-start",children:[(0,as.jsxs)("div",{className:"flex-grow",children:[(0,as.jsxs)(Te,{to:`/teacher/classrooms/${r.id}`,className:"block cursor-pointer",children:[(0,as.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,as.jsx)(Vs,{className:(T?"text-yellow-400":"text-yellow-600")+" text-sm"}),(0,as.jsxs)("p",{className:"text-xs font-semibold uppercase tracking-wide "+(T?"text-yellow-300":"text-yellow-700"),children:["Ship Code: ",r.shortCode||"N/A"]})]}),(0,as.jsx)(po,{type:"h2",fontSize:"2xl",weight:"bold",className:"mt-1 mb-1 transition-colors "+(T?"text-yellow-200 hover:text-yellow-100":"text-gray-800 hover:text-blue-600"),children:r.name})]}),(0,as.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,as.jsx)(ia,{className:(T?"text-yellow-400":"text-yellow-600")+" text-sm"}),(0,as.jsxs)("p",{className:"text-sm italic "+(T?"text-yellow-300":"text-yellow-700"),children:["Boarding Code: ",r.classCode||"N/A"]})]}),r.description&&(0,as.jsx)("p",{className:"text-sm mb-4 line-clamp-3 sm:line-clamp-2 whitespace-normal "+(T?"text-gray-300":"text-gray-600"),children:r.description})]}),(0,as.jsxs)("div",{className:"relative ml-4 dropdown-container",children:[(0,as.jsx)("button",{onClick:()=>O(A===r.id?null:r.id),className:"p-2 rounded-full transition-colors "+(T?"text-yellow-400 hover:text-yellow-300 hover:bg-yellow-700/30":"text-yellow-600 hover:text-yellow-700 hover:bg-yellow-100"),children:(0,as.jsx)(Wg,{className:"w-5 h-5"})}),A===r.id&&(0,as.jsx)("div",{className:"absolute right-0 -top-28 md:top-full mt-1 w-48 rounded-lg shadow-lg border-2 z-10 "+(T?"bg-[#0b1022] border-yellow-700/40":"bg-[#f5ecd2] border-yellow-300"),children:(0,as.jsxs)("div",{className:"py-1",children:[(0,as.jsxs)("button",{onClick:()=>{(async e=>{l(e),C(!0),h(!0);try{const t=await qs.getStudentsInClassroom(e.id);d(t)}catch(t){console.error("Fetch students error:",t),o(`Failed to load students for ${e.name}`)}finally{h(!1)}})(r),O(null)},className:"block w-full text-left px-4 py-2 text-sm transition-colors flex items-center gap-2 "+(T?"text-yellow-200 hover:bg-yellow-700/30":"text-yellow-800 hover:bg-yellow-200"),children:[(0,as.jsx)(Da,{className:"w-4 h-4"}),"View Crew"]}),(0,as.jsxs)("button",{onClick:()=>{(e=>{l(e),f(""),k(""),v([]),E(!0)})(r),O(null)},className:"block w-full text-left px-4 py-2 text-sm transition-colors flex items-center gap-2 "+(T?"text-yellow-200 hover:bg-yellow-700/30":"text-yellow-800 hover:bg-yellow-200"),children:[(0,as.jsx)(Ra,{className:"w-4 h-4"}),"Recruit Crew"]}),(0,as.jsxs)("button",{onClick:()=>{(async r=>{if(window.confirm("Are you sure you want to delete this classroom? This action cannot be undone."))try{await qs.deleteClassroom(r),t(e.filter((e=>e.id!==r))),i&&i.id===r&&(l(null),d([]))}catch(n){console.error("Delete classroom error:",n),o(n.message||"Failed to delete classroom")}})(r.id),O(null)},className:"block w-full text-left px-4 py-2 text-sm transition-colors flex items-center gap-2 "+(T?"text-red-400 hover:bg-red-900/30":"text-red-600 hover:bg-red-50"),children:[(0,as.jsx)(Ma,{className:"w-4 h-4"}),"Scuttle Ship"]})]})})]})]})})]},r.id)))})]}),(0,as.jsx)(lc,{isOpen:S,onClose:()=>{C(!1),l(null),d([]),o("")},title:i?`Crew of ${i.name}`:"Ship Crew",maxWidth:"max-w-4xl",children:u?(0,as.jsxs)("div",{className:"text-center py-4 flex items-center justify-center gap-2",children:[(0,as.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-yellow-500"}),(0,as.jsx)("span",{children:"Gathering the crew..."})]}):a&&S?(0,as.jsx)("div",{className:"text-red-500 py-4",children:a}):0===c.length?(0,as.jsxs)("div",{className:"text-center py-4 text-gray-500 flex flex-col items-center gap-2",children:[(0,as.jsx)(Da,{className:"text-4xl text-gray-400"}),(0,as.jsx)("span",{children:"No crew members aboard this ship yet."})]}):(0,as.jsx)("div",{className:"overflow-x-auto",children:(0,as.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,as.jsx)("thead",{className:"bg-gray-50",children:(0,as.jsxs)("tr",{children:[(0,as.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Crew ID"}),(0,as.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Crew Member"}),(0,as.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),(0,as.jsx)("tbody",{className:"bg-white dark:bg-transparent divide-y divide-gray-200",children:c.map((e=>(0,as.jsxs)("tr",{children:[(0,as.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:e.id}),(0,as.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,as.jsxs)("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-300",children:[e.firstName," ",e.lastName]})}),(0,as.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,as.jsxs)("button",{onClick:()=>(async e=>{if(i&&window.confirm("Are you sure you want to remove this student from the classroom?"))try{await qs.removeStudentFromClassroom(i.id,e),d((t=>t.filter((t=>t.id!==e))))}catch(t){console.error("Remove student error:",t),o(t.message||"Failed to remove student from classroom")}})(e.id),className:"text-red-600 hover:text-red-900 flex items-center gap-1",children:[(0,as.jsx)(Ma,{className:"w-3 h-3"}),"Walk the Plank"]})})]},e.id)))})]})})}),(0,as.jsxs)(lc,{isOpen:_,onClose:()=>{E(!1),f(""),k(""),v([]),o("")},title:i?`Recruit Crew for ${i.name}`:"Recruit Crew",maxWidth:"max-w-lg",children:[a&&_&&(0,as.jsx)("div",{className:"text-red-500 mb-3",children:a}),(0,as.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,as.jsxs)("div",{children:[(0,as.jsx)(Mi,{htmlFor:"studentSearch",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Search for New Crew Members"}),(0,as.jsxs)("div",{className:"relative",children:[(0,as.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,as.jsx)(Jg,{className:"text-gray-400 dark:text-gray-300"})}),(0,as.jsx)(Si,{type:"text",id:"studentSearch",placeholder:"Search by name or username...",className:"w-full pl-10 pr-3 py-2 border dark:text-gray-300 border-gray-300 dark:border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:N,onChange:e=>k(e.target.value)})]})]}),w?(0,as.jsxs)("div",{className:"text-center py-2 text-sm text-gray-500 dark:text-gray-300 flex items-center justify-center gap-2",children:[(0,as.jsx)("div",{className:"animate-spin rounded-full h-3 w-3 border-t-2 border-b-2 border-yellow-500"}),(0,as.jsx)("span",{children:"Searching the seas..."})]}):N&&0===y.length?(0,as.jsxs)("div",{className:"text-center py-2 text-sm text-gray-500 dark:text-gray-300 flex flex-col items-center gap-2",children:[(0,as.jsx)(Da,{className:"text-2xl text-gray-400"}),(0,as.jsxs)("span",{children:["No crew members found matching '",N,"'"]})]}):N?(0,as.jsx)("div",{className:"mt-2 max-h-60 overflow-y-auto",children:y.map((e=>(0,as.jsxs)("div",{className:"flex justify-between items-center p-3 border-b border-gray-100 "+(e.inClassroom?"":"hover:bg-blue-50 cursor-pointer transition-colors duration-150"),onClick:()=>!e.inClassroom&&z(e.id),children:[(0,as.jsxs)("div",{className:"flex-grow",children:[(0,as.jsxs)("p",{className:"font-medium text-gray-800 dark:text-gray-300",children:[e.firstName," ",e.lastName]}),(0,as.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-300",children:["@",e.username]})]}),e.inClassroom?(0,as.jsxs)("span",{className:"text-sm text-green-600 font-medium flex items-center gap-1",children:[(0,as.jsx)(Vs,{className:"w-3 h-3"}),"Already aboard"]}):e.isAdding?(0,as.jsxs)("span",{className:"text-sm text-blue-600 font-medium animate-pulse flex items-center gap-1",children:[(0,as.jsx)(Aa,{className:"w-3 h-3"}),"Recruiting..."]}):(0,as.jsx)("div",{className:"flex items-center",children:(0,as.jsxs)(bs,{onClick:t=>{t.stopPropagation(),z(e.id)},variant:"default",size:"sm",className:"text-sm flex items-center gap-1",children:[(0,as.jsx)(Ra,{className:"w-3 h-3"}),"Recruit"]})})]},e.id)))}):(0,as.jsxs)("div",{className:"text-center py-2 text-sm text-gray-500 dark:text-gray-300 flex flex-col items-center gap-2",children:[(0,as.jsx)(ia,{className:"text-2xl text-gray-400"}),(0,as.jsx)("span",{children:"Type to search for new crew members"})]})]})]})]})},hx=Pc("compass",[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),mx=()=>{const[e,t]=(0,n.useState)([]),[r,s]=(0,n.useState)(!0),[a,o]=(0,n.useState)(""),[i,l]=(0,n.useState)(""),{darkMode:c,isInitialized:d}=ds();(0,n.useEffect)((()=>{(async()=>{try{const e=await qs.getStudentClassrooms();t(e)}catch(e){o(e.message||"Failed to load classrooms")}finally{s(!1)}})()}),[]);const u=e.filter((e=>e.name.toLowerCase().includes(i.toLowerCase())||e.subject&&e.subject.toLowerCase().includes(i.toLowerCase())));return r?(0,as.jsxs)("div",{className:`min-h-screen transition-colors duration-300 ${c?"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900":"bg-gradient-to-br from-amber-50 via-yellow-50 to-orange-100"} relative overflow-hidden flex justify-center items-center`,children:[(0,as.jsxs)("div",{className:"absolute inset-0 opacity-10",children:[(0,as.jsx)("div",{className:"absolute top-10 left-10 text-6xl",children:"\u2693"}),(0,as.jsx)("div",{className:"absolute top-20 right-20 text-5xl",children:"\ud83d\uddfa\ufe0f"}),(0,as.jsx)("div",{className:"absolute bottom-20 left-20 text-5xl",children:"\ud83c\udff4\u200d\u2620\ufe0f"}),(0,as.jsx)("div",{className:"absolute bottom-10 right-10 text-6xl",children:"\u2694\ufe0f"})]}),(0,as.jsxs)("div",{className:"flex flex-col items-center gap-6 relative z-10",children:[(0,as.jsxs)("div",{className:"relative",children:[(0,as.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-amber-200 border-t-amber-600"}),(0,as.jsx)("div",{className:"absolute inset-0 rounded-full border-4 border-transparent animate-spin border-t-amber-400",style:{animationDirection:"reverse",animationDuration:"1.5s"}})]}),(0,as.jsxs)("div",{className:"text-center",children:[(0,as.jsx)("h3",{className:"text-xl font-semibold mb-2 "+(c?"text-amber-300":"text-amber-800"),children:"\u2693 Preparing Your Pirate Adventure"}),(0,as.jsx)("p",{className:""+(c?"text-amber-400":"text-amber-600"),children:"Charting the course to your classrooms..."})]})]})]}):(0,as.jsxs)("div",{className:`min-h-screen transition-colors duration-300 ${c?"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900":"bg-gradient-to-br from-amber-50 via-yellow-50 to-orange-100"} relative overflow-hidden`,children:[(0,as.jsxs)("div",{className:"absolute inset-0 opacity-5",children:[(0,as.jsx)("div",{className:"absolute top-20 left-10 text-8xl",children:"\u2693"}),(0,as.jsx)("div",{className:"absolute top-40 right-20 text-6xl",children:"\ud83d\uddfa\ufe0f"}),(0,as.jsx)("div",{className:"absolute bottom-40 left-20 text-7xl",children:"\ud83c\udff4\u200d\u2620\ufe0f"}),(0,as.jsx)("div",{className:"absolute bottom-20 right-10 text-8xl",children:"\u2694\ufe0f"}),(0,as.jsx)("div",{className:"absolute top-1/2 left-1/4 text-5xl",children:"\ud83c\udff4"}),(0,as.jsx)("div",{className:"absolute top-1/3 right-1/3 text-6xl",children:"\u2693"}),(0,as.jsx)("div",{className:"absolute bottom-1/3 left-1/2 text-5xl",children:"\ud83d\uddfa\ufe0f"})]}),(0,as.jsx)("div",{className:"relative z-10 px-4 sm:px-6 lg:px-8 py-8",children:(0,as.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,as.jsxs)("div",{className:"rounded-3xl shadow-2xl border-4 mb-8 overflow-hidden relative transition-colors duration-300 "+(c?"bg-gradient-to-r from-gray-800 via-gray-700 to-gray-800 border-gray-600":"bg-gradient-to-r from-amber-800 via-amber-700 to-amber-800 border-amber-600"),children:[(0,as.jsx)("div",{className:"absolute inset-0 transition-colors duration-300 "+(c?"bg-gradient-to-b from-gray-900/20 to-transparent":"bg-gradient-to-b from-amber-900/20 to-transparent")}),(0,as.jsx)("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:'url(\'data:image/svg+xml,%3Csvg width="60" height="60" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg"%3E%3Cg fill="none" fill-rule="evenodd"%3E%3Cg fill="%23d97706" fill-opacity="0.1"%3E%3Cpath d="M0 30h60v30H0z"/%3E%3C/g%3E%3C/g%3E%3C/svg%3E\')'}}),(0,as.jsxs)("div",{className:"relative z-10 p-8 text-center",children:[(0,as.jsxs)("div",{className:"flex items-center justify-center gap-4 mb-4",children:[(0,as.jsx)("div",{className:"text-4xl",children:"\ud83d\uddfa\ufe0f"}),(0,as.jsx)(po,{type:"h1",fontSize:"5xl",weight:"bold",className:"transition-colors duration-300 "+(c?"text-gray-100":"text-amber-100"),children:"My Treasure Maps"}),(0,as.jsx)("div",{className:"text-4xl",children:"\ud83c\udff4\u200d\u2620\ufe0f"})]}),(0,as.jsx)("p",{className:"text-lg transition-colors duration-300 "+(c?"text-gray-300":"text-amber-200"),children:"Explore your collection of classroom adventures"})]})]}),(0,as.jsxs)("div",{className:"rounded-2xl shadow-xl border-4 mb-8 overflow-hidden relative transition-colors duration-300 "+(c?"bg-gradient-to-r from-gray-800 to-gray-700 border-gray-600":"bg-gradient-to-r from-amber-800 to-amber-700 border-amber-600"),children:[(0,as.jsx)("div",{className:"absolute inset-0 transition-colors duration-300 "+(c?"bg-gradient-to-b from-gray-900/20 to-transparent":"bg-gradient-to-b from-amber-900/20 to-transparent")}),(0,as.jsx)("div",{className:"absolute inset-0 opacity-10",style:{backgroundImage:'url(\'data:image/svg+xml,%3Csvg width="40" height="40" viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg"%3E%3Cg fill="%23d97706" fill-opacity="0.1"%3E%3Cpath d="M0 20h40v20H0z"/%3E%3C/g%3E%3C/svg%3E\')'}}),(0,as.jsx)("div",{className:"relative z-10 p-6",children:(0,as.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,as.jsxs)("div",{className:"relative w-full sm:w-auto",children:[(0,as.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none transition-colors duration-300 "+(c?"text-gray-300":"text-amber-700"),children:(0,as.jsx)(hx,{className:"w-5 h-5"})}),(0,as.jsx)(Si,{type:"search",name:"search",id:"search",className:"block w-full sm:w-64 pl-10 pr-3 py-3 sm:text-sm transition-colors duration-300 "+(c?"border-gray-300 text-gray-300 bg-gray-700/50":"border-amber-700 text-amber-700 bg-amber-100/50"),placeholder:"Search treasure maps...",value:i,onChange:e=>l(e.target.value)})]}),(0,as.jsxs)(Te,{to:"/student/join-classroom",className:"font-semibold flex items-center gap-2 px-6 py-3 rounded-xl transition-all duration-300 transform hover:scale-105 shadow-lg "+(c?"bg-gradient-to-r from-blue-600 to-blue-700 text-white hover:from-blue-700 hover:to-blue-800":"bg-gradient-to-r from-amber-600 to-amber-700 text-white hover:from-amber-700 hover:to-amber-800"),children:[(0,as.jsx)(Ps,{className:"w-5 h-5"}),"Join New Adventure"]})]})})]}),a&&(0,as.jsxs)("div",{className:"border-2 rounded-xl p-6 mb-6 flex items-center gap-3 shadow-lg transition-colors duration-300 bg-gradient-to-r from-red-100 to-orange-100 border-red-400",children:[(0,as.jsx)("div",{className:"text-2xl",children:"\ud83d\udea8"}),(0,as.jsx)("span",{className:"block sm:inline text-red-800 font-medium",children:a}),(0,as.jsxs)("button",{className:"ml-auto text-red-600 hover:text-red-800 transition-colors duration-300",onClick:()=>o(""),children:[(0,as.jsx)("span",{className:"sr-only",children:"Close"}),(0,as.jsx)("span",{className:"text-xl",children:"\xd7"})]})]}),0===e.length?(0,as.jsxs)("div",{className:"rounded-2xl shadow-2xl border-4 p-8 text-center transition-colors duration-300 "+(c?"bg-gradient-to-br from-gray-100 to-gray-50 border-gray-300":"bg-gradient-to-br from-amber-100 to-amber-50 border-amber-400"),children:[(0,as.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\uddfa\ufe0f"}),(0,as.jsx)("p",{className:"text-lg font-medium mb-6 transition-colors duration-300 "+(c?"text-gray-700":"text-amber-700"),children:"Ahoy! You haven't joined any classroom adventures yet!"}),(0,as.jsx)(Te,{to:"/student/join-classroom",children:(0,as.jsxs)(bs,{className:"flex items-center gap-2 px-6 py-3 rounded-xl transition-all duration-300 transform hover:scale-105 shadow-lg "+(c?"bg-gradient-to-r from-blue-600 to-blue-700 text-white hover:from-blue-700 hover:to-blue-800":"bg-gradient-to-r from-amber-600 to-amber-700 text-white hover:from-amber-700 hover:to-amber-800"),children:[(0,as.jsx)(Ps,{className:"w-5 h-5"}),"Join Your First Adventure"]})})]}):0===u.length?(0,as.jsxs)("div",{className:"rounded-2xl shadow-2xl border-4 p-8 text-center transition-colors duration-300 "+(c?"bg-gradient-to-br from-gray-100 to-gray-50 border-gray-300":"bg-gradient-to-br from-amber-100 to-amber-50 border-amber-400"),children:[(0,as.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udd0d"}),(0,as.jsxs)("p",{className:"text-lg font-medium transition-colors duration-300 "+(c?"text-gray-700":"text-amber-700"),children:["No treasure maps found for '",i,"'"]})]}):(0,as.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:u.map((e=>{var t,r,n,s,a;return(0,as.jsx)(Te,{to:`/student/classrooms/${e.id}`,className:"block group",children:(0,as.jsxs)("div",{className:"rounded-2xl shadow-xl overflow-hidden flex flex-col transition-all duration-300 transform group-hover:scale-105 group-hover:shadow-2xl "+(c?"bg-gradient-to-br from-gray-100 to-gray-50 border-4 border-gray-300":"bg-gradient-to-br from-amber-100 to-amber-50 border-4 border-amber-400"),children:[(0,as.jsxs)("div",{className:"px-4 py-3 text-white text-base sm:text-lg font-semibold text-left relative overflow-hidden transition-colors duration-300 "+(c?"bg-gradient-to-r from-gray-700 to-gray-600":"bg-gradient-to-r from-amber-700 to-amber-600"),children:[(0,as.jsx)("div",{className:"absolute top-2 right-2 text-lg opacity-60",children:"\ud83d\uddfa\ufe0f"}),(0,as.jsx)("div",{className:"absolute bottom-2 left-2 text-sm opacity-40",children:"\u2693"}),(0,as.jsx)("div",{className:"relative z-10",children:e.shortCode||(null===(t=e.subject)||void 0===t||null===(r=t.substring(0,3))||void 0===r?void 0:r.toUpperCase())||"CLASS"})]}),(0,as.jsxs)("div",{className:"w-full h-48 relative overflow-hidden",children:[e.image?(0,as.jsx)("img",{src:`data:image/jpeg;base64,${e.image}`,alt:e.name,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110"}):(0,as.jsx)("div",{className:"w-full h-full flex items-center justify-center transition-colors duration-300 "+(c?"bg-gradient-to-br from-gray-800 to-gray-900":"bg-gradient-to-br from-amber-800 to-amber-900"),children:(0,as.jsxs)("div",{className:"text-center",children:[(0,as.jsx)("div",{className:"text-4xl mb-2",children:"\ud83c\udff4\u200d\u2620\ufe0f"}),(0,as.jsx)("span",{className:"font-medium text-lg lg:text-3xl transition-colors duration-300 "+(c?"text-gray-100":"text-amber-100"),children:e.shortCode||"N/A"})]})}),(0,as.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),(0,as.jsxs)("div",{className:"p-5 text-left flex-grow flex flex-col justify-start",children:[(0,as.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,as.jsx)("div",{className:"text-xl",children:"\ud83d\uddfa\ufe0f"}),(0,as.jsx)(po,{type:"h2",fontSize:"xl",weight:"bold",className:"truncate transition-colors duration-300 "+(c?"text-gray-800":"text-amber-800"),title:e.name,children:e.name})]}),(0,as.jsxs)("div",{className:"flex items-center gap-2",children:[(0,as.jsx)(ix,{className:"w-4 h-4 transition-colors duration-300 "+(c?"text-gray-600":"text-amber-600")}),(0,as.jsxs)("p",{className:"text-sm sm:text-base font-medium transition-colors duration-300 "+(c?"text-gray-700":"text-amber-700"),children:["Captain: ",null!==(n=e.teacher)&&void 0!==n&&n.firstName&&null!==(s=e.teacher)&&void 0!==s&&s.lastName?`${e.teacher.firstName} ${e.teacher.lastName}`:(null===(a=e.teacher)||void 0===a?void 0:a.name)||"N/A"]})]}),(0,as.jsxs)("div",{className:"mt-3 flex items-center gap-2",children:[(0,as.jsx)("div",{className:"text-lg",children:"\u2694\ufe0f"}),(0,as.jsx)("p",{className:"text-sm transition-colors duration-300 "+(c?"text-gray-600":"text-amber-600"),children:"Ready for adventure!"})]})]})]})},e.id)}))})]})})]})},fx=()=>{const{currentUser:e,logout:t,refreshCurrentUser:r}=is(),s=X(),[a,o]=(0,n.useState)(null),[i,l]=(0,n.useState)(!0),[c,d]=(0,n.useState)(""),[u,h]=(0,n.useState)(""),[m,f]=(0,n.useState)("edit"),[p,g]=(0,n.useState)(!1),[x,b]=(0,n.useState)(Date.now()),[y,v]=(0,n.useState)(!1),[w,j]=(0,n.useState)(""),[N,k]=(0,n.useState)(!1),[S,C]=(0,n.useState)(!1),[_,E]=(0,n.useState)(!1),[A,O]=(0,n.useState)(!1),[T,z]=(0,n.useState)({fullName:"",username:"",email:""}),[P,I]=(0,n.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),[L,M]=(0,n.useState)(""),[q,R]=(0,n.useState)(""),[D,F]=(0,n.useState)(!1),[B,$]=(0,n.useState)(!1),[U,H]=(0,n.useState)(!1),[W,Q]=(0,n.useState)(!1),V=(0,n.useRef)(null),{darkMode:G}=ds(),K=e=>{if(e.profileImage){const t=((e,t)=>{if(!e)return"";let r="image/jpeg";return t&&(t.endsWith(".png")?r="image/png":t.endsWith(".gif")?r="image/gif":t.endsWith(".webp")&&(r="image/webp")),`data:${r};base64,${e}`})(e.profileImage,e.profileImageName);j(t)}else j("");o(e),z({fullName:`${e.firstName||""} ${e.lastName||""}`.trim(),username:e.username||"",email:e.email||""}),g(!!e.pendingEmail&&e.pendingEmail!==e.email),v(!1)};(0,n.useEffect)((()=>{if(!e)return void s("/login");(async()=>{l(!0),d("");try{const e=await Ls.getUserProfile();K(e),l(!1)}catch(e){l(!1)}})()}),[e,s]);const Y=e=>{const{name:t,value:r}=e.target;z((e=>({...e,[t]:r})))},Z=e=>{const{name:t,value:r}=e.target;I((e=>({...e,[t]:r})))},J=e=>{var t;if(!e||!Array.isArray(e)||0===e.length)return"N/A";const r="string"===typeof e[0]?e[0]:null===(t=e[0])||void 0===t?void 0:t.name;return r?r.replace("ROLE_","").charAt(0).toUpperCase()+r.replace("ROLE_","").slice(1).toLowerCase():"N/A"},ee=`${J(null===a||void 0===a?void 0:a.roles)} Profile`,te=async()=>{try{C(!0),await Ls.resendVerificationEmail(),h("Verification email has been resent. Please check your inbox."),k(!1);const e=await Ls.getUserProfile();K(e)}catch(e){d(e.message||"Failed to resend verification email.")}finally{C(!1)}};return(0,n.useEffect)((()=>{const e=new URLSearchParams(window.location.search).get("token");e&&(async e=>{try{const r=await fetch(`http://localhost:8080/auth/verify?token=${e}`,{method:"GET",headers:{"Content-Type":"application/json"}}),n=await r.json();r.ok?(await t(),s("/login",{state:{message:"Email verified successfully! Please log in with your new email address."}})):d(n.message||"Failed to verify email")}catch(r){console.error("Email verification error:",r),d("Failed to verify email. Please try again.")}})(e)}),[]),i&&!a?(0,as.jsx)("div",{className:"flex justify-center items-center min-h-[60vh] sm:min-h-[70vh] md:min-h-[80vh] lg:min-h-[85vh]",style:{backgroundImage:G?"linear-gradient(180deg, rgba(2,6,23,1) 0%, rgba(3,7,18,1) 100%)":"linear-gradient(135deg, #fef3c7 0%, #fde68a 50%, #f59e0b 100%)",backgroundSize:"cover",backgroundRepeat:"no-repeat"},children:(0,as.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 sm:h-12 sm:w-12 border-t-2 border-b-2 border-primary"})}):a?(0,as.jsx)("div",{className:"px-4 sm:px-6 lg:py-10 py-6",style:{backgroundImage:G?"linear-gradient(180deg, rgba(2,6,23,1) 0%, rgba(3,7,18,1) 100%)":"linear-gradient(135deg, #fef3c7 0%, #fde68a 50%, #f59e0b 100%)",backgroundSize:"cover",backgroundRepeat:"no-repeat"},children:(0,as.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,as.jsx)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-center gap-3 mb-4",children:(0,as.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3",children:[(0,as.jsx)(ia,{className:(G?"text-yellow-400":"text-yellow-700")+" text-lg sm:text-xl"}),(0,as.jsxs)(po,{type:"h1",fontSize:"5xl",weight:"bold",className:(G?"text-yellow-300":"text-primary")+" mb-1 text-3xl sm:text-4xl lg:text-5xl",children:[" ",ee," "]}),(0,as.jsx)(Oa,{className:(G?"text-yellow-400":"text-yellow-700")+" text-lg sm:text-xl"})]})}),(0,as.jsx)("div",{className:"h-[2px] w-full bg-gradient-to-r from-yellow-400 via-amber-500 to-yellow-600 mb-4 sm:mb-6 md:mb-8 opacity-80"}),(null===a||void 0===a?void 0:a.createdByAdmin)&&!(null!==a&&void 0!==a&&a.emailVerified)&&(null===a||void 0===a?void 0:a.emailVerificationRequired)&&(0,as.jsxs)("div",{className:"mb-4 bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded relative text-sm sm:text-base",role:"alert",children:[(0,as.jsx)("strong",{children:"Email Verification Required:"})," Please verify your email address to access all features.",N?(0,as.jsx)("button",{onClick:te,className:"ml-2 text-yellow-700 underline",disabled:S,children:S?"Sending...":"Click to resend"}):(0,as.jsx)("button",{onClick:()=>k(!0),className:"ml-2 text-yellow-700 underline",disabled:S,children:S?"Sending...":"Resend verification email"})]}),(null===a||void 0===a?void 0:a.temporaryPassword)&&(0,as.jsxs)("div",{className:"mb-4 bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded relative text-sm sm:text-base",role:"alert",children:[(0,as.jsx)("strong",{children:"Password Update Required:"})," You are using a temporary password. Please update your password for security.",(0,as.jsx)("p",{className:"text-xs sm:text-sm mt-1",children:"Your temporary password will expire in 7 days."})]}),(0,as.jsxs)("div",{className:"flex flex-col md:flex-row gap-6 md:gap-8",children:[(0,as.jsxs)("div",{className:"w-full md:w-1/3 flex flex-col items-center space-y-4 mt-6 md:mt-12 px-6 sm:px-10 rounded-2xl border border-white/10 dark:border-yellow-600/40 shadow-xl",style:{background:G?"rgba(10, 13, 26, 0.85)":"#f5ecd2",boxShadow:G?"0 10px 25px rgba(255, 215, 0, 0.08)":"0 10px 25px rgba(0,0,0,0.1)"},children:[(0,as.jsx)(ac,{className:"h-40 w-40 sm:h-48 sm:w-48 md:h-52 md:w-52 shadow-sm rounded-md overflow-hidden mt-6",children:w?(0,as.jsx)(oc,{src:w,alt:T.fullName,onLoad:()=>{v(!0)},onError:()=>{v(!1),(async()=>{try{const e=await Ls.getProfileImage();return!!e&&(j(e),!0)}catch(e){return!1}})()},style:{objectFit:"cover"}},x):(0,as.jsx)(ic,{className:"text-3xl sm:text-4xl bg-yellow-500 text-white",children:(re=null===a||void 0===a?void 0:a.firstName,ne=null===a||void 0===a?void 0:a.lastName,`${re?re[0]:""}${ne?ne[0]:""}`.toUpperCase())})}),(0,as.jsx)("input",{type:"file",ref:V,onChange:async e=>{const t=e.target.files[0];if(t){d(""),h(""),E(!0);try{await Ls.uploadProfilePicture(t);h("Profile picture updated successfully.");const e=await Ls.getUserProfile();K(e),await r(),b(Date.now()),V.current&&(V.current.value="")}catch(n){d(n.message||"Failed to upload photo.")}finally{E(!1)}}},accept:"image/*",style:{display:"none"}}),(0,as.jsx)(bs,{type:"button",onClick:()=>{var e;null===(e=V.current)||void 0===e||e.click()},variant:"link",size:"sm",className:"w-full",rounded:"full",disabled:_,children:_?"Hoisting Portrait...":null!==a&&void 0!==a&&a.profileImage?"Change Portrait":"Upload a Portrait"}),(0,as.jsxs)("div",{className:"flex items-center gap-2 mb-6 opacity-80",children:[(0,as.jsx)(Aa,{className:(G?"text-gray-400":"text-gray-600")+" text-base sm:text-lg"}),(0,as.jsxs)("span",{className:(G?"text-gray-300":"text-gray-700")+" text-sm sm:text-base",children:["Captain ",T.fullName||(null===e||void 0===e?void 0:e.username)]})]})]}),(0,as.jsx)("div",{className:"w-full md:w-2/3 rounded-2xl border border-white/10 dark:border-yellow-600/40 shadow-xl",style:{background:G?"rgba(10, 13, 26, 0.85)":"#f5ecd2",boxShadow:G?"0 10px 25px rgba(255, 215, 0, 0.08)":"0 10px 25px rgba(0,0,0,0.1)"},children:(0,as.jsxs)(ql,{value:m,onValueChange:f,className:"w-full",children:[(0,as.jsxs)(Rl,{className:"mb-4 sm:mb-6 !font-montserrat tracking-wide bg-transparent p-3 sm:p-4 flex gap-4 sm:gap-6 border-b border-yellow-600/30 overflow-x-auto",children:[(0,as.jsx)(Dl,{value:"edit",className:"py-2 !rounded-none !px-0 text-base sm:text-lg !text-left !bg-transparent mr-3 "+("edit"===m?"dark:text-yellow-300 text-yellow-800 font-bold border-b-2 border-yellow-500":"dark:text-gray-300 text-yellow-900/80"),children:"Edit Info"}),(0,as.jsx)(Dl,{value:"password",className:"!px-0 sm:!px-2 rounded-none py-2 text-base sm:text-lg !bg-transparent "+("password"===m?"dark:text-yellow-300 text-yellow-800 font-bold border-b-2 border-yellow-500 ":"dark:text-gray-300 text-yellow-900/80 "),children:"Change Password"})]}),(0,as.jsx)(Fl,{value:"edit",className:"px-4 sm:px-6 pb-6 sm:pb-8",children:(0,as.jsxs)("div",{children:[c&&(0,as.jsx)("div",{className:"mb-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative text-sm sm:text-base",role:"alert",children:c}),u&&(0,as.jsx)("div",{className:"mb-4 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative text-sm sm:text-base",role:"alert",children:u}),(0,as.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),d(""),h(""),O(!0);const t=T.fullName.trim().split(" "),n=t[0]||"",s=t.slice(1).join(" ")||"";try{const e={firstName:n,lastName:s,email:T.email,username:T.username},t=await Ls.updateUserProfile(e);a.email!==T.email?(g(!0),h("A verification email has been sent to your new email address. Please check your inbox and verify to complete the update. You will be logged out after verification.")):h("Profile updated successfully"),await r(),K(t),O(!1)}catch(o){console.error("Profile update error:",o),d(o.message||"Failed to update profile"),O(!1)}},className:"space-y-4",children:[(0,as.jsxs)("div",{children:[(0,as.jsx)(Mi,{htmlFor:"fullName",className:"block mb-1 "+(G?"text-yellow-200":"text-gray-800")+" text-sm sm:text-base",children:"Full Name"}),(0,as.jsx)(Si,{id:"fullName",name:"fullName",type:"text",required:!0,className:"mt-1 block w-full "+(G?"!bg-[#0f1428] !text-gray-100":"!bg-[#fbf4de] !text-gray-900"),value:T.fullName,onChange:Y,disabled:A})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)(Mi,{htmlFor:"username",className:"block mb-1 "+(G?"text-yellow-200":"text-gray-800")+" text-sm sm:text-base",children:"Username"}),(0,as.jsx)(Si,{id:"username",name:"username",type:"text",required:!0,className:"mt-1 block w-full "+(G?"!bg-[#0f1428] !text-gray-100":"!bg-[#fbf4de] !text-gray-900"),value:T.username,onChange:Y,disabled:A}),(0,as.jsx)("p",{className:"text-xs mt-1 "+(G?"text-yellow-300/80":"text-yellow-700"),children:"Username can be changed if not already taken by another user."})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)(Mi,{htmlFor:"email",className:"block mb-1 "+(G?"text-yellow-200":"text-gray-800")+" text-sm sm:text-base",children:"Email"}),(0,as.jsx)(Si,{id:"email",name:"email",type:"email",required:!0,className:"mt-1 block w-full "+(G?"!bg-[#0f1428] !text-gray-100":"!bg-[#fbf4de] !text-gray-900"),value:T.email,onChange:Y,disabled:A}),(null===a||void 0===a?void 0:a.createdByAdmin)&&!(null!==a&&void 0!==a&&a.emailVerified)&&(null===a||void 0===a?void 0:a.emailVerificationRequired)&&(0,as.jsxs)("div",{className:"mt-2 text-sm text-yellow-600",children:["Email verification required for admin-created account.",(0,as.jsx)("button",{onClick:te,className:"ml-2 text-blue-600 hover:text-blue-800 underline",disabled:S,children:S?"Sending...":"Resend verification email"})]}),p&&(0,as.jsx)("div",{className:"mt-2 text-sm "+(G?"text-yellow-300":"text-yellow-700"),children:"A verification email has been sent to your new email address. Please check your inbox and verify to complete the update."}),!p&&!(null!==a&&void 0!==a&&a.createdByAdmin)&&(0,as.jsx)("p",{className:"text-xs mt-1 "+(G?"text-yellow-300/80":"text-yellow-700"),children:"Changing your email will require verification of the new address."})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)(Mi,{htmlFor:"role",className:"block mb-1 "+(G?"text-yellow-200":"text-gray-800")+" text-sm sm:text-base",children:"Account Role"}),(0,as.jsx)(Si,{id:"role",name:"role",type:"text",readOnly:!0,className:"mt-1 block w-full !bg-[#D9D9D9] !text-[#464545] !border-none !rounded-none   cursor-not-allowed",value:J(null===a||void 0===a?void 0:a.roles)})]}),(0,as.jsxs)("div",{className:"flex flex-col sm:flex-row justify-start gap-3 pt-4",children:[(0,as.jsx)(bs,{type:"submit",disabled:A,variant:"default",size:"sm",rounded:"full",className:"w-full sm:w-1/2 lg:w-1/4",children:A?"Saving Booty...":"Save Changes"}),(0,as.jsx)(bs,{type:"button",variant:"cancel",size:"sm",rounded:"full",onClick:()=>s(-1),disabled:A,className:"w-full sm:w-1/2 lg:w-1/4",children:"Cancel"})]})]})]})}),(0,as.jsx)(Fl,{value:"password",className:"px-4 sm:px-6 pb-6 sm:pb-8",children:(0,as.jsxs)("div",{className:"",children:[L&&(0,as.jsx)("div",{className:"mb-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative text-sm sm:text-base",role:"alert",children:L}),q&&(0,as.jsx)("div",{className:"mb-4 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative text-sm sm:text-base",role:"alert",children:q}),(0,as.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),M(""),R(""),F(!0),P.newPassword!==P.confirmPassword)return M("New passwords do not match."),void F(!1);if(P.newPassword.length<6)return M("Password must be at least 6 characters long."),void F(!1);try{const e=await ts.changePassword(P.currentPassword,P.newPassword,P.confirmPassword);R(e.message||"Password changed successfully."),I({currentPassword:"",newPassword:"",confirmPassword:""})}catch(t){console.error("Password change error:",t),M(t.message||"Failed to change password.")}finally{F(!1)}},className:"space-y-4",children:[(0,as.jsxs)("div",{children:[(0,as.jsx)(Mi,{htmlFor:"currentPassword",className:"block mb-1 "+(G?"text-yellow-200":"text-gray-800")+" text-sm sm:text-base",children:"Current Password"}),(0,as.jsxs)("div",{className:"relative",children:[(0,as.jsx)(Si,{id:"currentPassword",name:"currentPassword",type:B?"text":"password",required:!0,className:"mt-1 block w-full "+(G?"!bg-[#0f1428] !text-gray-100":"!bg-[#fbf4de] !text-gray-900"),value:P.currentPassword,onChange:Z,disabled:D}),(0,as.jsx)("button",{type:"button",className:"absolute inset-y-0 right-3 flex items-center text-gray-500 z-10 bg-transparent",onClick:()=>$((e=>!e)),tabIndex:-1,"aria-label":"Toggle current password visibility",style:{background:"none",border:"none",padding:0},children:B?(0,as.jsx)(Ha,{}):(0,as.jsx)(Wa,{})})]})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)(Mi,{htmlFor:"newPassword",className:"block mb-1 "+(G?"text-yellow-200":"text-gray-800")+" text-sm sm:text-base",children:"New Password"}),(0,as.jsxs)("div",{className:"relative",children:[(0,as.jsx)(Si,{id:"newPassword",name:"newPassword",type:U?"text":"password",required:!0,className:"mt-1 block w-full "+(G?"!bg-[#0f1428] !text-gray-100":"!bg-[#fbf4de] !text-gray-900"),value:P.newPassword,onChange:Z,disabled:D}),(0,as.jsx)("button",{type:"button",className:"absolute inset-y-0 right-3 flex items-center text-gray-500 z-10 bg-transparent",onClick:()=>H((e=>!e)),tabIndex:-1,"aria-label":"Toggle new password visibility",style:{background:"none",border:"none",padding:0},children:U?(0,as.jsx)(Ha,{}):(0,as.jsx)(Wa,{})})]}),(0,as.jsx)("p",{className:"text-xs mt-1 "+(G?"text-yellow-300/80":"text-yellow-700"),children:"Must be at least 6 characters long."})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)(Mi,{htmlFor:"confirmPassword",className:"block mb-1 "+(G?"text-yellow-200":"text-gray-800")+" text-sm sm:text-base",children:"Confirm New Password"}),(0,as.jsxs)("div",{className:"relative",children:[(0,as.jsx)(Si,{id:"confirmPassword",name:"confirmPassword",type:W?"text":"password",required:!0,className:"mt-1 block w-full "+(G?"!bg-[#0f1428] !text-gray-100":"!bg-[#fbf4de] !text-gray-900"),value:P.confirmPassword,onChange:Z,disabled:D}),(0,as.jsx)("button",{type:"button",className:"absolute inset-y-0 right-3 flex items-center text-gray-500 z-10 bg-transparent",onClick:()=>Q((e=>!e)),tabIndex:-1,"aria-label":"Toggle confirm password visibility",style:{background:"none",border:"none",padding:0},children:W?(0,as.jsx)(Ha,{}):(0,as.jsx)(Wa,{})})]})]}),(0,as.jsxs)("div",{className:"flex flex-col sm:flex-row justify-start gap-3 pt-4",children:[(0,as.jsx)(bs,{type:"submit",disabled:D,variant:"default",size:"sm",className:"w-full sm:w-1/2 lg:w-1/4",rounded:"full",children:D?"Saving Booty...":"Save Changes"}),(0,as.jsx)(bs,{type:"button",variant:"cancel",size:"sm",className:"w-full sm:w-1/2 lg:w-1/4",rounded:"full",onClick:()=>I({currentPassword:"",newPassword:"",confirmPassword:""}),disabled:D,children:"Cancel"})]})]})]})})]})})]})]})}):(0,as.jsx)("div",{className:"flex justify-center items-center min-h-[60vh] sm:min-h-[70vh] md:min-h-[80vh] lg:min-h-[85vh]",style:{backgroundImage:G?"linear-gradient(180deg, rgba(2,6,23,1) 0%, rgba(3,7,18,1) 100%)":"linear-gradient(135deg, #fef3c7 0%, #fde68a 50%, #f59e0b 100%)",backgroundSize:"cover",backgroundRepeat:"no-repeat"},children:(0,as.jsx)("div",{className:"text-base sm:text-lg md:text-xl font-semibold text-red-600",children:c||"Could not load profile."})});var re,ne},px=(0,n.createContext)(),gx=e=>{let{children:t}=e;const{isAdmin:r}=is(),[s,a]=(0,n.useState)([]),[o,i]=(0,n.useState)([]),[l,c]=(0,n.useState)([]),[d,u]=(0,n.useState)(!0),h=[{id:1,name:"Commutative Property",formula:"a \xd7 b = b \xd7 a",description:"The order of factors doesn't change the product.",example:"5 \xd7 3 = 3 \xd7 5 = 15",icon:"\ud83d\udd04"},{id:2,name:"Associative Property",formula:"(a \xd7 b) \xd7 c = a \xd7 (b \xd7 c)",description:"The way factors are grouped doesn't change the product.",example:"(2 \xd7 3) \xd7 4 = 2 \xd7 (3 \xd7 4) = 24",icon:"\ud83d\udd17"},{id:3,name:"Distributive Property",formula:"a \xd7 (b + c) = a \xd7 b + a \xd7 c",description:"Multiplying a sum by a number is the same as multiplying each addend by the number and then adding the products.",example:"3 \xd7 (4 + 2) = 3 \xd7 4 + 3 \xd7 2 = 12 + 6 = 18",icon:"\ud83d\udce6"},{id:4,name:"Identity Property",formula:"a \xd7 1 = a",description:"Any number multiplied by 1 equals itself.",example:"7 \xd7 1 = 7",icon:"\ud83c\udd94"},{id:5,name:"Zero Property",formula:"a \xd7 0 = 0",description:"Any number multiplied by 0 equals 0.",example:"9 \xd7 0 = 0",icon:"0\ufe0f\u20e3"}],m=[{id:1,problem:"What is 4 \xd7 5?",answer:"20",hint:"Remember the commutative property: 4 \xd7 5 = 5 \xd7 4",property:"Commutative Property"},{id:2,problem:"What is (2 \xd7 3) \xd7 4?",answer:"24",hint:"Use the associative property to group the numbers differently",property:"Associative Property"},{id:3,problem:"What is 3 \xd7 (4 + 2)?",answer:"18",hint:"Use the distributive property to multiply each addend separately",property:"Distributive Property"}],f=[{id:1,question:"If 6 \xd7 (3 + 4) = (6 \xd7 3) + (6 \xd7 4), which property is being demonstrated?",property:"Distributive Property",answers:["Commutative Property","Associative Property","Distributive Property","Identity Property"],correctAnswer:"Distributive Property",explanation:"The distributive property allows us to multiply a sum by multiplying each addend separately and then adding the products."},{id:2,question:"What is the value of (5 \xd7 2) \xd7 3?",property:"Associative Property",answers:["15","30","25","20"],correctAnswer:"30",explanation:"Using the associative property: (5 \xd7 2) \xd7 3 = 10 \xd7 3 = 30"},{id:3,question:"If a \xd7 b = b \xd7 a, which property is being demonstrated?",property:"Commutative Property",answers:["Commutative Property","Associative Property","Distributive Property","Identity Property"],correctAnswer:"Commutative Property",explanation:"The commutative property states that changing the order of factors doesn't change the product."}];(0,n.useEffect)((()=>{(()=>{const e=localStorage.getItem("properties"),t=localStorage.getItem("practiceProblems"),r=localStorage.getItem("challengeQuestions");e||localStorage.setItem("properties",JSON.stringify(h)),t||localStorage.setItem("practiceProblems",JSON.stringify(m)),r||localStorage.setItem("challengeQuestions",JSON.stringify(f)),a(e?JSON.parse(e):h),i(t?JSON.parse(t):m),c(r?JSON.parse(r):f),u(!1)})()}),[]);const p={properties:s,practiceProblems:o,challengeQuestions:l,updateContent:(e,t,n)=>{if(r())switch(e){case"properties":let e;if(null===t){const t=Math.max(...s.map((e=>e.id)),0)+1;e=[...s,{...n,id:t}]}else e=null===n?s.filter((e=>e.id!==t)):s.map((e=>e.id===t?{...e,...n}:e));a(e),localStorage.setItem("properties",JSON.stringify(e));break;case"practice":let r;if(null===t){const e=Math.max(...o.map((e=>e.id)),0)+1;r=[...o,{...n,id:e}]}else r=null===n?o.filter((e=>e.id!==t)):o.map((e=>e.id===t?{...e,...n}:e));i(r),localStorage.setItem("practiceProblems",JSON.stringify(r));break;case"challenge":let d;if(null===t){const e=Math.max(...l.map((e=>e.id)),0)+1;d=[...l,{...n,id:e}]}else d=null===n?l.filter((e=>e.id!==t)):l.map((e=>e.id===t?{...e,...n}:e));c(d),localStorage.setItem("challengeQuestions",JSON.stringify(d))}},loading:d};return(0,as.jsx)(px.Provider,{value:p,children:!d&&t})},xx=(0,n.createContext)(),bx=()=>(0,n.useContext)(xx),yx=e=>{let{children:t}=e;const{currentUser:r,isTeacher:s,isStudent:a}=is(),[o,i]=(0,n.useState)([]),[l,c]=(0,n.useState)([]),[d,u]=(0,n.useState)(!1);(0,n.useEffect)((()=>{null!==r&&void 0!==r&&r.email&&h()}),[r]);const h=async()=>{if(null!==r&&void 0!==r&&r.email)try{u(!0);let t=[];if(s()?t=await qs.getTeacherClassrooms():a()&&(t=await qs.getStudentClassrooms()),t&&t.length>0)c(t),i((e=>{const r=new Set(e.map((e=>e.id))),n=t.filter((e=>!r.has(e.id)));return[...e,...n]}));else{const t=localStorage.getItem(`userClassrooms_${r.email}`);if(t)try{const e=JSON.parse(t);c(e)}catch(e){console.error("Failed to parse stored classrooms:",e),c([])}else c([])}}catch(t){console.error("Failed to load user classrooms from API:",t);try{const e=localStorage.getItem(`userClassrooms_${r.email}`);if(e){const t=JSON.parse(e);c(t)}else c([])}catch(n){console.error("Failed to load classrooms from localStorage:",n),c([])}}finally{u(!1)}};(0,n.useEffect)((()=>{if(null!==r&&void 0!==r&&r.email&&l.length>0)try{const e=l.map((e=>({id:e.id,name:e.name,shortCode:e.shortCode,teacherId:e.teacherId,code:e.code,createdAt:e.createdAt})));localStorage.setItem(`userClassrooms_${r.email}`,JSON.stringify(e))}catch(e){if(console.error("Failed to save classrooms to localStorage:",e),"QuotaExceededError"===e.name)try{const e=[];for(let r=0;r<localStorage.length;r++){const t=localStorage.key(r);t&&t.startsWith("userClassrooms_")&&e.push(t)}e.forEach((e=>localStorage.removeItem(e)));const t=l.map((e=>({id:e.id,name:e.name})));localStorage.setItem(`userClassrooms_${r.email}`,JSON.stringify(t))}catch(t){console.error("Failed to save classrooms even after clearing old data:",t)}}else if(null!==r&&void 0!==r&&r.email&&0===l.length)try{localStorage.removeItem(`userClassrooms_${r.email}`)}catch(e){console.error("Failed to remove empty classroom data from localStorage:",e)}}),[l,r]);const m=()=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let t="";for(let r=0;r<6;r++)t+=e.charAt(Math.floor(36*Math.random()));return t},f={classrooms:o,userClassrooms:l,loading:d,createClassroom:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n={id:Date.now().toString(),name:e,teacherId:t,code:m(),students:[],createdAt:(new Date).toISOString(),...r,content:{lessons:[],quizzes:[],activities:[],exams:[]}};return i((e=>[...e,n])),n},updateClassroom:(e,t)=>{const r=o.find((t=>t.id===e));if(!r)return{success:!1,error:"Classroom not found"};const n={...r,...t,updatedAt:(new Date).toISOString()};return i((t=>t.map((t=>t.id===e?n:t)))),c((t=>t.map((t=>t.id===e?n:t)))),{success:!0,classroom:n}},deleteClassroom:e=>{const t=o.find((t=>t.id===e));return t?(i((t=>t.filter((t=>t.id!==e)))),c((t=>t.filter((t=>t.id!==e)))),{success:!0}):{success:!1,error:"Classroom not found"}},addContent:(e,t,r)=>{const n=o.find((t=>t.id===e));if(!n)return{success:!1,error:"Classroom not found"};const s={...n,content:{...n.content,[t]:[...n.content[t]||[],{...r,id:Date.now().toString()}]}};return i((t=>t.map((t=>t.id===e?s:t)))),c((t=>t.map((t=>t.id===e?s:t)))),{success:!0,classroom:s}},removeContent:(e,t,r)=>{const n=o.find((t=>t.id===e));if(!n)return{success:!1,error:"Classroom not found"};const s={...n,content:{...n.content,[t]:n.content[t].filter((e=>e.id!==r))}};return i((t=>t.map((t=>t.id===e?s:t)))),c((t=>t.map((t=>t.id===e?s:t)))),{success:!0,classroom:s}},joinClassroom:(e,t)=>{const r=o.find((t=>t.code===e));if(!r)return{success:!1,error:"Invalid classroom code"};if(r.students.includes(t))return{success:!1,error:"Already joined this classroom"};const n={...r,students:[...r.students,t]};return i((e=>e.map((e=>e.id===r.id?n:e)))),c((e=>[...e,n])),{success:!0,classroom:n}},leaveClassroom:(e,t)=>{const r=o.find((t=>t.id===e));if(!r)return{success:!1,error:"Classroom not found"};const n={...r,students:r.students.filter((e=>e!==t))};return i((t=>t.map((t=>t.id===e?n:t)))),c((t=>t.filter((t=>t.id!==e)))),{success:!0}},getClassroomById:e=>o.find((t=>t.id===e)),getUserClassrooms:e=>l,getTeacherClassrooms:e=>o.filter((t=>t.teacherId===e)),getAllClassrooms:()=>o,loadUserClassrooms:h,clearClassroomStorage:()=>{try{const e=[];for(let t=0;t<localStorage.length;t++){const r=localStorage.key(t);r&&r.startsWith("userClassrooms_")&&e.push(r)}e.forEach((e=>localStorage.removeItem(e)))}catch(e){console.error("Failed to clear classroom localStorage:",e)}}};return(0,as.jsx)(xx.Provider,{value:f,children:t})},vx=()=>{const e=Z(),t=new URLSearchParams(e.search).get("token"),[r,s]=(0,n.useState)("Verifying your email update..."),[a,o]=(0,n.useState)(""),[i,l]=(0,n.useState)(!0),c=X(),{refreshCurrentUser:d}=is();return(0,n.useEffect)((()=>{(async()=>{if(!t)return o("Verification token not found. Please check your verification link."),void l(!1);l(!0),o(""),s("");try{const e=await Ls.verifyEmailUpdate(t);s(e.message||"Email updated successfully!"),await d(),setTimeout((()=>{c("/profile",{state:{message:"Email updated successfully!"}})}),3e3)}catch(e){o(e.message||"Failed to verify email update. The link might be invalid or expired.")}finally{l(!1)}})()}),[t,c,d]),(0,as.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:(0,as.jsxs)("div",{className:"max-w-md w-full space-y-8 bg-white p-8 rounded-xl shadow-2xl text-center",children:[(0,as.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Email Update Verification"}),i&&(0,as.jsxs)("div",{className:"flex justify-center items-center",children:[(0,as.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-600"}),(0,as.jsx)("p",{className:"ml-3 text-gray-700",children:r||"Verifying..."})]}),!i&&a&&(0,as.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[(0,as.jsx)("strong",{className:"font-bold",children:"Error!"}),(0,as.jsxs)("span",{className:"block sm:inline",children:[" ",a]})]}),!i&&!a&&r&&(0,as.jsxs)("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative",role:"alert",children:[(0,as.jsx)("strong",{className:"font-bold",children:"Success!"}),(0,as.jsxs)("span",{className:"block sm:inline",children:[" ",r," Redirecting to profile..."]})]}),!i&&(0,as.jsxs)("p",{className:"mt-4 text-sm text-gray-600",children:["Go to your"," ",(0,as.jsx)(Te,{to:"/profile",className:"font-medium text-blue-600 hover:text-blue-500",children:"Profile"})]})]})})},wx=()=>{const e=Z(),t=new URLSearchParams(e.search).get("token"),[r,s]=(0,n.useState)("Verifying your email..."),[a,o]=(0,n.useState)(""),[i,l]=(0,n.useState)(!0),c=X();return(0,n.useEffect)((()=>{const e=async()=>{if(!t)return o("Verification token not found. Please check your verification link."),void l(!1);l(!0),o(""),s("Verifying your email...");try{await new Promise((e=>setTimeout(e,500)));const e=await ts.verifyEmail(t);s(e.message||"Email verified successfully!"),setTimeout((()=>{c("/login",{state:{message:"Email verified successfully! You can now log in."}})}),2e3)}catch(a){var r,n;console.error("Verification error:",a),o((null===(r=a.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.message)||a.message||"Failed to verify email. The link might be invalid or expired."),a.retried||setTimeout((()=>{e({retried:!0})}),1e3)}finally{l(!1)}};e()}),[t,c]),(0,as.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-500 to-purple-600 flex flex-col",children:[(0,as.jsx)("div",{className:"w-full p-4 bg-white shadow-md",children:(0,as.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,as.jsx)(Te,{to:"/",className:"text-2xl font-bold text-blue-600",children:"MathQuest"})})}),(0,as.jsx)("div",{className:"flex-grow flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:(0,as.jsxs)("div",{className:"max-w-md w-full space-y-8 bg-white p-8 rounded-xl shadow-2xl text-center",children:[(0,as.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Email Verification"}),i&&(0,as.jsxs)("div",{className:"flex justify-center items-center",children:[(0,as.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-600"}),(0,as.jsx)("p",{className:"ml-3 text-gray-700",children:r||"Verifying..."})]}),!i&&a&&(0,as.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[(0,as.jsx)("strong",{className:"font-bold",children:"Error!"}),(0,as.jsxs)("span",{className:"block sm:inline",children:[" ",a]})]}),!i&&!a&&r&&(0,as.jsxs)("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative",role:"alert",children:[(0,as.jsx)("strong",{className:"font-bold",children:"Success!"}),(0,as.jsxs)("span",{className:"block sm:inline",children:[" ",r," Redirecting to login..."]})]}),!i&&(0,as.jsxs)("p",{className:"mt-4 text-sm text-gray-600",children:["Go back to"," ",(0,as.jsx)(Te,{to:"/login",className:"font-medium text-blue-600 hover:text-blue-500",children:"Login"})]})]})})]})},jx=()=>{const{currentUser:e}=is(),{getAllClassrooms:t,createClassroom:r,updateClassroom:s,deleteClassroom:a,addContent:o,removeContent:i}=bx(),[l,c]=(0,n.useState)(!1),[d,u]=(0,n.useState)(!1),[h,m]=(0,n.useState)(!1),[f,p]=(0,n.useState)(null),[g,x]=(0,n.useState)([]),[b,y]=(0,n.useState)({}),[v,w]=(0,n.useState)([]),[j,N]=(0,n.useState)(null),k=(0,n.useRef)(),[S,C]=(0,n.useState)({name:"",description:"",shortCode:"",teacherId:""}),[_,E]=(0,n.useState)(!0),[A,O]=(0,n.useState)(null),[T,z]=(0,n.useState)(""),[P,I]=(0,n.useState)([]),[L,M]=(0,n.useState)(!1),[q,R]=(0,n.useState)("");(0,n.useEffect)((()=>{F(),D()}),[]),(0,n.useEffect)((()=>{const e=e=>{k.current&&!k.current.contains(e.target)&&N(null)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[]);const D=async()=>{try{const e=(await Ls.getAllUsers()).filter((e=>!e.isDeleted&&!e.deleted&&e.roles&&(Array.isArray(e.roles)?e.roles.some((e=>"string"===typeof e?"ROLE_TEACHER"===e:"ROLE_TEACHER"===e.name)):"string"===typeof e.roles?"ROLE_TEACHER"===e.roles:"ROLE_TEACHER"===e.roles.name))).sort(((e,t)=>e.id-t.id));w(e)}catch(A){console.error("Failed to fetch teachers:",A),Tt.error("Failed to fetch teachers")}},F=async()=>{try{E(!0);const e=await qs.getAllClassrooms();x(e),B(e),O(null)}catch(A){console.error("Failed to fetch classrooms:",A),O("Failed to fetch classrooms. Please try again later.")}finally{E(!1)}},B=async e=>{try{const t={};for(const r of e)try{const e=await qs.getStudentCountInClassroom(r.id);t[r.id]=e}catch(A){console.error(`Failed to fetch student count for classroom ${r.id}:`,A),t[r.id]=0}y(t)}catch(A){console.error("Failed to fetch student counts:",A)}},$=[{header:"ID",accessor:"id"},{header:"Class Code",accessor:"shortCode"},{header:"Classroom Name",accessor:"name"},{header:"Classroom Description",accessor:"description"},{header:"Teacher",render:e=>{const t=e.teacher;return t?`${t.firstName||""} ${t.lastName||""}`.trim()||t.username:"N/A"}},{header:"Join Code",accessor:"classCode"},{header:"Students",render:e=>void 0!==b[e.id]?b[e.id]:e.students?e.students.length:0},{header:"Actions",render:e=>(0,as.jsx)("div",{className:"flex justify-start",children:(0,as.jsxs)("div",{className:"relative inline-block text-left",ref:j===e.id?k:null,children:[(0,as.jsx)("button",{onClick:()=>N(j===e.id?null:e.id),className:"p-2 rounded-full hover:bg-gray-200 text-gray-500 hover:text-gray-700 transition duration-150",children:(0,as.jsx)(Qa,{size:20})}),j===e.id&&(0,as.jsx)("div",{className:"absolute right-0 bottom-[0%] mb-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-50",children:(0,as.jsxs)("div",{className:"py-1",role:"menu","aria-orientation":"vertical","aria-labelledby":"options-menu",children:[(0,as.jsxs)("button",{onClick:()=>{p(e),u(!0),N(null)},className:"flex items-center w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900",role:"menuitem",children:[(0,as.jsx)(Ga,{className:"mr-3 h-5 w-5 text-gray-400"}),"Edit"]}),(0,as.jsxs)("button",{onClick:()=>{p(e),m(!0),N(null)},className:"flex items-center w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900",role:"menuitem",children:[(0,as.jsx)(Ya,{className:"mr-3 h-5 w-5 text-gray-400"}),"Add Students"]}),(0,as.jsxs)("button",{onClick:()=>{(async e=>{if(window.confirm("Are you sure you want to delete this classroom?"))try{await qs.deleteClassroomById(e),x((t=>t.filter((t=>t.id!==e)))),y((t=>{const r={...t};return delete r[e],r})),Tt.success("Classroom deleted successfully")}catch(A){console.error("Failed to delete classroom:",A),Tt.error(A.message||"Failed to delete classroom")}})(e.id),N(null)},className:"flex items-center w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 hover:text-red-700",role:"menuitem",children:[(0,as.jsx)(Ka,{className:"mr-3 h-5 w-5 text-red-400"}),"Delete"]})]})})]})})}],U=g.filter((e=>{const t=q.toLowerCase();return e.name.toLowerCase().includes(t)||e.shortCode.toLowerCase().includes(t)}));return _?(0,as.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,as.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600"})}):(0,as.jsx)("div",{className:"px-4 sm:px-6 lg:px-8 lg:py-8",children:(0,as.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,as.jsx)(po,{type:"h1",fontSize:"5xl",weight:"bold",className:"mb-6 text-primary dark:text-white",children:"Classroom Management"}),(0,as.jsx)("div",{className:"h-[1px] w-full bg-gradient-to-r from-[#18C8FF] via-[#4B8CFF] to-[#6D6DFF] mb-5 md:mb-8"}),(0,as.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 pb-4 gap-4",children:[(0,as.jsx)("div",{className:"flex items-center gap-4 w-full sm:w-auto order-2 sm:order-1",children:(0,as.jsxs)("div",{className:"relative flex-1 sm:flex-none",children:[(0,as.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none dark:!text-gray-300 !text-gray-700",children:(0,as.jsx)(Jg,{className:"dark:!text-gray-300 !text-gray-700"})}),(0,as.jsx)(Si,{type:"search",name:"search",id:"search",className:"block w-full sm:w-96 pl-10 pr-3 py-2 sm:text-sm border-gray-700 dark:border-gray-300 text-gray-500 dark:text-gray-300",placeholder:"Search classrooms...",value:q,onChange:e=>R(e.target.value)})]})}),(0,as.jsxs)(bs,{onClick:()=>c(!0),variant:"secondary",size:"sm",className:"flex items-center gap-2 order-1 sm:order-2  !px-0 md:px-6 dark:text-blue-300 text-secondary font-semibold",children:[(0,as.jsx)(Ps,{className:"w-5 h-5"}),"Create New Classroom"]})]}),(0,as.jsx)("div",{className:"",children:A?(0,as.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:A}):U.length>0?(0,as.jsx)(qi,{columns:$,data:U,className:"w-full"}):(0,as.jsx)("p",{className:"text-center py-10 text-gray-500",children:"No classrooms found."})}),l&&(0,as.jsx)(lc,{isOpen:l,onClose:()=>{c(!1),C({name:"",description:"",shortCode:"",teacherId:""})},title:"Create New Classroom",children:(0,as.jsxs)("div",{className:"space-y-4",children:[(0,as.jsxs)("div",{children:[(0,as.jsx)(Mi,{htmlFor:"name",className:"block mb-2 text-sm font-medium dark:text-gray-300 text-gray-700",children:"Name"}),(0,as.jsx)(Si,{id:"name",className:"dark:text-gray-300 text-gray-700 dark:border-gray-300 border-gray-700",value:S.name,onChange:e=>C({...S,name:e.target.value}),placeholder:"Enter classroom name"})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)(Mi,{htmlFor:"description",className:"block mb-2 text-sm font-medium dark:text-gray-300 text-gray-700",children:"Description"}),(0,as.jsx)("textarea",{id:"description",value:S.description,onChange:e=>C({...S,description:e.target.value}),placeholder:"Enter classroom description",className:"mt-2 py-1 px-2 block w-full border border-gray-700 dark:border-gray-300 shadow-sm min-h-[100px] dark:text-gray-300 text-gray-700 !bg-transparent focus:border-blue-500 focus:ring-blue-500 rounded-none"})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)(Mi,{htmlFor:"shortCode",className:"block mb-2 text-sm font-medium dark:text-gray-300 text-gray-700",children:"Short Code"}),(0,as.jsx)(Si,{id:"shortCode",className:"dark:text-gray-300 text-gray-700 dark:border-gray-300 border-gray-700",value:S.shortCode,onChange:e=>C({...S,shortCode:e.target.value}),placeholder:"Enter short code"})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)(Mi,{htmlFor:"teacher",className:"block mb-2 text-sm font-medium dark:text-gray-300 text-gray-700",children:"Teacher"}),(0,as.jsxs)("select",{id:"teacher",value:S.teacherId,onChange:e=>C({...S,teacherId:e.target.value}),className:"py-1 px-2 block w-full border border-gray-700 dark:border-gray-300 shadow-sm dark:text-gray-300 text-gray-700 !bg-transparent focus:border-blue-500 focus:ring-blue-500 rounded-none",children:[(0,as.jsx)("option",{value:"",className:"bg-gray-300 text-gray-700 hover:text-blue-600",children:"Select a teacher"}),v.map((e=>(0,as.jsx)("option",{value:e.id,className:"bg-gray-300 text-gray-700 hover:text-blue-600",children:`${e.firstName||""} ${e.lastName||""}`.trim()||e.username},e.id)))]})]}),(0,as.jsxs)("div",{className:"flex justify-end space-x-2 mt-4",children:[(0,as.jsx)(bs,{onClick:()=>{c(!1),C({name:"",description:"",shortCode:"",teacherId:""})},variant:"cancel",rounded:"full",children:"Cancel"}),(0,as.jsx)(bs,{onClick:async()=>{if(S.name&&S.description&&S.teacherId)try{const e=new FormData;e.append("name",S.name),e.append("description",S.description),e.append("shortCode",S.shortCode),e.append("teacherId",S.teacherId);const t=await qs.createClassroomAsAdmin(e);x((e=>[...e,t])),y((e=>({...e,[t.id]:0}))),c(!1),C({name:"",description:"",shortCode:"",teacherId:""}),Tt.success("Classroom created successfully")}catch(A){console.error("Failed to create classroom:",A),Tt.error(A.message||"Failed to create classroom")}else Tt.error("Please fill in all required fields")},variant:"default",rounded:"full",children:"Create"})]})]})}),d&&f&&(0,as.jsx)(lc,{isOpen:d,onClose:()=>{u(!1),p(null)},title:"Edit Classroom",children:(0,as.jsxs)("div",{className:"space-y-4",children:[(0,as.jsxs)("div",{children:[(0,as.jsx)(Mi,{htmlFor:"edit-name",className:"block mb-2 text-sm font-medium dark:text-gray-300 text-gray-700",children:"Name"}),(0,as.jsx)(Si,{id:"edit-name",className:"dark:text-gray-300 text-gray-700 dark:border-gray-300 border-gray-700",value:f.name,onChange:e=>p({...f,name:e.target.value}),placeholder:"Enter classroom name"})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)(Mi,{htmlFor:"edit-description",className:"block mb-2 text-sm font-medium dark:text-gray-300 text-gray-700",children:"Description"}),(0,as.jsx)("textarea",{id:"edit-description",value:f.description,onChange:e=>p({...f,description:e.target.value}),placeholder:"Enter classroom description",className:"mt-2 py-1 px-2 block w-full border border-gray-700 dark:border-gray-300 shadow-sm min-h-[100px] dark:text-gray-300 text-gray-700 !bg-transparent focus:border-blue-500 focus:ring-blue-500 rounded-none"})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)(Mi,{htmlFor:"edit-shortCode",className:"block mb-2 text-sm font-medium dark:text-gray-300 text-gray-700",children:"Short Code"}),(0,as.jsx)(Si,{id:"edit-shortCode",className:"dark:text-gray-300 text-gray-700 dark:border-gray-300 border-gray-700",value:f.shortCode,onChange:e=>p({...f,shortCode:e.target.value}),placeholder:"Enter short code"})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)(Mi,{htmlFor:"edit-teacher",className:"block mb-2 text-sm font-medium dark:text-gray-300 text-gray-700",children:"Teacher"}),(0,as.jsxs)("select",{id:"edit-teacher",value:f.teacherId||f.teacher&&f.teacher.id||"",onChange:e=>{const t=e.target.value;p((e=>({...e,teacherId:t,teacher:v.find((e=>e.id===parseInt(t)))||null})))},className:"py-1 px-2 block w-full border border-gray-700 dark:border-gray-300 shadow-sm dark:text-gray-300 text-gray-700 !bg-transparent focus:border-blue-500 focus:ring-blue-500 rounded-none",children:[(0,as.jsx)("option",{value:"",className:"bg-gray-300 text-gray-700 hover:text-blue-600",children:"Select a teacher"}),v.map((e=>(0,as.jsx)("option",{value:e.id,className:"bg-gray-300 text-gray-700 hover:text-blue-600",children:`${e.firstName||""} ${e.lastName||""}`.trim()||e.username},e.id)))]})]}),(0,as.jsxs)("div",{className:"flex justify-end space-x-2 mt-4",children:[(0,as.jsx)(bs,{onClick:()=>{u(!1),p(null)},variant:"cancel",rounded:"full",children:"Cancel"}),(0,as.jsx)(bs,{onClick:()=>{const e=f.teacherId||f.teacher&&f.teacher.id;if(!f.name||!f.description||!e)return void Tt.error("Please fill in all required fields");(async e=>{try{const t=parseInt(e.teacherId),r={name:e.name,description:e.description,shortCode:e.shortCode,teacherId:t},n=await qs.updateClassroomAsAdmin(e.id,r);x((e=>e.map((e=>e.id===n.id?{...n,teacher:v.find((e=>e.id===t))||null}:e)))),u(!1),Tt.success("Classroom updated successfully")}catch(A){console.error("Failed to update classroom:",A),Tt.error(A.message||"Failed to update classroom")}})({...f,teacherId:e})},variant:"default",rounded:"full",children:"Save Changes"})]})]})}),h&&f&&(0,as.jsx)(lc,{isOpen:h,onClose:()=>{m(!1),p(null),z(""),I([])},title:`Add Students to ${f.name}`,children:(0,as.jsxs)("div",{className:"space-y-4",children:[(0,as.jsxs)("div",{children:[(0,as.jsx)(Mi,{htmlFor:"studentSearch",className:"block mb-2 text-sm font-medium dark:text-gray-300 text-gray-700",children:"Search Students"}),(0,as.jsxs)("div",{className:"relative",children:[(0,as.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none dark:!text-gray-300 !text-gray-700",children:(0,as.jsx)(Jg,{className:"dark:!text-gray-300 !text-gray-700"})}),(0,as.jsx)(Si,{id:"studentSearch",type:"text",value:T,onChange:e=>{z(e.target.value),(async e=>{if(e.trim())try{M(!0);const t=await qs.searchStudents(e,null===f||void 0===f?void 0:f.id);I(t)}catch(A){console.error("Failed to search students:",A),Tt.error("Failed to search students")}finally{M(!1)}else I([])})(e.target.value)},placeholder:"Search by name or username",className:"pl-10 dark:text-gray-300 text-gray-700 dark:border-gray-300 border-gray-700"})]})]}),L?(0,as.jsx)("div",{className:"flex justify-center items-center h-12",children:(0,as.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-t-2 border-b-2 border-blue-600"})}):T&&0===P.length?(0,as.jsxs)("div",{className:"text-center py-2 text-sm dark:text-gray-300 text-gray-500",children:["No students found matching '",T,"'"]}):T?(0,as.jsx)("div",{className:"mt-2 max-h-60 overflow-y-auto",children:P.map((e=>(0,as.jsxs)("div",{className:"flex justify-between items-center p-3 border-b border-gray-100 "+(e.inClassroom?"":"hover:bg-blue-50 cursor-pointer transition-colors duration-150"),children:[(0,as.jsxs)("div",{className:"flex-grow",children:[(0,as.jsxs)("p",{className:"font-medium dark:text-gray-300 text-gray-800",children:[e.firstName," ",e.lastName]}),(0,as.jsxs)("p",{className:"text-sm dark:text-gray-400 text-gray-500",children:["@",e.username]})]}),e.inClassroom?(0,as.jsx)("span",{className:"text-sm text-green-600 font-medium",children:"Already in classroom"}):(0,as.jsx)(bs,{onClick:()=>(async e=>{try{await qs.addStudentToClassroomAsAdmin(f.id,e),y((e=>({...e,[f.id]:(e[f.id]||0)+1}))),I((t=>t.map((t=>t.id===e?{...t,inClassroom:!0}:t)))),Tt.success("Student added successfully")}catch(A){console.error("Failed to add student:",A),Tt.error(A.message||"Failed to add student")}})(e.id),variant:"default",size:"sm",rounded:"full",children:"Add"})]},e.id)))}):(0,as.jsx)("div",{className:"text-center py-2 text-sm dark:text-gray-300 text-gray-500",children:"Type to search for students"})]})})]})})},Nx=()=>{const[e,t]=(0,n.useState)([]),[r,s]=(0,n.useState)(!0),[a,o]=(0,n.useState)(null),[i,l]=(0,n.useState)(null),[c,d]=(0,n.useState)(!1),[u,h]=(0,n.useState)(""),[m,f]=(0,n.useState)(null),p=(0,n.useRef)(),[g,x]=(0,n.useState)({firstName:"",lastName:"",username:"",email:"",password:"",role:"ROLE_TEACHER"});(0,n.useEffect)((()=>{b()}),[]),(0,n.useEffect)((()=>{const e=e=>{p.current&&!p.current.contains(e.target)&&f(null)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[]);const b=async()=>{try{s(!0);const e=(await Ls.getAllUsers()).filter((e=>!e.isDeleted&&!e.deleted&&e.roles&&(Array.isArray(e.roles)?e.roles.some((e=>"string"===typeof e?"ROLE_TEACHER"===e:"ROLE_TEACHER"===e.name)):"string"===typeof e.roles?"ROLE_TEACHER"===e.roles:"ROLE_TEACHER"===e.roles.name))).sort(((e,t)=>e.id-t.id));t(e),o(null)}catch(a){console.error("Failed to fetch teachers:",a),o("Failed to fetch teachers. Please try again later."),Tt.error("Failed to fetch teachers")}finally{s(!1)}},y=[{header:"ID",accessor:"id"},{header:"Name",accessor:e=>`${e.firstName||""} ${e.lastName||""}`.trim()||"N/A"},{header:"Username",accessor:"username"},{header:"Email",accessor:"email"},{header:"Actions",accessor:t=>(0,as.jsx)("div",{className:"flex justify-start",children:(0,as.jsxs)("div",{className:"relative inline-block text-left",ref:m===t.id?p:null,children:[(0,as.jsx)("button",{onClick:()=>f(m===t.id?null:t.id),className:"p-2 rounded-full hover:bg-gray-200 text-gray-500 hover:text-gray-700 transition duration-150",children:(0,as.jsx)(Qa,{size:20})}),m===t.id&&(0,as.jsx)("div",{className:"absolute right-0 bottom-[5%] mb-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-50",children:(0,as.jsxs)("div",{className:"py-1",role:"menu","aria-orientation":"vertical","aria-labelledby":"options-menu",children:[(0,as.jsxs)("button",{onClick:()=>{(e=>{l(e),x({firstName:e.firstName||"",lastName:e.lastName||"",username:e.username||"",email:e.email||"",password:"",role:"ROLE_TEACHER"}),d(!0)})(t),f(null)},className:"flex items-center w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900",role:"menuitem",children:[(0,as.jsx)(Ga,{className:"mr-3 h-5 w-5 text-gray-400"}),"Edit"]}),(0,as.jsxs)("button",{onClick:()=>{(async t=>{if(window.confirm("Are you sure you want to delete this teacher?"))try{e.find((e=>e.id===t)),await Ls.deleteUserByAdmin(t),Tt.success("Teacher deleted successfully"),await b()}catch(a){console.error("Failed to delete teacher:",a),Tt.error(a.message||"Failed to delete teacher")}})(t.id),f(null)},className:"flex items-center w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 hover:text-red-700",role:"menuitem",children:[(0,as.jsx)(Ka,{className:"mr-3 h-5 w-5 text-red-400"}),"Delete"]})]})})]})})}];if(r)return(0,as.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,as.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600"})});if(a)return(0,as.jsx)("div",{children:a});const v=(e=>e.filter((e=>{var t,r;return""===u||(null===(t=e.email)||void 0===t?void 0:t.toLowerCase().includes(u.toLowerCase()))||(null===(r=e.username)||void 0===r?void 0:r.toLowerCase().includes(u.toLowerCase()))||`${e.firstName||""} ${e.lastName||""}`.toLowerCase().includes(u.toLowerCase())})))(e);return(0,as.jsx)("div",{className:"px-4 sm:px-6 lg:px-8 lg:py-8",children:(0,as.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,as.jsx)(po,{type:"h1",fontSize:"5xl",weight:"bold",className:"mb-6 text-primary dark:text-white",children:"Teacher Management"}),(0,as.jsx)("div",{className:"h-[1px] w-full bg-gradient-to-r from-[#18C8FF] via-[#4B8CFF] to-[#6D6DFF] mb-5 md:mb-8"}),(0,as.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 pb-4 gap-4",children:[(0,as.jsx)("div",{className:"flex items-center gap-4 w-full sm:w-auto order-2 sm:order-1",children:(0,as.jsxs)("div",{className:"relative flex-1 sm:flex-none",children:[(0,as.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none dark:!text-gray-300 !text-gray-700",children:(0,as.jsx)(Jg,{className:"dark:!text-gray-300 !text-gray-700"})}),(0,as.jsx)(Si,{type:"search",name:"search",id:"search",className:"block w-full sm:w-96 pl-10 pr-3 py-2 sm:text-sm border-gray-700 dark:border-gray-300 text-gray-500 dark:text-gray-300",placeholder:"Search",value:u,onChange:e=>h(e.target.value)})]})}),(0,as.jsxs)(bs,{onClick:()=>{l(null),x({firstName:"",lastName:"",username:"",email:"",password:"",role:"ROLE_TEACHER"}),d(!0)},variant:"secondary",size:"sm",className:"flex items-center gap-2 order-1 sm:order-2 !px-0 md:px-6 dark:text-blue-300 text-secondary font-semibold",children:[(0,as.jsx)(Ps,{className:"w-5 h-5"}),"Add Teacher"]})]}),(0,as.jsx)("div",{className:"",children:(0,as.jsx)(qi,{columns:y,data:v})}),(0,as.jsx)(lc,{isOpen:c,onClose:()=>d(!1),title:i?"Edit Teacher":"Add Teacher",children:(0,as.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e={...g,createdByAdmin:!0,temporaryPassword:g.password||void 0};i?(await Ls.updateUserByAdmin(i.id,e),Tt.success("Teacher updated successfully")):(await Ls.createUserByAdmin(e),Tt.success("Teacher created successfully")),d(!1),b()}catch(a){console.error("Failed to update/create teacher:",a),Tt.error(a.message||"Failed to update/create teacher")}},className:"space-y-4",children:[(0,as.jsxs)("div",{children:[(0,as.jsx)("label",{className:"block mb-2 text-sm font-medium dark:text-gray-300 text-gray-700",children:"First Name"}),(0,as.jsx)(Si,{type:"text",className:"dark:text-gray-300 text-gray-700 dark:border-gray-300 border-gray-700",value:g.firstName,onChange:e=>x({...g,firstName:e.target.value}),required:!0})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)("label",{className:"block mb-2 text-sm font-medium dark:text-gray-300 text-gray-700",children:"Last Name"}),(0,as.jsx)(Si,{type:"text",className:"dark:text-gray-300 text-gray-700 dark:border-gray-300 border-gray-700",value:g.lastName,onChange:e=>x({...g,lastName:e.target.value}),required:!0})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)("label",{className:"block mb-2 text-sm font-medium dark:text-gray-300 text-gray-700",children:"Username"}),(0,as.jsx)(Si,{type:"text",className:"dark:text-gray-300 text-gray-700 dark:border-gray-300 border-gray-700",value:g.username,onChange:e=>x({...g,username:e.target.value}),required:!0})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)("label",{className:"block mb-2 text-sm font-medium dark:text-gray-300 text-gray-700",children:"Email"}),(0,as.jsx)(Si,{type:"email",className:"dark:text-gray-300 text-gray-700 dark:border-gray-300 border-gray-700",value:g.email,onChange:e=>x({...g,email:e.target.value}),required:!0})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)("label",{className:"block mb-2 text-sm font-medium dark:text-gray-300 text-gray-700",children:i?"New Password (optional)":"Password (required)"}),(0,as.jsx)(Si,{type:"password",className:"dark:text-gray-300 text-gray-700 dark:border-gray-300 border-gray-700",value:g.password,onChange:e=>x({...g,password:e.target.value}),required:!i})]}),(0,as.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,as.jsx)(bs,{type:"button",variant:"cancel",rounded:"full",onClick:()=>d(!1),children:"Cancel"}),(0,as.jsx)(bs,{type:"submit",variant:"default",rounded:"full",children:i?"Save Changes":"Add Teacher"})]})]})})]})})},kx=()=>{const[e,t]=(0,n.useState)([]),[r,s]=(0,n.useState)(!0),[a,o]=(0,n.useState)(null),[i,l]=(0,n.useState)(null),[c,d]=(0,n.useState)(!1),[u,h]=(0,n.useState)(""),[m,f]=(0,n.useState)(null),p=(0,n.useRef)(),[g,x]=(0,n.useState)({firstName:"",lastName:"",username:"",email:"",password:"",role:"ROLE_STUDENT"});(0,n.useEffect)((()=>{b()}),[]),(0,n.useEffect)((()=>{const e=e=>{p.current&&!p.current.contains(e.target)&&f(null)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[]);const b=async()=>{try{s(!0);const e=(await Ls.getAllUsers()).filter((e=>!e.isDeleted&&!e.deleted&&e.roles&&(Array.isArray(e.roles)?e.roles.some((e=>"string"===typeof e?"ROLE_STUDENT"===e:"ROLE_STUDENT"===e.name)):"string"===typeof e.roles?"ROLE_STUDENT"===e.roles:"ROLE_STUDENT"===e.roles.name))).sort(((e,t)=>e.id-t.id));t(e),o(null)}catch(a){console.error("Failed to fetch students:",a),o("Failed to fetch students. Please try again later."),Tt.error("Failed to fetch students")}finally{s(!1)}},y=[{header:"ID",accessor:"id"},{header:"Name",accessor:e=>`${e.firstName||""} ${e.lastName||""}`.trim()||"N/A"},{header:"Username",accessor:"username"},{header:"Email",accessor:"email"},{header:"Actions",accessor:e=>(0,as.jsx)("div",{className:"flex justify-start",children:(0,as.jsxs)("div",{className:"relative inline-block text-left",ref:m===e.id?p:null,children:[(0,as.jsx)("button",{onClick:()=>f(m===e.id?null:e.id),className:"p-2 rounded-full hover:bg-gray-200 text-gray-500 hover:text-gray-700 transition duration-150",children:(0,as.jsx)(Qa,{size:20})}),m===e.id&&(0,as.jsx)("div",{className:"absolute right-0 bottom-[5%] mb-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-50",children:(0,as.jsxs)("div",{className:"py-1",role:"menu","aria-orientation":"vertical","aria-labelledby":"options-menu",children:[(0,as.jsxs)("button",{onClick:()=>{(e=>{l(e),x({firstName:e.firstName||"",lastName:e.lastName||"",username:e.username||"",email:e.email||"",password:"",role:"ROLE_STUDENT"}),d(!0)})(e),f(null)},className:"flex items-center w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900",role:"menuitem",children:[(0,as.jsx)(Ga,{className:"mr-3 h-5 w-5 text-gray-400"}),"Edit"]}),(0,as.jsxs)("button",{onClick:()=>{(async e=>{if(window.confirm("Are you sure you want to delete this student?"))try{await Ls.deleteUserByAdmin(e),Tt.success("Student deleted successfully"),b()}catch(a){console.error("Failed to delete student:",a),Tt.error(a.message||"Failed to delete student")}})(e.id),f(null)},className:"flex items-center w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 hover:text-red-700",role:"menuitem",children:[(0,as.jsx)(Ka,{className:"mr-3 h-5 w-5 text-red-400"}),"Delete"]})]})})]})})}];if(r)return(0,as.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,as.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600"})});if(a)return(0,as.jsx)("div",{children:a});const v=(e=>e.filter((e=>{var t,r;return""===u||(null===(t=e.email)||void 0===t?void 0:t.toLowerCase().includes(u.toLowerCase()))||(null===(r=e.username)||void 0===r?void 0:r.toLowerCase().includes(u.toLowerCase()))||`${e.firstName||""} ${e.lastName||""}`.toLowerCase().includes(u.toLowerCase())})))(e);return(0,as.jsx)("div",{className:"px-4 sm:px-6 lg:px-8 lg:py-8",children:(0,as.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,as.jsx)(po,{type:"h1",fontSize:"5xl",weight:"bold",className:"mb-6 text-primary dark:text-white",children:"Student Management"}),(0,as.jsx)("div",{className:"h-[1px] w-full bg-gradient-to-r from-[#18C8FF] via-[#4B8CFF] to-[#6D6DFF] mb-5 md:mb-8"}),(0,as.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 pb-4 gap-4",children:[(0,as.jsx)("div",{className:"flex items-center gap-4 w-full sm:w-auto order-2 sm:order-1",children:(0,as.jsxs)("div",{className:"relative flex-1 sm:flex-none",children:[(0,as.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none dark:!text-gray-300 !text-gray-700",children:(0,as.jsx)(Jg,{className:"dark:!text-gray-300 !text-gray-700"})}),(0,as.jsx)(Si,{type:"search",name:"search",id:"search",className:"block w-full sm:w-96 pl-10 pr-3 py-2 sm:text-sm border-gray-700 dark:border-gray-300 text-gray-500 dark:text-gray-300",placeholder:"Search",value:u,onChange:e=>h(e.target.value)})]})}),(0,as.jsxs)(bs,{onClick:()=>{l(null),x({firstName:"",lastName:"",username:"",email:"",password:"",role:"ROLE_STUDENT"}),d(!0)},variant:"secondary",size:"sm",className:"flex items-center gap-2 order-1 sm:order-2 !px-0 md:px-6 dark:text-blue-300 text-secondary font-semibold",children:[(0,as.jsx)(Ps,{className:"w-5 h-5"}),"Add Student"]})]}),(0,as.jsx)("div",{className:"",children:(0,as.jsx)(qi,{columns:y,data:v})}),(0,as.jsx)(lc,{isOpen:c,onClose:()=>d(!1),title:i?"Edit Student":"Add Student",children:(0,as.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e={...g,createdByAdmin:!0,temporaryPassword:g.password||void 0};i?(await Ls.updateUserByAdmin(i.id,e),Tt.success("Student updated successfully")):(await Ls.createUserByAdmin(e),Tt.success("Student created successfully")),d(!1),b()}catch(a){console.error("Failed to update/create student:",a),Tt.error(a.message||"Failed to update/create student")}},className:"space-y-4",children:[(0,as.jsxs)("div",{children:[(0,as.jsx)("label",{className:"block mb-2 text-sm font-medium dark:text-gray-300 text-gray-700",children:"First Name"}),(0,as.jsx)(Si,{type:"text",className:"dark:text-gray-300 text-gray-700 dark:border-gray-300 border-gray-700",value:g.firstName,onChange:e=>x({...g,firstName:e.target.value}),required:!0})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)("label",{className:"block mb-2 text-sm font-medium dark:text-gray-300 text-gray-700",children:"Last Name"}),(0,as.jsx)(Si,{type:"text",className:"dark:text-gray-300 text-gray-700 dark:border-gray-300 border-gray-700",value:g.lastName,onChange:e=>x({...g,lastName:e.target.value}),required:!0})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)("label",{className:"block mb-2 text-sm font-medium dark:text-gray-300 text-gray-700",children:"Username"}),(0,as.jsx)(Si,{type:"text",className:"dark:text-gray-300 text-gray-700 dark:border-gray-300 border-gray-700",value:g.username,onChange:e=>x({...g,username:e.target.value}),required:!0})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)("label",{className:"block mb-2 text-sm font-medium dark:text-gray-300 text-gray-700",children:"Email"}),(0,as.jsx)(Si,{type:"email",className:"dark:text-gray-300 text-gray-700 dark:border-gray-300 border-gray-700",value:g.email,onChange:e=>x({...g,email:e.target.value}),required:!0})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)("label",{className:"block mb-2 text-sm font-medium dark:text-gray-300 text-gray-700",children:i?"New Password (optional)":"Password (required)"}),(0,as.jsx)(Si,{type:"password",className:"dark:text-gray-300 text-gray-700 dark:border-gray-300 border-gray-700",value:g.password,onChange:e=>x({...g,password:e.target.value}),required:!i})]}),(0,as.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,as.jsx)(bs,{type:"button",variant:"cancel",rounded:"full",onClick:()=>d(!1),children:"Cancel"}),(0,as.jsx)(bs,{type:"submit",variant:"default",rounded:"full",children:i?"Save Changes":"Add Student"})]})]})})]})})},Sx=e=>{let{isOpen:t,onClose:r,gameId:s,gameName:a,maxGameLevel:o=10,onLevelSelect:i,showLevelSelection:l=!1,scoreData:c}=e;const{currentUser:d}=is(),[u,h]=(0,n.useState)(1),[m,f]=(0,n.useState)(!0),[p,g]=(0,n.useState)(null),[x,b]=(0,n.useState)(null),y=s||c&&c.gameId;(0,n.useEffect)((()=>{if(!t||!d||!y)return void f(!1);(async()=>{try{let e=await Jc.getStudentGameLevel(y,d.id);"object"===typeof e&&null!==e&&(e=e.level_achieved||e.level||1);const t=Math.min(Number(e),o);h(t),f(!1)}catch(x){h(1),f(!1),console.error("[LevelProgressionModal] Error fetching student level:",x)}})()}),[t,d,y,o]),(0,n.useEffect)((()=>{t&&(async()=>{if(y)try{const e=await Xn.get(`/games/${y}`);g(e.data)}catch(x){console.error("Error fetching game:",x),b("Failed to load game. Please try again later.")}})()}),[y,t]);return t?!m&&d&&y?(0,as.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,as.jsxs)("div",{className:"bg-white rounded-lg p-8 max-w-lg w-full mx-4",children:[(0,as.jsx)("h2",{className:"text-2xl font-bold mb-4",children:a}),l&&(0,as.jsx)("div",{className:"grid grid-cols-3 gap-4 mb-6",children:Array.from({length:o},((e,t)=>t+1)).map((e=>(0,as.jsxs)("button",{onClick:()=>{var t;(t=e)<=u&&(i(t),r())},disabled:e>u,className:"p-4 rounded-lg text-center transition-colors "+(e<=u?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-200 text-gray-500 cursor-not-allowed"),children:["Level ",e,e<=u&&(0,as.jsx)("span",{className:"block text-xs mt-1",children:"Unlocked"}),e>u&&(0,as.jsx)("span",{className:"block text-xs mt-1",children:"Locked"})]},e)))}),(0,as.jsx)("div",{className:"flex justify-end",children:(0,as.jsx)("button",{onClick:r,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300",children:"Close"})})]})}):(0,as.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,as.jsxs)("div",{className:"bg-white rounded-lg p-8 max-w-lg w-full mx-4 flex flex-col items-center",children:[(0,as.jsx)("h2",{className:"text-2xl font-bold mb-4",children:a}),(0,as.jsx)("div",{className:"flex justify-center items-center h-32",children:(0,as.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})})]})}):null},Cx={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_GROQ_API_KEY,_x={lastCallTime:0,callCount:0,problemsCache:new Map,isGenerating:!1},Ex=10;const Ax=e=>{var t,r;let{game:s,onGameComplete:a}=e;const{currentUser:o,token:i}=is(),{darkMode:l}=ds(),[c,d]=(0,n.useState)([]),[u,h]=(0,n.useState)(!1),[m,f]=(0,n.useState)(!1),[p,g]=(0,n.useState)(0),[x,b]=(0,n.useState)(""),[y,v]=(0,n.useState)(1),[w,j]=(0,n.useState)(1),[N,k]=(0,n.useState)([]),[S,C]=(0,n.useState)(5),_=(0,n.useRef)(null),E=(0,n.useRef)(null),A=(0,n.useRef)(0),O=(0,n.useRef)(new Set),T=(0,n.useRef)([]),[z,P]=(0,n.useState)(0),[I,L]=(0,n.useState)(new Set),[M,q]=(0,n.useState)(0),[R,D]=(0,n.useState)(!1),[F,B]=(0,n.useState)(!1),[$,U]=(0,n.useState)(!1),[H,W]=(0,n.useState)(0),[Q,V]=(0,n.useState)(0),[G,K]=(0,n.useState)(!1),[Y,Z]=(0,n.useState)(!1),[J,X]=(0,n.useState)(!1),[ee,te]=(0,n.useState)(!0),[re,ne]=(0,n.useState)(0),[se,ae]=(0,n.useState)(10),oe=(0,n.useRef)(!1),[ie,le]=(0,n.useState)("random"),[ce,de]=(0,n.useState)(0),[ue,he]=(0,n.useState)(null),[me,fe]=(0,n.useState)(!1),[pe,ge]=(0,n.useState)(null),[xe,be]=(0,n.useState)(!1),ye=(0,n.useRef)(new Set),[ve,we]=(0,n.useState)(!1),[je,Ne]=(0,n.useState)(!1),[ke,Se]=(0,n.useState)(null),[Ce,_e]=(0,n.useState)(!1),[Ee,Ae]=(0,n.useState)(!1),[Oe,Te]=(0,n.useState)(!1),[ze,Pe]=(0,n.useState)(1),[Ie,Le]=(0,n.useState)(!1),Me=`fallingGame-${(null===s||void 0===s?void 0:s.id)||"default"}`,qe=(0,n.useRef)({gameStarted:!1,gameOver:!1});(0,n.useEffect)((()=>{const e={gameStarted:u,gameOver:m},t=qe.current;e.gameStarted===t.gameStarted&&e.gameOver===t.gameOver||(a&&"function"===typeof a&&a(null,e),qe.current=e)}),[u,m,a]);const Re=(0,n.useCallback)(((e,t)=>{const r=`${e}-${t}`,n=_x.problemsCache.get(r);return n&&n.timestamp>Date.now()-3e5}),[]),De=(0,n.useCallback)(((e,t)=>{const r=(null===t||void 0===t?void 0:t.toLowerCase())||"";let n={1:{min:1,max:10},2:{min:5,max:15},3:{min:10,max:20},4:{min:15,max:30},5:{min:20,max:50}};r.includes("negative")&&r.includes("addition")&&(n={1:{min:-5,max:5},2:{min:-10,max:10},3:{min:-20,max:20},4:{min:-30,max:30},5:{min:-50,max:50}});return n[Math.min(e,Object.keys(n).length)]||n[Object.keys(n).length]}),[]),Fe=(0,n.useCallback)((()=>{var e;const t=(null===s||void 0===s||null===(e=s.topic)||void 0===e?void 0:e.toLowerCase())||"";return t.includes("multiply")?"Type your answer (e.g. 42, 56)":t.includes("divide")||t.includes("division")?"Type your answer (e.g. 8, 12)":t.includes("add")||t.includes("addition")?"Type your answer (e.g. 15, 23)":t.includes("subtract")||t.includes("subtraction")?"Type your answer (e.g. 7, 18)":t.includes("fraction")?"Type your answer (e.g. 1/2, 3/4)":"Type your answer"}),[s]),Be=(0,n.useCallback)((async()=>{if(o&&s){if(!(p<=0)){et.current=!0,localStorage.removeItem(Me);try{const t=(new Date).toISOString(),r={gameId:s.id,score:p,level:y,timeSpent:Math.floor(ce),levelAchieved:y,playedAt:t,studentId:o.id,studentName:o.name,studentUsername:o.username,gameType:"FALLING_GAME",gameName:s.name,isHighScore:!0};try{const e=await Jc.submitGameScore(r);ge({...e,playedAt:e.playedAt||t,score:parseInt(e.score||p),levelAchieved:parseInt(e.levelAchieved||y)}),fe(!0),a&&a(parseInt(p))}catch(e){Zn.error("API submission error",{error:e.message});const n=JSON.parse(localStorage.getItem("gameScores")||"[]"),i=n.findIndex((e=>e.gameId===s.id&&e.studentId===o.id)),l={...r,id:Date.now(),timestamp:t,pending:!0};i>=0?parseInt(n[i].score)<p&&(n[i]=l):n.push(l),localStorage.setItem("gameScores",JSON.stringify(n)),ge(l),fe(!0),a&&a(parseInt(p))}}catch(t){Zn.error("Failed to save score",{error:t.message}),st.error("Failed to save your score. Please try again.")}}}else Zn.error("Unable to submit score: User or game data missing")}),[o,s,p,y,ce,a,Me]),$e=((0,n.useCallback)((async(e,t)=>{if(!Cx)return Zn.warn("Groq API key not found. Please set REACT_APP_GROQ_API_KEY environment variable."),null;const r=Date.now();if(r-_x.lastCallTime>6e4&&(_x.callCount=0,_x.lastCallTime=r),_x.callCount>=10)throw new Error("Rate limit exceeded. Please wait a moment before generating more problems.");try{const n=e.toLowerCase();let a="";n.includes("multiply")?a="multiply":n.includes("divide")?a="divide":n.includes("add")?a="add":n.includes("subtract")?a="subtract":n.includes("fraction")?a="fraction":n.includes("algebra")&&(a="algebra");const o={model:"llama-3.3-70b-versatile",messages:[{role:"system",content:"You are an expert math problem generator for grade 4 students.\nCreate accurate, level-appropriate math problems with precise answers.\nFor each problem:\n- Ensure the difficulty matches grade 4 level\n- Format fractions properly (e.g., 1/2, 3/4)\n- For algebra, use simple variables (x, y)\n- For word problems, use clear, age-appropriate language"},{role:"user",content:`Generate ${t} grade 4 math problems for the topic '${e}'.\n\nIMPORTANT: Only generate problems for the topic '${e}'. Do NOT include other types of problems.\nIf the topic is addition, only generate addition problems. If multiplication, only multiplication, etc.\n\nRespond ONLY with a JSON array where each object has:\n- 'question' (string): The math problem\n- 'answer' (string): The correct answer (simplified)\n- 'operation' (string): The mathematical operation used (e.g., 'addition', 'multiplication', 'division', 'subtraction', 'fraction', 'algebra')`}],temperature:.7,max_tokens:2048,stream:!1},i=await fetch("https://api.groq.com/openai/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Cx}`},body:JSON.stringify(o)});if(!i.ok){const e=await i.json().catch((()=>({})));throw Zn.error("Groq API Error Details",{status:i.status,statusText:i.statusText,headers:Object.fromEntries(i.headers.entries()),error:e}),new Error(`Groq API error: ${i.status} - ${JSON.stringify(e)}`)}_x.callCount++,_x.lastCallTime=r;const l=await i.json();if(!l||!l.choices||!l.choices[0]||!l.choices[0].message||!l.choices[0].message.content)throw Zn.error("Invalid API Response Structure",{data:l}),new Error("Invalid API response format");try{const e=(e=>("string"===typeof e&&((e=e.trim()).startsWith("```json")?e=e.replace(/^```json/,"").replace(/```$/,"").trim():e.startsWith("```")&&(e=e.replace(/^```/,"").replace(/```$/,"").trim())),JSON.parse(e)))(l.choices[0].message.content);let t=e;return Array.isArray(e)?a&&(t=e.filter((e=>{if(!e.operation)return!1;const t=e.operation.toLowerCase();return"multiply"===a?t.includes("multiply"):"divide"===a?t.includes("divide"):"add"===a?t.includes("add"):"subtract"===a?t.includes("subtract"):"fraction"===a?t.includes("fraction"):"algebra"===a&&t.includes("algebra")}))):e.problems&&(t=e.problems.filter((e=>{if(!e.operation)return!1;const t=e.operation.toLowerCase();return"multiply"===a?t.includes("multiply"):"divide"===a?t.includes("divide"):"add"===a?t.includes("add"):"subtract"===a?t.includes("subtract"):"fraction"===a?t.includes("fraction"):"algebra"===a&&t.includes("algebra")}))),t}catch(s){throw Zn.error("Error parsing Groq API response",{parseError:s.message,content:l.choices[0].message.content}),new Error("Failed to parse API response")}}catch(a){var n;throw Zn.error("Groq API error",{error:a.message,status:null===(n=a.response)||void 0===n?void 0:n.status}),a.message.includes("401")&&Zn.error("Invalid Groq API key. Please check your REACT_APP_GROQ_API_KEY environment variable."),a}}),[]),(0,n.useCallback)((e=>{const t=[],r=e;for(let n=1;n<=10;n++){const s=`${r} \xd7 ${n}`,a=(r*n).toString();t.push({id:`table-${e}-${n}-${Date.now()}`,question:s,answer:a,operation:"multiplication",x:80*Math.random()+10,y:-10-20*Math.random(),speed:.3+.1*e,status:"normal",level:e,sequenceIndex:n-1,isSolved:!1,isMissed:!1})}return t.sort((()=>Math.random()-.5))}),[])),Ue=(0,n.useCallback)((async()=>{if(null!==s&&void 0!==s&&s.id&&null!==s&&void 0!==s&&s.topic&&!_x.isGenerating){B(!0),_x.isGenerating=!0;try{const e=`multiplication-table-${y}`;if(Re(`multiplication-table-${y}`,"all")){const t=_x.problemsCache.get(e);return d(t.problems),B(!1),void(_x.isGenerating=!1)}Zn.info(`Generating multiplication table problems for Level ${y} (Table of ${y})`);const t=$e(y);_x.problemsCache.set(e,{problems:t,timestamp:Date.now()}),d(t),Zn.info(`Generated ${t.length} problems for Table of ${y}`)}catch(t){Zn.error("Error generating problems",{error:t.message});const r=De(y,s.topic),n=50,a=[];for(let o=0;o<n;o++){var e;let t=Math.floor(Math.random()*(r.max-r.min+1))+r.min,n=Math.floor(Math.random()*(r.max-r.min+1))+r.min,i={};const l=`${Date.now()}-${o}-${Math.random()}`,c=(null===(e=s.topic)||void 0===e?void 0:e.toLowerCase())||"unknown_topic";if(c.includes("divide")||c.includes("division")){0===n&&(n=1),0===t&&(t=n*(Math.floor(Math.random()*r.max)+1));i={id:l,question:`${t*n} \xf7 ${n}`,answer:t.toString(),operation:"division_fallback",x:80*Math.random()+10,y:-10-20*Math.random(),speed:.3+.1*y,status:"normal",level:Math.floor(o/5)+1}}else if(c.includes("negative")&&c.includes("add")){const e=t*(Math.random()>.5?-1:1),r=n*(Math.random()>.5?-1:1);i={id:l,question:`${e} + ${r}`,answer:(e+r).toString(),operation:"negative_addition",x:80*Math.random()+10,y:-10-20*Math.random(),speed:.3+.1*y,status:"normal",level:Math.floor(o/5)+1}}else if(c.includes("add")||c.includes("addition"))i={id:l,question:`${t} + ${n}`,answer:(t+n).toString(),operation:"addition_fallback",x:80*Math.random()+10,y:-10-20*Math.random(),speed:.3+.1*y,status:"normal",level:Math.floor(o/5)+1};else if(c.includes("subtract")||c.includes("subtraction")){const[e,r]=t>=n?[t,n]:[n,t];i={id:l,question:`${e} - ${r}`,answer:(e-r).toString(),operation:"subtraction_fallback",x:80*Math.random()+10,y:-10-20*Math.random(),speed:.3+.1*y,status:"normal",level:Math.floor(o/5)+1}}else i=c.includes("multiply")||c.includes("multiplication")?{id:l,question:`${t} \xd7 ${n}`,answer:(t*n).toString(),operation:"multiplication_fallback",x:80*Math.random()+10,y:-10-20*Math.random(),speed:.3+.1*y,status:"normal",level:Math.floor(o/5)+1}:{id:l,question:`${t} + ${n}`,answer:(t+n).toString(),operation:"addition_default_fallback",x:80*Math.random()+10,y:-10-20*Math.random(),speed:.3+.1*y,status:"normal",level:Math.floor(o/5)+1};a.push(i)}a.sort(((e,t)=>{const r=e=>(e.question.match(/-?\d+/g)||[]).reduce(((e,t)=>e+Math.abs(Number(t))),0);return r(e)-r(t)})),d(a)}finally{B(!1),_x.isGenerating=!1}}else Zn.warn("Game, game ID, or topic not available yet")}),[s,y,Re,$e]);function He(e,t,r){const n={2:[30,70],3:[20,50,80],4:[15,40,65,85],5:[10,30,55,75,90]};if(n[e]){return n[e].slice().sort((()=>Math.random()-.5)).map(((e,t)=>({x:e,y:-20-t*r})))}const s=[];let a=0;for(;s.length<e&&a<100;){const e=80*Math.random()+10,n=-20-30*Math.random();s.every((s=>Math.abs(s.x-e)>=t&&Math.abs(s.y-n)>=r))&&s.push({x:e,y:n}),a++}if(s.length<e){s.length=0;const n=(80-(e-1)*t)/e;for(let a=0;a<e;a++){const e=10+a*(t+n),o=-20-a*r;s.push({x:e,y:o})}}return s}const We=(0,n.useCallback)((e=>{const t=function(e){return e>=9?4e3:e>=7?5e3:e>=4?6e3:7e3}(e),r=Math.max(t,2e4-3e3*(e-1));return{fallTime:r,activeProblems:Math.min(4,2+Math.floor((e-1)/2)),speed:100/(r/16.67)}}),[]),Qe=(0,n.useRef)(y),Ve=(0,n.useRef)(c),Ge=(0,n.useRef)(I),Ke=(0,n.useRef)(Be),Ye=((0,n.useRef)(Date.now()),(0,n.useRef)(null));(0,n.useEffect)((()=>{Qe.current=y}),[y]),(0,n.useEffect)((()=>{Ve.current=c}),[c]),(0,n.useEffect)((()=>{Ge.current=I}),[I]),(0,n.useEffect)((()=>{Ke.current=Be}),[Be]);const Ze=(0,n.useCallback)((()=>{if(Zn.info("Level up function called",{currentLevel:y,maxLevel:Ex}),y>=Ex)return Zn.info("Game completed - max level reached"),st.success("\ud83c\udfc6 AMAZING! You completed all 10 levels! \ud83c\udfc6",{duration:5e3,style:{background:"linear-gradient(135deg, #FFD700, #FFA500)",color:"#000000",fontSize:"18px",fontWeight:"bold",padding:"20px 30px",borderRadius:"15px",boxShadow:"0 6px 20px rgba(255, 215, 0, 0.4)",border:"3px solid #FFD700"},iconTheme:{primary:"#000000",secondary:"#FFD700"}}),f(!0),void Be();const e=(new Date).toISOString(),t={gameId:s.id,score:p,level:y,timeSpent:Math.floor(ce),levelAchieved:y,playedAt:e,studentId:null===o||void 0===o?void 0:o.id,studentName:null===o||void 0===o?void 0:o.name,studentUsername:null===o||void 0===o?void 0:o.username,gameType:"FALLING_GAME",gameName:null===s||void 0===s?void 0:s.name,isHighScore:!0,isLevelUp:!0};Jc.submitGameScore(t).then((t=>{ge({...t,playedAt:t.playedAt||e,score:parseInt(t.score||p),levelAchieved:parseInt(t.levelAchieved||y)});const r=y+1;Zn.info("Level completed, showing congratulations modal",{completedLevel:y,nextLevel:r}),U(!0),k([]),j((e=>e+.2)),ne(0),ae(10);const n=Array.from(O.current);T.current=T.current.filter((e=>!n.includes(e)))})).catch((e=>{Zn.error("Error submitting level completion",{error:e.message}),st.error("Failed to save level progress")}))}),[o,s,y,p,ce,Be]);(0,n.useEffect)((()=>(!u||m||G||(Ye.current&&clearTimeout(Ye.current),Ye.current=setTimeout((()=>{Zn.warn("Game appears to be stuck - no problems spawning",{currentLevel:y,problemsSolved:re,activeProblems:N.length,totalProblems:c.length}),re>=1?(Zn.info("Forcing level up due to stuck game"),st.success(`\ud83c\udf89 Good Job! Level ${y} Complete! (Auto-advance) \ud83c\udf89`,{duration:3e3,style:{background:"#F59E0B",color:"#FFFFFF",fontSize:"16px",fontWeight:"bold",padding:"16px 24px",borderRadius:"12px",boxShadow:"0 4px 12px rgba(245, 158, 11, 0.3)"},iconTheme:{primary:"#FFFFFF",secondary:"#F59E0B"}}),Ze()):(Zn.info("Regenerating problems due to stuck game"),Ue())}),3e4)),()=>{Ye.current&&clearTimeout(Ye.current)})),[u,m,G,y,re,N.length,c.length,Ze,Ue]),(0,n.useEffect)((()=>{if(!u||m||G)return void(E.current&&cancelAnimationFrame(E.current));const{fallTime:e,activeProblems:t,speed:r}=We(Qe.current),n=e=>{G||m||!u||(k((e=>{const t=e.map((e=>{const t=e.y+r;let n=e.status;return t>=80&&"normal"===n&&(n="warning"),{...e,y:t,status:n}})),n=[],s=[],a=t.filter((e=>!(e.y>=100)||(ye.current.has(e.id)||Ge.current.has(e.id)||(n.push(e.id),s.push(e.id)),!1)));return s.length>0&&s.forEach((e=>{ye.current.has(e)||(ye.current.add(e),nt(e))})),a})),k((e=>{if(e.length<t){const n=performance.now();if(n-A.current>=1e3){const s=Ve.current.filter((e=>e.level===Qe.current&&!O.current.has(e.id)&&!T.current.includes(e.id)));if(Zn.debug("Problem spawning check",{currentLevel:Qe.current,availableProblems:s.length,totalProblems:Ve.current.length,solvedProblems:O.current.size,usedProblems:T.current.length,activeProblems:e.length,maxActiveProblems:t,isGenerating:_x.isGenerating}),s.length>0){const a=t-e.length,o=He(a,20,30),i=s.slice(0,a).map(((e,t)=>({...e,y:o[t].y,status:"normal",x:o[t].x,speed:r})));return T.current.push(...i.map((e=>e.id))),A.current=n,[...e,...i]}{if(Zn.warn("No more problems available for current level",{currentLevel:Qe.current,solvedCount:O.current.size,totalProblems:Ve.current.length,isGenerating:_x.isGenerating}),_x.isGenerating)return Zn.debug("Problems still being generated, waiting..."),e;T.current=[];const s=Ve.current.filter((e=>e.level===Qe.current));if(s.length>0){const a=t-e.length,o=He(a,20,30),i=s.slice(0,a).map(((e,t)=>({...e,y:o[t].y,status:"normal",x:o[t].x,speed:r,id:`${e.id}-reused-${Date.now()}`})));return T.current.push(...i.map((e=>e.id))),A.current=n,[...e,...i]}Zn.warn("No problems available at all, forcing level up",{currentLevel:Qe.current,problemsSolved:re}),re>=1&&Ze()}}}return e})),E.current=requestAnimationFrame(n))};return E.current=requestAnimationFrame(n),()=>{E.current&&cancelAnimationFrame(E.current)}}),[u,m,G,We]);const Je=()=>{Se(null),Ne(!1)},Xe=(0,n.useRef)(!0),et=(0,n.useRef)(!1);(0,n.useEffect)((()=>{const e=()=>{Zn.debug("[FallingGame] beforeunload detected - marking as page refresh"),Xe.current=!0};window.addEventListener("beforeunload",e);const t=localStorage.getItem(Me);if(t)try{const e=JSON.parse(t);(e.gameOver||e.hasLeftGame)&&(Zn.debug("[FallingGame] Detected game over or left game state - not a refresh"),Xe.current=!1,et.current=!0)}catch(r){Zn.error("Error parsing saved state:",r)}return()=>{window.removeEventListener("beforeunload",e)}}),[Me]);const tt=()=>{const e=localStorage.getItem(Me);let t=0,r=1,n=5,s=0,a=0,o="",i=!1,l=!1;if(e&&Xe.current&&!et.current)try{const c=JSON.parse(e);Zn.debug("[FallingGame] Checking saved state:",{isPageRefresh:Xe.current,hasLeftGame:et.current,savedState:c}),c.gameOver?(Zn.debug("[FallingGame] Previous game ended, not restoring state"),l=!1,localStorage.removeItem(Me)):(l=!0,t=c.savedScore||0,r=c.savedLevel||1,n=c.savedLives||5,s=c.savedProblemsSolved||0,a=c.savedGameTime||0,o=c.savedAnswers||"",i=t>0||r>1,i&&(Zn.debug("[FallingGame] Restoring previous progress from page refresh"),st.success("Your previous progress has been restored!")))}catch(c){Zn.error("Error parsing saved state:",c),localStorage.removeItem(Me),l=!1}else Zn.debug("[FallingGame] Not restoring progress:",{hasSavedState:!!e,isPageRefresh:Xe.current,hasLeftGame:et.current}),l=!1;l||(t=0,r=1,n=5,s=0,a=0,o="",i=!1),h(!1),k([]),d([]),g(t),C(n),v(r),j(1),ne(s),ae(10),f(!1),K(!1),b(o),de(a),ye.current=new Set,L(new Set),oe.current=!1,_x.isGenerating=!1,O.current=new Set,T.current=[],_x.lastCallTime=0,_x.callCount=0,i?(Ae(!0),Ue().then((()=>{Ae(!1),h(!0),A.current=performance.now()}))):(he(3),Ue().then((()=>{let e=3;const t=setInterval((()=>{e--,he(e),e<=0&&(clearInterval(t),he(null),h(!0),A.current=performance.now())}),1e3)})))};let rt=!1;const nt=(0,n.useCallback)((e=>{Zn.debug("Question missed",{problemId:e,currentLevel:y}),C((e=>{const t=e-1;return t<=0?(f(!0),Be(),0):t})),k((t=>t.filter((t=>t.id!==e)))),st("\u23f0 Question missed! -1 life",{duration:2e3,style:{background:"#F59E0B",color:"#FFFFFF",fontSize:"14px",fontWeight:"bold",padding:"12px 20px",borderRadius:"8px",boxShadow:"0 2px 8px rgba(245, 158, 11, 0.3)"},icon:"\u26a0\ufe0f"})}),[y,Be]),at=()=>{!m&&u&&K((e=>{const t=!e;return t||(A.current=performance.now()-Math.max(1e3,3e3-150*y)/w),t}))},ot=()=>Z((e=>!e)),it=(null===s||void 0===s||null===(t=s.topic)||void 0===t?void 0:t.toLowerCase().includes("multiply"))||(null===s||void 0===s||null===(r=s.topic)||void 0===r?void 0:r.toLowerCase().includes("division")),[lt,ct]=(0,n.useState)(.5),dt=(0,n.useRef)(null);(0,n.useEffect)((()=>{ee&&dt.current?(dt.current.volume=lt,dt.current.play().catch((()=>{}))):dt.current&&dt.current.pause()}),[ee,lt]);const ut=(0,n.useRef)(null);(0,n.useEffect)((()=>(u&&!me&&(ut.current&&clearTimeout(ut.current),ut.current=setTimeout((()=>{const e={savedScore:p,savedLevel:y,savedLives:S,savedProblemsSolved:re,savedGameTime:ce,savedAnswers:x,gameOver:m,hasLeftGame:et.current,lastSaved:(new Date).toISOString()};try{localStorage.setItem(Me,JSON.stringify(e)),_e(!1)}catch(t){Zn.error("Failed to save game state to localStorage",{error:t.message})}}),500)),()=>{ut.current&&clearTimeout(ut.current)})),[p,y,S,re,ce,x,Me,u,me,m]),(0,n.useEffect)((()=>{u&&!m&&_e(!0)}),[p,y,S,re,ce,x,u,m]),(0,n.useEffect)((()=>{const e=e=>{if(u&&!m)return Zn.debug("[FallingGame] beforeunload event triggered - game is active, showing confirmation"),e.preventDefault(),e.returnValue="","";Zn.debug("[FallingGame] beforeunload event triggered - game not active, allowing navigation")},t=e=>{u&&!m?(Zn.debug("[FallingGame] popstate event triggered - game is active, preventing navigation"),e.preventDefault(),Se(window.location.href),Ne(!0),window.history.pushState(null,"",window.location.href)):Zn.debug("[FallingGame] popstate event triggered - game not active, allowing navigation")};return u&&!m?(Zn.debug("[FallingGame] Adding navigation protection - game is active"),window.addEventListener("beforeunload",e),window.addEventListener("popstate",t),window.history.pushState(null,"",window.location.href)):(Zn.debug("[FallingGame] Removing navigation protection - game not active"),window.removeEventListener("beforeunload",e),window.removeEventListener("popstate",t)),()=>{Zn.debug("[FallingGame] Cleanup: removing navigation event listeners"),window.removeEventListener("beforeunload",e),window.removeEventListener("popstate",t)}}),[u,m]),(0,n.useEffect)((()=>{if(u&&!m){Zn.debug("[FallingGame] Adding navigation attempt listeners - game is active");const e=e=>{const t=e.target.closest('a, button[data-nav], [role="link"], .nav-link, .sidebar-link, [href]');if(t){const r=t.href||t.getAttribute("href"),n=r&&!r.includes(window.location.origin+"/game/");("A"===t.tagName||t.hasAttribute("data-nav")||"link"===t.getAttribute("role")||t.className.includes("nav-link")||t.className.includes("sidebar-link"))&&n&&(Zn.debug("[FallingGame] Navigation element clicked:",{element:t,href:r,tagName:t.tagName,className:t.className}),(e=>{u&&!m?(Zn.debug("[FallingGame] Navigation attempt detected:",{target:e.target,href:e.target.href,tagName:e.target.tagName,className:e.target.className}),e.preventDefault(),e.stopPropagation(),Se(e.target.href||e.target.getAttribute("href")),Ne(!0)):Zn.debug("[FallingGame] Navigation attempt detected - game not active, allowing navigation")})(e))}};return document.addEventListener("click",e,!0),()=>{Zn.debug("[FallingGame] Cleanup: removing navigation attempt listeners"),document.removeEventListener("click",e,!0)}}return()=>{Zn.debug("[FallingGame] Cleanup: removing navigation attempt listeners")}}),[u,m]);const ht=()=>{document.fullscreenElement?document.exitFullscreen().then((()=>{we(!1),document.body.classList.remove("fullscreen-mode")})).catch((e=>{Zn.error("Error attempting to exit fullscreen:",e)})):document.documentElement.requestFullscreen().then((()=>{we(!0),document.body.classList.add("fullscreen-mode")})).catch((e=>{Zn.error("Error attempting to enable fullscreen:",e)}))};(0,n.useEffect)((()=>{const e=()=>{const e=!!document.fullscreenElement;we(e),e?document.body.classList.add("fullscreen-mode"):document.body.classList.remove("fullscreen-mode")};return document.addEventListener("fullscreenchange",e),()=>{document.removeEventListener("fullscreenchange",e),document.body.classList.remove("fullscreen-mode")}}),[]);const mt=(0,n.useCallback)((async()=>{if(o&&null!==s&&void 0!==s&&s.id){Le(!0);try{const e=await Jc.getStudentGameLevel(s.id,o.id);let t=1;"object"===typeof e&&null!==e?t=e.level_achieved||e.level||1:"number"===typeof e&&(t=e),Pe(Math.min(t,Ex))}catch(e){Zn.error("Error fetching unlocked levels:",e),Pe(1)}finally{Le(!1)}}}),[o,s]),ft=()=>{be(!0),mt()};return s?(0,as.jsx)("div",{className:"px-2 sm:px-4 md:px-6 game-container max-w-7xl mx-auto min-h-screen",style:{backgroundImage:l?"linear-gradient(180deg, rgba(2,6,23,1) 0%, rgba(3,7,18,1) 100%)":"linear-gradient(135deg, #fef3c7 0%, #fde68a 50%, #f59e0b 100%)",backgroundSize:"cover",backgroundRepeat:"no-repeat"},children:(0,as.jsxs)("div",{className:"w-full relative",children:[(0,as.jsxs)("div",{className:"absolute inset-0 opacity-5 pointer-events-none",children:[(0,as.jsx)("div",{className:"absolute top-20 left-10 text-8xl",children:"\u2693"}),(0,as.jsx)("div",{className:"absolute top-40 right-20 text-6xl",children:"\ud83d\uddfa\ufe0f"}),(0,as.jsx)("div",{className:"absolute bottom-40 left-20 text-7xl",children:"\ud83c\udff4\u200d\u2620\ufe0f"}),(0,as.jsx)("div",{className:"absolute bottom-20 right-10 text-8xl",children:"\u2694\ufe0f"}),(0,as.jsx)("div",{className:"absolute top-1/2 left-1/4 text-5xl",children:"\ud83c\udff4"}),(0,as.jsx)("div",{className:"absolute top-1/3 right-1/3 text-6xl",children:"\u2693"}),(0,as.jsx)("div",{className:"absolute bottom-1/3 left-1/2 text-5xl",children:"\ud83d\uddfa\ufe0f"})]}),(0,as.jsx)("audio",{ref:dt,src:"/game-bg-music.mp3",loop:!0,autoPlay:!0,style:{display:"none"}}),me&&pe&&(0,as.jsx)(Sx,{isOpen:me,onClose:()=>{fe(!1),ge(null)},scoreData:pe,gameName:s.name,gameId:s.id,maxGameLevel:Ex}),(0,as.jsxs)("div",{className:"w-full mx-auto flex flex-col items-center justify-center md:flex-grow relative z-10",children:[!u&&!m&&null===ue&&(0,as.jsxs)("div",{className:"text-center my-8 p-8 md:mt-36 rounded-2xl shadow-2xl border-2 backdrop-blur-sm sm:p-6 lg:p-8 flex flex-col min-h-[200px] sm:min-h-[260px] relative transition-colors duration-300 "+(l?"bg-[#0b1022]/85 border-yellow-700/40":"bg-[#f5ecd2] border-yellow-300"),style:{boxShadow:l?"0 10px 25px rgba(255, 215, 0, 0.08)":"0 10px 25px rgba(0,0,0,0.08)"},children:[(0,as.jsxs)("div",{className:"flex items-center justify-center gap-3 mb-4",children:[(0,as.jsx)(ia,{className:(l?"text-yellow-400":"text-yellow-700")+" text-2xl"}),(0,as.jsx)(po,{type:"h1",fontSize:"5xl",weight:"semibold",className:(l?"text-yellow-200":"text-blue-800")+" py-3 tracking-wide",children:(null===s||void 0===s?void 0:s.name)||"Pirate Math Adventure"}),(0,as.jsx)(Oa,{className:(l?"text-yellow-400":"text-yellow-700")+" text-2xl"})]}),(0,as.jsx)("p",{className:"mb-6 text-lg "+(l?"text-yellow-300":"text-yellow-700"),children:(null===s||void 0===s?void 0:s.instructions)||"Ahoy! Solve the treasure problems before they fall off the ship!"}),(0,as.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,as.jsxs)("div",{className:"flex justify-center gap-2 flex-wrap",children:[(0,as.jsxs)(bs,{onClick:ht,variant:"link",size:"sm",className:"transition-colors duration-300 "+(l?"text-yellow-300 hover:text-yellow-200":"text-yellow-700 hover:text-yellow-800"),children:[(0,as.jsx)(Ds,{className:"mr-2"}),ve?"Exit Fullscreen":"Fullscreen"]}),(0,as.jsxs)(bs,{onClick:()=>{a&&a(null,{showLeaderboard:!0})},variant:"link",size:"sm",className:"transition-colors duration-300 "+(l?"text-yellow-300 hover:text-yellow-200":"text-yellow-700 hover:text-yellow-800"),children:[(0,as.jsx)(la,{className:"mr-2"}),"Captain's Board"]}),(0,as.jsxs)(bs,{onClick:ft,variant:"link",size:"sm",className:"transition-colors duration-300 "+(l?"text-yellow-300 hover:text-yellow-200":"text-yellow-700 hover:text-yellow-800"),children:[(0,as.jsx)(ya,{className:"mr-2"}),"Select Level"]})]}),(0,as.jsx)("div",{className:"w-full max-w-xs",children:(0,as.jsxs)(bs,{onClick:tt,variant:"default",size:"sm",rounded:"full",className:"w-full transition-all duration-300 hover:scale-105 "+(l?"bg-yellow-500 hover:bg-yellow-400 text-[#0b1022]":"bg-yellow-600 hover:bg-yellow-500 text-white"),children:[(0,as.jsx)(Aa,{className:"mr-2"}),"Begin Adventure"]})})]})]}),null!==ue&&(0,as.jsx)("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-900 via-purple-900 to-indigo-900 flex items-center justify-center z-50",children:(0,as.jsxs)("div",{className:"text-center",children:[(0,as.jsxs)("div",{className:"flex items-center justify-center gap-3 mb-6",children:[(0,as.jsx)(ia,{className:"text-yellow-400 text-4xl"}),(0,as.jsx)("h2",{className:"text-4xl sm:text-6xl font-bold text-yellow-300",children:"Preparing Your Ship"}),(0,as.jsx)(Oa,{className:"text-yellow-400 text-4xl"})]}),(0,as.jsx)("div",{className:"text-6xl sm:text-8xl font-bold text-yellow-400 animate-pulse mb-4",children:ue}),(0,as.jsx)("p",{className:"text-xl text-yellow-200",children:"Setting sail in..."})]})}),R&&(0,as.jsx)("div",{className:"fixed inset-0 bg-gradient-to-br from-amber-600 via-orange-600 to-red-600 flex items-center justify-center z-50 p-4",children:(0,as.jsxs)("div",{className:"text-center animate-bounce w-full max-w-md sm:max-w-lg",children:[(0,as.jsxs)("div",{className:"flex items-center justify-center gap-3 mb-6",children:[(0,as.jsx)(ia,{className:"text-yellow-300 text-4xl"}),(0,as.jsx)("div",{className:"text-4xl sm:text-6xl md:text-8xl",children:"\ud83c\udff4\u200d\u2620\ufe0f"}),(0,as.jsx)(Oa,{className:"text-yellow-300 text-4xl"})]}),(0,as.jsx)("h2",{className:"text-3xl sm:text-4xl md:text-6xl font-bold text-white mb-3 sm:mb-4",children:"Level Up, Captain!"}),(0,as.jsxs)("div",{className:"text-xl sm:text-2xl md:text-4xl font-bold text-yellow-300 mb-2",children:["Treasure Map ",y," \u2192 Treasure Map ",y+1]}),(0,as.jsx)("div",{className:"text-base sm:text-lg md:text-2xl text-white opacity-90 mb-4",children:"New treasures await your discovery!"}),(0,as.jsxs)("div",{className:"inline-flex flex-col sm:flex-row items-center bg-white bg-opacity-20 text-white px-4 sm:px-6 py-2 sm:py-3 rounded-full shadow-lg w-full sm:w-auto",children:[(0,as.jsxs)("div",{className:"flex items-center mb-2 sm:mb-0",children:[(0,as.jsx)(la,{className:"text-yellow-300 text-lg sm:text-xl md:text-2xl mr-2 sm:mr-3"}),(0,as.jsxs)("span",{className:"text-sm sm:text-base md:text-xl font-bold",children:["Treasure Maps Discovered: ",y+1,"/",Ex]})]}),(0,as.jsx)("div",{className:"w-16 sm:w-20 md:w-24 bg-white bg-opacity-20 rounded-full h-2 sm:h-3 sm:ml-4",children:(0,as.jsx)("div",{className:"bg-yellow-300 h-2 sm:h-3 rounded-full transition-all duration-500",style:{width:(y+1)/Ex*100+"%"}})})]})]})}),$&&(0,as.jsx)("div",{className:"fixed inset-0 bg-gradient-to-br from-amber-600 via-orange-600 to-red-600 flex items-center justify-center z-50 p-4",children:(0,as.jsxs)("div",{className:"text-center animate-bounce w-full max-w-md sm:max-w-lg rounded-2xl shadow-2xl p-6 sm:p-8 border-2 transition-colors duration-300 "+(l?"bg-[#0b1022]/95 border-yellow-700/40":"bg-[#f5ecd2] border-yellow-300"),style:{boxShadow:l?"0 10px 25px rgba(255, 215, 0, 0.08)":"0 10px 25px rgba(0,0,0,0.08)"},children:[(0,as.jsxs)("div",{className:"flex items-center justify-center gap-3 mb-6",children:[(0,as.jsx)(ia,{className:"text-yellow-400 text-3xl"}),(0,as.jsx)("div",{className:"text-4xl sm:text-6xl",children:"\ud83c\udff4\u200d\u2620\ufe0f"}),(0,as.jsx)(Oa,{className:"text-yellow-400 text-3xl"})]}),(0,as.jsx)("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-bold mb-4 transition-colors duration-300 "+(l?"text-yellow-200":"text-blue-800"),children:"Well Done, Captain!"}),(0,as.jsxs)("div",{className:"text-lg sm:text-xl font-bold mb-2 transition-colors duration-300 "+(l?"text-yellow-300":"text-yellow-700"),children:["You conquered Treasure Map ",y,"!"]}),(0,as.jsx)("div",{className:"text-sm sm:text-base mb-6 transition-colors duration-300 "+(l?"text-yellow-400":"text-yellow-600"),children:"You solved all 10 treasure problems correctly! \u2694\ufe0f"}),(0,as.jsxs)("div",{className:"space-y-3 sm:space-y-4",children:[(0,as.jsxs)("button",{onClick:()=>{U(!1);const e=y+1;V(0),W(0),ne(0),k([]),ye.current=new Set,L(new Set),O.current=new Set,T.current=[],A.current=performance.now(),v(e),D(!0),setTimeout((()=>{D(!1)}),1e3),st.success(`Starting Table of ${e}...`,{duration:1500}),Ue()},className:"w-full px-6 py-3 bg-gradient-to-r from-amber-500 to-orange-500 text-white rounded-lg text-base sm:text-lg font-bold hover:from-amber-600 hover:to-orange-600 transition-all duration-300 flex items-center justify-center",children:[(0,as.jsx)(Aa,{className:"mr-2"}),"Continue to Treasure Map ",y+1]}),(0,as.jsxs)("button",{onClick:()=>{U(!1),a&&a(p)},className:"w-full px-6 py-3 bg-gradient-to-r from-gray-500 to-gray-600 text-white rounded-lg text-base sm:text-lg font-bold hover:from-gray-600 hover:to-gray-700 transition-colors flex items-center justify-center",children:[(0,as.jsx)(Vs,{className:"mr-2"}),"Return to Port"]})]})]})}),Ee&&(0,as.jsx)("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-900 via-purple-900 to-indigo-900 flex items-center justify-center z-50",children:(0,as.jsxs)("div",{className:"text-center",children:[(0,as.jsxs)("div",{className:"flex items-center justify-center gap-3 mb-6",children:[(0,as.jsx)(ia,{className:"text-yellow-400 text-3xl"}),(0,as.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-yellow-400 mx-auto"}),(0,as.jsx)(Oa,{className:"text-yellow-400 text-3xl"})]}),(0,as.jsx)("h2",{className:"text-2xl font-bold text-yellow-300 mb-2",children:"Restoring Your Adventure..."}),(0,as.jsx)("p",{className:"text-lg text-yellow-200",children:"Getting back to your treasure hunt"})]})}),u&&!m&&!G&&(0,as.jsxs)("div",{className:"flex flex-col xl:flex-row w-full gap-4 lg:gap-6",children:[(0,as.jsxs)("div",{className:"w-full xl:w-3/4",children:[(0,as.jsxs)("div",{className:"mb-3 sm:mb-4 text-center px-2",children:[(0,as.jsxs)("div",{className:"inline-flex flex-col sm:flex-row items-center px-3 sm:px-6 py-2 sm:py-3 rounded-full shadow-lg w-full sm:w-auto border-2 transition-colors duration-300 "+(l?"bg-gradient-to-r from-amber-600 to-orange-600 border-yellow-700/40":"bg-gradient-to-r from-amber-600 to-orange-600 border-yellow-300"),style:{boxShadow:l?"0 10px 25px rgba(255, 215, 0, 0.08)":"0 10px 25px rgba(0,0,0,0.08)"},children:[(0,as.jsxs)("div",{className:"flex items-center mb-1 sm:mb-0",children:[(0,as.jsx)(ya,{className:"text-yellow-300 text-lg sm:text-2xl mr-2"}),(0,as.jsxs)("span",{className:"text-lg sm:text-xl font-bold text-white",children:["Treasure Map ",y]})]}),(0,as.jsxs)("span",{className:"text-xs sm:text-sm bg-white bg-opacity-20 px-2 sm:px-3 py-1 rounded-full sm:ml-4 text-white",children:[re,"/10 Treasures Found"]})]}),(0,as.jsx)("div",{className:"mt-2",children:(0,as.jsxs)("div",{className:"inline-flex flex-col sm:flex-row items-center px-3 sm:px-4 py-2 rounded-full shadow-lg w-full sm:w-auto border-2 transition-colors duration-300 "+(l?"bg-gradient-to-r from-green-500 to-teal-500 border-green-700/40":"bg-gradient-to-r from-green-500 to-teal-500 border-green-300"),style:{boxShadow:l?"0 10px 25px rgba(34, 197, 94, 0.08)":"0 10px 25px rgba(0,0,0,0.08)"},children:[(0,as.jsxs)("div",{className:"flex items-center mb-1 sm:mb-0",children:[(0,as.jsx)(la,{className:"text-yellow-300 text-sm sm:text-lg mr-2"}),(0,as.jsxs)("span",{className:"text-xs sm:text-sm font-bold text-white",children:["Maps Discovered: ",y,"/",Ex]})]}),(0,as.jsx)("div",{className:"w-16 sm:w-20 bg-white bg-opacity-20 rounded-full h-2 sm:ml-3",children:(0,as.jsx)("div",{className:"bg-yellow-300 h-2 rounded-full transition-all duration-500",style:{width:y/Ex*100+"%"}})})]})})]}),F&&(0,as.jsx)("div",{className:"mb-3 sm:mb-4 text-center px-2",children:(0,as.jsx)("div",{className:"inline-flex flex-col sm:flex-row items-center px-3 sm:px-6 py-2 sm:py-3 rounded-full shadow-lg animate-pulse w-full sm:w-auto border-2 transition-colors duration-300 "+(l?"bg-gradient-to-r from-green-500 to-blue-500 border-green-700/40":"bg-gradient-to-r from-green-500 to-blue-500 border-green-300"),style:{boxShadow:l?"0 10px 25px rgba(34, 197, 94, 0.08)":"0 10px 25px rgba(0,0,0,0.08)"},children:(0,as.jsxs)("div",{className:"flex items-center mb-1 sm:mb-0",children:[(0,as.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 sm:h-5 sm:w-5 border-t-2 border-b-2 border-yellow-300 mr-2 sm:mr-3"}),(0,as.jsxs)("span",{className:"text-sm sm:text-lg font-bold text-white",children:["Charting New Treasures for Map ",y,"..."]})]})})}),(0,as.jsx)("div",{ref:_,className:"relative w-full h-[calc(100vh-320px)] sm:h-[calc(100vh-300px)] md:h-[calc(100vh-280px)] lg:h-[calc(100vh-260px)] shadow-2xl rounded-2xl mb-4 overflow-hidden border-2 transition-colors duration-300 "+(l?"bg-gradient-to-br from-gray-100 to-gray-50 border-yellow-700/40":"bg-gradient-to-br from-amber-100 to-amber-50 border-yellow-300"),style:{boxShadow:l?"0 10px 25px rgba(255, 215, 0, 0.08)":"0 10px 25px rgba(0,0,0,0.08)"},children:N.map((e=>{let t="from-amber-500 to-orange-600",r="border-amber-300";return"correct"===e.status?(t="from-green-500 to-green-600",r="border-green-300"):"incorrect"===e.status?(t="from-red-500 to-red-600",r="border-red-300"):"warning"===e.status?(t="from-yellow-500 to-yellow-600",r="border-yellow-300"):e.sequenceIndex===z&&(t="from-blue-500 to-blue-600",r="border-blue-300"),(0,as.jsx)("div",{className:`absolute px-2 py-1 sm:px-3 sm:py-2 md:px-4 md:py-3 bg-gradient-to-br ${t} text-white rounded-lg shadow-lg border-2 ${r} transform transition-transform duration-100 hover:scale-110`,style:{left:`${e.x}%`,top:`${e.y}%`,transform:"translate(-50%, -50%)",fontSize:e.question.length>10?"0.75rem":"0.875rem",fontWeight:"bold",minWidth:"60px",textAlign:"center",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.3)"},children:(0,as.jsx)("span",{className:"font-bold text-xs sm:text-sm md:text-base",children:e.question})},e.id)}))}),(0,as.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),rt)return;if(rt=!0,setTimeout((()=>{rt=!1}),500),!x.trim()||G||m)return;const t=N.find((e=>!e.isSolved&&!e.isMissed));if(!t)return void b("");x.trim().replace(/\s+/g,"")===t.answer?(g((e=>e+10*y)),k((e=>e.map((e=>e.id===t.id?{...e,status:"correct",isSolved:!0}:e)))),ne((e=>{const t=e+1;return t>=se?(Zn.info("Level completed - 10 problems solved",{currentLevel:y,problemsSolved:t}),U(!0),k([]),0):t})),O.current.add(t.id),st.success(`\u2705 Good Job! +${10*y} points!`,{duration:1500,style:{background:"#10B981",color:"#FFFFFF",fontSize:"14px",fontWeight:"bold",padding:"12px 20px",borderRadius:"8px",boxShadow:"0 2px 8px rgba(16, 185, 129, 0.3)"}}),setTimeout((()=>{k((e=>e.filter((e=>e.id!==t.id))))}),300)):(C((e=>{const t=e-1;return t<=0?(f(!0),Be(),0):t})),k((e=>e.map((e=>e.id===t.id?{...e,status:"incorrect",isMissed:!0}:e)))),st.error(`\u274c Wrong! The answer is ${t.answer}`,{duration:2e3,style:{background:"#EF4444",color:"#FFFFFF",fontSize:"14px",fontWeight:"bold",padding:"12px 20px",borderRadius:"8px",boxShadow:"0 2px 8px rgba(239, 68, 68, 0.3)"}}),setTimeout((()=>{k((e=>e.filter((e=>e.id!==t.id))))}),300)),b("")},className:"flex flex-col sm:flex-row items-center w-full mt-auto mb-4 px-2 sm:px-0 gap-2 sm:gap-0",children:[(0,as.jsx)("input",{type:"text",value:x,onChange:e=>b(e.target.value),className:"flex-1 w-full sm:w-auto px-3 sm:px-4 py-2 sm:py-3 border-2 rounded-md sm:rounded-l-md sm:rounded-r-none focus:outline-none focus:ring-2 text-sm sm:text-lg transition-colors duration-300 "+(l?"bg-[#0b1022]/50 text-yellow-200 border-yellow-700/40 focus:ring-yellow-500 placeholder-yellow-400":"bg-[#f5ecd2]/50 text-yellow-800 border-yellow-300 focus:ring-yellow-500 placeholder-yellow-600"),placeholder:Fe(),autoFocus:!0,disabled:G||m}),(0,as.jsxs)("button",{type:"submit",className:"w-full sm:w-auto px-4 sm:px-6 py-2 sm:py-3 h-10 sm:h-14 text-white rounded-md sm:rounded-l-none sm:rounded-r-md text-sm sm:text-base font-medium transition-all duration-300 hover:scale-105 "+(l?"bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-400 hover:to-orange-400":"bg-gradient-to-r from-yellow-600 to-orange-600 hover:from-yellow-500 hover:to-orange-500"),disabled:G||m||!x.trim(),children:[(0,as.jsx)(ea,{className:"inline mr-2"}),"Claim Treasure"]})]})]}),(0,as.jsx)("div",{className:"w-full xl:w-1/4",children:(0,as.jsxs)("div",{className:"rounded-2xl p-3 sm:p-4 shadow-2xl border-2 backdrop-blur-sm h-fit transition-colors duration-300 "+(l?"bg-[#0b1022]/85 border-yellow-700/40":"bg-[#f5ecd2] border-yellow-300"),style:{boxShadow:l?"0 10px 25px rgba(255, 215, 0, 0.08)":"0 10px 25px rgba(0,0,0,0.08)"},children:[(0,as.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-4 sm:mb-6",children:[(0,as.jsx)(ia,{className:(l?"text-yellow-400":"text-yellow-600")+" text-lg"}),(0,as.jsx)(po,{type:"h3",variant:"default",fontSize:"xl",className:"transition-colors duration-300 "+(l?"text-yellow-200":"text-yellow-800"),children:"Captain's Log"}),(0,as.jsx)(Oa,{className:(l?"text-yellow-400":"text-yellow-600")+" text-lg"})]}),(0,as.jsxs)("div",{className:"grid grid-cols-3 xl:grid-cols-1 gap-2 sm:gap-4 mb-4",children:[(0,as.jsx)("div",{className:"p-2 sm:p-3 rounded-lg border-2 transition-colors duration-300 "+(l?"bg-[#0f1428]/80 border-yellow-700/40":"bg-[#fbf4de] border-yellow-300"),children:(0,as.jsxs)("div",{className:"text-center",children:[(0,as.jsxs)("div",{className:"text-xs sm:text-sm flex items-center justify-center transition-colors duration-300 "+(l?"text-yellow-300":"text-yellow-700"),children:[(0,as.jsx)(ya,{className:"mr-1 text-xs sm:text-sm"})," Map"]}),(0,as.jsx)("div",{className:"text-lg sm:text-2xl font-bold text-yellow-500",children:y})]})}),(0,as.jsx)("div",{className:"p-2 sm:p-3 rounded-lg border-2 transition-colors duration-300 "+(l?"bg-[#0f1428]/80 border-yellow-700/40":"bg-[#fbf4de] border-yellow-300"),children:(0,as.jsxs)("div",{className:"text-center",children:[(0,as.jsxs)("div",{className:"text-xs sm:text-sm flex items-center justify-center transition-colors duration-300 "+(l?"text-yellow-300":"text-yellow-700"),children:[(0,as.jsx)(aa,{className:"mr-1 text-xs sm:text-sm"})," Treasure"]}),(0,as.jsx)("div",{className:"text-lg sm:text-2xl font-bold text-yellow-500",children:p})]})}),(0,as.jsx)("div",{className:"p-2 sm:p-3 rounded-lg border-2 transition-colors duration-300 "+(l?"bg-[#0f1428]/80 border-yellow-700/40":"bg-[#fbf4de] border-yellow-300"),children:(0,as.jsxs)("div",{className:"text-center",children:[(0,as.jsxs)("div",{className:"text-xs sm:text-sm flex items-center justify-center transition-colors duration-300 "+(l?"text-yellow-300":"text-yellow-700"),children:[(0,as.jsx)(pa,{className:"mr-1 text-xs sm:text-sm"})," Health"]}),(0,as.jsx)("div",{className:"text-lg sm:text-2xl text-red-500",children:"\u2764\ufe0f".repeat(S)||"\ud83d\udc94"})]})})]}),(0,as.jsx)("div",{className:"hidden xl:block mb-4 p-3 rounded-lg border-2 transition-colors duration-300 "+(l?"bg-[#0f1428]/80 border-yellow-700/40":"bg-[#fbf4de] border-yellow-300"),children:(0,as.jsxs)("div",{className:"text-center",children:[(0,as.jsxs)("div",{className:"text-sm mb-2 flex items-center justify-center transition-colors duration-300 "+(l?"text-yellow-300":"text-yellow-700"),children:[(0,as.jsx)(Ea,{className:"mr-1"})," Progress"]}),(0,as.jsx)("div",{className:"w-full h-3 rounded-full overflow-hidden border-2 transition-colors duration-300 "+(l?"bg-gray-600 border-gray-500":"bg-gray-300 border-gray-400"),children:(0,as.jsx)("div",{className:"h-full bg-gradient-to-r from-yellow-500 to-orange-500 transition-all duration-300 ease-in-out",style:{width:`${Math.min(100,re/se*100)}%`}})}),(0,as.jsxs)("div",{className:"text-sm font-bold mt-1 transition-colors duration-300 "+(l?"text-yellow-300":"text-yellow-700"),children:[re,"/",se]})]})}),(0,as.jsxs)("div",{className:"grid grid-cols-2 xl:grid-cols-1 gap-2 xl:space-y-2 xl:space-y-0",children:[(0,as.jsxs)("button",{onClick:ft,className:"w-full px-2 sm:px-3 py-2 rounded-lg text-xs sm:text-sm font-medium transition-all duration-300 hover:scale-105 "+(l?"bg-yellow-500 hover:bg-yellow-400 text-[#0b1022]":"bg-yellow-600 hover:bg-yellow-500 text-white"),children:[(0,as.jsx)(ya,{className:"inline mr-1 sm:mr-2",size:12}),(0,as.jsx)("span",{className:"hidden sm:inline",children:"Change Map"}),(0,as.jsx)("span",{className:"sm:hidden",children:"Map"})]}),(0,as.jsxs)("button",{onClick:ot,className:"w-full px-2 sm:px-3 py-2 rounded-lg text-xs sm:text-sm font-medium flex items-center justify-center transition-all duration-300 hover:scale-105 "+(l?"bg-yellow-500 hover:bg-yellow-400 text-[#0b1022]":"bg-yellow-600 hover:bg-yellow-500 text-white"),children:[(0,as.jsx)(sa,{className:"mr-1 sm:mr-2",size:12}),(0,as.jsx)("span",{className:"hidden sm:inline",children:"Settings"})]}),(0,as.jsx)("button",{onClick:at,className:"w-full px-2 sm:px-3 py-2 rounded-lg text-xs sm:text-sm font-medium flex items-center justify-center transition-all duration-300 hover:scale-105 "+(l?"bg-yellow-500 hover:bg-yellow-400 text-[#0b1022]":"bg-yellow-600 hover:bg-yellow-500 text-white"),children:G?(0,as.jsxs)(as.Fragment,{children:[(0,as.jsx)(Na,{className:"mr-1 sm:mr-2",size:12})," ",(0,as.jsx)("span",{className:"hidden sm:inline",children:"Resume"}),(0,as.jsx)("span",{className:"sm:hidden",children:"Play"})]}):(0,as.jsxs)(as.Fragment,{children:[(0,as.jsx)(ja,{className:"mr-1 sm:mr-2",size:12})," ",(0,as.jsx)("span",{className:"hidden sm:inline",children:"Pause"}),(0,as.jsx)("span",{className:"sm:hidden",children:"Stop"})]})}),(0,as.jsxs)("button",{onClick:ht,className:"w-full px-2 sm:px-3 py-2 rounded-lg text-xs sm:text-sm font-medium flex items-center justify-center transition-all duration-300 hover:scale-105 "+(l?"bg-yellow-500 hover:bg-yellow-400 text-[#0b1022]":"bg-yellow-600 hover:bg-yellow-500 text-white"),children:[(0,as.jsx)(Ds,{className:"mr-1 sm:mr-2",size:12}),(0,as.jsx)("span",{className:"hidden sm:inline",children:ve?"Exit Fullscreen":"Fullscreen"}),(0,as.jsx)("span",{className:"sm:hidden",children:"Full"})]}),(0,as.jsxs)("button",{onClick:()=>{Zn.info("Manual level skip triggered by user"),st.success(`\ud83c\udff4\u200d\u2620\ufe0f Well Done, Captain! Map ${y} Complete! (Manual Skip) \ud83c\udff4\u200d\u2620\ufe0f`,{duration:3e3,style:{background:"linear-gradient(135deg, #F59E0B, #D97706)",color:"#FFFFFF",fontSize:"16px",fontWeight:"bold",padding:"16px 24px",borderRadius:"12px",boxShadow:"0 4px 12px rgba(245, 158, 11, 0.3)"},iconTheme:{primary:"#FFFFFF",secondary:"#F59E0B"}}),Ze()},className:"w-full px-2 sm:px-3 py-2 rounded-lg text-xs sm:text-sm font-medium flex items-center justify-center col-span-2 xl:col-span-1 transition-all duration-300 hover:scale-105 "+(l?"bg-orange-500 hover:bg-orange-400 text-[#0b1022]":"bg-orange-600 hover:bg-orange-500 text-white"),title:"Skip to next map (emergency use)",children:[(0,as.jsx)(Aa,{className:"mr-1 sm:mr-2",size:12}),(0,as.jsx)("span",{className:"hidden sm:inline",children:"Skip Map"}),(0,as.jsx)("span",{className:"sm:hidden",children:"Skip"})]})]})]})})]}),m&&(0,as.jsxs)("div",{className:"text-center md:mt-36 my-8 p-8 w-full max-w-md mx-auto rounded-2xl shadow-2xl border-2 backdrop-blur-sm sm:p-6 lg:p-8 flex flex-col relative transition-colors duration-300 "+(l?"bg-[#0b1022]/85 border-yellow-700/40":"bg-[#f5ecd2] border-yellow-300"),style:{boxShadow:l?"0 10px 25px rgba(255, 215, 0, 0.08)":"0 10px 25px rgba(0,0,0,0.08)"},children:[(0,as.jsxs)("div",{className:"flex items-center justify-center gap-3 mb-4",children:[(0,as.jsx)(Oa,{className:"text-red-500 text-2xl"}),(0,as.jsx)(po,{type:"h1",fontSize:"5xl",weight:"semibold",className:"text-red-600 py-3 tracking-wide",children:"Shipwrecked!"}),(0,as.jsx)(Oa,{className:"text-red-500 text-2xl"})]}),(0,as.jsxs)("p",{className:"mb-6 text-lg "+(l?"text-yellow-300":"text-yellow-700"),children:["Your final treasure: ",(0,as.jsx)("span",{className:"font-bold text-yellow-500",children:p})," coins"]}),(0,as.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,as.jsxs)(bs,{onClick:tt,variant:"default",size:"sm",rounded:"full",className:"transition-all duration-300 hover:scale-105 "+(l?"bg-yellow-500 hover:bg-yellow-400 text-[#0b1022]":"bg-yellow-600 hover:bg-yellow-500 text-white"),children:[(0,as.jsx)(Aa,{className:"mr-2"}),"Set Sail Again"]}),(0,as.jsxs)(bs,{onClick:()=>{a&&a(p)},variant:"cancel",size:"sm",rounded:"full",className:"transition-all duration-300 hover:scale-105",children:[(0,as.jsx)(Vs,{className:"mr-2"}),"Return to Port"]})]})]}),G&&u&&!m&&(0,as.jsx)("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-900 via-purple-900 to-indigo-900 flex flex-col items-center justify-center z-30 p-4",children:(0,as.jsxs)("div",{className:"p-4 sm:p-6 md:p-8 w-full max-w-sm sm:max-w-md md:max-w-lg rounded-2xl shadow-2xl text-center border-2 transition-colors duration-300 "+(l?"bg-[#0b1022]/95 border-yellow-700/40":"bg-[#f5ecd2] border-yellow-300"),style:{boxShadow:l?"0 10px 25px rgba(255, 215, 0, 0.08)":"0 10px 25px rgba(0,0,0,0.08)"},children:[(0,as.jsxs)("div",{className:"flex items-center justify-center gap-3 mb-4",children:[(0,as.jsx)(ia,{className:"text-yellow-400 text-2xl"}),(0,as.jsx)(po,{type:"h2",variant:"default",fontSize:"xl",className:"transition-colors duration-300 "+(l?"text-yellow-200":"text-yellow-800"),children:"Adventure Paused"}),(0,as.jsx)(Oa,{className:"text-yellow-400 text-2xl"})]}),(0,as.jsxs)("div",{className:"mb-4 sm:mb-6 space-y-2",children:[(0,as.jsxs)("div",{className:"inline-flex flex-col sm:flex-row items-center px-3 sm:px-4 py-2 rounded-full shadow-lg w-full sm:w-auto border-2 transition-colors duration-300 "+(l?"bg-gradient-to-r from-amber-600 to-orange-600 border-yellow-700/40":"bg-gradient-to-r from-amber-600 to-orange-600 border-yellow-300"),style:{boxShadow:l?"0 10px 25px rgba(255, 215, 0, 0.08)":"0 10px 25px rgba(0,0,0,0.08)"},children:[(0,as.jsxs)("div",{className:"flex items-center mb-1 sm:mb-0",children:[(0,as.jsx)(ya,{className:"text-yellow-300 text-base sm:text-lg mr-2"}),(0,as.jsxs)("span",{className:"text-base sm:text-lg font-bold text-white",children:["Treasure Map ",y]})]}),(0,as.jsxs)("span",{className:"text-xs sm:text-sm bg-white bg-opacity-20 px-2 py-1 rounded-full sm:ml-3 text-white",children:[re,"/10"]})]}),(0,as.jsxs)("div",{className:"inline-flex flex-col sm:flex-row items-center px-2 sm:px-3 py-1 rounded-full shadow-lg w-full sm:w-auto border-2 transition-colors duration-300 "+(l?"bg-gradient-to-r from-green-500 to-teal-500 border-green-700/40":"bg-gradient-to-r from-green-500 to-teal-500 border-green-300"),style:{boxShadow:l?"0 10px 25px rgba(34, 197, 94, 0.08)":"0 10px 25px rgba(0,0,0,0.08)"},children:[(0,as.jsxs)("div",{className:"flex items-center mb-1 sm:mb-0",children:[(0,as.jsx)(la,{className:"text-yellow-300 text-xs sm:text-sm mr-2"}),(0,as.jsxs)("span",{className:"text-xs font-bold text-white",children:["Total: ",y,"/",Ex]})]}),(0,as.jsx)("div",{className:"w-10 sm:w-12 bg-white bg-opacity-20 rounded-full h-1 sm:ml-2",children:(0,as.jsx)("div",{className:"bg-yellow-300 h-1 rounded-full transition-all duration-500",style:{width:y/Ex*100+"%"}})})]})]}),(0,as.jsxs)("div",{className:"space-y-3 sm:space-y-4",children:[(0,as.jsxs)("button",{onClick:at,className:"w-full px-4 sm:px-6 py-2 sm:py-3 rounded-lg text-base sm:text-lg font-bold transition-all duration-300 hover:scale-105 flex items-center justify-center "+(l?"bg-yellow-500 hover:bg-yellow-400 text-[#0b1022]":"bg-yellow-600 hover:bg-yellow-500 text-white"),children:[(0,as.jsx)(Na,{className:"mr-2 text-sm sm:text-base"})," Resume Adventure"]}),(0,as.jsxs)("button",{onClick:ot,className:"w-full px-4 sm:px-6 py-2 sm:py-3 rounded-lg text-base sm:text-lg font-bold transition-all duration-300 hover:scale-105 flex items-center justify-center "+(l?"bg-yellow-500 hover:bg-yellow-400 text-[#0b1022]":"bg-yellow-600 hover:bg-yellow-500 text-white"),children:[(0,as.jsx)(sa,{className:"mr-2 text-sm sm:text-base"})," Ship Settings"]}),(0,as.jsxs)("button",{onClick:()=>Te(!0),className:"w-full px-4 sm:px-6 py-2 sm:py-3 rounded-lg text-base sm:text-lg font-bold transition-all duration-300 hover:scale-105 flex items-center justify-center "+(l?"bg-yellow-500 hover:bg-yellow-400 text-[#0b1022]":"bg-yellow-600 hover:bg-yellow-500 text-white"),children:[(0,as.jsx)(Ca,{className:"mr-2 text-sm sm:text-base"})," Restart Journey"]}),(0,as.jsxs)("button",{onClick:()=>{Zn.debug("[FallingGame] Exit Game button clicked - showing confirmation modal"),Ne(!0)},className:"w-full px-4 sm:px-6 py-2 sm:py-3 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white rounded-lg text-base sm:text-lg font-bold transition-all duration-300 hover:scale-105 flex items-center justify-center","data-testid":"exit-button",children:[(0,as.jsx)(Vs,{className:"mr-2 text-sm sm:text-base"}),"Return to Port"]})]})]})}),Y&&(0,as.jsx)(lc,{isOpen:Y,onClose:ot,title:"Ship Settings",maxWidth:"max-w-md",children:(0,as.jsxs)("div",{className:"space-y-4",children:[(0,as.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border-2 transition-colors duration-300 "+(l?"bg-[#0f1428]/80 border-yellow-700/40":"bg-[#fbf4de] border-yellow-300"),children:[(0,as.jsx)("span",{className:"text-lg transition-colors duration-300 "+(l?"text-yellow-200":"text-yellow-800"),children:"Ship's Music"}),(0,as.jsx)("button",{onClick:()=>te((e=>!e)),className:"p-2 rounded-full transition-colors "+(l?"hover:bg-yellow-700/30":"hover:bg-yellow-200"),children:ee?(0,as.jsx)(Ba,{size:24,className:"text-green-400"}):(0,as.jsx)(Fa,{size:24,className:"text-red-400"})})]}),(0,as.jsxs)("div",{className:"flex items-center p-3 rounded-lg border-2 transition-colors duration-300 "+(l?"bg-[#0f1428]/80 border-yellow-700/40":"bg-[#fbf4de] border-yellow-300"),children:[(0,as.jsx)("span",{className:"text-lg mr-4 transition-colors duration-300 "+(l?"text-yellow-200":"text-yellow-800"),children:"Volume"}),(0,as.jsx)("input",{type:"range",min:"0",max:"1",step:"0.01",value:lt,onChange:e=>ct(Number(e.target.value)),className:"w-full",disabled:!ee,"data-testid":"music-volume-slider"})]}),it&&(0,as.jsxs)("div",{className:"p-3 rounded-lg border-2 transition-colors duration-300 "+(l?"bg-[#0f1428]/80 border-yellow-700/40":"bg-[#fbf4de] border-yellow-300"),children:[(0,as.jsx)("label",{htmlFor:"tableSelect",className:"block text-lg mb-2 transition-colors duration-300 "+(l?"text-yellow-200":"text-yellow-800"),children:"Treasure Map Focus:"}),(0,as.jsxs)("select",{id:"tableSelect",value:ie,onChange:e=>{le(e.target.value),!u||G||m||Ue()},className:"w-full p-2 rounded-md focus:outline-none focus:ring-2 transition-colors duration-300 "+(l?"bg-[#0b1022]/50 text-yellow-200 border-yellow-700/40 focus:ring-yellow-500":"bg-[#f5ecd2]/50 text-yellow-800 border-yellow-300 focus:ring-yellow-500"),children:[(0,as.jsx)("option",{value:"random",children:"Random Treasures"}),Array.from({length:11},((e,t)=>t+2)).map((e=>(0,as.jsx)("option",{value:e,children:`Map ${e}${s.topic.includes("multiply")?"\xd7":"\xf7"}`},e)))]})]}),it&&(0,as.jsxs)("button",{onClick:()=>{(()=>{var e,t;null!==s&&void 0!==s&&null!==(e=s.topic)&&void 0!==e&&e.toLowerCase().includes("multiply")||null!==s&&void 0!==s&&null!==(t=s.topic)&&void 0!==t&&t.toLowerCase().includes("division")?X((e=>!e)):st.error("Multiplication table is only available for multiplication or division topics.")})(),Z(!1)},className:"w-full px-4 py-2 rounded-md text-lg transition-all duration-300 hover:scale-105 flex items-center justify-center "+(l?"bg-yellow-500 hover:bg-yellow-400 text-[#0b1022]":"bg-yellow-600 hover:bg-yellow-500 text-white"),children:[(0,as.jsx)(Ia,{className:"mr-2"})," Show Treasure Reference"]})]})}),xe&&(0,as.jsx)(lc,{isOpen:xe,onClose:()=>be(!1),title:"Select Treasure Map",maxWidth:"max-w-lg",children:Ie?(0,as.jsx)("div",{className:"flex justify-center items-center h-32",children:(0,as.jsxs)("div",{className:"flex items-center gap-3",children:[(0,as.jsx)(ia,{className:"text-yellow-400 text-2xl"}),(0,as.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-yellow-400"}),(0,as.jsx)(Oa,{className:"text-yellow-400 text-2xl"})]})}):(0,as.jsx)("div",{className:"grid grid-cols-3 gap-4 mb-6",children:Array.from({length:Ex},((e,t)=>t+1)).map((e=>(0,as.jsxs)("button",{onClick:()=>{return t=e,be(!1),v(t),ne(0),k([]),g(0),C(5),j(1),b(""),de(0),K(!1),f(!1),V(0),W(0),ye.current=new Set,L(new Set),O.current=new Set,T.current=[],A.current=performance.now(),h(!0),void Ue();var t},disabled:e>ze,className:"p-4 rounded-lg text-center transition-all duration-300 hover:scale-105 border-2 "+(e<=ze?l?"bg-yellow-500 text-[#0b1022] hover:bg-yellow-400 border-yellow-700/40":"bg-yellow-600 text-white hover:bg-yellow-500 border-yellow-300":l?"bg-gray-600 text-gray-400 cursor-not-allowed border-gray-700/40":"bg-gray-200 text-gray-500 cursor-not-allowed border-gray-300"),children:[(0,as.jsxs)("div",{className:"flex items-center justify-center gap-1 mb-1",children:[(0,as.jsx)(ya,{className:"text-sm"}),(0,as.jsxs)("span",{className:"font-bold",children:["Map ",e]})]}),e<=ze&&(0,as.jsx)("span",{className:"block text-xs mt-1",children:"\u2693 Unlocked"}),e>ze&&(0,as.jsx)("span",{className:"block text-xs mt-1",children:"\ud83d\udd12 Locked"})]},e)))})}),(0,as.jsxs)(lc,{isOpen:je,onClose:Je,title:"Abandon Ship?",children:[(0,as.jsx)("p",{className:"mb-4 transition-colors duration-300 "+(l?"text-yellow-300":"text-yellow-700"),children:"Your treasure hunt progress is automatically saved, so you can continue your adventure later. Are you sure you want to return to port now?"}),(0,as.jsxs)("div",{className:"mt-6 flex justify-end gap-4",children:[(0,as.jsxs)(bs,{variant:"cancel",rounded:"full",onClick:()=>{Ne(!1),K(!1),Be(),f(!0),h(!1),et.current=!0,localStorage.removeItem(Me),window.history.length>1?window.history.back():window.location.href="/student/classrooms"},className:"transition-all duration-300 hover:scale-105",children:[(0,as.jsx)(Vs,{className:"mr-2"}),"Return to Port"]}),(0,as.jsxs)(bs,{variant:"default",rounded:"full",onClick:Je,className:"transition-all duration-300 hover:scale-105",children:[(0,as.jsx)(Aa,{className:"mr-2"}),"Continue Adventure"]})]})]}),(0,as.jsxs)(lc,{isOpen:Oe,onClose:()=>Te(!1),title:"Restart Adventure?",children:[(0,as.jsx)("p",{className:"mb-4 transition-colors duration-300 "+(l?"text-yellow-300":"text-yellow-700"),children:"Restarting your adventure will clear your treasure progress. Are you sure you want to start a new journey?"}),(0,as.jsxs)("div",{className:"mt-6 flex justify-end gap-4",children:[(0,as.jsx)(bs,{variant:"cancel",rounded:"full",onClick:()=>Te(!1),className:"transition-all duration-300 hover:scale-105",children:"Cancel"}),(0,as.jsxs)(bs,{variant:"default",rounded:"full",onClick:()=>{Te(!1),et.current=!0,localStorage.removeItem(Me),h(!1),k([]),d([]),g(0),C(5),v(1),j(1),ne(0),ae(10),f(!1),K(!1),b(""),de(0),ye.current=new Set,L(new Set),oe.current=!1,_x.isGenerating=!1,O.current=new Set,T.current=[],_x.lastCallTime=0,_x.callCount=0,he(3),Ue().then((()=>{let e=3;const t=setInterval((()=>{e--,he(e),e<=0&&(clearInterval(t),he(null),h(!0),A.current=performance.now())}),1e3)}))},className:"transition-all duration-300 hover:scale-105",children:[(0,as.jsx)(Aa,{className:"mr-2"}),"Start New Journey"]})]})]})]})]})}):(0,as.jsx)("div",{className:"text-center p-8 text-xl",children:"Loading game data..."})},Ox=(0,n.memo)(Ax),Tx={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_GROQ_API_KEY,zx={lastCallTime:0,callCount:0,problemsCache:new Map,isGenerating:!1},Px=e=>{var t,r;let{game:s,onGameComplete:a}=e;const{token:o,currentUser:i}=is(),[l,c]=(0,n.useState)([]),[d,u]=(0,n.useState)(0),[h,m]=(0,n.useState)(null),[f,p]=(0,n.useState)(0),[g,x]=(0,n.useState)(!1),[b,y]=(0,n.useState)(!1),[v,w]=(0,n.useState)(15),[j,N]=(0,n.useState)(v),[k,S]=(0,n.useState)(!1),[C,_]=(0,n.useState)(!1),[E,A]=(0,n.useState)(!1),[O,T]=(0,n.useState)(null),[z,P]=(0,n.useState)(1),[I,L]=(0,n.useState)(!1),[M,q]=(0,n.useState)(0),[R,D]=(0,n.useState)(!1),[F,B]=(0,n.useState)(0),[$,U]=(0,n.useState)(5),[H,W]=(0,n.useState)(!0),[Q,V]=(0,n.useState)(!1),[G,K]=(0,n.useState)(!1),[Y,Z]=(0,n.useState)(!1),[J,X]=(0,n.useState)(null),[ee,te]=(0,n.useState)(!1),[re,ne]=(0,n.useState)(!1),[se,ae]=(0,n.useState)(null),[oe,ie]=(0,n.useState)(!1),[le,ce]=(0,n.useState)(!1),[de,ue]=(0,n.useState)((()=>{const e=localStorage.getItem("mcgUnlockedLevels");return e?parseInt(e,10):1})),[he,me]=(0,n.useState)(!1),fe=(null===s||void 0===s||s.id,(0,n.useRef)({gameStarted:!1,gameOver:!1}));(0,n.useEffect)((()=>{const e={gameStarted:g,gameOver:b},t=fe.current;e.gameStarted===t.gameStarted&&e.gameOver===t.gameOver||(a&&"function"===typeof a&&a(null,e),fe.current=e)}),[g,b,a]);const pe=(0,n.useCallback)((async(e,t)=>{if(!Tx)return Zn.warn("[MultipleChoiceGame] Groq API key not found"),null;const r=Date.now();if(r-zx.lastCallTime>6e4&&(zx.callCount=0,zx.lastCallTime=r),zx.callCount>=10)throw Zn.error("[MultipleChoiceGame] Rate limit exceeded"),new Error("Rate limit exceeded");try{const n=e.toLowerCase();let s="";n.includes("multiply")?s="multiply":n.includes("divide")?s="divide":n.includes("add")?s="add":n.includes("subtract")?s="subtract":n.includes("fraction")&&(s="fraction");const a=await fetch("https://api.groq.com/openai/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Tx}`},body:JSON.stringify({model:"llama-3.3-70b-versatile",messages:[{role:"system",content:"You are an expert math problem generator for grade 4 students. Create accurate, level-appropriate math problems with precise answers. \n\nFor fractions, use proper formatting (e.g., 1/2, 3/4, 1 1/2 for mixed numbers).\nFor situational questions, use clear, age-appropriate language and real-world scenarios.\nFor complex topics, carefully follow the exact specifications provided.\n\nAlways ensure answers are in the simplest form and match the expected format."},{role:"user",content:`Generate ${t} grade 4 math problems for the topic: "${e}"\n\nIMPORTANT: \n- Follow the exact topic description provided\n- If the topic mentions specific answer formats (like "pure number like \xbd"), ensure answers match that format\n- If it mentions situational questions, create word problems with real-world scenarios\n- If it mentions single-digit fractions, use only single-digit numerators and denominators\n- Ensure all problems are appropriate for grade 4 level\n\nRespond ONLY with a JSON array where each object has:\n- 'question' (string): The math problem or word problem\n- 'answer' (string): The correct answer in the specified format\n- 'operation' (string): The mathematical operation used (e.g., 'fraction_addition', 'situational_fraction')`}],temperature:.7,max_tokens:2048})});if(!a.ok)throw new Error(`Groq API error: ${a.status}`);zx.callCount++,zx.lastCallTime=r;const o=await a.json(),i=(e=>("string"===typeof e&&((e=e.trim()).startsWith("```json")?e=e.replace(/^```json/,"").replace(/```$/,"").trim():e.startsWith("```")&&(e=e.replace(/^```/,"").replace(/```$/,"").trim())),JSON.parse(e)))(o.choices[0].message.content);let l=i;return Array.isArray(i)&&s&&(l=i.filter((e=>{if(!e.operation)return!1;const t=e.operation.toLowerCase();return"multiply"===s?t.includes("multiply"):"divide"===s?t.includes("divide"):"add"===s?t.includes("add"):"subtract"===s?t.includes("subtract"):"fraction"===s&&(t.includes("fraction")||t.includes("add")||t.includes("situational"))}))),l}catch(n){return Zn.error("[MultipleChoiceGame] Groq API error",{error:n.message}),null}}),[]),ge=(0,n.useCallback)((async()=>{if(null===s||void 0===s||!s.id||null===s||void 0===s||!s.topic||zx.isGenerating)return Zn.warn("[MultipleChoiceGame] Game or topic not available yet, or already generating"),[];try{L(!0),zx.isGenerating=!0;const e=s.topic.toLowerCase(),t=60,r=`${e}-${z}`;if(zx.problemsCache.has(r)){const e=zx.problemsCache.get(r);if(e.timestamp>Date.now()-3e5)return c(e.problems),e.problems}const n=await pe(s.topic,t);if(Array.isArray(n)&&n.length>0){const e=new Set,t=n.filter((t=>!!t.question&&(!e.has(t.question)&&(e.add(t.question),!0)))),a=t.map(((e,t)=>({id:`${Date.now()}-${t}`,question:e.question,answer:e.answer,options:be(e.answer,z,s.topic),correctAnswer:e.answer,level:z})));return zx.problemsCache.set(r,{problems:a,timestamp:Date.now()}),c(a),a}Zn.error("[MultipleChoiceGame] No problems generated from Groq API");const a=Me(s.topic,t);return a.length>0?(c(a),a):(st.error("Failed to generate questions. Please try again."),c([]),[])}catch(e){return Zn.error("[MultipleChoiceGame] Error generating problems",{error:e.message}),st.error("Failed to generate questions. Please try again."),c([]),[]}finally{L(!1),zx.isGenerating=!1}}),[s,z,pe]),xe=(0,n.useCallback)((e=>{const t={1:{min:1,max:10},2:{min:5,max:15},3:{min:10,max:20},4:{min:15,max:30},5:{min:20,max:50}};return t[Math.min(e,Object.keys(t).length)]||t[Object.keys(t).length]}),[]),be=(0,n.useCallback)(((e,t,r)=>{const n=[e],s=xe(t).max*(t>=3?2:1);if(r&&r.toLowerCase().includes("fraction")){const[t,r]=e.split(/[ /]+/).map(Number);for(;n.length<4;){let e=`${Math.max(1,t+Math.floor(5*Math.random())-2)}/${r||Math.floor(8*Math.random())+2}`;n.includes(e)||n.push(e)}return n.sort((()=>Math.random()-.5))}for(;n.length<4;){const t=Math.floor(Math.random()*s)+1;!n.includes(t)&&Math.abs(t-e)>1&&n.push(t)}return n.sort((()=>Math.random()-.5))}),[xe]),ye=async()=>{try{const t={gameId:s.id,score:f,level:z,timeSpent:l.length*v-j},r=await Jc.submitGameScore(t);if(T(r),A(!0),a)try{a(f)}catch(e){a(r)}}catch(e){if(Zn.error("Error submitting score",{error:e.message}),st.error("Failed to submit score"),i){const e=JSON.parse(localStorage.getItem("gameScores")||"[]"),t={gameId:s.id,score:f,level:z,timeSpent:l.length*v-j,timestamp:(new Date).toISOString(),userId:i.id,pending:!0};if(e.push(t),localStorage.setItem("gameScores",JSON.stringify(e)),T(t),A(!0),a)try{a(f)}catch(Ie){a(t)}}}},ve=(0,n.useCallback)((()=>{if(z>=10)return y(!0),void ye();ue((e=>{const t=Math.max(e,z+1);return localStorage.setItem("mcgUnlockedLevels",t),t})),st.success(`Level ${z} complete! Starting level ${z+1}...`),P(z+1),q(0),u(0),m(null),S(!1),N(Le(z+1)),ge()}),[z,ye,ge]),we=()=>{x(!1),y(!1),p(0),P(1),u(0),m(null),N(Le(1)),S(!1),q(0),U(5),V(!1),X(3),ge().then((e=>{if(!e||0===e.length)return X(null),void st.error("Failed to generate questions. Please try again.");let t=3;const r=setInterval((()=>{t--,X(t),t<=0&&(clearInterval(r),X(null),x(!0))}),1e3)})).catch((e=>{Zn.error("[MultipleChoiceGame] Error generating questions",{error:e.message}),st.error("Failed to start game. Please try again."),X(null)}))};(0,n.useEffect)((()=>{if(!g||b||k)return;if(j<=0)return U((e=>{const t=e-1;return t<=0?(y(!0),ye(),0):t})),S(!0),_(!1),void setTimeout((()=>{je()}),1500);const e=setTimeout((()=>{N(j-1)}),1e3);return()=>clearTimeout(e)}),[g,b,k,j]);const je=()=>{d<l.length-1?(u((e=>e+1)),m(null),N(Le(z)),S(!1)):(y(!0),ye())},Ne=l[d],ke=((0,n.useCallback)((async()=>{if(z>=10)return y(!0),void ye();const e={gameId:s.id,score:f,level:z,timeSpent:l.length*v-j};try{const t=await Jc.submitGameScore(e);T(t),A(!0),st.success(`Level ${z} complete! Starting level ${z+1}...`,{duration:2e3}),P((e=>e+1)),p(0),B(0),c([]),u(0),N(5*v),ge()}catch(t){Zn.error("Error submitting level completion",{error:t.message}),st.error("Failed to save level progress")}}),[z,null===s||void 0===s?void 0:s.id,f,l.length,v,j,ge]),()=>{ae(null),ne(!1)}),[Se,Ce]=(0,n.useState)(.5),_e=(0,n.useRef)(null);(0,n.useEffect)((()=>{H&&_e.current?(_e.current.volume=Se,_e.current.play().catch((()=>{}))):_e.current&&_e.current.pause()}),[H,Se]);const Ee=()=>{!b&&g&&V((e=>!e))},Ae=()=>K((e=>!e)),Oe=(null===s||void 0===s||null===(t=s.topic)||void 0===t?void 0:t.toLowerCase().includes("multiply"))||(null===s||void 0===s||null===(r=s.topic)||void 0===r?void 0:r.toLowerCase().includes("division")),Te=()=>{document.fullscreenElement?document.exitFullscreen().then((()=>{te(!1),document.body.classList.remove("fullscreen-mode")})).catch((e=>{console.error("Error attempting to exit fullscreen:",e)})):document.documentElement.requestFullscreen().then((()=>{te(!0),document.body.classList.add("fullscreen-mode")})).catch((e=>{console.error("Error attempting to enable fullscreen:",e)}))};(0,n.useEffect)((()=>{const e=()=>{const e=!!document.fullscreenElement;te(e),e?document.body.classList.add("fullscreen-mode"):document.body.classList.remove("fullscreen-mode")};return document.addEventListener("fullscreenchange",e),()=>{document.removeEventListener("fullscreenchange",e),document.body.classList.remove("fullscreen-mode")}}),[]);const ze=(0,n.useCallback)((async()=>{if(i&&null!==s&&void 0!==s&&s.id){me(!0);try{const e=await Jc.getStudentGameLevel(s.id,i.id);let t=1;"object"===typeof e&&null!==e?t=e.level_achieved||e.level||1:"number"===typeof e&&(t=e),ue(Math.max(t,parseInt(localStorage.getItem("mcgUnlockedLevels")||"1",10)))}catch(e){const t=localStorage.getItem("mcgUnlockedLevels");ue(t?parseInt(t,10):1)}finally{me(!1)}}else{const e=localStorage.getItem("mcgUnlockedLevels");ue(e?parseInt(e,10):1)}}),[i,s]),Pe=()=>{D(!0),ze()},Le=e=>Math.max(7,20-Math.floor(13/9*(e-1)));(0,n.useEffect)((()=>{if(!g||b)return;const e=e=>(e.preventDefault(),e.returnValue="",""),t=e=>{e.preventDefault&&e.preventDefault(),ae(window.location.href),ne(!0),window.history.pushState(null,"",window.location.href)};window.addEventListener("beforeunload",e),window.addEventListener("popstate",t),window.history.pushState(null,"",window.location.href);const r=e=>{const t=e.target.closest('a, button[data-nav], [role="link"], .nav-link, .sidebar-link, [href]');if(t){const r=t.href||t.getAttribute("href"),n=r&&!r.includes(window.location.origin+"/game/");("A"===t.tagName||t.hasAttribute("data-nav")||"link"===t.getAttribute("role")||t.className.includes("nav-link")||t.className.includes("sidebar-link"))&&n&&(e=>{e.preventDefault(),e.stopPropagation(),ae(e.target.href||e.target.getAttribute("href")),ne(!0)})(e)}};return document.addEventListener("click",r,!0),()=>{window.removeEventListener("beforeunload",e),window.removeEventListener("popstate",t),document.removeEventListener("click",r,!0)}}),[g,b]),(0,n.useEffect)((()=>{if(null===s||void 0===s||!s.id)return;const e=`mcg_gameState_${s.id}`,t=localStorage.getItem(e);if(t)try{const r=JSON.parse(t),n=r.timestamp||0;Date.now()-n<18e5?(p(r.score||0),P(r.currentLevel||1),U(r.lives||5),q(r.problemsSolvedThisLevel||0),N(r.timeLeft||Le(r.currentLevel||1)),m(r.selectedOption||null),u(r.currentQuestionIndex||0),r.questions&&r.questions.length>0&&c(r.questions),void 0!==r.score&&r.lives>0&&(x(!0),y(!1))):localStorage.removeItem(e)}catch(r){console.error("[MultipleChoiceGame] Error parsing saved state:",r),localStorage.removeItem(e)}}),[null===s||void 0===s?void 0:s.id,5]),(0,n.useEffect)((()=>{const e=`mcg_gameState_${null===s||void 0===s?void 0:s.id}`;if(g&&!b&&l.length>0){const t={score:f,currentLevel:z,lives:$,problemsSolvedThisLevel:M,timeLeft:j,selectedOption:h,currentQuestionIndex:d,questions:l.slice(0,10),timestamp:Date.now()};localStorage.setItem(e,JSON.stringify(t))}else b&&localStorage.removeItem(e)}),[g,b,f,z,$,M,j,h,d,l.length,null===s||void 0===s?void 0:s.id]);const Me=(e,t)=>{const r=[],n=e.toLowerCase();for(let s=0;s<t;s++){let e,t,a;if(n.includes("fraction")){const r=[1,2,3,4,5],n=[2,3,4,5,6],s=r[Math.floor(Math.random()*r.length)],o=n[Math.floor(Math.random()*n.length)],i=r[Math.floor(Math.random()*r.length)],l=n[Math.floor(Math.random()*n.length)],c=(e,t)=>e*t/d(e,t),d=(e,t)=>0===t?e:d(t,e%t),u=c(o,l),h=s*(u/o)+i*(u/l),m=d(h,u);e=`What is ${s}/${o} + ${i}/${l}?`,t=`${h/m}/${u/m}`;a=[t,`${s+i}/${o}`,`${s+i}/${o+l}`,`${s*i}/${o*l}`].sort((()=>Math.random()-.5))}else if(n.includes("multiply")){const r=Math.floor(12*Math.random())+1,n=Math.floor(12*Math.random())+1;e=`What is ${r} \xd7 ${n}?`,t=(r*n).toString();a=[t,(r+n).toString(),(r-n).toString(),(r*n+1).toString()].sort((()=>Math.random()-.5))}else if(n.includes("add")){const r=Math.floor(50*Math.random())+1,n=Math.floor(50*Math.random())+1;e=`What is ${r} + ${n}?`,t=(r+n).toString();a=[t,(r-n).toString(),(r*n).toString(),(r+n+1).toString()].sort((()=>Math.random()-.5))}else if(n.includes("subtract")){const r=Math.floor(50*Math.random())+50,n=Math.floor(Math.random()*r)+1;e=`What is ${r} - ${n}?`,t=(r-n).toString();a=[t,(r+n).toString(),(r*n).toString(),(r-n-1).toString()].sort((()=>Math.random()-.5))}else{const r=Math.floor(20*Math.random())+1,n=Math.floor(20*Math.random())+1;e=`What is ${r} + ${n}?`,t=(r+n).toString();a=[t,(r-n).toString(),(r*n).toString(),(r+n+1).toString()].sort((()=>Math.random()-.5))}r.push({id:`fallback-${Date.now()}-${s}`,question:e,answer:t,options:a,correctAnswer:t,level:z})}return r};return s?(0,as.jsx)("div",{className:"px-4 sm:px-6 game-container",children:(0,as.jsxs)("div",{className:"mx-auto",children:[(0,as.jsx)("audio",{ref:_e,src:"/game-bg-music.mp3",loop:!0,autoPlay:!0,style:{display:"none"}}),E&&O&&(0,as.jsx)(Sx,{isOpen:E,onClose:()=>{A(!1),T(null)},scoreData:O,gameName:s.name,gameId:s.id,maxGameLevel:10}),(0,as.jsxs)("div",{className:"w-full mx-auto flex flex-col items-center justify-center md:flex-grow",children:[!g&&!b&&null===J&&(0,as.jsxs)("div",{className:"text-center my-8 p-8 md:mt-36 rounded-2xl shadow-xl dark:bg-transparent sm:p-6 lg:p-8 flex flex-col min-h-[200px] sm:min-h-[260px] relative border border-white/10",children:[(0,as.jsx)(po,{type:"h1",fontSize:"5xl",weight:"semibold",className:"text-yellow-500 py-3",children:(null===s||void 0===s?void 0:s.name)||"Multiple Choice Game"}),(0,as.jsx)("p",{className:"dark:text-gray-300 text-gray-900 mb-3",children:(null===s||void 0===s?void 0:s.instructions)||"Choose the correct answer for each question!"}),(0,as.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,as.jsxs)("div",{className:"flex justify-center gap-2",children:[(0,as.jsx)(bs,{onClick:Te,variant:"link",size:"sm",children:ee?"Exit Fullscreen":"Fullscreen"}),(0,as.jsx)(bs,{onClick:()=>{a&&a(null,{showLeaderboard:!0})},variant:"link",size:"sm",children:"View Leaderboard"}),(0,as.jsx)(bs,{onClick:Pe,variant:"link",size:"sm",children:"View Level"})]}),(0,as.jsx)("div",{className:"",children:(0,as.jsx)(bs,{onClick:we,variant:"default",size:"sm",rounded:"full",className:"w-full",children:"Start Game"})})]})]}),null!==J&&(0,as.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50",children:(0,as.jsxs)("div",{className:"text-center",children:[(0,as.jsx)("h2",{className:"text-6xl font-bold text-white mb-4",children:"Starting in"}),(0,as.jsx)("div",{className:"text-8xl font-bold text-yellow-400 animate-pulse",children:J})]})}),g&&!b&&!Q&&(0,as.jsxs)("div",{className:"flex flex-col lg:flex-row w-full gap-6",children:[(0,as.jsx)("div",{className:"w-full lg:w-3/4",children:(0,as.jsx)("div",{className:"relative w-full h-[calc(100vh-220px)] sm:h-[calc(100vh-200px)] lg:h-[calc(100vh-200px)] bg-gray-50 shadow-lg rounded-lg mb-4 overflow-hidden flex items-center justify-center",children:Ne&&(0,as.jsxs)("div",{className:"bg-blue-50 rounded-lg p-6 border-2 border-blue-200 w-full max-w-2xl mx-4",children:[(0,as.jsxs)("h3",{className:"text-xl font-bold mb-4 text-gray-800",children:["Question: ",Ne.question]}),(0,as.jsx)("div",{className:"grid grid-cols-2 gap-4",children:Ne.options.map((e=>(0,as.jsx)("button",{onClick:()=>(e=>{if(k)return;m(e),S(!0);const t=l[d],r=e.toString()===t.correctAnswer.toString();if(_(r),r){const e=Math.ceil(j/v*10),t=5*z;p((r=>r+10+e+t)),q((e=>{const t=e+1;return t>=5?(setTimeout((()=>ve()),1500),0):t})),st.success("Correct!",{duration:1e3})}else U((e=>{const t=e-1;return t<=0?(y(!0),ye(),0):t})),st.error("Incorrect!",{duration:1e3});setTimeout((()=>{je()}),1500)})(e),disabled:k,className:"p-4 text-lg font-medium rounded-lg transition-colors !text-gray-800 "+(k?e===Ne.correctAnswer?"bg-green-100 border-2 border-green-500":h===e?"bg-red-100 border-2 border-red-500":"bg-gray-100 border-2 border-gray-200":h===e?"bg-blue-200 border-2 border-blue-500":"bg-white border-2 border-gray-300 hover:bg-gray-100"),children:e},e)))}),k&&(0,as.jsx)("div",{className:"mt-4 p-3 rounded-lg "+(C?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:(0,as.jsx)("p",{className:"font-bold text-center",children:C?"\u2705 Correct!":`\u274c Incorrect! The correct answer is ${Ne.correctAnswer}.`})})]})})}),(0,as.jsx)("div",{className:"w-full lg:w-1/4",children:(0,as.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 shadow-lg h-[calc(100vh-220px)] sm:h-[calc(100vh-200px)] lg:h-[calc(100vh-200px)] overflow-y-auto",children:[(0,as.jsx)(po,{type:"h3",variant:"default",fontSize:"2xl",className:"mb-6 text-primary text-center",children:"Game Controls"}),(0,as.jsx)("div",{className:"mb-4 p-3 bg-gray-200 rounded-lg",children:(0,as.jsxs)("div",{className:"text-center",children:[(0,as.jsx)("div",{className:"text-sm text-gray-800",children:"Current Level"}),(0,as.jsx)("div",{className:"text-2xl font-bold text-yellow-500",children:z})]})}),(0,as.jsx)("div",{className:"mb-4 p-3 bg-gray-200 rounded-lg",children:(0,as.jsxs)("div",{className:"text-center",children:[(0,as.jsxs)("div",{className:"text-sm text-gray-800 flex items-center justify-center",children:[(0,as.jsx)(za,{className:"mr-1 text-yellow-500"})," Score"]}),(0,as.jsx)("div",{className:"text-2xl font-bold text-yellow-500",children:f})]})}),(0,as.jsx)("div",{className:"mb-4 p-3 bg-gray-200 rounded-lg",children:(0,as.jsxs)("div",{className:"text-center",children:[(0,as.jsx)("div",{className:"text-sm text-gray-800",children:"Lives"}),(0,as.jsx)("div",{className:"text-2xl text-red-500",children:"\u2764\ufe0f".repeat($)||"\ud83d\udc94"})]})}),(0,as.jsx)("div",{className:"mb-4 p-3 bg-gray-200 rounded-lg",children:(0,as.jsxs)("div",{className:"text-center",children:[(0,as.jsx)("div",{className:"text-sm text-gray-800 mb-2",children:"Progress"}),(0,as.jsx)("div",{className:"w-full h-3 bg-gray-600 rounded-full overflow-hidden border border-gray-500",children:(0,as.jsx)("div",{className:"h-full bg-green-500 transition-all duration-300 ease-in-out",style:{width:`${Math.min(100,M/5*100)}%`}})}),(0,as.jsxs)("div",{className:"text-sm font-bold mt-1",children:[M,"/",5]})]})}),(0,as.jsx)("div",{className:"mb-4 p-3 bg-gray-200 rounded-lg",children:(0,as.jsxs)("div",{className:"text-center",children:[(0,as.jsx)("div",{className:"text-sm text-gray-800",children:"Time Left"}),(0,as.jsxs)("div",{className:"text-2xl font-bold text-blue-500",children:[j,"s"]})]})}),(0,as.jsxs)("div",{className:"space-y-2",children:[(0,as.jsx)("button",{onClick:Pe,className:"w-full px-3 py-2 bg-blue-400 text-white rounded hover:bg-blue-600 text-sm font-medium",children:"Change Level"}),(0,as.jsxs)("button",{onClick:Ae,className:"w-full px-3 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 text-sm font-medium flex items-center justify-center",children:[(0,as.jsx)(sa,{className:"mr-2",size:14})," Settings"]}),(0,as.jsx)("button",{onClick:Ee,className:"w-full px-3 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm font-medium flex items-center justify-center",children:Q?(0,as.jsxs)(as.Fragment,{children:[(0,as.jsx)(Na,{className:"mr-2",size:14})," Resume"]}):(0,as.jsxs)(as.Fragment,{children:[(0,as.jsx)(ja,{className:"mr-2",size:14})," Pause"]})}),(0,as.jsxs)("button",{onClick:Te,className:"w-full px-3 py-2 bg-blue-700 text-white rounded hover:bg-blue-800 text-sm font-medium flex items-center justify-center",children:[(0,as.jsx)(Ds,{className:"mr-2",size:14}),ee?"Exit Fullscreen":"Fullscreen"]})]})]})})]}),b&&(0,as.jsxs)("div",{className:"text-center md:mt-36 my-8 p-8 w-full max-w-md mx-auto rounded-2xl shadow-xl dark:bg-transparent sm:p-6 lg:p-8 flex flex-col relative border border-white/10",children:[(0,as.jsx)(po,{type:"h1",fontSize:"5xl",weight:"semibold",className:"text-red-600 py-3",children:"Game Over!"}),(0,as.jsxs)("p",{className:"dark:text-gray-300 text-gray-900 mb-3",children:["Your final score: ",(0,as.jsx)("span",{className:"font-bold text-yellow-500",children:f})]}),(0,as.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,as.jsx)(bs,{onClick:we,variant:"default",size:"sm",rounded:"full",children:"Play Again"}),(0,as.jsx)(bs,{onClick:()=>{a&&a(f)},variant:"cancel",size:"sm",rounded:"full",children:"Back to Games"})]})]}),Q&&g&&!b&&(0,as.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex flex-col items-center justify-center z-30",children:(0,as.jsxs)("div",{className:"bg-gray-50 p-8 w-64 md:w-80 rounded-lg shadow-xl text-center",children:[(0,as.jsx)(po,{type:"h2",variant:"default",fontSize:"2xl",className:"mb-8 text-primary text-center",children:"Game Paused"}),(0,as.jsxs)("div",{className:"space-y-4",children:[(0,as.jsxs)("button",{onClick:Ee,className:"w-full px-6 py-3 bg-blue-400 text-white rounded-lg text-lg font-bold hover:bg-blue-500 transition-colors flex items-center justify-center",children:[(0,as.jsx)(Na,{className:"mr-2"})," Resume"]}),(0,as.jsxs)("button",{onClick:Ae,className:"w-full px-6 py-3 bg-blue-500 text-white rounded-lg text-lg font-bold hover:bg-blue-600 transition-colors flex items-center justify-center",children:[(0,as.jsx)(sa,{className:"mr-2"})," Settings"]}),(0,as.jsxs)("button",{onClick:()=>ce(!0),className:"w-full px-6 py-3 bg-blue-600 text-white rounded-lg text-lg font-bold hover:bg-blue-700 transition-colors flex items-center justify-center",children:[(0,as.jsx)(Ca,{className:"mr-2"})," Restart"]}),(0,as.jsx)("button",{onClick:()=>{ne(!0)},className:"w-full px-6 py-3 bg-red-500 text-white rounded-lg text-lg font-bold hover:bg-red-600 transition-colors flex items-center justify-center","data-testid":"exit-button",children:"Exit Game"})]})]})}),G&&(0,as.jsx)(lc,{isOpen:G,onClose:Ae,title:"Settings",maxWidth:"max-w-md",children:(0,as.jsxs)("div",{className:"space-y-4",children:[(0,as.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-md",children:[(0,as.jsx)("span",{className:"text-lg dark:text-gray-50 text-gray-900",children:"Background Music"}),(0,as.jsx)("button",{onClick:()=>W((e=>!e)),className:"p-2 rounded-full hover:bg-gray-500 transition-colors",children:H?(0,as.jsx)(Ba,{size:24,className:"text-green-400"}):(0,as.jsx)(Fa,{size:24,className:"text-red-400"})})]}),(0,as.jsxs)("div",{className:"flex items-center p-3 rounded-md",children:[(0,as.jsx)("span",{className:"text-lg mr-4 dark:text-gray-50 text-gray-900",children:"Volume"}),(0,as.jsx)("input",{type:"range",min:"0",max:"1",step:"0.01",value:Se,onChange:e=>Ce(Number(e.target.value)),className:"w-full",disabled:!H,"data-testid":"music-volume-slider"})]}),Oe&&(0,as.jsxs)("button",{onClick:()=>{(()=>{var e,t;null!==s&&void 0!==s&&null!==(e=s.topic)&&void 0!==e&&e.toLowerCase().includes("multiply")||null!==s&&void 0!==s&&null!==(t=s.topic)&&void 0!==t&&t.toLowerCase().includes("division")?Z((e=>!e)):st.error("Multiplication table is only available for multiplication or division topics.")})(),K(!1)},className:"w-full px-4 py-2 bg-purple-500 text-white rounded-md text-lg hover:bg-purple-600 transition-colors flex items-center justify-center",children:[(0,as.jsx)(Ia,{className:"mr-2"})," Show Multiplication Reference"]})]})}),I&&null===J&&(0,as.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50",children:(0,as.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"})}),R&&(0,as.jsx)(lc,{isOpen:R,onClose:()=>D(!1),title:"Select Level",maxWidth:"max-w-lg",children:he?(0,as.jsx)("div",{className:"flex justify-center items-center h-32",children:(0,as.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):(0,as.jsx)("div",{className:"grid grid-cols-3 gap-4 mb-6",children:Array.from({length:10},((e,t)=>t+1)).map((e=>(0,as.jsxs)("button",{onClick:()=>{return P(t=e),q(0),ge(),x(!0),y(!1),p(0),u(0),m(null),N(Le(t)),S(!1),void ue((e=>{const r=Math.max(e,t);return localStorage.setItem("mcgUnlockedLevels",r),r}));var t},disabled:e>de,className:"p-4 rounded-lg text-center transition-colors "+(e<=de?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-200 text-gray-500 cursor-not-allowed"),children:["Level ",e,e<=de&&(0,as.jsx)("span",{className:"block text-xs mt-1",children:"Unlocked"}),e>de&&(0,as.jsx)("span",{className:"block text-xs mt-1",children:"Locked"})]},e)))})}),(0,as.jsxs)(lc,{isOpen:re,onClose:ke,title:"Leave Game?",children:[(0,as.jsx)("p",{className:"dark:text-gray-50 text-gray-700 mb-4",children:"Your game progress is automatically saved, so you can continue later. Are you sure you want to leave the game now?"}),(0,as.jsxs)("div",{className:"mt-6 flex justify-end gap-4",children:[(0,as.jsx)(bs,{variant:"cancel",rounded:"full",onClick:()=>{ne(!1),V(!1),ye(),y(!0),x(!1),window.history.length>1?window.history.back():window.location.href="/student/classrooms"},children:"Leave Game"}),(0,as.jsx)(bs,{variant:"default",rounded:"full",onClick:ke,children:"Stay on Game"})]})]}),(0,as.jsxs)(lc,{isOpen:le,onClose:()=>ce(!1),title:"Restart Game?",children:[(0,as.jsx)("p",{className:"dark:text-gray-50 text-gray-700 mb-4",children:"Restarting the game will clear your progress. Are you sure you want to restart?"}),(0,as.jsxs)("div",{className:"mt-6 flex justify-end gap-4",children:[(0,as.jsx)(bs,{variant:"cancel",rounded:"full",onClick:()=>ce(!1),children:"Cancel"}),(0,as.jsx)(bs,{variant:"default",rounded:"full",onClick:()=>{ce(!1),we()},children:"Restart"})]})]})]})]})}):(0,as.jsx)("div",{className:"text-center p-8 text-xl",children:"Loading game data..."})},Ix=()=>{const{gameId:e}=te(),{token:t,currentUser:r}=is(),s=X(),[a,o]=(0,n.useState)(null),[i,l]=(0,n.useState)(!0),[c,d]=(0,n.useState)(null),[u,h]=(0,n.useState)(!1),[m,f]=(0,n.useState)(null),[p,g]=(0,n.useState)({gameStarted:!1,gameOver:!1});(0,n.useEffect)((()=>{e&&(async()=>{try{const t=await Xn.get(`/games/${e}`);o(t.data)}catch(c){var t,r;console.error("Error fetching game:",c),d("Failed to load game. Please try again later."),st.error((null===(t=c.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||"Failed to load game")}finally{l(!1)}})()}),[e,t]);const x=(0,n.useCallback)(((e,t)=>{null!==e&&(f(e),setTimeout((()=>{h(!0)}),1e3)),t&&(t.showLeaderboard?h(!0):g(t))}),[]);return i?(0,as.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,as.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):c?(0,as.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[(0,as.jsx)("strong",{className:"font-bold",children:"Error! "}),(0,as.jsx)("span",{className:"block sm:inline",children:c})]}):a?(0,as.jsxs)("div",{className:"container mx-auto px-4 py-6",children:[u&&(0,as.jsx)("div",{className:"mb-4",children:(0,as.jsxs)("nav",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[(0,as.jsx)("button",{onClick:()=>{null!==a&&void 0!==a&&a.lessonId?s(`/student/classrooms/${a.classroomId}/lessons/${a.lessonId}`):s(-1)},className:"hover:text-blue-600 transition-colors",children:"Back to Classroom"}),(0,as.jsx)("span",{className:"text-gray-400",children:"/"}),(0,as.jsx)("button",{onClick:()=>{h(!1),f(null)},className:"hover:text-blue-600 transition-colors",children:"Back to Game"})]})}),u?(0,as.jsx)(Yg,{gameId:e,finalScore:m},`${e}-${m}`):(0,as.jsx)("div",{className:"",children:"FALLING_GAME"===a.type?(0,as.jsx)(Ox,{game:a,onGameComplete:x}):(0,as.jsx)(Px,{game:a,onGameComplete:x})})]}):(0,as.jsxs)("div",{className:"bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded relative",role:"alert",children:[(0,as.jsx)("strong",{className:"font-bold",children:"Game not found! "}),(0,as.jsx)("span",{className:"block sm:inline",children:"The requested game could not be found."})]})},Lx=e=>{if(!e)return"0m 0s";return`${Math.floor(e/60)}m ${Math.floor(e%60)}s`},Mx=e=>{var t;let{gameId:r}=e;const{token:s}=is(),[a,o]=(0,n.useState)(null),[i,l]=(0,n.useState)(!0),[c,d]=(0,n.useState)(null);return(0,n.useEffect)((()=>{r&&(async()=>{try{const e=await Xn.get(`/games/${r}/analytics`);o(e.data)}catch(c){var e,t;console.error("Error fetching game analytics:",c),d("Failed to load analytics. Please try again later."),st.error((null===(e=c.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Failed to load analytics")}finally{l(!1)}})()}),[r,s]),i?(0,as.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,as.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):c?(0,as.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert",children:[(0,as.jsx)("strong",{className:"font-bold",children:"Error! "}),(0,as.jsx)("span",{className:"block sm:inline",children:c})]}):a?(0,as.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,as.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Game Analytics"}),(0,as.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,as.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[(0,as.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Total Plays"}),(0,as.jsx)("p",{className:"text-3xl font-bold text-blue-700",children:a.totalPlays||0})]}),(0,as.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[(0,as.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Average Score"}),(0,as.jsx)("p",{className:"text-3xl font-bold text-green-700",children:(null===(t=a.averageScore)||void 0===t?void 0:t.toFixed(1))||0})]}),(0,as.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-200",children:[(0,as.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Unique Players"}),(0,as.jsx)("p",{className:"text-3xl font-bold text-purple-700",children:a.uniquePlayers||0})]})]}),a.topStudents&&a.topStudents.length>0&&(0,as.jsxs)("div",{className:"mb-8",children:[(0,as.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Top Performing Students"}),(0,as.jsx)("div",{className:"overflow-x-auto",children:(0,as.jsxs)("table",{className:"min-w-full bg-white border border-gray-200",children:[(0,as.jsx)("thead",{children:(0,as.jsxs)("tr",{className:"bg-gray-100",children:[(0,as.jsx)("th",{className:"py-3 px-4 text-left font-semibold",children:"Rank"}),(0,as.jsx)("th",{className:"py-3 px-4 text-left font-semibold",children:"Student"}),(0,as.jsx)("th",{className:"py-3 px-4 text-right font-semibold",children:"Best Score"}),(0,as.jsx)("th",{className:"py-3 px-4 text-right font-semibold",children:"Plays"})]})}),(0,as.jsx)("tbody",{className:"divide-y divide-gray-200",children:a.topStudents.map(((e,t)=>(0,as.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,as.jsx)("td",{className:"py-3 px-4",children:t+1}),(0,as.jsx)("td",{className:"py-3 px-4 font-medium",children:e.name}),(0,as.jsx)("td",{className:"py-3 px-4 text-right font-bold",children:e.bestScore}),(0,as.jsx)("td",{className:"py-3 px-4 text-right",children:e.plays})]},t)))})]})})]}),a.scoreDistribution&&(0,as.jsxs)("div",{className:"mb-8",children:[(0,as.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Score Distribution"}),(0,as.jsx)("div",{className:"h-64 flex items-end space-x-2",children:Object.entries(a.scoreDistribution).map(((e,t)=>{let[r,n]=e;const s=n/Math.max(...Object.values(a.scoreDistribution))*100;return(0,as.jsxs)("div",{className:"flex flex-col items-center flex-1",children:[(0,as.jsx)("div",{className:"w-full bg-blue-500 rounded-t-md",style:{height:`${s}%`}}),(0,as.jsx)("div",{className:"mt-2 text-xs text-center",children:r}),(0,as.jsx)("div",{className:"text-sm font-bold",children:n})]},t)}))})]}),(0,as.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.completionRate&&(0,as.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[(0,as.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Game Completion Rate"}),(0,as.jsxs)("div",{className:"relative pt-1",children:[(0,as.jsx)("div",{className:"flex mb-2 items-center justify-between",children:(0,as.jsx)("div",{children:(0,as.jsxs)("span",{className:"text-xs font-semibold inline-block py-1 px-2 uppercase rounded-full text-blue-600 bg-blue-200",children:[(100*a.completionRate).toFixed(1),"% Complete Games"]})})}),(0,as.jsx)("div",{className:"overflow-hidden h-2 mb-4 text-xs flex rounded bg-gray-200",children:(0,as.jsx)("div",{style:{width:100*a.completionRate+"%"},className:"shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-blue-500"})})]})]}),a.averagePlayTime&&(0,as.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[(0,as.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Average Play Time"}),(0,as.jsx)("p",{className:"text-3xl font-bold text-gray-700",children:Lx(a.averagePlayTime)})]})]})]}):(0,as.jsxs)("div",{className:"bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded relative mb-4",role:"alert",children:[(0,as.jsx)("strong",{className:"font-bold",children:"No data available! "}),(0,as.jsx)("span",{className:"block sm:inline",children:"No analytics data available for this game yet."})]})};var qx=r(8139),Rx=r.n(qx);const Dx=["xxl","xl","lg","md","sm","xs"],Fx="xs",Bx=n.createContext({prefixes:{},breakpoints:Dx,minBreakpoint:Fx}),{Consumer:$x,Provider:Ux}=Bx;function Hx(e,t){const{prefixes:r}=(0,n.useContext)(Bx);return e||r[t]||t}function Wx(){const{breakpoints:e}=(0,n.useContext)(Bx);return e}function Qx(){const{minBreakpoint:e}=(0,n.useContext)(Bx);return e}const Vx=n.forwardRef(((e,t)=>{let{bsPrefix:r,className:n,as:s="div",...a}=e;const o=Hx(r,"row"),i=Wx(),l=Qx(),c=`${o}-cols`,d=[];return i.forEach((e=>{const t=a[e];let r;delete a[e],null!=t&&"object"===typeof t?({cols:r}=t):r=t;const n=e!==l?`-${e}`:"";null!=r&&d.push(`${c}${n}-${r}`)})),(0,as.jsx)(s,{ref:t,...a,className:Rx()(n,o,...d)})}));Vx.displayName="Row";const Gx=Vx;const Kx=n.forwardRef(((e,t)=>{const[{className:r,...n},{as:s="div",bsPrefix:a,spans:o}]=function(e){let{as:t,bsPrefix:r,className:n,...s}=e;r=Hx(r,"col");const a=Wx(),o=Qx(),i=[],l=[];return a.forEach((e=>{const t=s[e];let n,a,c;delete s[e],"object"===typeof t&&null!=t?({span:n,offset:a,order:c}=t):n=t;const d=e!==o?`-${e}`:"";n&&i.push(!0===n?`${r}${d}`:`${r}${d}-${n}`),null!=c&&l.push(`order${d}-${c}`),null!=a&&l.push(`offset${d}-${a}`)})),[{...s,className:Rx()(n,...i,...l)},{as:t,bsPrefix:r,spans:i}]}(e);return(0,as.jsx)(s,{...n,ref:t,className:Rx()(r,!o.length&&a)})}));Kx.displayName="Col";const Yx=Kx,Zx=n.forwardRef(((e,t)=>{let{className:r,bsPrefix:n,as:s="div",...a}=e;return n=Hx(n,"card-body"),(0,as.jsx)(s,{ref:t,className:Rx()(r,n),...a})}));Zx.displayName="CardBody";const Jx=Zx,Xx=n.forwardRef(((e,t)=>{let{className:r,bsPrefix:n,as:s="div",...a}=e;return n=Hx(n,"card-footer"),(0,as.jsx)(s,{ref:t,className:Rx()(r,n),...a})}));Xx.displayName="CardFooter";const eb=Xx,tb=n.createContext(null);tb.displayName="CardHeaderContext";const rb=tb,nb=n.forwardRef(((e,t)=>{let{bsPrefix:r,className:s,as:a="div",...o}=e;const i=Hx(r,"card-header"),l=(0,n.useMemo)((()=>({cardHeaderBsPrefix:i})),[i]);return(0,as.jsx)(rb.Provider,{value:l,children:(0,as.jsx)(a,{ref:t,...o,className:Rx()(s,i)})})}));nb.displayName="CardHeader";const sb=nb,ab=n.forwardRef(((e,t)=>{let{bsPrefix:r,className:n,variant:s,as:a="img",...o}=e;const i=Hx(r,"card-img");return(0,as.jsx)(a,{ref:t,className:Rx()(s?`${i}-${s}`:i,n),...o})}));ab.displayName="CardImg";const ob=ab,ib=n.forwardRef(((e,t)=>{let{className:r,bsPrefix:n,as:s="div",...a}=e;return n=Hx(n,"card-img-overlay"),(0,as.jsx)(s,{ref:t,className:Rx()(r,n),...a})}));ib.displayName="CardImgOverlay";const lb=ib,cb=n.forwardRef(((e,t)=>{let{className:r,bsPrefix:n,as:s="a",...a}=e;return n=Hx(n,"card-link"),(0,as.jsx)(s,{ref:t,className:Rx()(r,n),...a})}));cb.displayName="CardLink";const db=cb,ub=e=>n.forwardRef(((t,r)=>(0,as.jsx)("div",{...t,ref:r,className:Rx()(t.className,e)}))),hb=ub("h6"),mb=n.forwardRef(((e,t)=>{let{className:r,bsPrefix:n,as:s=hb,...a}=e;return n=Hx(n,"card-subtitle"),(0,as.jsx)(s,{ref:t,className:Rx()(r,n),...a})}));mb.displayName="CardSubtitle";const fb=mb,pb=n.forwardRef(((e,t)=>{let{className:r,bsPrefix:n,as:s="p",...a}=e;return n=Hx(n,"card-text"),(0,as.jsx)(s,{ref:t,className:Rx()(r,n),...a})}));pb.displayName="CardText";const gb=pb,xb=ub("h5"),bb=n.forwardRef(((e,t)=>{let{className:r,bsPrefix:n,as:s=xb,...a}=e;return n=Hx(n,"card-title"),(0,as.jsx)(s,{ref:t,className:Rx()(r,n),...a})}));bb.displayName="CardTitle";const yb=bb,vb=n.forwardRef(((e,t)=>{let{bsPrefix:r,className:n,bg:s,text:a,border:o,body:i=!1,children:l,as:c="div",...d}=e;const u=Hx(r,"card");return(0,as.jsx)(c,{ref:t,...d,className:Rx()(n,u,s&&`bg-${s}`,a&&`text-${a}`,o&&`border-${o}`),children:i?(0,as.jsx)(Jx,{children:l}):l})}));vb.displayName="Card";const wb=Object.assign(vb,{Img:ob,Title:yb,Subtitle:fb,Body:Jx,Link:db,Text:gb,Header:sb,Footer:eb,ImgOverlay:lb}),jb=n.forwardRef(((e,t)=>{let{bsPrefix:r,bg:n="primary",pill:s=!1,text:a,className:o,as:i="span",...l}=e;const c=Hx(r,"badge");return(0,as.jsx)(i,{ref:t,...l,className:Rx()(o,c,s&&"rounded-pill",a&&`text-${a}`,n&&`bg-${n}`)})}));jb.displayName="Badge";const Nb=jb,kb=e=>{let{quizId:t,classroomId:r}=e;const s=X(),{currentUser:a}=is(),[o,i]=(0,n.useState)(!1),[l,c]=(0,n.useState)(null),[d,u]=(0,n.useState)(!0);(0,n.useEffect)((()=>{(async()=>{if(a&&t)try{u(!0);const e=(await _c.getQuizAttemptsByStudent(a.id)).filter((e=>e.quizId===parseInt(t)&&!e.completed));e.length>0&&c(e[0])}catch(e){console.error("Error checking existing attempts:",e)}finally{u(!1)}})()}),[t,a]);return d?(0,as.jsx)("button",{disabled:!0,className:"px-4 py-2 rounded-lg font-semibold text-white bg-gray-400 cursor-not-allowed",children:"Checking..."}):(0,as.jsx)("button",{onClick:async()=>{if(!a)return st.error("Please log in to take the quiz"),void s("/login");i(!0);try{if(l)return void s(`/student/quizzes/${t}/attempt/${l.id}`);const e=await _c.startQuizAttempt(t,a.id);s(`/student/quizzes/${t}/attempt/${e.id}`)}catch(u){var e,r,n,o,c,d;"This quiz cannot be attempted more than once"===(null===(e=u.response)||void 0===e||null===(r=e.data)||void 0===r?void 0:r.message)?st.error("You have already completed this quiz and it cannot be retaken"):"Quiz is not yet available"===(null===(n=u.response)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.message)?st.error("This quiz is not yet available"):"Quiz is no longer available"===(null===(c=u.response)||void 0===c||null===(d=c.data)||void 0===d?void 0:d.message)?st.error("This quiz is no longer available"):st.error("Failed to start quiz. Please try again later."),console.error("Error starting quiz:",u)}finally{i(!1)}},disabled:o,className:"px-4 py-2 rounded-lg font-semibold text-white transition-colors\n        "+(o?"bg-gray-400 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600"),children:o?"Starting...":l?"Continue Quiz":"Start Quiz"})},Sb=e=>{let{classroomId:t,selectedQuizId:r}=e;const[s,a]=(0,n.useState)([]),[o,i]=(0,n.useState)(!0);(0,n.useEffect)((()=>{l()}),[t]);const l=async()=>{try{i(!0);const e=await _c.getAvailableQuizzes(t);a(e),r&&e.every((e=>e.id!==parseInt(r)))&&console.warn(`Quiz with ID ${r} not found in available quizzes`)}catch(e){console.error("Error loading quizzes:",e)}finally{i(!1)}};if(o)return(0,as.jsx)("div",{children:"Loading quizzes..."});const c=r?s.filter((e=>e.id===parseInt(r))):s;return r&&0===c.length?(0,as.jsx)("div",{children:"Quiz not found or not available."}):(0,as.jsx)(Gx,{className:"g-4",children:c.map((e=>(0,as.jsx)(Yx,{xs:12,md:6,lg:4,children:(0,as.jsx)(wb,{className:"h-100 shadow-sm",children:(0,as.jsxs)(wb.Body,{children:[(0,as.jsx)(wb.Title,{children:e.quizName}),(0,as.jsx)(wb.Text,{children:e.description}),(0,as.jsxs)("div",{className:"mb-3",children:[(0,as.jsxs)(Nb,{bg:"primary",className:"me-2",children:[e.totalItems," items"]}),(0,as.jsxs)(Nb,{bg:"info",className:"me-2",children:[e.timeLimitMinutes," minutes"]}),e.repeatable&&(0,as.jsx)(Nb,{bg:"success",children:"Repeatable"})]}),(0,as.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,as.jsxs)("small",{className:"text-muted",children:["Passing Score: ",e.passingScore]}),(0,as.jsx)(kb,{quizId:e.id,classroomId:t})]})]})})},e.id)))})},Cb=n.forwardRef(((e,t)=>{let{bsPrefix:r,fluid:n=!1,as:s="div",className:a,...o}=e;const i=Hx(r,"container"),l="string"===typeof n?`-${n}`:"-fluid";return(0,as.jsx)(s,{ref:t,...o,className:Rx()(a,n?`${i}${l}`:i)})}));Cb.displayName="Container";const _b=Cb,Eb=()=>{const{classroomId:e,quizId:t,attemptId:r}=te(),s=X();return(0,n.useEffect)((()=>{r&&s(`/student/quizzes/${t}/attempt/${r}`)}),[r,t,s]),(0,as.jsx)(_b,{fluid:!0,className:"py-4",children:(0,as.jsx)(Gx,{children:(0,as.jsx)(Yx,{children:t?(0,as.jsx)(Sb,{classroomId:e,selectedQuizId:t}):(0,as.jsx)(Sb,{classroomId:e})})})})};function Ab(){return Ab=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ab.apply(null,arguments)}function Ob(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}r(2740);function Tb(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function zb(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function Pb(e,t){return Object.keys(t).reduce((function(r,s){var a,o=r,i=o[Tb(s)],l=o[s],c=Ob(o,[Tb(s),s].map(zb)),d=t[s],u=function(e,t,r){var s=(0,n.useRef)(void 0!==e),a=(0,n.useState)(t),o=a[0],i=a[1],l=void 0!==e,c=s.current;return s.current=l,!l&&c&&o!==t&&i(t),[l?e:o,(0,n.useCallback)((function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];r&&r.apply(void 0,[e].concat(n)),i(e)}),[r])]}(l,i,e[d]),h=u[0],m=u[1];return Ab({},c,((a={})[s]=h,a[d]=m,a))}),e)}function Ib(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function Lb(e){this.setState(function(t){var r=this.constructor.getDerivedStateFromProps(e,t);return null!==r&&void 0!==r?r:null}.bind(this))}function Mb(e,t){try{var r=this.props,n=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(r,n)}finally{this.props=r,this.state=n}}Ib.__suppressDeprecationWarning=!0,Lb.__suppressDeprecationWarning=!0,Mb.__suppressDeprecationWarning=!0;const qb=function(e){const t=(0,n.useRef)(e);return(0,n.useEffect)((()=>{t.current=e}),[e]),t};const Rb=ub("h4");Rb.displayName="DivStyledAsH4";const Db=n.forwardRef(((e,t)=>{let{className:r,bsPrefix:n,as:s=Rb,...a}=e;return n=Hx(n,"alert-heading"),(0,as.jsx)(s,{ref:t,className:Rx()(r,n),...a})}));Db.displayName="AlertHeading";const Fb=Db;const Bb=function(e){const t=(0,n.useRef)(e);return(0,n.useEffect)((()=>{t.current=e}),[e]),t};"undefined"!==typeof r.g&&r.g.navigator&&r.g.navigator.product,new WeakMap;const $b=["as","disabled"];function Ub(e){let{tagName:t,disabled:r,href:n,target:s,rel:a,role:o,onClick:i,tabIndex:l=0,type:c}=e;t||(t=null!=n||null!=s||null!=a?"a":"button");const d={tagName:t};if("button"===t)return[{type:c||"button",disabled:r},d];const u=e=>{(r||"a"===t&&function(e){return!e||"#"===e.trim()}(n))&&e.preventDefault(),r?e.stopPropagation():null==i||i(e)};return"a"===t&&(n||(n="#"),r&&(n=void 0)),[{role:null!=o?o:"button",disabled:void 0,tabIndex:r?void 0:l,href:n,target:"a"===t?s:void 0,"aria-disabled":r||void 0,rel:"a"===t?a:void 0,onClick:u,onKeyDown:e=>{" "===e.key&&(e.preventDefault(),u(e))}},d]}const Hb=n.forwardRef(((e,t)=>{let{as:r,disabled:n}=e,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,$b);const[a,{tagName:o}]=Ub(Object.assign({tagName:r,disabled:n},s));return(0,as.jsx)(o,Object.assign({},s,a,{ref:t}))}));Hb.displayName="Button";const Wb=["onKeyDown"];const Qb=n.forwardRef(((e,t)=>{let{onKeyDown:r}=e,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,Wb);const[a]=Ub(Object.assign({tagName:"a"},s)),o=function(e){const t=Bb(e);return(0,n.useCallback)((function(){return t.current&&t.current(...arguments)}),[t])}((e=>{a.onKeyDown(e),null==r||r(e)}));return(i=s.href)&&"#"!==i.trim()&&"button"!==s.role?(0,as.jsx)("a",Object.assign({ref:t},s,{onKeyDown:r})):(0,as.jsx)("a",Object.assign({ref:t},s,a,{onKeyDown:o}));var i}));Qb.displayName="Anchor";const Vb=Qb,Gb=n.forwardRef(((e,t)=>{let{className:r,bsPrefix:n,as:s=Vb,...a}=e;return n=Hx(n,"alert-link"),(0,as.jsx)(s,{ref:t,className:Rx()(r,n),...a})}));Gb.displayName="AlertLink";const Kb=Gb;function Yb(e,t){return Yb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Yb(e,t)}const Zb=!1,Jb=n.createContext(null);var Xb="unmounted",ey="exited",ty="entering",ry="entered",ny="exiting",sy=function(e){function t(t,r){var n;n=e.call(this,t,r)||this;var s,a=r&&!r.isMounting?t.enter:t.appear;return n.appearStatus=null,t.in?a?(s=ey,n.appearStatus=ty):s=ry:s=t.unmountOnExit||t.mountOnEnter?Xb:ey,n.state={status:s},n.nextCallback=null,n}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Yb(e,t)}(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===Xb?{status:ey}:null};var r=t.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(e){var t=null;if(e!==this.props){var r=this.state.status;this.props.in?r!==ty&&r!==ry&&(t=ty):r!==ty&&r!==ry||(t=ny)}this.updateStatus(!1,t)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var e,t,r,n=this.props.timeout;return e=t=r=n,null!=n&&"number"!==typeof n&&(e=n.exit,t=n.enter,r=void 0!==n.appear?n.appear:t),{exit:e,enter:t,appear:r}},r.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===ty){if(this.props.unmountOnExit||this.props.mountOnEnter){var r=this.props.nodeRef?this.props.nodeRef.current:je.findDOMNode(this);r&&function(e){e.scrollTop}(r)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===ey&&this.setState({status:Xb})},r.performEnter=function(e){var t=this,r=this.props.enter,n=this.context?this.context.isMounting:e,s=this.props.nodeRef?[n]:[je.findDOMNode(this),n],a=s[0],o=s[1],i=this.getTimeouts(),l=n?i.appear:i.enter;!e&&!r||Zb?this.safeSetState({status:ry},(function(){t.props.onEntered(a)})):(this.props.onEnter(a,o),this.safeSetState({status:ty},(function(){t.props.onEntering(a,o),t.onTransitionEnd(l,(function(){t.safeSetState({status:ry},(function(){t.props.onEntered(a,o)}))}))})))},r.performExit=function(){var e=this,t=this.props.exit,r=this.getTimeouts(),n=this.props.nodeRef?void 0:je.findDOMNode(this);t&&!Zb?(this.props.onExit(n),this.safeSetState({status:ny},(function(){e.props.onExiting(n),e.onTransitionEnd(r.exit,(function(){e.safeSetState({status:ey},(function(){e.props.onExited(n)}))}))}))):this.safeSetState({status:ey},(function(){e.props.onExited(n)}))},r.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},r.setNextCallback=function(e){var t=this,r=!0;return this.nextCallback=function(n){r&&(r=!1,t.nextCallback=null,e(n))},this.nextCallback.cancel=function(){r=!1},this.nextCallback},r.onTransitionEnd=function(e,t){this.setNextCallback(t);var r=this.props.nodeRef?this.props.nodeRef.current:je.findDOMNode(this),n=null==e&&!this.props.addEndListener;if(r&&!n){if(this.props.addEndListener){var s=this.props.nodeRef?[this.nextCallback]:[r,this.nextCallback],a=s[0],o=s[1];this.props.addEndListener(a,o)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},r.render=function(){var e=this.state.status;if(e===Xb)return null;var t=this.props,r=t.children,s=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,Ob(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return n.createElement(Jb.Provider,{value:null},"function"===typeof r?r(e,s):n.cloneElement(n.Children.only(r),s))},t}(n.Component);function ay(){}sy.contextType=Jb,sy.propTypes={},sy.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:ay,onEntering:ay,onEntered:ay,onExit:ay,onExiting:ay,onExited:ay},sy.UNMOUNTED=Xb,sy.EXITED=ey,sy.ENTERING=ty,sy.ENTERED=ry,sy.EXITING=ny;const oy=sy;function iy(e){if(!e||"function"===typeof e)return null;const{major:t}=function(){const e=n.version.split(".");return{major:+e[0],minor:+e[1],patch:+e[2]}}();return t>=19?e.props.ref:e.ref}function ly(e){var t=function(e){return e&&e.ownerDocument||document}(e);return t&&t.defaultView||window}var cy=/([A-Z])/g;var dy=/^ms-/;function uy(e){return function(e){return e.replace(cy,"-$1").toLowerCase()}(e).replace(dy,"-ms-")}var hy=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;const my=function(e,t){var r="",n="";if("string"===typeof t)return e.style.getPropertyValue(uy(t))||function(e,t){return ly(e).getComputedStyle(e,t)}(e).getPropertyValue(uy(t));Object.keys(t).forEach((function(s){var a=t[s];a||0===a?!function(e){return!(!e||!hy.test(e))}(s)?r+=uy(s)+": "+a+";":n+=s+"("+a+") ":e.style.removeProperty(uy(s))})),n&&(r+="transform: "+n+";"),e.style.cssText+=";"+r},fy=!("undefined"===typeof window||!window.document||!window.document.createElement);var py=!1,gy=!1;try{var xy={get passive(){return py=!0},get once(){return gy=py=!0}};fy&&(window.addEventListener("test",xy,xy),window.removeEventListener("test",xy,!0))}catch(Ie){}const by=function(e,t,r,n){if(n&&"boolean"!==typeof n&&!gy){var s=n.once,a=n.capture,o=r;!gy&&s&&(o=r.__once||function e(n){this.removeEventListener(t,e,a),r.call(this,n)},r.__once=o),e.addEventListener(t,o,py?n:a)}e.addEventListener(t,r,n)};const yy=function(e,t,r,n){var s=n&&"boolean"!==typeof n?n.capture:n;e.removeEventListener(t,r,s),r.__once&&e.removeEventListener(t,r.__once,s)};const vy=function(e,t,r,n){return by(e,t,r,n),function(){yy(e,t,r,n)}};function wy(e,t,r){void 0===r&&(r=5);var n=!1,s=setTimeout((function(){n||function(e,t,r,n){if(void 0===r&&(r=!1),void 0===n&&(n=!0),e){var s=document.createEvent("HTMLEvents");s.initEvent(t,r,n),e.dispatchEvent(s)}}(e,"transitionend",!0)}),t+r),a=vy(e,"transitionend",(function(){n=!0}),{once:!0});return function(){clearTimeout(s),a()}}function jy(e,t,r,n){null==r&&(r=function(e){var t=my(e,"transitionDuration")||"",r=-1===t.indexOf("ms")?1e3:1;return parseFloat(t)*r}(e)||0);var s=wy(e,r,n),a=vy(e,"transitionend",t);return function(){s(),a()}}function Ny(e,t){const r=my(e,t)||"",n=-1===r.indexOf("ms")?1e3:1;return parseFloat(r)*n}function ky(e,t){const r=Ny(e,"transitionDuration"),n=Ny(e,"transitionDelay"),s=jy(e,(r=>{r.target===e&&(s(),t(r))}),r+n)}const Sy=e=>e&&"function"!==typeof e?t=>{e.current=t}:e;const Cy=function(e,t){return(0,n.useMemo)((()=>function(e,t){const r=Sy(e),n=Sy(t);return e=>{r&&r(e),n&&n(e)}}(e,t)),[e,t])};const _y=n.forwardRef(((e,t)=>{let{onEnter:r,onEntering:s,onEntered:a,onExit:o,onExiting:i,onExited:l,addEndListener:c,children:d,childRef:u,...h}=e;const m=(0,n.useRef)(null),f=Cy(m,u),p=e=>{var t;f((t=e)&&"setState"in t?je.findDOMNode(t):null!=t?t:null)},g=e=>t=>{e&&m.current&&e(m.current,t)},x=(0,n.useCallback)(g(r),[r]),b=(0,n.useCallback)(g(s),[s]),y=(0,n.useCallback)(g(a),[a]),v=(0,n.useCallback)(g(o),[o]),w=(0,n.useCallback)(g(i),[i]),j=(0,n.useCallback)(g(l),[l]),N=(0,n.useCallback)(g(c),[c]);return(0,as.jsx)(oy,{ref:t,...h,onEnter:x,onEntered:y,onEntering:b,onExit:v,onExited:j,onExiting:w,addEndListener:N,nodeRef:m,children:"function"===typeof d?(e,t)=>d(e,{...t,ref:p}):n.cloneElement(d,{ref:p})})}));_y.displayName="TransitionWrapper";const Ey=_y,Ay={[ty]:"show",[ry]:"show"},Oy=n.forwardRef(((e,t)=>{let{className:r,children:s,transitionClasses:a={},onEnter:o,...i}=e;const l={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...i},c=(0,n.useCallback)(((e,t)=>{!function(e){e.offsetHeight}(e),null==o||o(e,t)}),[o]);return(0,as.jsx)(Ey,{ref:t,addEndListener:ky,...l,onEnter:c,childRef:iy(s),children:(e,t)=>n.cloneElement(s,{...t,className:Rx()("fade",r,s.props.className,Ay[e],a[e])})})}));Oy.displayName="Fade";const Ty=Oy;var zy=r(5173),Py=r.n(zy);const Iy={"aria-label":Py().string,onClick:Py().func,variant:Py().oneOf(["white"])},Ly=n.forwardRef(((e,t)=>{let{className:r,variant:n,"aria-label":s="Close",...a}=e;return(0,as.jsx)("button",{ref:t,type:"button",className:Rx()("btn-close",n&&`btn-close-${n}`,r),"aria-label":s,...a})}));Ly.displayName="CloseButton",Ly.propTypes=Iy;const My=Ly,qy=n.forwardRef(((e,t)=>{const{bsPrefix:r,show:s=!0,closeLabel:a="Close alert",closeVariant:o,className:i,children:l,variant:c="primary",onClose:d,dismissible:u,transition:h=Ty,...m}=Pb(e,{show:"onClose"}),f=Hx(r,"alert"),p=function(e){const t=qb(e);return(0,n.useCallback)((function(){return t.current&&t.current(...arguments)}),[t])}((e=>{d&&d(!1,e)})),g=!0===h?Ty:h,x=(0,as.jsxs)("div",{role:"alert",...g?void 0:m,ref:t,className:Rx()(i,f,c&&`${f}-${c}`,u&&`${f}-dismissible`),children:[u&&(0,as.jsx)(My,{onClick:p,"aria-label":a,variant:o}),l]});return g?(0,as.jsx)(g,{unmountOnExit:!0,...m,ref:void 0,in:s,children:x}):s?x:null}));qy.displayName="Alert";const Ry=Object.assign(qy,{Link:Kb,Heading:Fb}),Dy={type:Py().string,tooltip:Py().bool,as:Py().elementType},Fy=n.forwardRef(((e,t)=>{let{as:r="div",className:n,type:s="valid",tooltip:a=!1,...o}=e;return(0,as.jsx)(r,{...o,ref:t,className:Rx()(n,`${s}-${a?"tooltip":"feedback"}`)})}));Fy.displayName="Feedback",Fy.propTypes=Dy;const By=Fy,$y=n.createContext({}),Uy=n.forwardRef(((e,t)=>{let{id:r,bsPrefix:s,className:a,type:o="checkbox",isValid:i=!1,isInvalid:l=!1,as:c="input",...d}=e;const{controlId:u}=(0,n.useContext)($y);return s=Hx(s,"form-check-input"),(0,as.jsx)(c,{...d,ref:t,type:o,id:r||u,className:Rx()(a,s,i&&"is-valid",l&&"is-invalid")})}));Uy.displayName="FormCheckInput";const Hy=Uy,Wy=n.forwardRef(((e,t)=>{let{bsPrefix:r,className:s,htmlFor:a,...o}=e;const{controlId:i}=(0,n.useContext)($y);return r=Hx(r,"form-check-label"),(0,as.jsx)("label",{...o,ref:t,htmlFor:a||i,className:Rx()(s,r)})}));Wy.displayName="FormCheckLabel";const Qy=Wy;const Vy=n.forwardRef(((e,t)=>{let{id:r,bsPrefix:s,bsSwitchPrefix:a,inline:o=!1,reverse:i=!1,disabled:l=!1,isValid:c=!1,isInvalid:d=!1,feedbackTooltip:u=!1,feedback:h,feedbackType:m,className:f,style:p,title:g="",type:x="checkbox",label:b,children:y,as:v="input",...w}=e;s=Hx(s,"form-check"),a=Hx(a,"form-switch");const{controlId:j}=(0,n.useContext)($y),N=(0,n.useMemo)((()=>({controlId:r||j})),[j,r]),k=!y&&null!=b&&!1!==b||function(e,t){return n.Children.toArray(e).some((e=>n.isValidElement(e)&&e.type===t))}(y,Qy),S=(0,as.jsx)(Hy,{...w,type:"switch"===x?"checkbox":x,ref:t,isValid:c,isInvalid:d,disabled:l,as:v});return(0,as.jsx)($y.Provider,{value:N,children:(0,as.jsx)("div",{style:p,className:Rx()(f,k&&s,o&&`${s}-inline`,i&&`${s}-reverse`,"switch"===x&&a),children:y||(0,as.jsxs)(as.Fragment,{children:[S,k&&(0,as.jsx)(Qy,{title:g,children:b}),h&&(0,as.jsx)(By,{type:m,tooltip:u,children:h})]})})})}));Vy.displayName="FormCheck";const Gy=Object.assign(Vy,{Input:Hy,Label:Qy});r(6440);const Ky=n.forwardRef(((e,t)=>{let{bsPrefix:r,type:s,size:a,htmlSize:o,id:i,className:l,isValid:c=!1,isInvalid:d=!1,plaintext:u,readOnly:h,as:m="input",...f}=e;const{controlId:p}=(0,n.useContext)($y);return r=Hx(r,"form-control"),(0,as.jsx)(m,{...f,type:s,size:o,ref:t,readOnly:h,id:i||p,className:Rx()(l,u?`${r}-plaintext`:r,a&&`${r}-${a}`,"color"===s&&`${r}-color`,c&&"is-valid",d&&"is-invalid")})}));Ky.displayName="FormControl";const Yy=Object.assign(Ky,{Feedback:By}),Zy=n.forwardRef(((e,t)=>{let{className:r,bsPrefix:n,as:s="div",...a}=e;return n=Hx(n,"form-floating"),(0,as.jsx)(s,{ref:t,className:Rx()(r,n),...a})}));Zy.displayName="FormFloating";const Jy=Zy,Xy=n.forwardRef(((e,t)=>{let{controlId:r,as:s="div",...a}=e;const o=(0,n.useMemo)((()=>({controlId:r})),[r]);return(0,as.jsx)($y.Provider,{value:o,children:(0,as.jsx)(s,{...a,ref:t})})}));Xy.displayName="FormGroup";const ev=Xy,tv=n.forwardRef(((e,t)=>{let{as:r="label",bsPrefix:s,column:a=!1,visuallyHidden:o=!1,className:i,htmlFor:l,...c}=e;const{controlId:d}=(0,n.useContext)($y);s=Hx(s,"form-label");let u="col-form-label";"string"===typeof a&&(u=`${u} ${u}-${a}`);const h=Rx()(i,s,o&&"visually-hidden",a&&u);return l=l||d,a?(0,as.jsx)(Yx,{ref:t,as:"label",className:h,htmlFor:l,...c}):(0,as.jsx)(r,{ref:t,className:h,htmlFor:l,...c})}));tv.displayName="FormLabel";const rv=tv,nv=n.forwardRef(((e,t)=>{let{bsPrefix:r,className:s,id:a,...o}=e;const{controlId:i}=(0,n.useContext)($y);return r=Hx(r,"form-range"),(0,as.jsx)("input",{...o,type:"range",ref:t,className:Rx()(s,r),id:a||i})}));nv.displayName="FormRange";const sv=nv,av=n.forwardRef(((e,t)=>{let{bsPrefix:r,size:s,htmlSize:a,className:o,isValid:i=!1,isInvalid:l=!1,id:c,...d}=e;const{controlId:u}=(0,n.useContext)($y);return r=Hx(r,"form-select"),(0,as.jsx)("select",{...d,size:a,ref:t,className:Rx()(o,r,s&&`${r}-${s}`,i&&"is-valid",l&&"is-invalid"),id:c||u})}));av.displayName="FormSelect";const ov=av,iv=n.forwardRef(((e,t)=>{let{bsPrefix:r,className:n,as:s="small",muted:a,...o}=e;return r=Hx(r,"form-text"),(0,as.jsx)(s,{...o,ref:t,className:Rx()(n,r,a&&"text-muted")})}));iv.displayName="FormText";const lv=iv,cv=n.forwardRef(((e,t)=>(0,as.jsx)(Gy,{...e,ref:t,type:"switch"})));cv.displayName="Switch";const dv=Object.assign(cv,{Input:Gy.Input,Label:Gy.Label}),uv=n.forwardRef(((e,t)=>{let{bsPrefix:r,className:n,children:s,controlId:a,label:o,...i}=e;return r=Hx(r,"form-floating"),(0,as.jsxs)(ev,{ref:t,className:Rx()(n,r),controlId:a,...i,children:[s,(0,as.jsx)("label",{htmlFor:a,children:o})]})}));uv.displayName="FloatingLabel";const hv=uv,mv={_ref:Py().any,validated:Py().bool,as:Py().elementType},fv=n.forwardRef(((e,t)=>{let{className:r,validated:n,as:s="form",...a}=e;return(0,as.jsx)(s,{...a,ref:t,className:Rx()(r,n&&"was-validated")})}));fv.displayName="Form",fv.propTypes=mv;const pv=Object.assign(fv,{Group:ev,Control:Yy,Floating:Jy,Check:Gy,Switch:dv,Label:rv,Text:lv,Range:sv,Select:ov,FloatingLabel:hv}),gv=n.forwardRef(((e,t)=>{let{as:r,bsPrefix:n,variant:s="primary",size:a,active:o=!1,disabled:i=!1,className:l,...c}=e;const d=Hx(n,"btn"),[u,{tagName:h}]=Ub({tagName:r,disabled:i,...c}),m=h;return(0,as.jsx)(m,{...u,...c,ref:t,disabled:i,className:Rx()(l,d,o&&"active",s&&`${d}-${s}`,a&&`${d}-${a}`,c.href&&i&&"disabled")})}));gv.displayName="Button";const xv=gv,bv=n.forwardRef(((e,t)=>{let{bsPrefix:r,className:n,striped:s,bordered:a,borderless:o,hover:i,size:l,variant:c,responsive:d,...u}=e;const h=Hx(r,"table"),m=Rx()(n,h,c&&`${h}-${c}`,l&&`${h}-${l}`,s&&`${h}-${"string"===typeof s?`striped-${s}`:"striped"}`,a&&`${h}-bordered`,o&&`${h}-borderless`,i&&`${h}-hover`),f=(0,as.jsx)("table",{...u,className:m,ref:t});if(d){let e=`${h}-responsive`;return"string"===typeof d&&(e=`${e}-${d}`),(0,as.jsx)("div",{className:e,children:f})}return f}));bv.displayName="Table";const yv=bv,vv=e=>{let{classroomId:t,teacherId:r}=e;const[s,a]=(0,n.useState)([]),[o,i]=(0,n.useState)(!0),[l,c]=(0,n.useState)(null),[d,u]=(0,n.useState)({reportName:"",reportDescription:"",reportType:"quiz-performance"});(0,n.useEffect)((()=>{h()}),[t]);const h=async()=>{try{const e=await nd(t);a(e)}catch(l){c("Failed to load reports")}finally{i(!1)}},m=e=>{const{name:t,value:r}=e.target;u((e=>({...e,[t]:r})))};return(0,as.jsxs)("div",{className:"report-generator",children:[(0,as.jsxs)(wb,{className:"mb-4",children:[(0,as.jsx)(wb.Header,{children:"Generate New Report"}),(0,as.jsxs)(wb.Body,{children:[l&&(0,as.jsx)(Ry,{variant:"danger",children:l}),(0,as.jsxs)(pv,{onSubmit:async e=>{e.preventDefault(),i(!0),c(null);try{const{reportName:e,reportDescription:n,reportType:s}=d;let o;o="quiz-performance"===s?await td(t,r,e,n):await rd(t,r,e,n),a((e=>[o,...e])),u({reportName:"",reportDescription:"",reportType:"quiz-performance"})}catch(l){c("Failed to generate report")}finally{i(!1)}},children:[(0,as.jsxs)(pv.Group,{className:"mb-3",children:[(0,as.jsx)(pv.Label,{children:"Report Name"}),(0,as.jsx)(pv.Control,{type:"text",name:"reportName",value:d.reportName,onChange:m,required:!0})]}),(0,as.jsxs)(pv.Group,{className:"mb-3",children:[(0,as.jsx)(pv.Label,{children:"Description"}),(0,as.jsx)(pv.Control,{as:"textarea",name:"reportDescription",value:d.reportDescription,onChange:m,rows:3})]}),(0,as.jsxs)(pv.Group,{className:"mb-3",children:[(0,as.jsx)(pv.Label,{children:"Report Type"}),(0,as.jsxs)(pv.Select,{name:"reportType",value:d.reportType,onChange:m,children:[(0,as.jsx)("option",{value:"quiz-performance",children:"Quiz Performance"}),(0,as.jsx)("option",{value:"class-record",children:"Class Record"})]})]}),(0,as.jsx)(xv,{type:"submit",variant:"primary",disabled:o,children:o?"Generating...":"Generate Report"})]})]})]}),(0,as.jsxs)(wb,{children:[(0,as.jsx)(wb.Header,{children:"Generated Reports"}),(0,as.jsx)(wb.Body,{children:(0,as.jsxs)(yv,{striped:!0,hover:!0,children:[(0,as.jsx)("thead",{children:(0,as.jsxs)("tr",{children:[(0,as.jsx)("th",{children:"Report Name"}),(0,as.jsx)("th",{children:"Description"}),(0,as.jsx)("th",{children:"Generated On"}),(0,as.jsx)("th",{children:"Actions"})]})}),(0,as.jsx)("tbody",{children:s.map((e=>(0,as.jsxs)("tr",{children:[(0,as.jsx)("td",{children:e.reportName}),(0,as.jsx)("td",{children:e.reportDescription}),(0,as.jsx)("td",{children:new Date(e.generatedAt).toLocaleDateString()}),(0,as.jsx)("td",{children:(0,as.jsx)(xv,{variant:"primary",size:"sm",onClick:()=>(async e=>{try{const t=s.find((t=>t.id===e)),r=await sd(e),n=new Blob([r],{type:`application/${t.fileType}`}),a=window.URL.createObjectURL(n),o=document.createElement("a");o.href=a,o.download=t.fileName,document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(a)}catch(l){c("Failed to download report")}})(e.id),children:"Download"})})]},e.id)))})]})})]})]})},wv=()=>{const{classroomId:e}=te(),t=localStorage.getItem("userId");return(0,as.jsx)(_b,{fluid:!0,className:"py-4",children:(0,as.jsx)(Gx,{children:(0,as.jsxs)(Yx,{children:[(0,as.jsx)("h2",{className:"mb-4",children:"Reports"}),(0,as.jsx)(vv,{classroomId:e,teacherId:t})]})})})},jv=e=>{let{question:t,onAnswer:r,selectedAnswer:n}=e;return(0,as.jsx)("div",{className:"space-y-3",children:t.options.map(((e,s)=>{let a=`w-full text-left p-4 rounded-lg transition-colors\n          ${n===e?"ring-2 ring-blue-500 bg-blue-100":"bg-gray-100 hover:bg-gray-200"} \n          text-black border border-gray-200`;return(0,as.jsx)("button",{onClick:()=>r(t.id,e),className:a,children:e},s)}))})},Nv=e=>{let{show:t,onHide:r,questions:n,answers:s,onSubmit:a}=e;return t?(0,as.jsx)(lc,{isOpen:t,onClose:r,title:"Review Your Answers",maxWidth:"max-w-4xl",footer:(0,as.jsxs)("div",{className:"flex justify-end gap-2 w-full",children:[(0,as.jsx)("button",{onClick:r,className:"px-4 py-2 bg-gray-300 hover:bg-gray-400 rounded text-gray-800",children:"Back to Quiz"}),(0,as.jsx)("button",{onClick:a,className:"px-4 py-2 bg-green-500 hover:bg-green-600 rounded text-white",children:"Submit Quiz"})]}),children:(0,as.jsx)("div",{className:"space-y-6",children:n.map(((e,t)=>{const r=e.id||`question_${t}`,n=s[r],a=void 0!==n&&(Array.isArray(n)?n.length>0:""!==n);return(0,as.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg",children:(0,as.jsxs)("div",{className:"flex items-start gap-3",children:[(0,as.jsxs)("span",{className:"font-semibold text-gray-700 min-w-[2rem]",children:[t+1,"."]}),(0,as.jsxs)("div",{className:"flex-grow",children:[(0,as.jsx)("p",{className:"text-gray-800 mb-2",children:e.questionText||e.question}),(0,as.jsxs)("div",{className:"mt-2",children:[(0,as.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Your Answer:"}),a?(0,as.jsx)("div",{className:"mt-1",children:Array.isArray(n)?(0,as.jsx)("ul",{className:"list-disc list-inside",children:n.map(((e,t)=>(0,as.jsx)("li",{className:"text-gray-700",children:e},t)))}):(0,as.jsx)("p",{className:"text-gray-700",children:n})}):(0,as.jsx)("p",{className:"text-red-500 italic",children:"Not answered"})]})]})]})},r)}))})}):null},kv=e=>{let{question:t,onAnswer:r,currentAnswer:s,questionId:a}=e;const[o,i]=(0,n.useState)("");(0,n.useEffect)((()=>{i(s||"")}),[a,s]);return(0,as.jsx)("div",{children:(0,as.jsx)("input",{type:"text",value:o,onChange:e=>{i(e.target.value),r(t.id,e.target.value,!1)},onKeyPress:e=>{"Enter"===e.key&&r(t.id,o,!0)},placeholder:"Type your answer here",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white shadow-sm"})})},Sv=e=>{let{question:t,onAnswer:r,selectedAnswers:n=[]}=e;return(0,as.jsx)("div",{className:"space-y-3",children:t.options.map(((e,s)=>{const a=n.includes(e);return(0,as.jsxs)("label",{className:"flex items-center p-4 rounded-lg cursor-pointer transition-colors border \n              "+(a?"bg-blue-100 border-blue-500 font-semibold":"bg-gray-50 border-gray-300 opacity-85 hover:opacity-100 hover:bg-gray-100"),children:[(0,as.jsx)("input",{type:"checkbox",checked:a,onChange:()=>(e=>{const s=n.includes(e)?n.filter((t=>t!==e)):[...n,e];r(t.id,s)})(e),className:"h-5 w-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500 mr-3"}),(0,as.jsx)("span",{className:""+(a?"text-blue-900":"text-gray-700"),children:e})]},s)}))})},Cv=e=>{let{show:t,onHide:r,result:n,onViewLeaderboard:s}=e;return n&&t?(0,as.jsx)(lc,{isOpen:t,onClose:r,title:"Quiz Results",maxWidth:"max-w-md",footer:(0,as.jsxs)("div",{className:"flex justify-end gap-2 w-full",children:[(0,as.jsx)(bs,{onClick:r,variant:"cancel",rounded:"full",children:"Return to Classroom"}),(0,as.jsxs)(bs,{onClick:s,variant:"default",rounded:"full",children:[(0,as.jsx)(qa,{className:"mr-2"})," View Leaderboard"]})]}),children:(0,as.jsxs)("div",{className:"text-center",children:[(0,as.jsxs)("div",{className:"mb-4",children:[(0,as.jsxs)("div",{className:"text-5xl font-bold text-blue-600 mb-2",children:[n.score||0,"%"]}),(0,as.jsx)("div",{className:"text-lg text-gray-700",children:n.passed?(0,as.jsx)("span",{className:"text-green-600 font-semibold",children:"Passed"}):(0,as.jsx)("span",{className:"text-red-600 font-semibold",children:"Try Again"})}),(0,as.jsxs)("div",{className:"mt-2 dark:text-gray-50 text-gray-600",children:["Points: ",(0,as.jsx)("span",{className:"font-semibold",children:n.pointsEarned||0})," / ",(0,as.jsx)("span",{children:n.totalPoints||0})]})]}),(0,as.jsx)("div",{className:"bg-gray-100 p-4 rounded-lg mb-4",children:(0,as.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-left",children:[(0,as.jsxs)("div",{children:[(0,as.jsx)("p",{className:"text-sm text-gray-500",children:"Quiz Name"}),(0,as.jsx)("p",{className:"font-medium",children:n.quizName})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)("p",{className:"text-sm text-gray-500",children:"Attempt"}),(0,as.jsx)("p",{className:"font-medium",children:n.attemptNumber})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)("p",{className:"text-sm text-gray-500",children:"Time Spent"}),(0,as.jsx)("p",{className:"font-medium",children:n.formattedTimeSpent||"N/A"})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)("p",{className:"text-sm text-gray-500",children:"Rank"}),(0,as.jsx)("p",{className:"font-medium",children:n.rank||"N/A"})]})]})})]})}):null},_v=e=>{let{show:t,onHide:r,questions:n,answers:s,onSubmit:a}=e;return t?(0,as.jsxs)(lc,{isOpen:t,onClose:r,title:"Confirm Submission",maxWidth:"max-w-4xl",footer:(0,as.jsxs)("div",{className:"flex justify-end gap-2 w-full",children:[(0,as.jsx)(bs,{onClick:r,variant:"cancel",rounded:"full",size:"sm",children:"Back to Quiz"}),(0,as.jsx)(bs,{onClick:a,variant:"default",rounded:"full",size:"sm",children:"Confirm Submission"})]}),children:[(0,as.jsx)("p",{className:"dark:text-gray-50 text-gray-700 mb-4",children:"Please review your answers before submitting:"}),(0,as.jsx)("div",{className:"space-y-4",children:n.map(((e,t)=>{const r=e.id||`question_${t}`,n=s[r],a=void 0!==n&&(Array.isArray(n)?n.length>0:""!==n);return(0,as.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg",children:(0,as.jsxs)("div",{className:"flex items-start gap-3",children:[(0,as.jsxs)("span",{className:"font-semibold text-gray-700 min-w-[2rem]",children:[t+1,"."]}),(0,as.jsxs)("div",{className:"flex-grow",children:[(0,as.jsx)("p",{className:"text-gray-800 mb-2",children:e.questionText||e.question}),(0,as.jsxs)("div",{className:"mt-2",children:[(0,as.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Your Answer:"}),a?(0,as.jsx)("div",{className:"mt-1",children:Array.isArray(n)?(0,as.jsx)("ul",{className:"list-disc list-inside",children:n.map(((e,t)=>(0,as.jsx)("li",{className:"text-gray-700",children:e},t)))}):(0,as.jsx)("p",{className:"text-gray-700",children:n})}):(0,as.jsx)("p",{className:"text-red-500 italic",children:"Not answered"})]})]})]})},r)}))})]}):null},Ev=()=>{var e,t;const{quizId:r,attemptId:s}=te(),a=Z(),o=X(),{currentUser:i}=is(),[l,c]=(0,n.useState)(null),[d,u]=(0,n.useState)(!0),[h,m]=(0,n.useState)(0),[f,p]=(0,n.useState)({}),[g,x]=(0,n.useState)(!1),[b,y]=(0,n.useState)(null),{onComplete:v}=a.state||{},[w,j]=(0,n.useState)(null),[N,k]=(0,n.useState)(null),[S,C]=(0,n.useState)(null),[_,E]=(0,n.useState)(!1),[A,O]=(0,n.useState)(!1),[T,z]=(0,n.useState)(null),[P,I]=(0,n.useState)(!1),[L,M]=(0,n.useState)(null),[q,R]=(0,n.useState)(!1),D=`quizAttempt-${s}`;(0,n.useEffect)((()=>{if(!d&&!g){const e={savedAnswers:f,savedIndex:h,savedTimeLeft:w,lastSaved:(new Date).toISOString()};localStorage.setItem(D,JSON.stringify(e)),R(!1)}}),[f,h,w,D,d,g]),(0,n.useEffect)((()=>{d||R(!0)}),[f,h]),(0,n.useEffect)((()=>{const e=e=>{if(!g)return g||A?void 0:(e.preventDefault(),e.returnValue="Your quiz progress will be saved automatically. Are you sure you want to leave?",e.returnValue)};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}}),[g,A]),(0,n.useEffect)((()=>{const e=e=>{if(g)return;const t=e.target.closest("a");if(t&&t.href&&"_blank"!==t.target){const r=new URL(t.href).pathname;r&&a.pathname!==r&&!r.startsWith("#")&&(e.preventDefault(),e.stopPropagation(),M(r),I(!0))}};return document.addEventListener("click",e,!0),()=>{document.removeEventListener("click",e,!0)}}),[a.pathname,g]);const F=()=>{M(null),I(!1)};(0,n.useEffect)((()=>{r&&s&&i?(async()=>{try{u(!0),k(null);const t=await _c.getQuiz(r),n=await _c.getQuizAttempt(s);if(!t||!n)throw new Error("Quiz or attempt data not found.");if(t.activityId)try{const e=(await Xn.get(`/activities/${t.activityId}`)).data;C(e.classroomId)}catch(e){console.error("Error fetching activity data:",e),st.error("Failed to load classroom information")}let a=t.quizContent;if("string"===typeof t.quizContent)try{a=JSON.parse(t.quizContent)}catch(Ie){throw console.error("Failed to parse quizContent:",Ie),new Error("Invalid quiz content format.")}if(!Array.isArray(a))throw console.error("Parsed quiz content is not an array:",a),new Error("Quiz content is not structured as an array of questions.");a=a.map(((e,t)=>e.id?e:{...e,id:`question_${t}`})),c({...t,questions:a});const o=localStorage.getItem(D);let i={},l=0,d=null;if(o)try{const e=JSON.parse(o);i=e.savedAnswers||{},l=e.savedIndex||0,d=e.savedTimeLeft,Object.keys(i).length>0&&st.success("Your previous progress has been restored!")}catch(N){console.error("Error parsing saved state:",N),localStorage.removeItem(D)}const h={...n.answers?JSON.parse(n.answers):{},...i};if(p(h),m(l),t.timeLimitMinutes&&t.timeLimitMinutes>0){const e=60*t.timeLimitMinutes;if(d&&d>0)j(d);else{const t=new Date(n.startedAt).getTime(),r=(new Date).getTime(),s=Math.floor((r-t)/1e3),a=Math.max(e-s,0);j(a)}}}catch(t){console.error("Error fetching quiz data:",t),k(t.message||"Failed to load quiz. Please try again."),st.error(t.message||"Failed to load quiz.")}finally{u(!1)}})():i||(o("/login"),st.error("Please log in to take the quiz."))}),[r,s,i,o,D]),(0,n.useEffect)((()=>{if(!w||w<=0)return;const e=setInterval((()=>{j((t=>{const r=t-1;return r<=0?(clearInterval(e),0):r}))}),1e3);return z(e),()=>{clearInterval(e)}}),[w]),(0,n.useEffect)((()=>{0!==w||g||A||O(!0)}),[w,g,A]);const B=(0,n.useCallback)((()=>{T&&(clearInterval(T),z(null))}),[T]),$=(0,n.useCallback)(((e,t)=>{const r=e||`question_${h}`;p((e=>({...e,[r]:t})))}),[h]),U=null===l||void 0===l||null===(e=l.questions)||void 0===e?void 0:e[h],H=()=>{h<l.questions.length-1&&m((e=>e+1))},W=(0,n.useCallback)((()=>{if(null===l||void 0===l||!l.questions||0===l.questions.length)return 0;l.questions.length;let e=0,t=0;return l.questions.forEach((r=>{const n=r.id||`question_${r.index}`,s=f[n];if(!s)return;const a=r.correctAnswer;if(!a)return;const o=r.points||1;e+=o;let i=!1;if("CHECKBOX"===r.questionType)Array.isArray(s)&&Array.isArray(a)&&(i=s.length===a.length&&a.every((e=>s.includes(e)))&&s.every((e=>a.includes(e))));else if("IDENTIFICATION"===r.questionType){i=(s||"").toLowerCase().trim()===(a||"").toLowerCase().trim()}else i=s===a;i&&(t+=o)})),t}),[null===l||void 0===l?void 0:l.questions,f]),Q=(0,n.useCallback)((async()=>{O(!0)}),[]),V=(0,n.useCallback)((async()=>{try{u(!0),B();const e=W(),t=l.questions.reduce(((e,t)=>e+(t.points||1)),0),r=t>0?Math.round(e/t*100):0,n=await _c.completeQuizAttempt(s,e,JSON.stringify(f)),a=await jc(l.id),o=(null===a||void 0===a?void 0:a.findIndex((e=>e.studentId===i.id)))+1;y({...n,score:r,pointsEarned:e,totalPoints:t,passed:e>=l.passingScore,rank:o||1}),x(!0),O(!1),R(!1),localStorage.removeItem(D),v&&v(r),st.success("Quiz submitted successfully!")}catch(N){var e,t;console.error("Error submitting quiz:",N);let n="Failed to submit quiz. Please try again.";null!==(e=N.response)&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.message?n=N.response.data.message:N.message&&(n=N.message),st.error(n)}finally{u(!1)}}),[B,W,l,s,f,i,v,D]);if((0,n.useEffect)((()=>{const e=e=>{var t;"Enter"===e.key&&(h===(null===l||void 0===l||null===(t=l.questions)||void 0===t?void 0:t.length)-1?Q():H())};return window.addEventListener("keypress",e),()=>{window.removeEventListener("keypress",e)}}),[h,null===l||void 0===l||null===(t=l.questions)||void 0===t?void 0:t.length,Q,H]),d)return(0,as.jsx)("div",{className:"flex justify-center items-center h-screen bg-blue-100",children:(0,as.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-blue-500"})});if(N)return(0,as.jsxs)("div",{className:"flex flex-col justify-center items-center h-screen bg-red-100 text-red-700 p-8",children:[(0,as.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Error"}),(0,as.jsx)("p",{className:"text-center mb-4",children:N}),(0,as.jsx)("button",{onClick:()=>o(-1),className:"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600",children:"Go Back"})]});if(!l||!U)return(0,as.jsxs)("div",{className:"flex flex-col justify-center items-center h-screen bg-gray-100 text-gray-700 p-8",children:[(0,as.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Quiz Not Found"}),(0,as.jsx)("p",{className:"text-center mb-4",children:"Could not load quiz details or questions."}),(0,as.jsx)("button",{onClick:()=>o(-1),className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Go Back"})]});const G=l.questions.length>0?(h+1)/l.questions.length*100:0;return(0,as.jsxs)("div",{className:"px-4 sm:px-6 ",children:[(0,as.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,as.jsx)("div",{className:"flex justify-end mb-4",children:(0,as.jsx)("button",{"aria-label":"Leave Quiz",onClick:e=>{e.preventDefault(),g?o(S?`/student/classrooms/${S}`:"/student/classrooms",{state:{activeTab:"lessons"}}):(M(S?`/student/classrooms/${S}`:"/student/classrooms"),I(!0))},className:"text-gray-500 hover:text-red-500 p-2 rounded-full bg-white shadow transition-colors",children:(0,as.jsx)(La,{size:20})})}),(0,as.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,as.jsxs)("div",{className:"lg:col-span-2",children:[(0,as.jsxs)("div",{className:"bg-white p-8 rounded-xl shadow-lg",children:[(0,as.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-4",children:l.quizName||"Quiz"}),(0,as.jsx)("div",{className:"mb-8",children:(0,as.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,as.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300 ease-in-out",style:{width:`${G}%`}})})}),(0,as.jsxs)("div",{children:[(0,as.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,as.jsxs)("h2",{className:"text-lg font-semibold text-gray-600 mb-2",children:["Question ",h+1,"/",l.questions.length]}),(0,as.jsxs)("span",{className:"text-sm font-bold text-white bg-blue-500 px-3 py-1 rounded-full",children:[U.points||1," ",1===(U.points||1)?"Point":"Points"]})]}),(0,as.jsx)("p",{className:"text-xl text-gray-800 mb-6 min-h-[60px]",children:U.questionText||U.question}),(()=>{if(!U)return(0,as.jsx)("p",{children:"No question to display."});switch(U.questionType){case"MULTIPLE_CHOICE":return(0,as.jsx)(jv,{question:U,onAnswer:$,selectedAnswer:f[U.id]});case"IDENTIFICATION":return(0,as.jsx)(kv,{question:U,onAnswer:$,currentAnswer:f[U.id],questionId:U.id});case"CHECKBOX":return(0,as.jsx)(Sv,{question:U,onAnswer:$,selectedAnswers:f[U.id]});default:return(0,as.jsxs)("p",{children:["Unsupported question type: ",U.questionType]})}})()]})]}),(0,as.jsxs)("div",{className:"mt-8 flex justify-between items-center",children:[(0,as.jsxs)("button",{onClick:()=>{h>0&&m((e=>e-1))},disabled:0===h,className:"flex items-center gap-2 px-6 py-3 border border-gray-300 dark:text-gray-50 text-gray-700 font-semibold rounded-lg shadow-sm hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[(0,as.jsx)(Gs,{}),"Previous"]}),h===l.questions.length-1?(0,as.jsx)("button",{onClick:Q,className:"px-6 py-3 bg-green-500 hover:bg-green-600 text-white font-bold rounded-lg shadow-md transition-transform hover:scale-105",children:"Submit Quiz"}):(0,as.jsxs)("button",{onClick:H,className:"flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-lg shadow-md transition-transform hover:scale-105",children:["Next",(0,as.jsx)(Ks,{})]})]}),null!==w&&(0,as.jsx)("div",{className:"flex justify-center items-center mt-6",children:(0,as.jsxs)("div",{className:"px-4 py-2 rounded-full text-white font-semibold shadow-lg "+(w<60?"bg-red-500 animate-pulse":w<300?"bg-yellow-500":"bg-blue-500"),children:["Time Left: ",Math.floor(w/60),":",("0"+w%60).slice(-2)]})})]}),(0,as.jsx)("div",{className:"lg:col-span-1",children:(0,as.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg sticky top-8",children:[(0,as.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Questions"}),(0,as.jsx)("div",{className:"space-y-2 max-h-[70vh] overflow-y-auto pr-2",children:l.questions.map(((e,t)=>{const r=h===t,n=void 0!==f[e.id]&&""!==f[e.id]&&(!Array.isArray(f[e.id])||f[e.id].length>0);return(0,as.jsxs)("button",{onClick:()=>m(t),className:"w-full flex items-center justify-between p-3 rounded-lg text-left transition-all duration-200 border-2 "+(r?"border-blue-500 bg-blue-50 font-semibold text-blue-800":"border-transparent text-gray-700 hover:bg-gray-100"),children:[(0,as.jsxs)("span",{className:"truncate",children:["Question ",t+1]}),n?(0,as.jsx)(Xs,{className:"text-green-500 flex-shrink-0"}):(0,as.jsx)(Ua,{className:"text-gray-400 flex-shrink-0"})]},e.id)}))})]})})]})]}),(0,as.jsx)(Cv,{show:g,onHide:()=>{x(!1),S?o(`/student/classrooms/${S}`,{state:{activeTab:"lessons"}}):o("/student/classrooms")},result:b,onViewLeaderboard:()=>{S?o(`/student/classrooms/${S}`,{state:{activeTab:"leaderboard"}}):st.error("Unable to access leaderboard: Classroom information not found")}}),(0,as.jsx)(Nv,{show:_,onHide:()=>E(!1),questions:(null===l||void 0===l?void 0:l.questions)||[],answers:f,onSubmit:Q}),(0,as.jsx)(_v,{show:A,onHide:()=>O(!1),questions:(null===l||void 0===l?void 0:l.questions)||[],answers:f,onSubmit:V}),(0,as.jsxs)(lc,{isOpen:P,onClose:F,title:"Leave Quiz?",children:[(0,as.jsx)("p",{className:"dark:text-gray-50 text-gray-700 mb-4",children:"Your quiz progress is automatically saved, so you can continue later. Are you sure you want to leave the quiz now?"}),(0,as.jsxs)("div",{className:"mt-6 flex justify-end gap-4",children:[(0,as.jsx)(bs,{variant:"cancel",rounded:"full",onClick:()=>{L&&o(L,{state:{activeTab:"lessons"}}),I(!1),M(null)},children:"Leave Quiz"}),(0,as.jsx)(bs,{variant:"default",rounded:"full",onClick:F,children:"Stay on Quiz"})]})]})]})},Av=()=>{const{isAdmin:e,currentUser:t}=is(),[r,s]=(0,n.useState)([]),[a,o]=(0,n.useState)(!0),[i,l]=(0,n.useState)(null),[c,d]=(0,n.useState)({message:"",startDate:"",endDate:"",visibility:"EVERYONE",isActive:!0}),u={toolbar:[["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]]},h=["bold","italic","underline","link","list","bullet"];(0,n.useEffect)((()=>{m()}),[]);const m=async()=>{try{const e=await so.getAllAnnouncements();e&&s(e.map((e=>({...e,startDate:e.startDate||"",endDate:e.endDate||""}))))}catch(e){console.error("Failed to load announcements:",e),st.error("Failed to load announcements")}finally{o(!1)}},f=e=>{const{name:t,value:r,type:n,checked:s}=e.target;d((e=>({...e,[t]:"checkbox"===n?s:r})))},p=e=>{const{name:t,value:r,type:n,checked:s}=e.target;l((e=>({...e,[t]:"checkbox"===n?s:r})))},g=e=>{l((t=>({...t,message:e})))},x=async()=>{if(i.message.trim())if(i.startDate&&i.endDate)try{const e=e=>{if(!e)return null;try{const t=new Date(e);if(isNaN(t.getTime()))throw new Error("Invalid date");const r=6e4*t.getTimezoneOffset();return new Date(t.getTime()-r).toISOString()}catch(t){return console.error("Error formatting date:",t),st.error(`Invalid date format: ${e}`),null}},t=e(i.startDate),r=e(i.endDate);if(!t||!r)return;const n={...i,startDate:t,endDate:r};await so.updateAnnouncement(i.id,n),await m(),l(null),st.success("Announcement updated successfully")}catch(e){console.error("Failed to update announcement:",e),st.error("Failed to update announcement")}else st.error("Start date and end date are required");else st.error("Announcement message is required")},b=()=>{l(null)};return e()?a?(0,as.jsx)("div",{children:"Loading..."}):(0,as.jsx)("div",{className:"px-4 sm:px-6 lg:px-8 lg:py-8",children:(0,as.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,as.jsx)(po,{type:"h1",fontSize:"5xl",weight:"bold",className:"mb-6 text-primary dark:text-white",children:"System Announcements"}),(0,as.jsx)("div",{className:"h-[1px] w-full bg-gradient-to-r from-[#18C8FF] via-[#4B8CFF] to-[#6D6DFF] mb-5 md:mb-8"}),(0,as.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,as.jsxs)("div",{className:"space-y-4",children:[(0,as.jsx)(po,{type:"h2",fontSize:"2xl",weight:"bold",className:"mb-6 text-primary dark:text-gray-300",children:"Add New Announcement"}),(0,as.jsxs)("div",{className:"border p-4 rounded-lg space-y-4 bg-white shadow-sm",children:[(0,as.jsxs)("div",{className:"mb-4",children:[(0,as.jsxs)("label",{className:"block text-sm font-medium mb-2",children:["Message ",(0,as.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,as.jsx)($c(),{value:c.message,onChange:e=>{d((t=>({...t,message:e})))},modules:u,formats:h,className:"h-40 mb-12",placeholder:"Enter announcement message..."})]}),(0,as.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,as.jsxs)("div",{children:[(0,as.jsxs)("label",{className:"block text-sm font-medium mb-2",children:["Start Date ",(0,as.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,as.jsx)("input",{type:"datetime-local",name:"startDate",value:c.startDate,onChange:f,className:"w-full p-2 border rounded",required:!0})]}),(0,as.jsxs)("div",{children:[(0,as.jsxs)("label",{className:"block text-sm font-medium mb-2",children:["End Date ",(0,as.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,as.jsx)("input",{type:"datetime-local",name:"endDate",value:c.endDate,onChange:f,className:"w-full p-2 border rounded",required:!0})]})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Visibility"}),(0,as.jsxs)("select",{name:"visibility",value:c.visibility,onChange:f,className:"w-full p-2 border rounded",children:[(0,as.jsx)("option",{value:"EVERYONE",children:"Everyone"}),(0,as.jsx)("option",{value:"TEACHERS",children:"Teachers Only"}),(0,as.jsx)("option",{value:"STUDENTS",children:"Students Only"})]})]}),(0,as.jsxs)(bs,{type:"button",onClick:async()=>{if(c.message.trim())if(c.startDate&&c.endDate)try{const e=e=>{if(!e)return null;const t=new Date(e),r=6e4*t.getTimezoneOffset();return new Date(t.getTime()-r).toISOString()},r={...c,startDate:e(c.startDate),endDate:e(c.endDate),createdBy:t.username,visibility:c.visibility||"EVERYONE",isActive:!0};await so.addAnnouncement(r);await m(),d({message:"",startDate:"",endDate:"",visibility:"EVERYONE",isActive:!0}),st.success("Announcement added successfully")}catch(e){console.error("Failed to add announcement:",e),st.error("Failed to add announcement")}else st.error("Start date and end date are required");else st.error("Announcement message is required")},variant:"default",size:"sm",className:"w-full",children:[(0,as.jsx)(ka,{className:"mr-2"}),"Add Announcement"]})]})]}),(0,as.jsxs)("div",{className:"space-y-4",children:[(0,as.jsx)(po,{type:"h2",fontSize:"2xl",weight:"bold",className:"mb-6 text-primary dark:text-gray-300",children:"Announcement List"}),(0,as.jsx)("div",{className:"space-y-4 max-h-[800px] overflow-y-auto pr-2",children:0===r.length?(0,as.jsx)("div",{className:"border p-4 rounded-lg bg-gray-50 text-center text-gray-500",children:"No announcements available"}):r.map(((e,t)=>{const r=new Date,n=e.startDate?new Date(e.startDate):null,s=e.endDate?new Date(e.endDate):null;let a="active",o="bg-green-100 text-green-800",c="Active";return n&&r<n?(a="scheduled",o="bg-blue-100 text-blue-800",c="Scheduled"):s&&r>s&&(a="expired",o="bg-gray-100 text-gray-800",c="Expired"),(null===i||void 0===i?void 0:i.id)===e.id?(0,as.jsxs)("div",{className:"border p-4 rounded-lg bg-white shadow-sm",children:[(0,as.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,as.jsx)("span",{className:"font-medium",children:"Edit Announcement"}),(0,as.jsxs)("div",{className:"space-x-2",children:[(0,as.jsx)("button",{type:"button",onClick:x,className:"text-green-500 hover:text-green-700",children:(0,as.jsx)(_a,{})}),(0,as.jsx)("button",{type:"button",onClick:b,className:"text-gray-500 hover:text-gray-700",children:"Cancel"})]})]}),(0,as.jsx)("div",{className:"mb-4",children:(0,as.jsx)($c(),{value:i.message,onChange:g,modules:u,formats:h,className:"h-32 mb-12"})}),(0,as.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,as.jsxs)("div",{children:[(0,as.jsxs)("label",{className:"block text-sm font-medium mb-2",children:["Start Date ",(0,as.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,as.jsx)("input",{type:"datetime-local",name:"startDate",value:i.startDate,onChange:p,className:"w-full p-2 border rounded",required:!0})]}),(0,as.jsxs)("div",{children:[(0,as.jsxs)("label",{className:"block text-sm font-medium mb-2",children:["End Date ",(0,as.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,as.jsx)("input",{type:"datetime-local",name:"endDate",value:i.endDate,onChange:p,className:"w-full p-2 border rounded",required:!0})]})]}),(0,as.jsxs)("div",{className:"mt-4",children:[(0,as.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Visibility"}),(0,as.jsxs)("select",{name:"visibility",value:i.visibility,onChange:p,className:"w-full p-2 border rounded",children:[(0,as.jsx)("option",{value:"EVERYONE",children:"Everyone"}),(0,as.jsx)("option",{value:"TEACHERS",children:"Teachers Only"}),(0,as.jsx)("option",{value:"STUDENTS",children:"Students Only"})]})]})]},e.id):(0,as.jsxs)("div",{className:"border p-4 rounded-lg bg-white shadow-sm hover:shadow-md transition-shadow",children:[(0,as.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,as.jsx)("div",{className:"flex items-center",children:(0,as.jsx)("span",{className:`px-2 py-1 rounded-full text-xs ${o}`,children:c})}),(0,as.jsxs)("div",{className:"space-x-2",children:[(0,as.jsx)("button",{type:"button",onClick:()=>(e=>{const t=e=>{if(!e)return"";try{const t=new Date(e),r=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),s=String(t.getDate()).padStart(2,"0");return`${r}-${n}-${s}T${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}`}catch(t){return console.error("Date formatting error:",t),""}};l({...e,startDate:t(e.startDate),endDate:t(e.endDate)})})(e),className:"text-blue-500 hover:text-blue-700",children:(0,as.jsx)(da,{})}),(0,as.jsx)("button",{type:"button",onClick:()=>(async e=>{try{await so.deleteAnnouncement(e),await m(),st.success("Announcement removed successfully")}catch(t){console.error("Failed to remove announcement:",t),st.error("Failed to remove announcement")}})(e.id),className:"text-red-500 hover:text-red-700",children:(0,as.jsx)(Ma,{})})]})]}),(0,as.jsx)("div",{className:"text-gray-700 mb-2 font-medium text-lg",dangerouslySetInnerHTML:{__html:e.message}}),(0,as.jsxs)("div",{className:"text-sm text-gray-500",children:[(0,as.jsxs)("p",{children:["Visibility: ",e.visibility]}),(0,as.jsxs)("p",{children:["Start: ",e.startDate?new Date(e.startDate).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!0,timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone}):"No start date"]}),(0,as.jsxs)("p",{children:["End: ",e.endDate?new Date(e.endDate).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!0,timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone}):"No end date"]}),"scheduled"===a&&(0,as.jsxs)("p",{className:"text-blue-600 mt-1",children:["This announcement will be visible to ",e.visibility.toLowerCase()," when it starts"]}),"expired"===a&&(0,as.jsx)("p",{className:"text-gray-600 mt-1",children:"This announcement is no longer visible to users"})]})]},e.id)}))})]})]})]})}):(0,as.jsx)("div",{children:"Access denied"})},Ov=()=>{const[e,t]=(0,n.useState)([]),[r,s]=(0,n.useState)(!0),[a,o]=(0,n.useState)(null),[i,l]=(0,n.useState)(null),[c,d]=(0,n.useState)(!1),[u,h]=(0,n.useState)(""),[m,f]=(0,n.useState)(null),p=(0,n.useRef)(),[g,x]=(0,n.useState)({firstName:"",lastName:"",username:"",email:"",password:"",role:""});(0,n.useEffect)((()=>{b()}),[]),(0,n.useEffect)((()=>{const e=e=>{p.current&&!p.current.contains(e.target)&&f(null)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[]);const b=async()=>{try{s(!0);const e=(await Ls.getAllUsers()).filter((e=>!e.isDeleted&&!e.deleted)).sort(((e,t)=>{var r,n;const s=null===(r=e.roles)||void 0===r?void 0:r.some((e=>{const t="string"===typeof e?e:e.name;return"ROLE_ADMIN"===t||"ADMIN"===t})),a=null===(n=t.roles)||void 0===n?void 0:n.some((e=>{const t="string"===typeof e?e:e.name;return"ROLE_ADMIN"===t||"ADMIN"===t}));return s&&!a?-1:!s&&a?1:e.id-t.id}));t(e),o(null)}catch(a){console.error("Failed to fetch users:",a),o("Failed to fetch users. Please try again later."),Tt.error("Failed to fetch users")}finally{s(!1)}},y=[{header:"ID",accessor:"id"},{header:"Name",accessor:e=>`${e.firstName||""} ${e.lastName||""}`.trim()||"N/A"},{header:"Username",accessor:"username"},{header:"Email",accessor:"email"},{header:"Role",accessor:e=>{var t;return(null===(t=e.roles)||void 0===t?void 0:t.map((e=>("string"===typeof e?e:e.name).replace("ROLE_",""))).join(", "))||"N/A"}},{header:"Actions",accessor:t=>(0,as.jsx)("div",{className:"flex justify-start",children:(0,as.jsxs)("div",{className:"relative inline-block text-left",ref:m===t.id?p:null,children:[(0,as.jsx)("button",{onClick:()=>f(m===t.id?null:t.id),className:"p-2 rounded-full hover:bg-gray-200 text-gray-500 hover:text-gray-700 transition duration-150",children:(0,as.jsx)(Qa,{size:20})}),m===t.id&&(0,as.jsx)("div",{className:"absolute right-0 bottom-[5%] mb-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-50",children:(0,as.jsxs)("div",{className:"py-1",role:"menu","aria-orientation":"vertical","aria-labelledby":"options-menu",children:[(0,as.jsxs)("button",{onClick:()=>{(e=>{var t;l(e),x({firstName:e.firstName||"",lastName:e.lastName||"",username:e.username||"",email:e.email||"",password:"",role:(null===(t=e.roles)||void 0===t?void 0:t[0])||""}),d(!0)})(t),f(null)},className:"flex items-center w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900",role:"menuitem",children:[(0,as.jsx)(Ga,{className:"mr-3 h-5 w-5 text-gray-400"}),"Edit"]}),(0,as.jsxs)("button",{onClick:()=>{(async t=>{if(window.confirm("Are you sure you want to delete this user?"))try{e.find((e=>e.id===t)),await Ls.deleteUserByAdmin(t),Tt.success("User deleted successfully"),await b()}catch(a){console.error("Failed to delete user:",a),Tt.error("Failed to delete user")}})(t.id),f(null)},className:"flex items-center w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 hover:text-red-700",role:"menuitem",children:[(0,as.jsx)(Ka,{className:"mr-3 h-5 w-5 text-red-400"}),"Delete"]})]})})]})})}];if(r)return(0,as.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,as.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600"})});if(a)return(0,as.jsx)("div",{children:a});const v=(e=>e.filter((e=>{var t,r;return""===u||(null===(t=e.email)||void 0===t?void 0:t.toLowerCase().includes(u.toLowerCase()))||(null===(r=e.username)||void 0===r?void 0:r.toLowerCase().includes(u.toLowerCase()))||`${e.firstName||""} ${e.lastName||""}`.toLowerCase().includes(u.toLowerCase())})))(e);return(0,as.jsx)("div",{className:"px-4 sm:px-6 lg:px-8 lg:py-8",children:(0,as.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,as.jsx)(po,{type:"h1",fontSize:"5xl",weight:"bold",className:"mb-6 text-primary dark:text-white",children:" User Management"}),(0,as.jsx)("div",{className:"h-[1px] w-full bg-gradient-to-r from-[#18C8FF] via-[#4B8CFF] to-[#6D6DFF] mb-5 md:mb-8"}),(0,as.jsx)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 pb-4 gap-4",children:(0,as.jsx)("div",{className:"flex items-center gap-4 w-full sm:w-auto order-2 sm:order-1",children:(0,as.jsxs)("div",{className:"relative flex-1 sm:flex-none",children:[(0,as.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none dark:!text-gray-300 !text-gray-700",children:(0,as.jsx)(Jg,{className:"dark:!text-gray-300 !text-gray-700"})}),(0,as.jsx)(Si,{type:"search",name:"search",id:"search",className:"block w-full sm:w-96 pl-10 pr-3 py-2 sm:text-sm border-gray-700 dark:border-gray-300 text-gray-500 dark:text-gray-300",placeholder:"Search",value:u,onChange:e=>h(e.target.value)})]})})}),(0,as.jsx)("div",{className:"",children:(0,as.jsx)(qi,{columns:y,data:v})}),(0,as.jsx)(lc,{isOpen:c,onClose:()=>d(!1),title:"Edit User",children:(0,as.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e={...g,createdByAdmin:!0,temporaryPassword:g.password||void 0};await Ls.updateUserByAdmin(i.id,e),Tt.success("User updated successfully"),d(!1),b()}catch(a){console.error("Failed to update user:",a),Tt.error("Failed to update user")}},className:"space-y-4",children:[(0,as.jsxs)("div",{children:[(0,as.jsx)("label",{className:"block mb-2text-sm font-medium dark:text-gray-300 text-gray-700",children:"First Name"}),(0,as.jsx)(Si,{type:"text",className:"dark:text-gray-300 text-gray-700 dark:border-gray-300 border-gray-700",value:g.firstName,onChange:e=>x({...g,firstName:e.target.value}),required:!0})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)("label",{className:"block mb-2 text-sm font-medium dark:text-gray-300 text-gray-700",children:"Last Name"}),(0,as.jsx)(Si,{type:"text",className:"dark:text-gray-300 text-gray-700 dark:border-gray-300 border-gray-700",value:g.lastName,onChange:e=>x({...g,lastName:e.target.value}),required:!0})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)("label",{className:"block mb-2 text-sm font-medium dark:text-gray-300 text-gray-700",children:"Username"}),(0,as.jsx)(Si,{type:"text",className:"dark:text-gray-300 text-gray-700 dark:border-gray-300 border-gray-700",value:g.username,onChange:e=>x({...g,username:e.target.value}),required:!0})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)("label",{className:"block mb-2 text-sm font-medium dark:text-gray-300 text-gray-700",children:"Email"}),(0,as.jsx)(Si,{type:"email",className:"dark:text-gray-300 text-gray-700 dark:border-gray-300 border-gray-700",value:g.email,onChange:e=>x({...g,email:e.target.value}),required:!0})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)("label",{className:"block mb-2 text-sm font-medium dark:text-gray-300 text-gray-700",children:"New Password (optional)"}),(0,as.jsx)(Si,{type:"password",className:"dark:text-gray-300 text-gray-700 dark:border-gray-300 border-gray-700",value:g.password,onChange:e=>x({...g,password:e.target.value})})]}),(0,as.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,as.jsx)(bs,{type:"button",variant:"cancel",rounded:"full",onClick:()=>d(!1),children:"Cancel"}),(0,as.jsx)(bs,{type:"submit",variant:"default",rounded:"full",children:"Save Changes"})]})]})})]})})},Tv=()=>{const[e,t]=(0,n.useState)([]),[r,s]=(0,n.useState)(!0),[a,o]=(0,n.useState)(null),[i,l]=(0,n.useState)(""),{currentUser:c,isAdmin:d}=is(),u=X();(0,n.useEffect)((()=>{c&&d()?h():u("/")}),[c,d,u]);const h=async()=>{try{const e=await Xn.get("/admin/feedback");t(e.data),s(!1),e.data&&e.data.length>0&&e.data.forEach((e=>{}))}catch(a){o("Failed to fetch feedback"),s(!1),console.error("Error fetching feedback:",a)}},m=[{header:"Ticket Number",accessor:"ticketNumber",render:e=>(0,as.jsx)("span",{className:"font-mono cursor-pointer text-blue-700 hover:underline",onClick:()=>u(`/admin/feedback/${e.ticketNumber}`),children:e.ticketNumber})},{header:"Full Name",render:e=>{const t=e.user;if(!t)return"";return`${t.firstName||""} ${t.lastName||""}`.trim()||t.username}},{header:"User Role",render:e=>(e=>{if(!e)return"";let t="";return Array.isArray(e.roles)&&e.roles.length>0?t=e.roles[0].name:"string"===typeof e.role&&(t=e.role),"ROLE_STUDENT"===t||"student"===t||"STUDENT"===t?"Student":"ROLE_TEACHER"===t||"teacher"===t||"TEACHER"===t?"Teacher":"ROLE_ADMIN"===t||"admin"===t||"ADMIN"===t?"Admin":t||""})(e.user)},{header:"Email",render:e=>e.user&&e.user.email},{header:"Status",render:e=>(0,as.jsx)("span",{className:"inline-block w-24 text-center px-3 py-1 rounded-full text-xs font-medium "+("COMPLETED"===e.status?"bg-green-100 text-green-800":"IN_PROGRESS"===e.status?"bg-blue-100 text-blue-800":"PENDING"===e.status?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:e.status})}],f=e.filter((e=>{var t,r,n,s;const a=i.toLowerCase(),o=e.user?`${e.user.firstName||""} ${e.user.lastName||""}`.trim().toLowerCase():"",l=(null===(t=e.user)||void 0===t||null===(r=t.email)||void 0===r?void 0:r.toLowerCase())||"",c=(null===(n=e.ticketNumber)||void 0===n?void 0:n.toString().toLowerCase())||"",d=(null===(s=e.status)||void 0===s?void 0:s.toLowerCase())||"";return o.includes(a)||l.includes(a)||c.includes(a)||d.includes(a)}));return(0,as.jsx)("div",{className:"px-4 sm:px-6 lg:px-8 lg:py-8",children:(0,as.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,as.jsx)(po,{type:"h1",fontSize:"5xl",weight:"bold",className:"mb-6 text-primary dark:text-white",children:" Feedback Management"}),(0,as.jsx)("div",{className:"h-[1px] w-full bg-gradient-to-r from-[#18C8FF] via-[#4B8CFF] to-[#6D6DFF] mb-5 md:mb-8"}),(0,as.jsx)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 pb-4 gap-4",children:(0,as.jsx)("div",{className:"flex items-center gap-4 w-full sm:w-auto order-2 sm:order-1",children:(0,as.jsxs)("div",{className:"relative flex-1 sm:flex-none",children:[(0,as.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none dark:!text-gray-300 !text-gray-700",children:(0,as.jsx)(Jg,{className:"dark:!text-gray-300 !text-gray-700"})}),(0,as.jsx)(Si,{type:"search",name:"search",id:"search",className:"block w-full sm:w-96 pl-10 pr-3 py-2 sm:text-sm border-gray-700 dark:border-gray-300 text-gray-500 dark:text-gray-300",placeholder:"Search Feedback...",value:i,onChange:e=>l(e.target.value)})]})})}),(0,as.jsx)("div",{className:"",children:(0,as.jsx)(qi,{columns:m,data:f})})]})})},zv=e=>{if(!e)return"";let t="";return Array.isArray(e.roles)&&e.roles.length>0?t=e.roles[0].name:"string"===typeof e.role&&(t=e.role),"ROLE_STUDENT"===t||"student"===t||"STUDENT"===t?"Student":"ROLE_TEACHER"===t||"teacher"===t||"TEACHER"===t?"Teacher":"ROLE_ADMIN"===t||"admin"===t||"ADMIN"===t?"Admin":t||""},Pv=()=>{const{ticketNumber:e}=te(),[t,r]=(X(),(0,n.useState)(null)),[s,a]=(0,n.useState)(!0),[o,i]=(0,n.useState)(null),[l,c]=(0,n.useState)(""),[d,u]=(0,n.useState)(""),[h,m]=(0,n.useState)(!1),[f,p]=(0,n.useState)(!1);(0,n.useEffect)((()=>{g()}),[e]);const g=async()=>{try{const t=await Xn.get(`/admin/feedback/ticket/${e}`);r(t.data),u(t.data.status),c(t.data.adminResponse||""),a(!1)}catch(t){i("Failed to load feedback ticket."),a(!1)}};if(s)return(0,as.jsx)("div",{className:"flex justify-center items-center h-64",children:"Loading..."});if(o)return(0,as.jsx)("div",{className:"p-4 bg-red-100 text-red-700 rounded-lg",children:o});if(!t)return null;const x=t.user||{},b=`${x.firstName||""} ${x.lastName||""}`.trim()||x.username;return(0,as.jsx)("div",{className:"px-4 sm:px-6 lg:px-8 lg:py-8",children:(0,as.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,as.jsx)("div",{className:"mb-4",children:(0,as.jsxs)(Te,{to:"/admin/feedback",className:"flex items-center text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 transition-colors",children:[(0,as.jsx)(ra,{className:"mr-1"}),(0,as.jsx)("span",{children:"Back to Feedback List"})]})}),(0,as.jsx)(po,{type:"h1",fontSize:"5xl",weight:"bold",className:"mb-6 text-primary dark:text-white",children:" Feedback Ticket"}),(0,as.jsx)("div",{className:"h-[1px] w-full bg-gradient-to-r from-[#18C8FF] via-[#4B8CFF] to-[#6D6DFF] mb-5 md:mb-8"}),(0,as.jsxs)("div",{className:"flex flex-col md:flex-row justify-start md:justify-between mb-8",children:[(0,as.jsxs)(po,{type:"h1",fontSize:"2xl",weight:"bold",className:"text-2xl font-bold dark:text-gray-300 text-gray-900",children:["FEEDBACK TICKET#: ",(0,as.jsx)("span",{className:"font-mono text-blue-800 dark:text-blue-300",children:t.ticketNumber})]}),(0,as.jsxs)("div",{className:"text-left md:text-right  mt-3 md:mt-0 text-gray-700 text-sm dark:text-gray-300",children:["Date Submitted: ",new Date(t.dateSubmission).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})]})]}),(0,as.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[(0,as.jsxs)("div",{children:[(0,as.jsx)(po,{type:"h3",fontSize:"lg",weight:"semibold",className:"text-lg font-semibold mb-2 dark:text-gray-300 text-gray-800",children:"User Information"}),(0,as.jsxs)("div",{className:"text-gray-800 text-sm space-y-1 dark:text-gray-300",children:[(0,as.jsxs)("div",{children:[(0,as.jsx)("span",{className:"font-semibold",children:"Name:"})," ",b]}),(0,as.jsxs)("div",{children:[(0,as.jsx)("span",{className:"font-semibold",children:"Role:"})," ",zv(x)]}),(0,as.jsxs)("div",{children:[(0,as.jsx)("span",{className:"font-semibold",children:"Email:"})," ",x.email]}),x.id&&(0,as.jsxs)("div",{children:[(0,as.jsx)("span",{className:"font-semibold",children:"Student ID:"})," ",x.id]})]})]}),(0,as.jsxs)("div",{children:[(0,as.jsx)(po,{type:"h3",fontSize:"lg",weight:"semibold",className:"text-lg font-semibold mb-2 dark:text-gray-300 text-gray-800",children:"Feedback Information"}),(0,as.jsxs)("div",{className:"text-gray-800 text-sm space-y-1 dark:text-gray-300",children:[(0,as.jsxs)("div",{children:[(0,as.jsx)("span",{className:"font-semibold",children:"Subject:"})," ",t.subject]}),(0,as.jsxs)("div",{children:[(0,as.jsx)("span",{className:"font-semibold",children:"Message:"})," ",(0,as.jsx)("span",{className:"whitespace-pre-line",children:t.info})]})]})]})]}),(0,as.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),m(!0),p(!1);try{await Xn.put(`/admin/feedback/${t.id}`,{status:d,adminResponse:l||""}),p(!0),g()}catch(r){i("Failed to submit response.")}m(!1)},children:[(0,as.jsx)("div",{className:"flex flex-col md:flex-row md:items-center gap-4 mb-4",children:(0,as.jsxs)("div",{className:"flex items-center gap-2",children:[(0,as.jsx)("span",{className:"font-semibold dark:text-gray-300 text-gray-800",children:"Status:"}),(0,as.jsxs)("select",{className:"border border-gray-700 dark:text-gray-800 dark:border-gray-300 rounded px-2 py-1 text-sm bg-white  text-gray-800",value:d,onChange:e=>u(e.target.value),children:[(0,as.jsx)("option",{value:"PENDING",className:"bg-gray-300 text-gray-700 hover:text-blue-600",children:"PENDING"}),(0,as.jsx)("option",{value:"IN_PROGRESS",className:"bg-gray-300 text-gray-700 hover:text-blue-600",children:"IN PROGRESS"}),(0,as.jsx)("option",{value:"IN_REVIEW",className:"bg-gray-300 text-gray-700 hover:text-blue-600",children:"IN REVIEW"}),(0,as.jsx)("option",{value:"COMPLETED",className:"bg-gray-300 text-gray-700 hover:text-blue-600",children:"COMPLETED"}),(0,as.jsx)("option",{value:"REJECTED",className:"bg-gray-300 text-gray-700 hover:text-blue-600",children:"REJECTED"})]})]})}),(0,as.jsx)("textarea",{className:"w-full min-h-[150px] border border-gray-300 rounded p-3 mb-4 text-gray-800 bg-blue-50",placeholder:"Enter your response...",value:l,onChange:e=>c(e.target.value)}),(0,as.jsx)(bs,{type:"submit",rounded:"full",variant:"default",size:"sm",disabled:h,children:h?"Submitting...":"Submit Response"}),f&&(0,as.jsx)("div",{className:"mt-3 text-green-700",children:"Response submitted successfully!"})]})]})})},Iv=r.p+"static/media/Angelo B. Cajegas.56ae9a1a7a367207ac7d.jpg",Lv=r.p+"static/media/Kristoffer Josh Tesaluna.adbeb8694711829cb36b.jpg",Mv=r.p+"static/media/Aaron Cloyd Villarta.677e654a13c0224b7ffc.jpg",qv=r.p+"static/media/Emmanuel A. Cagampang Jr.c1996c0991124ffc2da4.jpg",Rv=()=>{const{isAdmin:e,isTeacher:t,isStudent:r}=is(),{userClassrooms:n,getClassroomById:s,loading:a}=bx(),o=X(),{darkMode:i}=ds(),l=n&&n.length>0?n[0]:null,c=l?l.id:null;c&&s(c);let d=[];t()?d=[{icon:(0,as.jsx)(Js,{className:"text-3xl text-yellow-500 drop-shadow-sm"}),title:"Analytics Dashboard",desc:"Navigate your ship through class data seas with clear charts and real-time updates\u2014find the hidden trends and treasure insights.",button:c?"View dashboard":"Create Classroom First",onClick:()=>o(c?`/teacher/classrooms/${c}#class-record-tab`:"/teacher/classrooms"),disabled:!1},{icon:(0,as.jsx)(Zs,{className:"text-3xl text-yellow-500 drop-shadow-sm"}),title:"Classroom",desc:"Manage your crew and set the course. Reward explorers, organize lessons, and steer learning adventures.",button:"View Classroom",onClick:()=>o("/teacher/classrooms")}]:r()?d=[{icon:(0,as.jsx)(qa,{className:"text-3xl text-yellow-500 drop-shadow-sm"}),title:"Leaderboard Dashboard",desc:"Climb the ranks to legend status. Track your loot of points and compare with fellow adventurers.",button:c?"View leaderboard":"Join Classroom First",onClick:()=>o(c?`/student/classrooms/${c}#leaderboard-tab`:"/student/classrooms"),disabled:!1},{icon:(0,as.jsx)(Zs,{className:"text-3xl text-yellow-500 drop-shadow-sm"}),title:"Classroom",desc:"Join your fleet and embark on quests. Access lessons, quizzes, and activities to level up.",button:"View Classroom",onClick:()=>o("/student/classrooms")}]:e()&&(d=[{icon:(0,as.jsx)(oa,{className:"text-3xl text-yellow-500 drop-shadow-sm"}),title:"Feedback",desc:"Review messages in a bottle. Keep the seas calm by addressing issues and celebrating wins.",button:"View feedback",onClick:()=>o("/admin/feedback")},{icon:(0,as.jsx)(Zs,{className:"text-3xl text-yellow-500 drop-shadow-sm"}),title:"Classroom",desc:"Oversee all ships in the MathQuest fleet. Support captains and crew for smooth voyages.",button:"View Classroom",onClick:()=>o("/admin/classrooms")}]);const u=[{name:"Michael Ferdinand C. Bacalso",role:"Frontend Developer",skills:["React","UI"],icon:(0,as.jsx)(na,{}),photo:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wAARCABAAEADASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD+qyzs9vVc9OQT0HHP4j+XbNdNa2pwvHHfg8foO/8Ahjnma1shnkd/T9ewHGfx5robezAA+XA9ew4zz9eP8iuCzW6323126dP66midk7b2u77adv02PhD9v79uj4Y/8E+vgNf/ABg8e2x8R6/f3aaH8O/h5Z6lb6bqvjbxJKod7dbqWK5OnaHpFsTqPiHWxZ3i6bZKiRWt3qN5YWN3/Gb8U/8Ag5F/4KIePPEt1e+ANd+G3we0C21NWs/DvhLwRoOvBLCG53RJqmtePrPxVd6hI0QWK+ntf7IhuMMbWxsw7RD7v/4L66L4j/ae/wCChPwf/Z3a7vNN+H3wo+Att411GZZA1vNfeOfFWrQanNaxq7LHNqMeheH9JZ5fKkK6bNIFCQRvNx/wM/4Jkfs16/4Kn0fxX4VfVWuLYYv7e6ubSe2MaoS1vLZLAqmR2Zp2aN3mUJ5rM6qyeVjuIcuyqtTw2IjKtiKkfaezhFPlg9m+ZxV2le17v7j7LhzgTN+JcJVx2GqYfD4anN041cRKa9rOPLzqChGUrR5kuayTaaTuiP8AYt/4OXv2h0+L3g7wZ+1x4e+G3i/4V+IdY0vRde8beFtBfwt488MW+rTxRL4nji0nUpfDGuWOkxzi61PQofDlhf39vEy6df210gt7r+4S0Ntf2lveWcsN3aXcMVxbXNtIk0FxBMiyQzwTRlo5YpI2V45FYq6EMpIINfwL/tL/APBMr4LXemyp8J9En8CeLdMsJJdHkt5b5tO1K405XmtbTVoLoyCM3DosTahYm1ZWkE7iYKYj/Wl/wRpfxFd/8E0P2UE8VXV5da1ZeC/EGjO+oXNxdXcFloHxA8X6HpOnyyXSpLEul6Xp9npkFqoNvaW9pDa2rG2hiJ68szjAZzSqVcFGUJ0aip1qVSPLOLd3FpRbi4ys7NdtbOxw8TcJZlwpiaFHMXRrU8XTlVw1fDTlKnNQcVOElOMJwnDmV4yWqknGUtWv0UltMjp7dPb19MD69qovafMMr1x1H19z/XrXbtYgrzg47bffHc/rj0/CjLZfNgKfTkdvxHb/AOt2r07LZ+6/w6W3u1pv9/c+Y06P5P8Az2/I5K1sjnOB19Dz7fyz+Oa1ZLVhbOVGML6en8unHI/HOa1ba0yeAOo+n/6u39K2DbKIJAwA+XJz0/zn3H+HOru7v5372tZdGvl5Fpctr7vT0u9fX9H3sj+Wr/gpL4Q8N6h+1frPxK8OH+3PGWhfCjwP4D8VaXoelz65q1idJ8SeMPF+n28mlxBVvNRvdO8WWMsUJlIFokLXSCJVUcN+z98UfirayQ2E9j4u8O6FdWXiC609PiV8M/DnhXVpZtLS7hMVpbaGH+0aaLjTLlbGa/WO4ubW8tr8fabC5tbqv0X/AG2Phpc+Gfi0vxR8tZNH8Rro0F8kasiwa1o0c9vHMTu8vF9pwtxnYHM1gwlZ1liRflbUdRufFfxP0q68NaP/AG3ptv4Sm0a4LeI9N0SLStWuDPPLM8F9DLLOscLxNcC1BK2qzr5ZcKH/ADLPZ13mNdOEIV5SpRoTVrukrKPvNXfPFLmUZRtJ9T+rvDbAZfU4dy+ph8XKth1CosXQqwg2sXUhTqVo6WSVGvOrCnzQnzUYwlJ63fiWoan8VPFfi0ReJPCfxZ1K0vpra8Xxe2ifDuD4ZW2nJdT2n2C0Fvf2Xiq4ugIzNcC5tXMenyRTrIbzy4V/ob/YSh8GWPwB8O/D/wAHm7jPw3n1HSdZsrjTL2yS01HxDq2o+LyLOa6gii1CzkGuPsu7OSaDzY54S4kiZR+XHhnUk/4RHT/B9yFTXobq6kuxFei7SCG4vJHgjhniWGC7hKkRh0tofmjbbkFif3D/AGaPhY3wv+Gllp94qf2vrt9c+JNXwm1o59R2fZbNmI3k2NjHb28oJKfavtLxBY5AK9jheVZ4mryOLpyoUliJ2bkq0VffT3nJt3ta17Wvd/JeL2Gy6hgcMq1ao8dLGVv7OoU3TjThR56ftXUioyvShRUoxalCbqzpybcU4v102BCZ2nntjk9R+PT1/PtmS2hDenPOQenPuP0/lxXfSxjaMjp6ZPr9Mf8A1vrWPcQKWHA56evX/PH17Yr7jls9L97X3s16fjfc/nyUdLrVaf195xVpCc5x3OB+J/P8Qe/NbsdqsilWH3hjr+GeM9OteNa/8afh/wCDtYt/D2r6nPJrE0Zm+yafYXN6YYVZw0lxNGvkRbCp3q0pdPl3KMivHviF+1K9s0Ok+CrVNPmmkZ5tb1UW80sVlCrgyQ2J863tzLcGBPPu5LnZbPIWtEmKGPtoZZjcVOEaWHmoS+GclyQ5esuaVrr0u+yd9cZYmjSvKU43XTeV9Htve39bnmH/AAUVuND8I/s/+MdY1eGS7uJm0XTdHtbWEXFyuraz4g0rRdMvGVXWW3sbXUdSs/t9/GGFnDLvZHDCN/52/D3ijw5rMsb+Nfhj46j8W6fAbRtX8P8Ag2LxPDqGnrJvAl1bT9G1syRnAZY7+1gubdiyxGNWIP61/Fbw54m+JX7RGj6R4j1vUdU8HeKP2f8AxZouvQ6pcTXSx6pqnjLwtb2V9aq0c0djrcF9quhahblXt4zFoVw0AYafEq+EeEPhlpFtJPb6wbW01fSJ7rRdahSeSFzeadM9pO6Mu1pIJXRmTkq8DpKDsda+B4/y3GZVWwOJjS56cnWwsqyjOHLWgqdVcsvtQq0qz5LcybpVVvFpf0F4M5tQ+r5hh6eLqU8XTlQx0KcXFxVGspYeTUOa/PSqULVHpaNale6kjX/Y2vvAXiP46fDTQ18I6l4X8LNrObj+29HGinUr+C3u7+1ivLN4ItQuRNd2iLeTXlvbwJbvMzlbdZWH9N626KFEa/u1AwOu0Y5Ge/cDPvmv55P2cfCmlav8bvEWp6e8DaP8K/DYtW8rLJJ4v8Xq1rabZBx5ukeGbXVvtMRO3PiS1fbujUr+j/gr9pPxb4KstT074hPH4mtdA1Z7c6oyR2OsXOg32pKuj3oaGNLS8uLKwuUtr3zoI2urmyZ2uomuDJXv8G5Fja2RQzBU48+Jr1asad+WpKjHkpQl73xOU4VJWcl7jja9z4XxZzjD4niyWHVepUeDwlClVc3eKxNZzxFRRSVo2p1aMZ2u+aLT2R99yx56D0J69OeM/UZ5rNlhGeRnk9c+uP8A6/U+3WvOvCnxu+HvjK71DTbDWBp2raWsUl5pmuKmmXIt513w3UEjyvZ3lvKoZla0up2j2t56xEYr0oTxTpHNDJFLHIFeOSN1dJFYZV0dSVZGHKspIYHIOOT7E6VSnPlq0505J7Tg4td2rpafnruj86hVi2nGSknpu7de2zvv1tp2PwQkWeTUbbW21a6vba2TVLlr6efz5GtLuKK53NMo2yxzSpLcNK2SzOx3ksc5VtZ32ueIEle4la1udR+0TsQcLpGlBEhsGjBI8q9uHuL1Jlb/AEhYFRlwhC8dfa1o3ws1DTfBs92E8O+IfEGh6dodtcEb/D8t5rVqkPh6J2IE2h3M0i2ejwsd+lGWPR0MunyWENl75olrarAfI2mNFW0WQBebe3ZSUX7xx57zrkfe3MQWUjP69TpRjGM1FXS5Vba2l+2unzXY+PdS0nFtq+qfd6fO/pfVHnXxe+IWp/CnT/HfxWXw3r/jH/hFPBfh7UV8M6G9tFe3EOgz6tc6pfLd3ZaGx060j12K+1y7S2v9Rh0vRpbrTNM1C+tre2k+NLn4n+MfjHoHwy+Jngzwtp6+LPjre2emweH7a7ksNC8PavFpmtDX08Q65cK89w/hO68J6rba7e2emjULwxoINFDpZLdfpRrdrFeRyMuVmVPK3bElSSCSGBZLe4ikVkmtpQgWRJAysAeQev5hfshW+o/Dv9qj4yfs53WmSnwF8ONX1/45/DG/nLyxWOl/FXS9F0l/CWntKzvHbaHqWo+IILEB222k22aR5FkUeJneTYTN6f1HMFCeAxMFBQajGtRx9Kca2HrUKtm4upSjWo1I3ekko6TqX+v4az7E5C6mZ5U5U81wco1JTcpSw+JyyvD6viMPXocyhL2WJnhcRBtXupTbUqVO31p8EfHvgX9m/VNH+B/xE1m4sviB8UprvxrN8QjpN8/w88T6/qd4mjW2ix+J4YXsPDtwq2SaR4V0/wARvpza5a6ejWkkurXn9mn7U8Q6FDrelPbzsqSX0N7YT3kTGVt0scS20qnOHNrPBb3aD5R50Q55IP4+6BOPjj+398RL2S51PVPD/wAMvD+p6NpmlX+l3Fp4d0jxHpn9neA9Ln0xhqdzZ6xdXl3r3ibXI75tOs1t00+OG1iWS1kvr/8AZ+/+zad4SZIIki/suzWGCNVCqnlIiRqMEAAIgGexA208mpU4YX2eHhRp4TDVp4TBRoSc4Sw2FjSp88pc0l7R1VVi0m7ctpe9c4M/rzr4xYuvVr18bjaUcZmE66UWsXiZTrSjTioxtTjSlSSbSV7uC9nynlP9neIdTh0KKzthDfa74n8IaJq0zyqG04eGpdQl8WSQE7WmQaLZagIN2Ybl57QFXW4CD7z+DHxJhvrVPDF7FZ2n2G81XS9DmtQYrS+i0m+uLe4tAjO6rc2rxywqQ22ZreeMrHNCVl+XrMWMWq6NLHeNDqOq+H9QvJdoQGwhlh0C31jV08zMQuFS20aysgVLLdXbyypNbvOq75vNP06GyGntFpVno8aNp5SUp9hitSZFnM7vvDptM89zLIZHcyTySMzM53zLAUsdh3TkrNe/SqLVwnsm/wCaL2a2362t5eHxE6M+dNcu0o23Ta6fLR338j//2Q=="},{name:"Angelo B. Cajegas",role:"Frontend Developer",skills:["React","UX"],icon:(0,as.jsx)(na,{}),photo:Iv},{name:"Kristoffer Josh Tesalunay",role:"Frontend Developer",skills:["React","SPA"],icon:(0,as.jsx)(na,{}),photo:Lv},{name:"Aaron Cloyd Villarta",role:"Backend Developer",skills:["API","Auth"],icon:(0,as.jsx)(Vs,{}),photo:Mv},{name:"Emmanuel A. Cagampang Jr.",role:"Backend Developer",skills:["DB","Analytics"],icon:(0,as.jsx)(Vs,{}),photo:qv}];return a?(0,as.jsx)("div",{className:"w-full flex flex-col items-center justify-center py-12",children:(0,as.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-yellow-500 mb-4"})}):(0,as.jsxs)("div",{className:"w-full min-h-[70vh] px-4 sm:px-6 lg:px-8 lg:py-8 flex flex-col items-center justify-start",style:{backgroundImage:i?"linear-gradient(180deg, rgba(2,6,23,1) 0%, rgba(3,7,18,1) 100%)":"linear-gradient(135deg, #fef3c7 0%, #fde68a 50%, #f59e0b 100%)",backgroundSize:"cover",backgroundRepeat:"no-repeat"},children:[(0,as.jsx)("div",{className:"max-w-6xl w-full flex flex-col sm:flex-row items-start sm:items-center justify-center gap-3 mt-6 sm:mt-8 mb-4",children:(0,as.jsxs)("div",{className:"flex items-center gap-3",children:[(0,as.jsx)(ia,{className:(i?"text-yellow-400":"text-yellow-700")+" text-xl sm:text-2xl"}),(0,as.jsx)(po,{type:"h1",fontSize:"4xl",weight:"bold",className:(i?"text-yellow-200":"text-blue-800")+" tracking-wide",children:"MathQuest Dashboard"}),(0,as.jsx)(Oa,{className:(i?"text-yellow-400":"text-yellow-700")+" text-xl sm:text-2xl"})]})}),(0,as.jsx)("div",{className:"max-w-6xl w-full",children:(0,as.jsx)("div",{className:"h-[2px] w-full bg-gradient-to-r from-yellow-400 via-amber-500 to-yellow-600 opacity-80 mb-6"})}),(0,as.jsxs)("div",{className:"max-w-6xl w-full grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6 lg:gap-8",children:[d.map(((e,t)=>(0,as.jsxs)("div",{className:`rounded-2xl shadow-2xl p-4 sm:p-6 lg:p-8 flex flex-col min-h-[220px] sm:min-h-[260px] relative border-2 backdrop-blur-sm transition-all duration-300 hover:scale-[1.02] ${i?"bg-[#0b1022]/85 border-yellow-700/40":"bg-[#f5ecd2] border-yellow-300"} ${e.disabled?"opacity-60 cursor-not-allowed":""}`,style:{boxShadow:i?"0 10px 25px rgba(255, 215, 0, 0.08)":"0 10px 25px rgba(0,0,0,0.08)"},children:[(0,as.jsx)("div",{className:"absolute -top-1 left-4 right-4 h-2 rounded-b-full "+(i?"bg-yellow-700/40":"bg-yellow-300/70")}),(0,as.jsxs)("div",{className:"flex items-center gap-3 sm:gap-4 mb-3 sm:mb-4",children:[(0,as.jsx)("div",{className:`${i?"bg-yellow-700/30":"bg-yellow-500/20"} rounded-xl p-2 sm:p-3 flex items-center justify-center ring-2 ${i?"ring-yellow-700/50":"ring-yellow-300/70"}`,children:e.icon}),(0,as.jsx)(po,{type:"h2",fontSize:"xl",sm:"2xl",weight:"bold",className:(i?"text-yellow-200":"text-gray-800")+" tracking-wide",children:e.title})]}),(0,as.jsx)("p",{className:(i?"text-gray-300":"text-gray-700")+" text-xs sm:text-sm mb-4 sm:mb-6 leading-relaxed max-w-md",children:e.desc}),(0,as.jsx)("div",{className:"mt-auto",children:(0,as.jsx)(bs,{variant:"link",size:"sm",onClick:e.onClick,className:(i?"text-yellow-300":"text-yellow-800")+" !px-0 hover:underline",disabled:e.disabled,children:e.button})}),(0,as.jsx)("div",{className:"absolute top-2 right-2 text-yellow-500/70",children:"\u2693"}),(0,as.jsx)("div",{className:"absolute bottom-2 left-2 text-yellow-500/70",children:"\ud83e\udded"})]},e.title))),(0,as.jsxs)("div",{className:"col-span-1 md:col-span-2 rounded-2xl shadow-2xl p-4 sm:p-6 lg:p-8 border-2 backdrop-blur-sm mt-2 relative transition-all duration-300 "+(i?"bg-[#0b1022]/85 border-yellow-700/40":"bg-[#f5ecd2] border-yellow-300"),style:{boxShadow:i?"0 10px 25px rgba(255, 215, 0, 0.08)":"0 10px 25px rgba(0,0,0,0.08)"},children:[(0,as.jsx)("div",{className:"flex items-center justify-between gap-3 mb-4 sm:mb-6",children:(0,as.jsxs)("div",{className:"flex items-center gap-3 sm:gap-4",children:[(0,as.jsx)("div",{className:`${i?"bg-yellow-700/30":"bg-yellow-500/20"} rounded-xl p-2 sm:p-3 flex items-center justify-center ring-2 ${i?"ring-yellow-700/50":"ring-yellow-300/70"}`,children:(0,as.jsx)(Aa,{className:"text-yellow-500 text-xl sm:text-2xl"})}),(0,as.jsx)(po,{type:"h2",fontSize:"xl",sm:"2xl",weight:"bold",className:(i?"text-yellow-200":"text-gray-800")+" tracking-wide",children:"Developers Crew"})]})}),(0,as.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:u.map(((e,t)=>(0,as.jsxs)("div",{className:"relative rounded-2xl p-4 border-2 shadow-xl transition-all duration-300 hover:scale-[1.02] "+(i?"bg-[#0f1428]/80 border-yellow-700/40":"bg-[#fff6dc] border-yellow-300"),style:{boxShadow:i?"0 8px 18px rgba(255,215,0,0.08)":"0 8px 18px rgba(0,0,0,0.06)"},children:[(0,as.jsx)("div",{className:"absolute -top-1 left-3 right-3 h-2 rounded-b-full "+(i?"bg-yellow-700/40":"bg-yellow-300/70")}),(0,as.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,as.jsxs)("div",{className:"relative",children:[(0,as.jsx)("div",{className:`w-16 h-16 sm:w-20 sm:h-20 rounded-full overflow-hidden ring-4 ${i?"ring-yellow-700/60":"ring-yellow-300"} shadow-lg flex items-center justify-center ${i?"bg-yellow-800/30":"bg-yellow-200"}`,children:(0,as.jsx)("img",{src:e.photo,alt:e.name,className:"w-full h-full object-cover",onError:t=>{var r;console.log("Image failed to load:",e.photo),t.currentTarget.style.display="none";const n=document.createElement("div");n.className="w-full h-full flex items-center justify-center text-2xl text-yellow-600",n.innerHTML="\ud83d\udc64",null===(r=t.currentTarget.parentElement)||void 0===r||r.appendChild(n)},onLoad:()=>console.log("Image loaded successfully:",e.photo)})}),(0,as.jsx)("div",{className:"absolute -inset-1 rounded-full pointer-events-none "+(i?"ring-2 ring-yellow-800/50":"ring-2 ring-yellow-400/60")}),(0,as.jsx)("div",{className:"absolute -right-2 -bottom-2 text-yellow-500",children:"\ud83e\udded"})]}),(0,as.jsxs)("div",{className:"min-w-0",children:[(0,as.jsx)("div",{className:(i?"text-yellow-200":"text-gray-800")+" font-bold text-base sm:text-lg truncate",children:e.name}),(0,as.jsx)("div",{className:(i?"text-yellow-300/80":"text-yellow-700")+" text-xs sm:text-sm",children:e.role})]})]}),(0,as.jsxs)("div",{className:"rounded-xl p-3 border flex items-center gap-2 flex-wrap "+(i?"bg-[#0b1022]/70 border-yellow-700/40":"bg-[#fdf2cf] border-yellow-300"),children:[(0,as.jsx)("span",{className:(i?"text-yellow-300":"text-yellow-800")+" text-lg",children:e.icon}),e.skills.map(((e,t)=>(0,as.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-semibold "+(i?"bg-yellow-700/30 text-yellow-200":"bg-yellow-200 text-yellow-800"),children:e},e+t)))]}),(0,as.jsx)("div",{className:"absolute top-2 right-2 text-yellow-500/70 text-sm",children:"\u2693"}),(0,as.jsx)("div",{className:"absolute bottom-2 left-2 text-yellow-500/70 text-sm",children:"\ud83e\udded"})]},e.name+t)))})]})]})]})},Dv=()=>{const{currentUser:e}=is(),{darkMode:t,toggleTheme:r,isInitialized:n,getCurrentTheme:s}=ds();if(!n)return null;const a=s();return(0,as.jsx)("button",{className:`fixed ${e?"top-4 right-16":"top-20 right-4"} z-50 px-4 py-2 rounded bg-gray-200 dark:bg-gray-800 text-gray-800 dark:text-gray-200 shadow-md md:top-4 md:right-4 transition-all duration-200 hover:bg-gray-300 dark:hover:bg-gray-700`,onClick:r,"aria-label":"Toggle dark mode",children:a?"\ud83c\udf19 Dark":"\u2600\ufe0f Light"})},Fv=(0,n.memo)(Dv),Bv=()=>{const[e,t]=(0,n.useState)(!1),[r,s]=(0,n.useState)({name:"",email:"",subject:"",message:""}),[a,o]=(0,n.useState)(""),[i,l]=(0,n.useState)(""),{currentUser:c}=is(),{darkMode:d}=ds(),u=e=>{const{name:t,value:r}=e.target;s((e=>({...e,[t]:r})))},h=[{icon:(0,as.jsx)(Aa,{className:"text-4xl text-yellow-600"}),title:"About MathQuest",content:"MathQuest is a pirate-themed educational adventure designed specifically for Grade 4 students to master their multiplication skills. Our platform combines nautical adventures, treasure hunts, and real-time feedback to make learning multiplication an exciting journey across the seven seas!"},{icon:(0,as.jsx)(ha,{className:"text-4xl text-yellow-600"}),title:"Pirate Adventures & Quests",content:"\u2022 Interactive treasure hunts with challenges and rewards\n\u2022 Captain's leaderboards to encourage friendly competition\n\u2022 Achievement badges and progress tracking\n\u2022 Adaptive difficulty levels based on performance\n\u2022 Real-time feedback for immediate learning reinforcement"},{icon:(0,as.jsx)(ia,{className:"text-4xl text-yellow-600"}),title:"Adaptive Learning Compass",content:"Our platform automatically adjusts the difficulty of quests based on each student's performance. This ensures that every young pirate gets a personalized learning experience that matches their current skill level and helps them navigate the seas of knowledge at their own pace."},{icon:(0,as.jsx)(Da,{className:"text-4xl text-yellow-600"}),title:"Captain's Dashboard",content:"Teachers can:\n\u2022 Monitor crew progress in real-time\n\u2022 Create and assign custom treasure hunts\n\u2022 Generate detailed performance reports\n\u2022 Track engagement and completion rates\n\u2022 Analyze learning patterns and identify areas for improvement"},{icon:(0,as.jsx)(Vs,{className:"text-4xl text-yellow-600"}),title:"Fleet Management",content:"\u2022 Create and manage virtual ships (classrooms)\n\u2022 Add crew members with unique boarding codes\n\u2022 Organize scrolls (lessons) and quests (activities)\n\u2022 Track individual and fleet-wide progress\n\u2022 Generate comprehensive reports for parents and administrators"},{icon:(0,as.jsx)(sa,{className:"text-4xl text-yellow-600"}),title:"Ship Systems",content:"\u2022 Secure authentication and data protection\n\u2022 Cross-platform compatibility (desktop and mobile)\n\u2022 99% system uptime for reliable learning\n\u2022 Support for 100+ simultaneous users\n\u2022 Fast loading times (under 10 seconds)"}];return(0,as.jsx)("div",{className:"px-4 sm:px-6 lg:py-8 min-h-screen",style:{backgroundImage:d?"linear-gradient(180deg, rgba(2,6,23,1) 0%, rgba(3,7,18,1) 100%)":"linear-gradient(135deg, #fef3c7 0%, #fde68a 50%, #f59e0b 100%)",backgroundSize:"cover",backgroundRepeat:"no-repeat"},children:(0,as.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,as.jsxs)("div",{className:"text-center mb-8",children:[(0,as.jsxs)("div",{className:"flex items-center justify-center gap-3 mb-4",children:[(0,as.jsx)(ia,{className:(d?"text-yellow-400":"text-yellow-700")+" text-2xl"}),(0,as.jsx)(po,{type:"h1",fontSize:"5xl",weight:"bold",className:(d?"text-yellow-200":"text-blue-800")+" tracking-wide",children:"Captain's Log & Support"}),(0,as.jsx)(Oa,{className:(d?"text-yellow-400":"text-yellow-700")+" text-2xl"})]}),(0,as.jsx)("div",{className:"h-[1px] w-full mb-8 "+(d?"bg-gradient-to-r from-yellow-500 via-yellow-400 to-yellow-500":"bg-gradient-to-r from-yellow-600 via-yellow-500 to-yellow-600")})]}),(0,as.jsx)("div",{className:"text-center mb-12",children:(0,as.jsxs)(bs,{onClick:()=>t(!0),rounded:"full",size:"sm",className:"transition-all duration-300 hover:scale-105 "+(d?"bg-yellow-500 hover:bg-yellow-400 text-[#0b1022]":"bg-yellow-600 hover:bg-yellow-500 text-white"),children:[(0,as.jsx)(ua,{className:"text-xl mr-2"}),"Send Message in a Bottle"]})}),(0,as.jsx)("div",{className:"grid md:grid-cols-2 gap-8 mb-12",children:h.map(((e,t)=>(0,as.jsxs)("div",{className:"rounded-2xl shadow-2xl p-6 border-2 backdrop-blur-sm transition-all duration-300 hover:scale-[1.02] "+(d?"bg-[#0b1022]/85 border-yellow-700/40":"bg-[#f5ecd2] border-yellow-300"),style:{boxShadow:d?"0 10px 25px rgba(255, 215, 0, 0.08)":"0 10px 25px rgba(0,0,0,0.08)"},children:[(0,as.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[e.icon,(0,as.jsx)(po,{type:"h3",fontSize:"xl",weight:"bold",className:d?"text-yellow-200":"text-yellow-800",children:e.title})]}),(0,as.jsx)("p",{className:"leading-relaxed whitespace-pre-line "+(d?"text-gray-300":"text-gray-700"),children:e.content})]},t)))}),(0,as.jsxs)("div",{className:"rounded-2xl p-8 mb-12 border-2 backdrop-blur-sm "+(d?"bg-[#0b1022]/85 border-yellow-700/40":"bg-[#f5ecd2] border-yellow-300"),style:{boxShadow:d?"0 10px 25px rgba(255, 215, 0, 0.08)":"0 10px 25px rgba(0,0,0,0.08)"},children:[(0,as.jsxs)("div",{className:"flex items-center justify-center gap-3 mb-8",children:[(0,as.jsx)(aa,{className:d?"text-yellow-400":"text-yellow-600"}),(0,as.jsx)(po,{type:"h2",fontSize:"3xl",weight:"bold",className:d?"text-yellow-200":"text-yellow-800",children:"Treasure Benefits & Impact"}),(0,as.jsx)(aa,{className:d?"text-yellow-400":"text-yellow-600"})]}),(0,as.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[{title:"Enhanced Engagement",description:"Pirate adventures and treasure hunts improve student motivation and participation"},{title:"Personalized Learning",description:"Adapts quests to individual skill levels for optimal learning"},{title:"Real-Time Progress Tracking",description:"Students and captains get detailed insights into learning progress"},{title:"Better Retention",description:"Interactive nautical activities enhance memory and understanding"},{title:"Captain Support",description:"Educators can customize treasure hunts and analyze crew data"}].map(((e,t)=>(0,as.jsxs)("div",{className:"rounded-xl p-6 shadow-md border-2 transition-all duration-300 hover:scale-105 "+(d?"bg-[#0f1428]/80 border-yellow-700/40":"bg-[#fbf4de] border-yellow-300"),children:[(0,as.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,as.jsx)("div",{className:"w-3 h-3 rounded-full "+(d?"bg-yellow-500":"bg-yellow-600")}),(0,as.jsx)(po,{type:"h4",fontSize:"lg",weight:"semibold",className:d?"text-yellow-200":"text-yellow-800",children:e.title})]}),(0,as.jsx)("p",{className:"text-sm "+(d?"text-gray-300":"text-gray-700"),children:e.description})]},t)))})]}),(0,as.jsxs)("div",{className:"rounded-2xl shadow-2xl p-8 mb-12 border-2 backdrop-blur-sm "+(d?"bg-[#0b1022]/85 border-yellow-700/40":"bg-[#f5ecd2] border-yellow-300"),style:{boxShadow:d?"0 10px 25px rgba(255, 215, 0, 0.08)":"0 10px 25px rgba(0,0,0,0.08)"},children:[(0,as.jsxs)("div",{className:"flex items-center justify-center gap-3 mb-8",children:[(0,as.jsx)(ya,{className:d?"text-yellow-400":"text-yellow-600"}),(0,as.jsx)(po,{type:"h2",fontSize:"3xl",weight:"bold",className:d?"text-yellow-200":"text-yellow-800",children:"Who Joins the MathQuest Fleet?"}),(0,as.jsx)(ya,{className:d?"text-yellow-400":"text-yellow-600"})]}),(0,as.jsxs)("div",{className:"grid md:grid-cols-3 gap-8",children:[(0,as.jsxs)("div",{className:"text-center",children:[(0,as.jsx)("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 "+(d?"bg-yellow-500/20":"bg-yellow-600/20"),children:(0,as.jsx)(Aa,{className:"text-2xl "+(d?"text-yellow-400":"text-yellow-600")})}),(0,as.jsx)(po,{type:"h3",fontSize:"lg",weight:"semibold",className:"mb-2 "+(d?"text-yellow-200":"text-yellow-800"),children:"Young Pirates (Grade 4)"}),(0,as.jsx)("p",{className:"text-sm "+(d?"text-gray-300":"text-gray-700"),children:"Primary crew members who need to master their multiplication skills through nautical adventures"})]}),(0,as.jsxs)("div",{className:"text-center",children:[(0,as.jsx)("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 "+(d?"bg-yellow-500/20":"bg-yellow-600/20"),children:(0,as.jsx)(Da,{className:"text-2xl "+(d?"text-yellow-400":"text-yellow-600")})}),(0,as.jsx)(po,{type:"h3",fontSize:"lg",weight:"semibold",className:"mb-2 "+(d?"text-yellow-200":"text-yellow-800"),children:"Captains (Teachers)"}),(0,as.jsx)("p",{className:"text-sm "+(d?"text-gray-300":"text-gray-700"),children:"Fleet commanders who want to track crew progress and create engaging treasure hunts"})]}),(0,as.jsxs)("div",{className:"text-center",children:[(0,as.jsx)("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 "+(d?"bg-yellow-500/20":"bg-yellow-600/20"),children:(0,as.jsx)(Vs,{className:"text-2xl "+(d?"text-yellow-400":"text-yellow-600")})}),(0,as.jsx)(po,{type:"h3",fontSize:"lg",weight:"semibold",className:"mb-2 "+(d?"text-yellow-200":"text-yellow-800"),children:"Fleet Admirals (Admins)"}),(0,as.jsx)("p",{className:"text-sm "+(d?"text-gray-300":"text-gray-700"),children:"Port authorities who need to monitor fleet operations and manage crew accounts"})]})]})]}),(0,as.jsxs)(lc,{isOpen:e,onClose:()=>{t(!1),o(""),l("")},title:"Send Message in a Bottle",className:"",children:["success"===a&&(0,as.jsxs)("div",{className:"mb-4 p-4 rounded-lg border-2 "+(d?"bg-green-900/30 text-green-300 border-green-700/40":"bg-green-100 text-green-700 border-green-300"),children:[(0,as.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,as.jsx)(Ea,{className:"text-lg"}),(0,as.jsx)("p",{className:"font-semibold",children:"Message sent successfully!"})]}),(0,as.jsxs)("p",{className:"mb-2",children:["Your message bottle number is: ",(0,as.jsx)("span",{className:"font-bold",children:i})]}),(0,as.jsx)("p",{className:"mb-4",children:"We've sent a confirmation message with your bottle details. We'll review your message and get back to you soon."}),(0,as.jsx)(bs,{onClick:()=>{t(!1),o(""),l("")},rounded:"full",size:"sm",className:"bg-green-600 hover:bg-green-700",children:"Close"})]}),"error"===a&&(0,as.jsxs)("div",{className:"mb-4 p-4 rounded-lg border-2 "+(d?"bg-red-900/30 text-red-300 border-red-700/40":"bg-red-100 text-red-700 border-red-300"),children:[(0,as.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,as.jsx)(Oa,{className:"text-lg"}),(0,as.jsx)("p",{children:"Error sending message bottle. Please try again."})]}),(0,as.jsx)(bs,{onClick:()=>o(""),rounded:"full",size:"sm",variant:"cancel",children:"Try Again"})]}),"success"!==a&&(0,as.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=await Xn.post("/api/feedback",{subject:r.subject,info:r.message});o("success"),l(e.data.ticketNumber),s({subject:"",message:""})}catch(t){o("error"),console.error("Error submitting feedback:",t)}},className:"space-y-4",children:[(0,as.jsxs)("div",{className:"flex items-center gap-4",children:[(0,as.jsx)(Mi,{htmlFor:"subject",className:"min-w-20 text-sm font-medium "+(d?"text-yellow-200":"text-yellow-800"),children:"Subject:"}),(0,as.jsx)(Si,{id:"subject",name:"subject",type:"text",value:r.subject,onChange:u,required:!0,variant:"gray",placeholder:"Enter subject",className:"flex-1"})]}),(0,as.jsxs)("div",{className:"flex items-start gap-4",children:[(0,as.jsx)(Mi,{htmlFor:"message",className:"min-w-20 text-sm font-medium pt-2 "+(d?"text-yellow-200":"text-yellow-800"),children:"Message:"}),(0,as.jsx)($l,{id:"message",name:"message",value:r.message,onChange:u,required:!0,placeholder:"Enter your message or feedback",rows:4,className:"px-3 py-2 border bg-white border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary sm:text-sm flex-1 text-gray-700 dark:text-gray-700 min-w-20 text-sm font-medium pt-2"})]}),(0,as.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,as.jsx)(bs,{type:"button",onClick:()=>{t(!1),o(""),l("")},variant:"cancel",rounded:"full",size:"sm",className:"w-full md:w-1/2 lg:w-1/4",children:"Cancel"}),(0,as.jsxs)(bs,{type:"submit",rounded:"full",size:"sm",className:"w-full md:w-1/2 lg:w-1/4 transition-all duration-300 hover:scale-105 "+(d?"bg-yellow-500 hover:bg-yellow-400 text-[#0b1022]":"bg-yellow-600 hover:bg-yellow-500 text-white"),children:[(0,as.jsx)(ua,{className:"mr-2"}),"Send Message"]})]})]})]})]})})},$v=()=>{console.log("=== Authentication Debug ===");const e=localStorage.getItem("token"),t=localStorage.getItem("user");if(console.log("Token exists:",!!e),console.log("User exists:",!!t),e&&console.log("Token (first 20 chars):",e.substring(0,20)+"..."),t)try{const e=JSON.parse(t);console.log("User data:",{id:e.id,username:e.username,email:e.email,roles:e.roles,hasToken:!!e.token})}catch(Ie){console.error("Error parsing user data:",Ie)}return console.log("Testing API call..."),fetch("/api/multiplication-learning/progress",{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}}).then((e=>(console.log("API Response Status:",e.status),console.log("API Response Headers:",Object.fromEntries(e.headers.entries())),e.text()))).then((e=>{console.log("API Response Data:",e)})).catch((e=>{console.error("API Error:",e)}))};window.debugAuth=$v;const Uv=[{key:"zero",title:"Zero Property House",description:"Welcome to the Zero Property House! Here you'll learn the mysterious power of zero.",storyIntro:"Welcome, young mathematician! You've arrived at the Zero Property House, where the mysterious Zero Property awaits. Legend says that anything that touches zero becomes zero itself!",steps:[{type:"story",content:"The House Guardian welcomes you. 'Welcome, brave explorer! Here in the Zero Property House, we have a special rule: anything multiplied by zero becomes zero. It's like magic!'",title:"The Legend of Zero House"},{type:"lesson",content:"The Zero Property of Multiplication states that any number multiplied by zero equals zero. This is written as: a \xd7 0 = 0, where 'a' can be any number.",title:"Understanding the Zero Property",examples:["5 \xd7 0 = 0","12 \xd7 0 = 0","100 \xd7 0 = 0","0.5 \xd7 0 = 0"]},{type:"explanation",content:"Think of it this way: if you have 5 groups of nothing (0), you still have nothing! Or if you have 0 groups of 5, you still have nothing. Zero is like a magic eraser that makes everything disappear!",title:"Why Does This Work?",visualExample:"Imagine 5 empty boxes: [ ] [ ] [ ] [ ] [ ] - each box has 0 items, so total = 0"},{type:"trivia",content:"Did you know? The concept of zero was first developed in ancient India around 500 CE. Before zero, people had a very hard time doing calculations!",title:"Historical Trivia"},{type:"quiz",content:{question:"What is 7 \xd7 0?",answer:"0",explanation:"Any number times zero equals zero!"},title:"Quiz 1: Basic Zero Property"},{type:"quiz",content:{question:"What is 0 \xd7 15?",answer:"0",explanation:"Zero times any number also equals zero!"},title:"Quiz 2: Zero First"},{type:"quiz",content:{question:"What is 23 \xd7 0?",answer:"0",explanation:"Even big numbers become zero when multiplied by zero!"},title:"Quiz 3: Big Numbers"},{type:"challenge",content:"Solve this word problem: If you have 8 baskets and each basket has 0 apples, how many apples do you have total?",answer:"0",explanation:"8 baskets \xd7 0 apples = 0 apples total"}],badge:"Zero Hero!",unlocked:!0,image:"/images/game-images/house.png",style:"left-[10%] top-[50%]",icon:Aa},{key:"identity",title:"Identity River",description:"Cross the Identity River where numbers stay true to themselves.",storyIntro:"You've reached the mighty Identity River! Here, numbers have a special power - they stay exactly who they are when multiplied by one.",steps:[{type:"story",content:"The River Guardian appears. 'Welcome to Identity River! Here, the number 1 is like a mirror - it shows numbers exactly as they are. Nothing changes when you multiply by 1!'",title:"The River Guardian's Tale"},{type:"lesson",content:"The Identity Property of Multiplication states that any number multiplied by one equals the original number. This is written as: a \xd7 1 = a, where 'a' can be any number.",title:"Understanding the Identity Property",examples:["9 \xd7 1 = 9","25 \xd7 1 = 25","100 \xd7 1 = 100","0.7 \xd7 1 = 0.7"]},{type:"explanation",content:"Think of it like this: if you have 1 group of 9 items, you have 9 items. The number 1 is called the 'multiplicative identity' because it doesn't change the identity of other numbers.",title:"Why Does This Work?",visualExample:"1 group of 9 stars: \u2605\u2605\u2605\u2605\u2605\u2605\u2605\u2605\u2605 = 9 stars"},{type:"trivia",content:"The number 1 is called the 'multiplicative identity' in mathematics. Just like how 0 is the additive identity (a + 0 = a), 1 is the multiplicative identity!",title:"Mathematical Trivia"},{type:"quiz",content:{question:"What is 12 \xd7 1?",answer:"12",explanation:"Any number times 1 equals the number itself!"},title:"Quiz 1: Basic Identity"},{type:"quiz",content:{question:"What is 1 \xd7 18?",answer:"18",explanation:"1 times any number equals the number itself!"},title:"Quiz 2: One First"},{type:"quiz",content:{question:"What is 45 \xd7 1?",answer:"45",explanation:"Even large numbers stay the same when multiplied by 1!"},title:"Quiz 3: Large Numbers"},{type:"challenge",content:"Solve this word problem: If you have 1 box containing 7 marbles, how many marbles do you have?",answer:"7",explanation:"1 box \xd7 7 marbles = 7 marbles total"}],badge:"Identity Ace!",unlocked:!1,image:"/images/game-images/river.png",style:"left-[30%] top-[70%]",icon:$a},{key:"commutative",title:"Commutative Mountains",description:"Climb the Commutative Mountains where order doesn't matter!",storyIntro:"Welcome to the Commutative Mountains! Here, you'll learn that the order of numbers doesn't matter in multiplication - you can swap them around and get the same result!",steps:[{type:"story",content:"The Mountain Sage greets you. 'Ah, young adventurer! In these mountains, we have a special rule: you can swap numbers around and still get the same answer. It's like having two different paths to the same treasure!'",title:"The Mountain Sage's Wisdom"},{type:"lesson",content:"The Commutative Property of Multiplication states that changing the order of factors doesn't change the product. This is written as: a \xd7 b = b \xd7 a.",title:"Understanding the Commutative Property",examples:["3 \xd7 4 = 12 and 4 \xd7 3 = 12","6 \xd7 2 = 12 and 2 \xd7 6 = 12","5 \xd7 7 = 35 and 7 \xd7 5 = 35","8 \xd7 9 = 72 and 9 \xd7 8 = 72"]},{type:"explanation",content:"Think of it like arranging objects: 3 rows of 4 objects is the same as 4 rows of 3 objects. Both give you 12 objects total! This property makes multiplication much easier.",title:"Why Does This Work?",visualExample:"3\xd74: \u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588 = 12 squares\n4\xd73: \u2588\u2588\u2588 \u2588\u2588\u2588 \u2588\u2588\u2588 \u2588\u2588\u2588 = 12 squares"},{type:"trivia",content:"The word 'commutative' comes from the Latin word 'commutare' which means 'to change' or 'to exchange'. It describes how we can change the order without changing the result!",title:"Etymology Trivia"},{type:"quiz",content:{question:"What is 2 \xd7 5? What is 5 \xd7 2? (comma separated)",answer:"10,10",explanation:"Both give the same result: 10!"},title:"Quiz 1: Basic Commutative"},{type:"quiz",content:{question:"What is 7 \xd7 3? What is 3 \xd7 7? (comma separated)",answer:"21,21",explanation:"Both equal 21 - order doesn't matter!"},title:"Quiz 2: Larger Numbers"},{type:"quiz",content:{question:"What is 4 \xd7 6? What is 6 \xd7 4? (comma separated)",answer:"24,24",explanation:"Both equal 24 - commutative property works!"},title:"Quiz 3: Practice"},{type:"challenge",content:"Word problem: If you have 5 bags with 3 apples each, or 3 bags with 5 apples each, which gives you more apples?",answer:"15",explanation:"5\xd73=15 and 3\xd75=15 - they're equal!"}],badge:"Commutative Champ!",unlocked:!1,image:"/images/game-images/mountains.png",style:"left-[45%] top-[25%]",icon:function(e){return Es({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M634.92 462.7l-288-448C341.03 5.54 330.89 0 320 0s-21.03 5.54-26.92 14.7l-288 448a32.001 32.001 0 0 0-1.17 32.64A32.004 32.004 0 0 0 32 512h576c11.71 0 22.48-6.39 28.09-16.67a31.983 31.983 0 0 0-1.17-32.63zM320 91.18L405.39 224H320l-64 64-38.06-38.06L320 91.18z"},child:[]}]})(e)}},{key:"associative",title:"Associative Underwater Cave",description:"Dive into the Associative Cave where grouping doesn't matter!",storyIntro:"You've discovered the mysterious Associative Underwater Cave! Here, you'll learn that how you group numbers doesn't affect the final result.",steps:[{type:"story",content:"The Cave Guardian emerges from the depths. 'Welcome to the Associative Cave! Here, we have a special power: you can group numbers however you want, and the result stays the same!'",title:"The Cave Guardian's Secret"},{type:"lesson",content:"The Associative Property of Multiplication states that when multiplying three or more numbers, the way you group them doesn't change the result. This is written as: (a \xd7 b) \xd7 c = a \xd7 (b \xd7 c).",title:"Understanding the Associative Property",examples:["(2 \xd7 3) \xd7 4 = 6 \xd7 4 = 24 and 2 \xd7 (3 \xd7 4) = 2 \xd7 12 = 24","(5 \xd7 2) \xd7 3 = 10 \xd7 3 = 30 and 5 \xd7 (2 \xd7 3) = 5 \xd7 6 = 30","(4 \xd7 1) \xd7 7 = 4 \xd7 7 = 28 and 4 \xd7 (1 \xd7 7) = 4 \xd7 7 = 28"]},{type:"explanation",content:"Think of it like building blocks: whether you group (2\xd73) first then multiply by 4, or group (3\xd74) first then multiply by 2, you get the same final result!",title:"Why Does This Work?",visualExample:"(2\xd73)\xd74: \u2588\u2588 \u2588\u2588 \u2588\u2588 \xd7 4 = 24\n2\xd7(3\xd74): 2 \xd7 \u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588 \u2588\u2588\u2588\u2588 = 24"},{type:"trivia",content:"The word 'associative' comes from 'associate' which means 'to group together'. This property is very useful for mental math - you can group numbers in ways that are easier to calculate!",title:"Mental Math Trivia"},{type:"quiz",content:{question:"What is (1 \xd7 2) \xd7 3? What is 1 \xd7 (2 \xd7 3)? (comma separated)",answer:"6,6",explanation:"Both equal 6 - grouping doesn't matter!"},title:"Quiz 1: Basic Associative"},{type:"quiz",content:{question:"What is (3 \xd7 2) \xd7 4? What is 3 \xd7 (2 \xd7 4)? (comma separated)",answer:"24,24",explanation:"Both equal 24 - associative property works!"},title:"Quiz 2: Larger Numbers"},{type:"quiz",content:{question:"What is (5 \xd7 1) \xd7 6? What is 5 \xd7 (1 \xd7 6)? (comma separated)",answer:"30,30",explanation:"Both equal 30 - grouping is flexible!"},title:"Quiz 3: Practice"},{type:"challenge",content:"Mental math: calculate (12 \xd7 8) \xd7 15  ?",answer:"1440",explanation:"12 \xd7 8) \xd7 15 First, 12 \xd7 8 = 96 Then, 96 \xd7 15 = 1,440 12 \xd7 (8 \xd7 15) First, 8 \xd7 15 = 120 Then, 12 \xd7 120 = 1,440"}],badge:"Associative Adventurer!",unlocked:!1,image:"/images/game-images/underwater.png",style:"left-[60%] top-[55%]",icon:$a},{key:"distributive",title:"Distributive Treasure Cave",description:"Explore the Distributive Treasure Cave where multiplication spreads out!",storyIntro:"You've reached the legendary Distributive Treasure Cave! Here, you'll learn how multiplication can be distributed over addition - a powerful tool for breaking down complex problems!",steps:[{type:"story",content:"The Treasure Guardian emerges from the cave. 'Welcome to the Distributive Treasure Cave! Here, multiplication has a special power - it can spread out over addition like treasure scattered across the cave floor!'",title:"The Treasure Guardian's Lesson"},{type:"lesson",content:"The Distributive Property of Multiplication over Addition states that a \xd7 (b + c) = (a \xd7 b) + (a \xd7 c). This means you can multiply each part separately, then add the results.",title:"Understanding the Distributive Property",examples:["2 \xd7 (3 + 4) = 2 \xd7 7 = 14 and (2 \xd7 3) + (2 \xd7 4) = 6 + 8 = 14","3 \xd7 (2 + 5) = 3 \xd7 7 = 21 and (3 \xd7 2) + (3 \xd7 5) = 6 + 15 = 21","4 \xd7 (1 + 6) = 4 \xd7 7 = 28 and (4 \xd7 1) + (4 \xd7 6) = 4 + 24 = 28"]},{type:"explanation",content:"Think of it like sharing treasure: if you have 2 treasure chests and each chest contains 3 gold coins plus 4 silver coins, you can either: 1) Count total coins in each chest first, or 2) Count all gold coins, then all silver coins, then add them up.",title:"Why Does This Work?",visualExample:"2\xd7(3+4): 2 chests of (\ud83d\udcb0\ud83d\udcb0\ud83d\udcb0+\ud83e\ude99\ud83e\ude99\ud83e\ude99\ud83e\ude99) = 2\xd77 = 14\n(2\xd73)+(2\xd74): (\ud83d\udcb0\ud83d\udcb0\ud83d\udcb0\ud83d\udcb0\ud83d\udcb0\ud83d\udcb0) + (\ud83e\ude99\ud83e\ude99\ud83e\ude99\ud83e\ude99\ud83e\ude99\ud83e\ude99\ud83e\ude99\ud83e\ude99) = 6+8 = 14"},{type:"trivia",content:"The distributive property is one of the most important properties in algebra! It's what allows us to expand expressions like 2(x + 3) = 2x + 6. This property is used in almost every area of mathematics!",title:"Algebra Trivia"},{type:"quiz",content:{question:"What is 3 \xd7 (2 + 5)?",answer:"21",explanation:"3 \xd7 (2 + 5) = 3 \xd7 7 = 21"},title:"Quiz 1: Basic Distributive"},{type:"quiz",content:{question:"What is (4 \xd7 3) + (4 \xd7 2)?",answer:"20",explanation:"(4 \xd7 3) + (4 \xd7 2) = 12 + 8 = 20"},title:"Quiz 2: Expanded Form"},{type:"quiz",content:{question:"What is 5 \xd7 (1 + 4)?",answer:"25",explanation:"5 \xd7 (1 + 4) = 5 \xd7 5 = 25"},title:"Quiz 3: Practice"},{type:"challenge",content:"Word problem: If you have 3 treasure chests, and each chest contains 2 gold coins and 3 silver coins, how many coins do you have total?",answer:"15",explanation:"3 \xd7 (2 + 3) = 3 \xd7 5 = 15 coins"},{type:"celebration",content:"\ud83c\udfc6 Congratulations! You've mastered all 5 properties of multiplication! \ud83c\udfc6\n\nYou are now a Multiplication Properties Master!\n\nYou can:\n\u2022 Use zero property to quickly solve problems with zero\n\u2022 Use identity property to understand why \xd71 doesn't change numbers\n\u2022 Use commutative property to rearrange multiplication problems\n\u2022 Use associative property to group numbers for easier mental math\n\u2022 Use distributive property to break down complex problems",title:"Master of All Properties!"}],badge:"Distributive Master!",unlocked:!1,image:"/images/game-images/treasure.png",style:"left-[80%] top-[20%]",icon:function(e){return Es({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M485.5 0L576 160H474.9L405.7 0h79.8zm-128 0l69.2 160H149.3L218.5 0h139zm-267 0h79.8l-69.2 160H0L90.5 0zM0 192h100.7l123 251.7c1.5 3.1-2.7 5.9-5 3.3L0 192zm148.2 0h279.6l-137 318.2c-1 2.4-4.5 2.4-5.5 0L148.2 192zm204.1 251.7l123-251.7H576L357.3 446.9c-2.3 2.7-6.5-.1-5-3.2z"},child:[]}]})(e)}}],Hv=[{left:10,top:50},{left:30,top:70},{left:45,top:25},{left:60,top:55},{left:80,top:20}],Wv=(e,t,r)=>e.map((e=>`${e.left/100*t},${e.top/100*r}`)).join(" "),Qv=()=>{var e,t,r,s,a,o,i,l,c,d,u,h,m,f,p,g,x,b,y,v,w,j,N;const[k,S]=(0,n.useState)([!1,!1,!1,!1,!1]),[C,_]=(0,n.useState)(0),[E,A]=(0,n.useState)(!1),[O,T]=(0,n.useState)(null),[z,P]=(0,n.useState)(0),[I,L]=(0,n.useState)(""),[M,q]=(0,n.useState)(""),[R,D]=(0,n.useState)({width:1e3,height:400}),[F,B]=(0,n.useState)(!1),[$,U]=(0,n.useState)(!0),[H,W]=(0,n.useState)(!1),[Q,V]=(0,n.useState)(!0),G=n.useRef(null),{currentUser:K,multiplicationProgress:Y,loadMultiplicationProgress:Z,saveMultiplicationProgress:J,completeMultiplicationProperty:X,saveMultiplicationQuizAttempt:ee}=is(),{darkMode:te,isInitialized:re}=ds();n.useEffect((()=>{const e=document.createElement("style");return e.textContent="\n      @keyframes dash {\n        to {\n          stroke-dashoffset: -100;\n        }\n      }\n    ",document.head.appendChild(e),()=>document.head.removeChild(e)}),[]),n.useEffect((()=>{const e=()=>{G.current&&D({width:G.current.offsetWidth,height:G.current.offsetHeight})},t=setTimeout(e,100);return window.addEventListener("resize",e),()=>{clearTimeout(t),window.removeEventListener("resize",e)}}),[]),n.useEffect((()=>{if(!$&&G.current){setTimeout((()=>{G.current&&D({width:G.current.offsetWidth,height:G.current.offsetHeight})}),200)}}),[$]),(0,n.useEffect)((()=>{(async()=>{if(K){console.log("Current user:",K),console.log("Token exists:",localStorage.getItem("token"));try{U(!0);const e=await Z();if(console.log("Loaded progress from backend:",e),e){const t=5;let r=Array(t).fill(!1);if(e.completedProperties){let n=e.completedProperties;try{"string"===typeof n&&(n=JSON.parse(n))}catch(Ie){console.error("Error parsing completedProperties:",Ie)}if(Array.isArray(n))if(n.every((e=>"number"===typeof e)))n.forEach((e=>{e>=0&&e<t&&(r[e]=!0)}));else if(n.every((e=>"boolean"===typeof e)))for(r=n.slice(0,t);r.length<t;)r.push(!1)}const n="number"===typeof e.activePropertyIndex?e.activePropertyIndex:0;S(r),_(n)}}catch(e){console.log("Error loading progress"),V(!1),S([!1,!1,!1,!1,!1]),_(0)}finally{U(!1)}}})()}),[K]),n.useEffect((()=>{window.debugAuth=$v,console.log("Auth debug function available as window.debugAuth()")}),[]),(0,n.useEffect)((()=>{if(console.log("Effect triggered:",{completed:k,active:C,currentUser:K,loading:$,backendAvailable:Q}),!K||$)return;const e=setTimeout((async()=>{try{W(!0);const e=k.map(((e,t)=>e?t:null)).filter((e=>null!==e));console.log("Effect triggered again:",{completed:k,active:C,currentUser:K,loading:$,backendAvailable:Q});const t={completedProperties:e,activePropertyIndex:C,totalPropertiesCompleted:e.length};console.log("Saving progress to backend:",t);const r=await J(t);console.log("Progress saved successfully:",r)}catch(e){console.error("Error saving progress:",e),V(!1)}finally{W(!1)}}),500);return()=>clearTimeout(e)}),[k,C,K,$,Q]);const ne=e=>{console.log("handleComplete called with idx:",e);const t=[...k];t[e]=!0;let r=C;e+1<5&&(r=e+1),S(t),_(r),A(!1),T(null),P(0),L(""),q(""),B(!1)},se=async e=>{if(e.preventDefault(),null===O||!Uv[O]||!Uv[O].steps||!Uv[O].steps[z])return void console.error("Invalid state: missing property or step data");const t=Uv[O].steps[z];let r=!1;if("quiz"===t.type&&t.content&&t.content.answer?r=I.trim().replace(/\s+/g,"").toLowerCase()===t.content.answer.replace(/\s+/g,"").toLowerCase():"challenge"===t.type&&t.answer&&(r=I.trim().replace(/\s+/g,"").toLowerCase()===t.answer.replace(/\s+/g,"").toLowerCase()),Q)try{const e={question:"quiz"===t.type?t.content.question:t.content,userAnswer:I.trim(),correctAnswer:"quiz"===t.type?t.content.answer:t.answer,isCorrect:r,stepType:t.type,stepTitle:t.title};console.log("Saving quiz attempt:",O,z,e);const n=await ee(O,z,e);console.log("Quiz attempt saved successfully:",n)}catch(n){console.error("Error saving quiz attempt:",n),V(!1)}r?(q("Correct! \ud83c\udf89"),setTimeout((()=>{q(""),L(""),z===Uv[O].steps.length-1?ne(O):P(z+1)}),1500)):q("Try again!")};return $?(0,as.jsx)("div",{className:"min-h-screen transition-colors duration-300 "+(te?"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900":"bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50"),children:(0,as.jsx)("div",{className:"px-4 sm:px-6 lg:px-8 py-8",children:(0,as.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,as.jsx)("div",{className:"flex items-center justify-center min-h-[60vh]",children:(0,as.jsxs)("div",{className:"flex flex-col items-center gap-6",children:[(0,as.jsxs)("div",{className:"relative",children:[(0,as.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 "+(te?"border-gray-700 border-t-blue-400":"border-blue-200 border-t-blue-600")}),(0,as.jsx)("div",{className:"absolute inset-0 rounded-full border-4 border-transparent animate-spin "+(te?"border-t-blue-500":"border-t-blue-400"),style:{animationDirection:"reverse",animationDuration:"1.5s"}})]}),(0,as.jsxs)("div",{className:"text-center",children:[(0,as.jsx)("h3",{className:"text-xl font-semibold mb-2 transition-colors duration-300 "+(te?"text-white":"text-gray-800"),children:"Loading Your Adventure"}),(0,as.jsx)("p",{className:"transition-colors duration-300 "+(te?"text-gray-300":"text-gray-600"),children:"Preparing your multiplication journey..."})]})]})})})})}):(0,as.jsx)("div",{className:"min-h-screen transition-colors duration-300 "+(te?"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900":"bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50"),children:(0,as.jsx)("div",{className:"px-4 sm:px-6 lg:px-8 py-8",children:(0,as.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,as.jsx)("div",{className:"relative mb-8",children:(0,as.jsx)("div",{className:"backdrop-blur-sm rounded-2xl shadow-xl border p-6 sm:p-8 transition-colors duration-300 "+(te?"bg-gray-800/80 border-gray-700/20":"bg-white/80 border-white/20"),children:(0,as.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[(0,as.jsx)("div",{className:"flex-1",children:(0,as.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,as.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center shadow-lg",children:(0,as.jsx)(ya,{className:"text-white text-xl"})}),(0,as.jsxs)("div",{children:[(0,as.jsx)(po,{type:"h1",fontSize:"4xl",weight:"bold",className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600",children:"Learning Multiplication: Treasure Hunt"}),(0,as.jsx)("p",{className:"text-sm mt-1 transition-colors duration-300 "+(te?"text-gray-300":"text-gray-600"),children:"Master the properties of multiplication through an epic adventure!"})]})]})}),(0,as.jsx)("div",{className:"flex flex-col sm:flex-row items-end sm:items-center gap-3",children:H&&(0,as.jsxs)("div",{className:"flex items-center gap-2 text-sm px-4 py-2 rounded-full shadow-sm transition-colors duration-300 "+(te?"text-blue-300 bg-blue-900/30 border border-blue-700/50":"text-blue-700 bg-blue-100 border border-blue-200"),children:[(0,as.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 "+(te?"border-blue-700 border-t-blue-400":"border-blue-200 border-t-blue-600")}),(0,as.jsx)("span",{className:"font-medium",children:"Saving progress..."})]})})]})})}),(0,as.jsx)("div",{className:"mb-8",children:(0,as.jsxs)("div",{className:"backdrop-blur-sm rounded-2xl shadow-xl border p-6 sm:p-8 transition-colors duration-300 "+(te?"bg-gray-800/90 border-gray-700/20":"bg-white/90 border-white/20"),children:[(0,as.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6",children:[(0,as.jsxs)("div",{className:"flex items-center gap-3 mb-3 sm:mb-0",children:[(0,as.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-xl flex items-center justify-center shadow-lg",children:(0,as.jsx)(va,{className:"text-white text-lg"})}),(0,as.jsxs)("div",{children:[(0,as.jsx)("h2",{className:"text-xl font-bold transition-colors duration-300 "+(te?"text-white":"text-gray-800"),children:"Multiplication Properties Badges"}),(0,as.jsx)("p",{className:"text-sm transition-colors duration-300 "+(te?"text-gray-300":"text-gray-600"),children:"Collect all badges to become a multiplication master!"})]})]}),(0,as.jsxs)("div",{className:"flex items-center gap-2",children:[(0,as.jsxs)("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white px-4 py-2 rounded-full shadow-lg",children:[(0,as.jsx)("span",{className:"font-bold text-lg",children:k.filter(Boolean).length}),(0,as.jsx)("span",{className:"text-sm opacity-90",children:"/5"})]}),(0,as.jsx)("span",{className:"text-sm font-medium transition-colors duration-300 "+(te?"text-gray-400":"text-gray-500"),children:"Completed"})]})]}),(0,as.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4",children:Uv.slice(0,5).map(((e,t)=>(0,as.jsxs)("div",{className:"group relative overflow-hidden rounded-2xl p-4 transition-all duration-300 transform hover:scale-105 hover:shadow-xl "+(k[t]?te?"bg-gradient-to-br from-yellow-900/30 to-orange-900/30 border-2 border-yellow-700/50 shadow-lg":"bg-gradient-to-br from-yellow-50 to-orange-50 border-2 border-yellow-200 shadow-lg":te?"bg-gray-700/50 border-2 border-gray-600 hover:border-gray-500":"bg-gray-50 border-2 border-gray-200 hover:border-gray-300"),children:[(0,as.jsx)("div",{className:"flex justify-center mb-3",children:(0,as.jsx)("div",{className:"w-16 h-16 rounded-full flex items-center justify-center transition-all duration-300 shadow-lg "+(k[t]?"bg-gradient-to-br from-yellow-400 to-yellow-600 group-hover:from-yellow-500 group-hover:to-yellow-700":te?"bg-gray-600 group-hover:bg-gray-500":"bg-gray-200 group-hover:bg-gray-300"),children:k[t]?(0,as.jsx)(va,{className:"text-white text-2xl animate-pulse"}):(0,as.jsx)(xa,{className:"text-xl "+(te?"text-gray-400":"text-gray-500")})})}),(0,as.jsxs)("div",{className:"text-center",children:[(0,as.jsx)("span",{className:"text-sm font-bold text-center block mb-1 transition-colors duration-300 "+(k[t]?te?"text-yellow-300":"text-yellow-800":te?"text-gray-300":"text-gray-600"),children:e.badge}),(0,as.jsx)("span",{className:"text-xs text-center px-2 py-1 rounded-full font-medium transition-colors duration-300 "+(k[t]?te?"bg-green-900/50 text-green-300":"bg-green-100 text-green-700":te?"bg-gray-600 text-gray-400":"bg-gray-200 text-gray-500"),children:k[t]?"\u2713 Achieved":"Locked"})]}),k[t]&&(0,as.jsx)("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-300 "+(te?"bg-gradient-to-br from-yellow-400/20 to-orange-500/20":"bg-gradient-to-br from-yellow-400/10 to-orange-500/10")})]},e.key)))}),(0,as.jsxs)("div",{className:"mt-6",children:[(0,as.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,as.jsx)("span",{className:"text-sm font-medium transition-colors duration-300 "+(te?"text-gray-300":"text-gray-700"),children:"Overall Progress"}),(0,as.jsxs)("span",{className:"text-sm font-bold transition-colors duration-300 "+(te?"text-white":"text-gray-800"),children:[Math.round(k.filter(Boolean).length/5*100),"%"]})]}),(0,as.jsx)("div",{className:"w-full rounded-full h-3 overflow-hidden transition-colors duration-300 "+(te?"bg-gray-700":"bg-gray-200"),children:(0,as.jsx)("div",{className:"h-full bg-gradient-to-r from-blue-500 to-purple-600 rounded-full transition-all duration-500 ease-out shadow-sm",style:{width:k.filter(Boolean).length/5*100+"%"}})})]})]})}),(0,as.jsx)("div",{className:"relative mb-8",children:(0,as.jsxs)("div",{className:"backdrop-blur-sm rounded-3xl shadow-2xl border p-6 sm:p-8 transition-colors duration-300 "+(te?"bg-gray-800/90 border-gray-700/20":"bg-white/90 border-white/20"),children:[(0,as.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,as.jsxs)("div",{className:"flex items-center gap-3",children:[(0,as.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-yellow-500 to-orange-600 rounded-xl flex items-center justify-center shadow-lg",children:(0,as.jsx)(ya,{className:"text-white text-lg"})}),(0,as.jsxs)("div",{children:[(0,as.jsx)("h2",{className:"text-xl font-bold transition-colors duration-300 "+(te?"text-white":"text-gray-800"),children:"Treasure Map"}),(0,as.jsx)("p",{className:"text-sm transition-colors duration-300 "+(te?"text-gray-300":"text-gray-600"),children:"Follow the path to discover all multiplication properties!"})]})]})}),(0,as.jsxs)("div",{className:"relative w-full h-[55vw] min-h-[260px] sm:min-h-[360px] md:min-h-[460px] lg:min-h-[560px] xl:min-h-[640px] max-h-[760px]",ref:G,children:[(0,as.jsxs)("div",{className:"relative w-full h-full rounded-2xl overflow-hidden shadow-2xl border-4 transition-colors duration-300 "+(te?"border-yellow-600 bg-gradient-to-br from-gray-800 to-gray-900":"border-yellow-300 bg-gradient-to-br from-yellow-50 to-orange-50"),children:[(0,as.jsx)("img",{src:"/images/game-images/map.png",alt:"Treasure Map",className:"w-full h-full object-cover transition-all duration-300 hover:scale-105 "+(te?"brightness-75 contrast-110":"")}),(0,as.jsx)("div",{className:"absolute inset-0 pointer-events-none transition-colors duration-300 "+(te?"bg-gradient-to-br from-yellow-400/20 to-orange-500/20":"bg-gradient-to-br from-yellow-400/10 to-orange-500/10")}),(0,as.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 via-transparent to-transparent pointer-events-none"})]}),(0,as.jsxs)("svg",{className:"absolute top-0 left-0 w-full h-full pointer-events-none z-10",viewBox:`0 0 ${R.width} ${R.height}`,preserveAspectRatio:"none",children:[(0,as.jsx)("defs",{children:(0,as.jsxs)("linearGradient",{id:"pathGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[(0,as.jsx)("stop",{offset:"0%",stopColor:"#3B82F6",stopOpacity:"0.8"}),(0,as.jsx)("stop",{offset:"50%",stopColor:"#8B5CF6",stopOpacity:"0.8"}),(0,as.jsx)("stop",{offset:"100%",stopColor:"#F59E0B",stopOpacity:"0.8"})]})}),(0,as.jsx)("polyline",{points:Wv(Hv,R.width,R.height),fill:"none",stroke:"url(#pathGradient)",strokeWidth:"6",strokeDasharray:"15,10",strokeLinecap:"round",style:{filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.3))",animation:"dash 3s linear infinite"}})]}),Uv.slice(0,5).map(((e,t)=>(0,as.jsx)("button",{className:`absolute ${e.style} z-20 group focus:outline-none focus:ring-4 focus:ring-blue-300 focus:ring-opacity-50 rounded-2xl transition-all duration-300 ${t>C?"cursor-not-allowed":"cursor-pointer hover:scale-110"} w-24 h-24 sm:w-32 sm:h-32 lg:w-40 lg:h-40`,style:{transform:"translate(-50%, -50%)"},onClick:()=>(e=>{e>C||e>=Uv.length||(T(e),A(!0),P(0),L(""),q(""),B(!1))})(t),disabled:t>C,"aria-label":e.title,children:(0,as.jsxs)("div",{className:"relative w-full h-full rounded-2xl overflow-hidden transition-all duration-300 "+(k[t]?"shadow-2xl ring-4 ring-yellow-400 ring-opacity-50":t===C?"shadow-xl ring-4 ring-blue-400 ring-opacity-50":"shadow-lg"),children:[(0,as.jsx)("img",{src:e.image,alt:e.title,className:"w-full h-full object-contain transition-all duration-300 "+(t>C?"opacity-40 grayscale blur-sm":k[t]?"brightness-110 saturate-110":"hover:brightness-105 hover:saturate-105")}),k[t]&&(0,as.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-yellow-400/20 to-orange-500/20 pointer-events-none"}),(0,as.jsx)("div",{className:"absolute bottom-2 right-2 w-7 h-7 sm:w-8 sm:h-8 rounded-full flex items-center justify-center shadow-lg transition-all duration-300",children:k[t]?(0,as.jsx)("div",{className:"w-full h-full bg-gradient-to-br from-green-400 to-green-600 rounded-full flex items-center justify-center animate-pulse",children:(0,as.jsx)(Xs,{className:"text-white text-sm sm:text-lg"})}):t===C?(0,as.jsx)("div",{className:"w-full h-full bg-gradient-to-br from-blue-500 to-blue-700 rounded-full flex items-center justify-center animate-bounce",children:(0,as.jsx)("span",{className:"text-white text-sm sm:text-base font-bold",children:"\xd7"})}):(0,as.jsx)("div",{className:"w-full h-full bg-gray-400 rounded-full flex items-center justify-center",children:(0,as.jsx)(xa,{className:"text-white text-xs sm:text-sm"})})}),(0,as.jsx)("div",{className:"absolute bottom-0 left-0 right-0 p-1.5 sm:p-2 text-center transition-all duration-300 "+(k[t]?"bg-gradient-to-t from-yellow-500/90 to-yellow-400/70":t===C?"bg-gradient-to-t from-blue-500/90 to-blue-400/70":"bg-gradient-to-t from-gray-500/90 to-gray-400/70"),children:(0,as.jsx)("span",{className:"block font-bold text-white drop-shadow-sm text-[10px] sm:text-xs md:text-sm "+(k[t]?"text-yellow-900":t===C?"text-blue-900":"text-gray-900"),children:e.title})})]})},e.key))),(0,as.jsx)("div",{className:"absolute top-2 left-2 sm:top-4 sm:left-4 backdrop-blur-sm rounded-xl p-2 sm:p-3 shadow-lg border transition-colors duration-300 "+(te?"bg-gray-800/90 border-gray-700/20":"bg-white/90 border-white/20"),children:(0,as.jsxs)("div",{className:"flex flex-col gap-1.5 sm:gap-2 text-[10px] sm:text-xs",children:[(0,as.jsxs)("div",{className:"flex items-center gap-2",children:[(0,as.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),(0,as.jsx)("span",{className:"font-medium transition-colors duration-300 "+(te?"text-gray-300":"text-gray-700"),children:"Completed"})]}),(0,as.jsxs)("div",{className:"flex items-center gap-2",children:[(0,as.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full animate-bounce"}),(0,as.jsx)("span",{className:"font-medium transition-colors duration-300 "+(te?"text-gray-300":"text-gray-700"),children:"Current"})]}),(0,as.jsxs)("div",{className:"flex items-center gap-2",children:[(0,as.jsx)("div",{className:"w-3 h-3 bg-gray-400 rounded-full"}),(0,as.jsx)("span",{className:"font-medium transition-colors duration-300 "+(te?"text-gray-300":"text-gray-700"),children:"Locked"})]})]})})]})]})}),E&&null!==O&&Uv[O]&&Uv[O].steps&&Uv[O].steps[z]&&(0,as.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-in fade-in duration-300",children:(0,as.jsxs)("div",{className:"backdrop-blur-md rounded-3xl shadow-2xl border p-6 sm:p-8 max-w-3xl w-full max-h-[90vh] overflow-y-auto relative animate-in zoom-in-95 duration-300 transition-colors duration-300 "+(te?"bg-gray-800/95 border-gray-700/20":"bg-white/95 border-white/20"),children:[(0,as.jsx)("button",{className:"absolute top-4 right-4 w-10 h-10 rounded-full text-xl z-10 flex items-center justify-center transition-all duration-200 hover:scale-110 "+(te?"bg-gray-700 hover:bg-red-900 text-gray-300 hover:text-red-400":"bg-gray-100 hover:bg-red-100 text-gray-500 hover:text-red-600"),onClick:()=>A(!1),"aria-label":"Close modal",children:"\xd7"}),(0,as.jsxs)("div",{className:"mb-8",children:[(0,as.jsxs)("div",{className:"flex items-start gap-4 mb-4",children:[(0,as.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl flex items-center justify-center shadow-lg flex-shrink-0",children:n.createElement(Uv[O].icon,{className:"text-white text-2xl"})}),(0,as.jsxs)("div",{className:"flex-1",children:[(0,as.jsx)(po,{type:"h3",className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-2",children:Uv[O].title}),(0,as.jsx)("p",{className:"text-lg transition-colors duration-300 "+(te?"text-gray-300":"text-gray-700"),children:Uv[O].description})]})]}),0===z&&(0,as.jsx)("div",{className:"p-6 rounded-2xl border shadow-lg transition-colors duration-300 "+(te?"bg-gradient-to-r from-blue-900/30 to-purple-900/30 border-blue-700/50":"bg-gradient-to-r from-blue-50 to-purple-50 border-blue-200"),children:(0,as.jsxs)("div",{className:"flex items-start gap-3",children:[(0,as.jsx)("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0 mt-1",children:(0,as.jsx)("span",{className:"text-white text-sm",children:"\ud83d\udcd6"})}),(0,as.jsxs)("div",{children:[(0,as.jsx)("h4",{className:"font-semibold mb-2 transition-colors duration-300 "+(te?"text-blue-300":"text-blue-800"),children:"Story Introduction"}),(0,as.jsx)("p",{className:"italic leading-relaxed transition-colors duration-300 "+(te?"text-blue-200":"text-blue-700"),children:Uv[O].storyIntro})]})]})})]}),(0,as.jsxs)("div",{className:"mb-8",children:[(0,as.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,as.jsxs)("div",{className:"flex items-center gap-2",children:[(0,as.jsx)("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center shadow-lg "+("quiz"===(null===(e=Uv[O].steps[z])||void 0===e?void 0:e.type)?"bg-gradient-to-br from-yellow-400 to-orange-500":"challenge"===(null===(t=Uv[O].steps[z])||void 0===t?void 0:t.type)?"bg-gradient-to-br from-purple-400 to-pink-500":"lesson"===(null===(r=Uv[O].steps[z])||void 0===r?void 0:r.type)?"bg-gradient-to-br from-blue-400 to-indigo-500":"bg-gradient-to-br from-gray-400 to-gray-500"),children:(0,as.jsx)("span",{className:"text-white text-sm font-bold",children:"quiz"===(null===(s=Uv[O].steps[z])||void 0===s?void 0:s.type)?"\u2753":"challenge"===(null===(a=Uv[O].steps[z])||void 0===a?void 0:a.type)?"\u26a1":"lesson"===(null===(o=Uv[O].steps[z])||void 0===o?void 0:o.type)?"\ud83d\udcda":"story"===(null===(i=Uv[O].steps[z])||void 0===i?void 0:i.type)?"\ud83d\udcd6":"explanation"===(null===(l=Uv[O].steps[z])||void 0===l?void 0:l.type)?"\ud83d\udca1":"trivia"===(null===(c=Uv[O].steps[z])||void 0===c?void 0:c.type)?"\ud83c\udfaf":"celebration"===(null===(d=Uv[O].steps[z])||void 0===d?void 0:d.type)?"\ud83c\udf89":"\ud83d\udcc4"})}),(0,as.jsx)("span",{className:"px-4 py-2 rounded-full text-sm font-bold uppercase tracking-wide "+("quiz"===(null===(u=Uv[O].steps[z])||void 0===u?void 0:u.type)?"bg-yellow-100 text-yellow-800":"challenge"===(null===(h=Uv[O].steps[z])||void 0===h?void 0:h.type)?"bg-purple-100 text-purple-800":"lesson"===(null===(m=Uv[O].steps[z])||void 0===m?void 0:m.type)?"bg-blue-100 text-blue-800":"story"===(null===(f=Uv[O].steps[z])||void 0===f?void 0:f.type)?"bg-green-100 text-green-800":"explanation"===(null===(p=Uv[O].steps[z])||void 0===p?void 0:p.type)?"bg-indigo-100 text-indigo-800":"trivia"===(null===(g=Uv[O].steps[z])||void 0===g?void 0:g.type)?"bg-orange-100 text-orange-800":"celebration"===(null===(x=Uv[O].steps[z])||void 0===x?void 0:x.type)?"bg-pink-100 text-pink-800":"bg-gray-100 text-gray-800"),children:(null===(b=Uv[O].steps[z])||void 0===b?void 0:b.type)||"Unknown"})]}),(null===(y=Uv[O].steps[z])||void 0===y?void 0:y.title)&&(0,as.jsx)("span",{className:"text-xl font-bold transition-colors duration-300 "+(te?"text-white":"text-gray-800"),children:Uv[O].steps[z].title})]}),"quiz"===Uv[O].steps[z].type?(0,as.jsxs)("div",{className:"p-6 rounded-2xl border-2 shadow-lg transition-colors duration-300 "+(te?"bg-gradient-to-br from-yellow-900/30 to-orange-900/30 border-yellow-700/50":"bg-gradient-to-br from-yellow-50 to-orange-50 border-yellow-200"),children:[(0,as.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,as.jsx)("div",{className:"w-8 h-8 bg-yellow-500 rounded-full flex items-center justify-center",children:(0,as.jsx)("span",{className:"text-white text-sm",children:"\u2753"})}),(0,as.jsx)("h4",{className:"text-lg font-bold transition-colors duration-300 "+(te?"text-yellow-300":"text-yellow-800"),children:"Quiz Time!"})]}),(0,as.jsxs)("form",{onSubmit:se,className:"flex flex-col gap-4",children:[(0,as.jsx)("div",{className:"p-4 rounded-xl border transition-colors duration-300 "+(te?"bg-gray-700/70 border-yellow-700/50":"bg-white/70 border-yellow-200"),children:(0,as.jsx)("p",{className:"font-semibold text-center text-lg transition-colors duration-300 "+(te?"text-gray-100":"text-gray-800"),children:Uv[O].steps[z].content.question})}),(0,as.jsx)("div",{className:"relative",children:(0,as.jsx)("input",{className:"w-full border-2 rounded-xl px-6 py-4 text-xl text-center focus:outline-none focus:ring-4 transition-all duration-200 "+(te?"border-yellow-600 focus:ring-yellow-500/30 focus:border-yellow-500 bg-gray-700 text-white placeholder-gray-400":"border-yellow-400 focus:ring-yellow-300 focus:border-yellow-500 bg-white/80 text-gray-900 placeholder-gray-500"),value:I,onChange:e=>L(e.target.value),placeholder:"Type your answer here...",autoFocus:!0})}),(0,as.jsx)(bs,{size:"lg",variant:"primary",type:"submit",className:"w-full bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600 text-white font-bold py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-105",children:"Check Answer"}),M&&(0,as.jsxs)("div",{className:"p-4 rounded-xl border-2 shadow-lg transition-all duration-300 "+("Correct! \ud83c\udf89"===M?te?"bg-gradient-to-br from-green-900/50 to-emerald-900/50 border-green-700/50 text-green-300":"bg-gradient-to-br from-green-100 to-emerald-100 border-green-300 text-green-800":te?"bg-gradient-to-br from-red-900/50 to-pink-900/50 border-red-700/50 text-red-300":"bg-gradient-to-br from-red-100 to-pink-100 border-red-300 text-red-800"),children:[(0,as.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,as.jsx)("span",{className:"text-2xl",children:"Correct! \ud83c\udf89"===M?"\ud83c\udf89":"\ud83d\ude05"}),(0,as.jsx)("span",{className:"font-bold text-lg",children:M})]}),"Correct! \ud83c\udf89"===M&&Uv[O].steps[z].content.explanation&&(0,as.jsx)("p",{className:"text-sm p-2 rounded-lg transition-colors duration-300 "+(te?"bg-gray-700/50 text-gray-300":"bg-white/50 text-gray-700"),children:Uv[O].steps[z].content.explanation})]})]})]}):"challenge"===Uv[O].steps[z].type?(0,as.jsxs)("div",{className:"p-6 rounded-2xl border-2 shadow-lg transition-colors duration-300 "+(te?"bg-gradient-to-br from-purple-900/30 to-pink-900/30 border-purple-700/50":"bg-gradient-to-br from-purple-50 to-pink-50 border-purple-200"),children:[(0,as.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,as.jsx)("div",{className:"w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center",children:(0,as.jsx)("span",{className:"text-white text-sm",children:"\u26a1"})}),(0,as.jsx)("h4",{className:"text-lg font-bold transition-colors duration-300 "+(te?"text-purple-300":"text-purple-800"),children:"Challenge Time!"})]}),(0,as.jsx)("div",{className:"p-4 rounded-xl border mb-4 transition-colors duration-300 "+(te?"bg-gray-700/70 border-purple-700/50":"bg-white/70 border-purple-200"),children:(0,as.jsx)("p",{className:"font-medium text-lg transition-colors duration-300 "+(te?"text-gray-100":"text-gray-800"),children:Uv[O].steps[z].content})}),(0,as.jsxs)("form",{onSubmit:se,className:"flex flex-col gap-4",children:[(0,as.jsx)("div",{className:"relative",children:(0,as.jsx)("input",{className:"w-full border-2 rounded-xl px-6 py-4 text-xl text-center focus:outline-none focus:ring-4 transition-all duration-200 "+(te?"border-purple-600 focus:ring-purple-500/30 focus:border-purple-500 bg-gray-700 text-white placeholder-gray-400":"border-purple-400 focus:ring-purple-300 focus:border-purple-500 bg-white/80 text-gray-900 placeholder-gray-500"),value:I,onChange:e=>L(e.target.value),placeholder:"Type your answer here...",autoFocus:!0})}),(0,as.jsx)(bs,{size:"lg",variant:"primary",type:"submit",className:"w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-bold py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-105",children:"Submit Challenge"}),M&&(0,as.jsxs)("div",{className:"p-4 rounded-xl border-2 shadow-lg transition-all duration-300 "+("Correct! \ud83c\udf89"===M?te?"bg-gradient-to-br from-green-900/50 to-emerald-900/50 border-green-700/50 text-green-300":"bg-gradient-to-br from-green-100 to-emerald-100 border-green-300 text-green-800":te?"bg-gradient-to-br from-red-900/50 to-pink-900/50 border-red-700/50 text-red-300":"bg-gradient-to-br from-red-100 to-pink-100 border-red-300 text-red-800"),children:[(0,as.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,as.jsx)("span",{className:"text-2xl",children:"Correct! \ud83c\udf89"===M?"\ud83c\udf89":"\ud83d\ude05"}),(0,as.jsx)("span",{className:"font-bold text-lg",children:M})]}),"Correct! \ud83c\udf89"===M&&Uv[O].steps[z].explanation&&(0,as.jsx)("p",{className:"text-sm p-2 rounded-lg transition-colors duration-300 "+(te?"bg-gray-700/50 text-gray-300":"bg-white/50 text-gray-700"),children:Uv[O].steps[z].explanation})]})]})]}):(0,as.jsx)("div",{className:"p-6 rounded-2xl border-2 shadow-lg transition-colors duration-300 "+(te?"bg-gradient-to-br from-blue-900/30 to-indigo-900/30 border-blue-700/50":"bg-gradient-to-br from-blue-50 to-indigo-50 border-blue-200"),children:(0,as.jsxs)("div",{className:"p-6 rounded-xl border transition-colors duration-300 "+(te?"bg-gray-700/80 border-blue-700/30":"bg-white/80 border-blue-100"),children:[(0,as.jsx)("p",{className:"leading-relaxed mb-6 text-lg transition-colors duration-300 "+(te?"text-gray-100":"text-gray-800"),children:Uv[O].steps[z].content}),Uv[O].steps[z].examples&&(0,as.jsxs)("div",{className:"p-5 rounded-xl mb-6 border transition-colors duration-300 "+(te?"bg-gradient-to-r from-blue-900/50 to-indigo-900/50 border-blue-700/50":"bg-gradient-to-r from-blue-100 to-indigo-100 border-blue-200"),children:[(0,as.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,as.jsx)("div",{className:"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center",children:(0,as.jsx)("span",{className:"text-white text-xs",children:"\ud83d\udca1"})}),(0,as.jsx)("h4",{className:"font-bold text-lg transition-colors duration-300 "+(te?"text-blue-300":"text-blue-800"),children:"Examples:"})]}),(0,as.jsx)("div",{className:"grid gap-2",children:Uv[O].steps[z].examples.map(((e,t)=>(0,as.jsx)("div",{className:"p-3 rounded-lg border transition-colors duration-300 "+(te?"bg-gray-700/70 border-blue-700/50":"bg-white/70 border-blue-200"),children:(0,as.jsx)("span",{className:"font-mono text-lg font-semibold transition-colors duration-300 "+(te?"text-blue-300":"text-blue-700"),children:e})},t)))})]}),Uv[O].steps[z].visualExample&&(0,as.jsxs)("div",{className:"p-5 rounded-xl border transition-colors duration-300 "+(te?"bg-gradient-to-r from-green-900/50 to-emerald-900/50 border-green-700/50":"bg-gradient-to-r from-green-100 to-emerald-100 border-green-200"),children:[(0,as.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,as.jsx)("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center",children:(0,as.jsx)("span",{className:"text-white text-xs",children:"\ud83d\udc41\ufe0f"})}),(0,as.jsx)("h4",{className:"font-bold text-lg transition-colors duration-300 "+(te?"text-green-300":"text-green-800"),children:"Visual Example:"})]}),(0,as.jsx)("div",{className:"p-4 rounded-lg border transition-colors duration-300 "+(te?"bg-gray-700/70 border-green-700/50":"bg-white/70 border-green-200"),children:(0,as.jsx)("p",{className:"font-mono text-sm whitespace-pre-line transition-colors duration-300 "+(te?"text-green-300":"text-green-700"),children:Uv[O].steps[z].visualExample})})]})]})})]}),(0,as.jsxs)("div",{className:"rounded-2xl p-6 border transition-colors duration-300 "+(te?"bg-gray-700/50 border-gray-600":"bg-gray-50 border-gray-200"),children:[(0,as.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[(0,as.jsxs)("div",{className:"flex items-center gap-3",children:[(0,as.jsxs)("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white px-4 py-2 rounded-full shadow-lg",children:[(0,as.jsx)("span",{className:"font-bold text-lg",children:z+1}),(0,as.jsxs)("span",{className:"text-sm opacity-90",children:["/",(null===(v=Uv[O])||void 0===v||null===(w=v.steps)||void 0===w?void 0:w.length)||0]})]}),(0,as.jsx)("span",{className:"font-medium transition-colors duration-300 "+(te?"text-gray-300":"text-gray-700"),children:"Step Progress"})]}),(0,as.jsxs)("div",{className:"flex gap-3",children:[z>0&&(0,as.jsx)(bs,{size:"md",variant:"secondary",onClick:()=>P(z-1),className:"bg-white border-2 border-gray-300 hover:border-blue-500 text-gray-700 hover:text-blue-700 font-semibold px-6 py-2 rounded-xl shadow-md hover:shadow-lg transition-all duration-200 transform hover:scale-105",children:"\u2190 Previous"}),Uv[O].steps[z]&&"quiz"!==Uv[O].steps[z].type&&"challenge"!==Uv[O].steps[z].type&&z<Uv[O].steps.length-1&&(0,as.jsx)(bs,{size:"md",variant:"primary",onClick:()=>P(z+1),className:"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white font-bold px-6 py-2 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-105",children:"Next \u2192"}),Uv[O].steps[z]&&"quiz"!==Uv[O].steps[z].type&&"challenge"!==Uv[O].steps[z].type&&z===Uv[O].steps.length-1&&!k[O]&&O===C&&(0,as.jsx)(bs,{size:"md",variant:"primary",onClick:()=>ne(O),className:"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-bold px-6 py-2 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-105",children:"\ud83c\udfc6 Complete Lesson"})]})]}),(0,as.jsx)("div",{className:"mt-4",children:(0,as.jsx)("div",{className:"w-full rounded-full h-2 overflow-hidden transition-colors duration-300 "+(te?"bg-gray-600":"bg-gray-200"),children:(0,as.jsx)("div",{className:"h-full bg-gradient-to-r from-blue-500 to-purple-600 rounded-full transition-all duration-500 ease-out",style:{width:(z+1)/((null===(j=Uv[O])||void 0===j||null===(N=j.steps)||void 0===N?void 0:N.length)||1)*100+"%"}})})})]}),k[O]&&O<5&&(0,as.jsx)("div",{className:"mt-6 p-6 rounded-2xl border-2 shadow-lg transition-colors duration-300 "+(te?"bg-gradient-to-r from-yellow-900/30 to-orange-900/30 border-yellow-700/50":"bg-gradient-to-r from-yellow-50 to-orange-50 border-yellow-200"),children:(0,as.jsxs)("div",{className:"flex items-center gap-4",children:[(0,as.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full flex items-center justify-center shadow-lg animate-pulse",children:(0,as.jsx)(va,{className:"text-white text-2xl"})}),(0,as.jsxs)("div",{children:[(0,as.jsx)("h4",{className:"text-xl font-bold mb-1 transition-colors duration-300 "+(te?"text-yellow-300":"text-yellow-800"),children:"Badge Earned!"}),(0,as.jsx)("span",{className:"font-semibold text-lg transition-colors duration-300 "+(te?"text-yellow-200":"text-yellow-700"),children:Uv[O].badge})]})]})}),4===O&&k.every(Boolean)&&(0,as.jsx)("div",{className:"mt-8 p-8 rounded-3xl border-4 shadow-2xl transition-colors duration-300 "+(te?"bg-gradient-to-br from-yellow-900/30 via-orange-900/30 to-red-900/30 border-yellow-600":"bg-gradient-to-br from-yellow-50 via-orange-50 to-red-50 border-yellow-300"),children:(0,as.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,as.jsx)("div",{className:"text-8xl mb-4 animate-bounce",children:"\ud83c\udfc6"}),(0,as.jsx)("h3",{className:"text-3xl font-bold bg-gradient-to-r from-yellow-600 to-orange-600 bg-clip-text text-transparent mb-3",children:"You Found the Treasure!"}),(0,as.jsx)("p",{className:"text-xl font-medium leading-relaxed transition-colors duration-300 "+(te?"text-yellow-200":"text-yellow-700"),children:"Congratulations! You've mastered all properties of multiplication!"}),(0,as.jsx)("div",{className:"mt-4 p-4 rounded-xl border transition-colors duration-300 "+(te?"bg-gray-700/70 border-yellow-700/50":"bg-white/70 border-yellow-200"),children:(0,as.jsx)("p",{className:"font-semibold transition-colors duration-300 "+(te?"text-gray-200":"text-gray-700"),children:"You are now a true Multiplication Master! \ud83c\udf89"})})]})})]})})]})})})},Vv=e=>{let{children:t}=e;const{currentUser:r,isAdmin:n,isTeacher:s,isStudent:a}=is();return r?n()?(0,as.jsx)(ge,{to:"/admin/dashboard"}):s()?(0,as.jsx)(ge,{to:"/teacher/dashboard"}):a()?(0,as.jsx)(ge,{to:"/student/dashboard"}):(0,as.jsx)(ge,{to:"/"}):t},Gv=()=>{const{currentUser:e,isAdmin:t,isTeacher:r,isStudent:n}=is();return e?t()?(0,as.jsx)(ge,{to:"/admin/dashboard"}):r()?(0,as.jsx)(ge,{to:"/teacher/dashboard"}):n()?(0,as.jsx)(ge,{to:"/student/dashboard"}):(0,as.jsx)(cc,{}):(0,as.jsx)(cc,{})},Kv=e=>{let{children:t,allowedRoles:r}=e;const{currentUser:n,isTeacher:s,isStudent:a,isAdmin:o}=is();return n?r.includes("admin")&&!o()?s()?(0,as.jsx)(ge,{to:"/teacher/classrooms"}):a()?(0,as.jsx)(ge,{to:"/student/classrooms"}):(0,as.jsx)(ge,{to:"/"}):r.includes("teacher")&&!s()?o()?(0,as.jsx)(ge,{to:"/admin/users"}):a()?(0,as.jsx)(ge,{to:"/student/classrooms"}):(0,as.jsx)(ge,{to:"/"}):r.includes("student")&&!a()?o()?(0,as.jsx)(ge,{to:"/admin/users"}):s()?(0,as.jsx)(ge,{to:"/teacher/classrooms"}):(0,as.jsx)(ge,{to:"/"}):t:(0,as.jsx)(ge,{to:"/login"})},Yv=()=>(0,as.jsxs)(as.Fragment,{children:[(0,as.jsx)(no,{}),(0,as.jsx)(uo,{})]}),Zv=()=>{const{currentUser:e}=is();return e?null:(0,as.jsx)(Fv,{})};const Jv=function(){return(0,as.jsx)(mo,{children:(0,as.jsx)(ls,{children:(0,as.jsx)(gx,{children:(0,as.jsx)(yx,{children:(0,as.jsx)(us,{children:(0,as.jsx)(Ee,{children:(0,as.jsxs)("div",{className:"flex flex-col min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-200",children:[(0,as.jsx)(Zv,{}),(0,as.jsx)(Ot,{position:"top-right",toastOptions:{duration:3e3,style:{background:"#ffffff",color:"#333333"},success:{iconTheme:{primary:"#4caf50",secondary:"#ffffff"}},error:{iconTheme:{primary:"#f44336",secondary:"#ffffff"}}}}),(0,as.jsxs)(ve,{children:[(0,as.jsx)(be,{path:"/auth/verify",element:(0,as.jsx)(wx,{})}),(0,as.jsxs)(be,{element:(0,as.jsx)(Yv,{}),children:[(0,as.jsx)(be,{path:"/",element:(0,as.jsx)(Gv,{})}),(0,as.jsx)(be,{path:"/about",element:(0,as.jsx)(dc,{})}),(0,as.jsx)(be,{path:"/login",element:(0,as.jsx)(Vv,{children:(0,as.jsx)(uc,{})})}),(0,as.jsx)(be,{path:"/register",element:(0,as.jsx)(Vv,{children:(0,as.jsx)(hc,{})})}),(0,as.jsx)(be,{path:"/forgot-password",element:(0,as.jsx)(Vv,{children:(0,as.jsx)(mc,{})})}),(0,as.jsx)(be,{path:"/reset-password",element:(0,as.jsx)(Vv,{children:(0,as.jsx)(fc,{})})}),(0,as.jsx)(be,{path:"/users/verify-email",element:(0,as.jsx)(vx,{})}),(0,as.jsx)(be,{path:"/dashboard",element:(0,as.jsx)(Kv,{allowedRoles:["admin","teacher","student"],children:(0,as.jsx)(Rv,{})})}),(0,as.jsx)(be,{path:"/student/dashboard",element:(0,as.jsx)(Kv,{allowedRoles:["student"],children:(0,as.jsx)(Rv,{})})}),(0,as.jsx)(be,{path:"/teacher/dashboard",element:(0,as.jsx)(Kv,{allowedRoles:["teacher"],children:(0,as.jsx)(Rv,{})})}),(0,as.jsx)(be,{path:"/admin/dashboard",element:(0,as.jsx)(Kv,{allowedRoles:["admin"],children:(0,as.jsx)(Rv,{})})}),(0,as.jsx)(be,{path:"/student",element:(0,as.jsx)(ge,{to:"/student/classrooms"})}),(0,as.jsx)(be,{path:"/student/games/:gameId",element:(0,as.jsx)(Kv,{allowedRoles:["student"],children:(0,as.jsx)(Ix,{})})}),(0,as.jsx)(be,{path:"/student/profile",element:(0,as.jsx)(Kv,{allowedRoles:["student"],children:(0,as.jsx)(fx,{})})}),(0,as.jsx)(be,{path:"/student/classrooms",element:(0,as.jsx)(Kv,{allowedRoles:["student"],children:(0,as.jsx)(mx,{})})}),(0,as.jsx)(be,{path:"/student/join-classroom",element:(0,as.jsx)(Kv,{allowedRoles:["student"],children:(0,as.jsx)(gc,{})})}),(0,as.jsx)(be,{path:"/student/classrooms/:classroomId",element:(0,as.jsx)(Kv,{allowedRoles:["student"],children:(0,as.jsx)(dx,{})})}),(0,as.jsx)(be,{path:"/student/classrooms/:classroomId/lessons/:lessonId",element:(0,as.jsx)(Kv,{allowedRoles:["student"],children:(0,as.jsx)(dx,{})})}),(0,as.jsx)(be,{path:"/student/quizzes/:quizId/attempt/:attemptId",element:(0,as.jsx)(Kv,{allowedRoles:["student"],children:(0,as.jsx)(Ev,{})})}),(0,as.jsx)(be,{path:"/student/help",element:(0,as.jsx)(Kv,{allowedRoles:["student"],children:(0,as.jsx)(Bv,{})})}),(0,as.jsx)(be,{path:"/student/learning-multiplication",element:(0,as.jsx)(Kv,{allowedRoles:["student"],children:(0,as.jsx)(Qv,{})})}),(0,as.jsx)(be,{path:"/teacher",element:(0,as.jsx)(ge,{to:"/teacher/classrooms"})}),(0,as.jsx)(be,{path:"/teacher/profile",element:(0,as.jsx)(Kv,{allowedRoles:["teacher"],children:(0,as.jsx)(fx,{})})}),(0,as.jsx)(be,{path:"/teacher/classrooms",element:(0,as.jsx)(Kv,{allowedRoles:["teacher"],children:(0,as.jsx)(ux,{})})}),(0,as.jsx)(be,{path:"/teacher/add-classroom",element:(0,as.jsx)(Kv,{allowedRoles:["teacher"],children:(0,as.jsx)(xc,{})})}),(0,as.jsx)(be,{path:"/teacher/games/:gameId/analytics",element:(0,as.jsx)(Kv,{allowedRoles:["teacher"],children:(0,as.jsx)(Mx,{})})}),(0,as.jsx)(be,{path:"/teacher/classrooms/:classroomId",element:(0,as.jsx)(Kv,{allowedRoles:["teacher"],children:(0,as.jsx)(Xg,{})})}),(0,as.jsx)(be,{path:"/teacher/classrooms/:classroomId/lessons/:lessonId",element:(0,as.jsx)(Kv,{allowedRoles:["teacher"],children:(0,as.jsx)(Xg,{})})}),(0,as.jsx)(be,{path:"/teacher/help",element:(0,as.jsx)(Kv,{allowedRoles:["teacher"],children:(0,as.jsx)(Bv,{})})}),(0,as.jsx)(be,{path:"/game",element:(0,as.jsx)(ge,{to:"/student/game"})}),(0,as.jsx)(be,{path:"/profile",element:(0,as.jsx)(ge,{to:"/student/profile"})}),(0,as.jsx)(be,{path:"/classrooms",element:(0,as.jsx)(ge,{to:"/teacher/classrooms"})}),(0,as.jsx)(be,{path:"/join-classroom",element:(0,as.jsx)(ge,{to:"/student/join-classroom"})}),(0,as.jsx)(be,{path:"/add-classroom",element:(0,as.jsx)(ge,{to:"/teacher/add-classroom"})}),(0,as.jsx)(be,{path:"/classrooms/:classroomId",element:(0,as.jsx)(ge,{to:"/student/classrooms/:classroomId"})}),(0,as.jsx)(be,{path:"/classrooms/:classroomId/lessons/:lessonId",element:(0,as.jsx)(ge,{to:"/student/classrooms/:classroomId/lessons/:lessonId"})}),(0,as.jsx)(be,{path:"/reports",element:(0,as.jsx)(ge,{to:"/teacher/reports"})}),(0,as.jsx)(be,{path:"/student-progress",element:(0,as.jsx)(ge,{to:"/teacher/student-progress"})}),(0,as.jsx)(be,{path:"/admin/profile",element:(0,as.jsx)(Kv,{allowedRoles:["admin"],children:(0,as.jsx)(fx,{})})}),(0,as.jsx)(be,{path:"/admin/users",element:(0,as.jsx)(Kv,{allowedRoles:["admin"],children:(0,as.jsx)(Ov,{})})}),(0,as.jsx)(be,{path:"/admin/users/teachers",element:(0,as.jsx)(Kv,{allowedRoles:["admin"],children:(0,as.jsx)(Nx,{})})}),(0,as.jsx)(be,{path:"/admin/users/students",element:(0,as.jsx)(Kv,{allowedRoles:["admin"],children:(0,as.jsx)(kx,{})})}),(0,as.jsx)(be,{path:"/admin/classrooms",element:(0,as.jsx)(Kv,{allowedRoles:["admin"],children:(0,as.jsx)(jx,{})})}),(0,as.jsx)(be,{path:"/admin/controls",element:(0,as.jsx)(Kv,{allowedRoles:["admin"],children:(0,as.jsx)(pc,{})})}),(0,as.jsx)(be,{path:"/admin/announcements",element:(0,as.jsx)(Kv,{allowedRoles:["admin"],children:(0,as.jsx)(Av,{})})}),(0,as.jsx)(be,{path:"/admin/feedback",element:(0,as.jsx)(Kv,{allowedRoles:["admin"],children:(0,as.jsx)(Tv,{})})}),(0,as.jsx)(be,{path:"/admin/feedback/:ticketNumber",element:(0,as.jsx)(Kv,{allowedRoles:["admin"],children:(0,as.jsx)(Pv,{})})}),(0,as.jsx)(be,{path:"/admin/help",element:(0,as.jsx)(Kv,{allowedRoles:["admin"],children:(0,as.jsx)(Bv,{})})})]}),(0,as.jsx)(be,{path:"/classroom/:classroomId/quizzes",element:(0,as.jsx)(Eb,{})}),(0,as.jsx)(be,{path:"/quiz/:quizId",element:(0,as.jsx)(Eb,{})}),(0,as.jsx)(be,{path:"/classroom/:classroomId/reports",element:(0,as.jsx)(wv,{})}),(0,as.jsx)(be,{path:"*",element:(0,as.jsx)(ge,{to:"/"})})]})]})})})})})})})};a.createRoot(document.getElementById("root")).render((0,as.jsx)(Ja,{children:(0,as.jsx)(Jv,{})}))})()})();
//# sourceMappingURL=main.06628730.js.map